<!DOCTYPE html>
<html>
<head>
    <title>Quick Fix</title>
    <style>
        body { font-family: sans-serif; background: #0f0f23; color: #fff; padding: 30px; text-align: center; }
        .container { max-width: 500px; margin: 0 auto; }
        button {
            width: 100%;
            padding: 20px;
            font-size: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            margin: 10px 0;
        }
        button:hover { opacity: 0.9; }
        .status {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 13px;
            text-align: left;
        }
        .success { color: #4ade80; }
        .info { color: #60a5fa; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ”§ Fix Renata Thinking Text</h1>
        <p class="info">This only clears old scanner code - all your passwords and settings stay!</p>

        <button onclick="quickFix()">âœ… Fix Now</button>

        <div class="status" id="status"></div>
    </div>

    <script>
        function quickFix() {
            const status = document.getElementById('status');
            let results = [];

            // Only remove the specific code-related keys
            const codeKeys = [
                'formattedScannerCode',
                'renataTransformedCode',
                'twoStageScannerCode',
                'cehub_saved_scanners'
            ];

            let removedCount = 0;
            codeKeys.forEach(key => {
                if (localStorage.getItem(key)) {
                    localStorage.removeItem(key);
                    removedCount++;
                    results.push(`âœ… Removed ${key}`);
                }
            });

            // Count what's preserved
            const remainingKeys = Object.keys(localStorage);
            results.push(`\nâœ… Preserved ${remainingKeys.length} items:`);

            // Show some examples of what's preserved (not showing values for privacy)
            remainingKeys.slice(0, 5).forEach(key => {
                results.push(`   - ${key}`);
            });
            if (remainingKeys.length > 5) {
                results.push(`   ... and ${remainingKeys.length - 5} more`);
            }

            status.innerHTML = `<span class="success">${results.join('<br>')}</span>`;

            // Auto-redirect
            setTimeout(() => {
                window.location.href = 'http://localhost:5665/scan';
            }, 2000);
        }
    </script>
</body>
</html>
