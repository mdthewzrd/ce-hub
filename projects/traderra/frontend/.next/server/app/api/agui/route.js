/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/agui/route";
exports.ids = ["app/api/agui/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagui%2Froute&page=%2Fapi%2Fagui%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagui%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagui%2Froute&page=%2Fapi%2Fagui%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagui%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_michaeldurante_ai_dev_ce_hub_projects_traderra_frontend_src_app_api_agui_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/agui/route.ts */ \"(rsc)/./src/app/api/agui/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/agui/route\",\n        pathname: \"/api/agui\",\n        filename: \"route\",\n        bundlePath: \"app/api/agui/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/michaeldurante/ai dev/ce-hub/projects/traderra/frontend/src/app/api/agui/route.ts\",\n    nextConfigOutput,\n    userland: _Users_michaeldurante_ai_dev_ce_hub_projects_traderra_frontend_src_app_api_agui_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/agui/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZ3VpJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhZ3VpJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWd1aSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pY2hhZWxkdXJhbnRlJTJGYWklMjBkZXYlMkZjZS1odWIlMkZwcm9qZWN0cyUyRnRyYWRlcnJhJTJGZnJvbnRlbmQlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWljaGFlbGR1cmFudGUlMkZhaSUyMGRldiUyRmNlLWh1YiUyRnByb2plY3RzJTJGdHJhZGVycmElMkZmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUNtRDtBQUNySDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFB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Q0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL3NyYy9hcHAvYXBpL2FndWkvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FndWkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZ3VpXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZ3VpL3JvdXRlXCJcbiAgICB9LFxuICAgIGRpc3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9ESVNUX0RJUiB8fCAnJyxcbiAgICByZWxhdGl2ZVByb2plY3REaXI6IHByb2Nlc3MuZW52Ll9fTkVYVF9SRUxBVElWRV9QUk9KRUNUX0RJUiB8fCAnJyxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL3NyYy9hcHAvYXBpL2FndWkvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9hZ3VpL3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagui%2Froute&page=%2Fapi%2Fagui%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagui%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/agui/route.ts":
/*!***********************************!*\
  !*** ./src/app/api/agui/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n/**\n * Load site manifest for dynamic AG-UI knowledge\n */ function loadSiteManifest() {\n    try {\n        const manifestPath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), 'src', 'lib', 'ag-ui', 'site-manifest.json');\n        const manifestContent = (0,fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync)(manifestPath, 'utf-8');\n        return JSON.parse(manifestContent);\n    } catch (error) {\n        console.error('Failed to load site manifest:', error);\n        return null;\n    }\n}\n/**\n * Load site prompt for dynamic AG-UI knowledge\n */ function loadSitePrompt() {\n    try {\n        const promptPath = (0,path__WEBPACK_IMPORTED_MODULE_2__.join)(process.cwd(), 'src', 'lib', 'ag-ui', 'site-prompt.txt');\n        return (0,fs__WEBPACK_IMPORTED_MODULE_1__.readFileSync)(promptPath, 'utf-8');\n    } catch (error) {\n        console.error('Failed to load site prompt:', error);\n        return '';\n    }\n}\n/**\n * Build dynamic tools from site manifest\n */ function buildDynamicTools(manifest) {\n    const pageRoutes = manifest.pages.map((p)=>p.route.replace(/^\\//, '')).filter((r)=>r && !r.includes('[') && !r.includes('...'));\n    return [\n        {\n            type: 'function',\n            function: {\n                name: 'navigateToPage',\n                description: `Navigate to a specific page. Available pages: ${pageRoutes.slice(0, 15).join(', ')}${pageRoutes.length > 15 ? '...' : ''}\n\n** CRITICAL: CONTEXT-FIRST NAVIGATION**\nNEVER navigate based on keyword matching alone. Always analyze USER INTENT from the full sentence context.\n\n**Context Rules:**\n- \"stats IN the dashboard\"  Navigate to /dashboard (location = dashboard)\n- \"go TO stats page\"  Navigate to /statistics (action = go to stats)\n- Prepositions reveal intent: \"in\", \"on\", \"at\" = location | \"to\", \"for\" = destination\n- Look for PRIMARY action verb: \"go to\", \"take me to\", \"show me\" = what they want\n\n**TOP NAV BAR ITEMS** (exact names users see):\nDashboard, Trades, Stats, Summary, Calendar, Journal, Settings, Renata (AI button)\n\n** IMPORTANT: DASHBOARD vs LANDING PAGE**\nThere are TWO different pages:\n- \"/\" = Landing/marketing page (shown to new users)\n- \"/dashboard\" = Actual dashboard (the main app interface)\n\n**USER ALIASES & VARIATIONS:**\n- \"dashboard\", \"home\", \"main\", \"the dash\"  \"dashboard\" (the app, NOT landing)\n- \"landing page\", \"marketing page\", \"home page\"  \"\" (only if explicitly requesting landing page)\n- \"trades\", \"trade history\", \"my trades\", \"trading\", \"positions\", \"trade log\"  trades\n- \"journal\", \"trading journal\", \"trade journal\", \"notes\", \"diary\", \"log\"  journal\n- \"statistics\", \"stats\", \"analytics\", \"performance\", \"metrics\", \"the numbers\"  statistics\n- \"summary\", \"daily summary\", \"recap\", \"daily recap\"  daily-summary\n- \"calendar\", \"trading calendar\", \"market calendar\", \"cal\"  calendar\n- \"settings\", \"preferences\", \"config\", \"account settings\", \"setup\"  settings\n- \"analytics\"  analytics (separate from statistics)\n\n**COMMON USER PHRASINGS:**\nUsers might say \"take me to\", \"go to\", \"navigate to\", \"open\", \"show me\", \"I want to see\", \"let's check\", etc.`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        page: {\n                            type: 'string',\n                            enum: [\n                                '',\n                                ...pageRoutes\n                            ],\n                            description: `The page route to navigate to. Map user INTENT (not just keywords) to exact route:\n\n** CONTEXT EXAMPLES:**\n- \"stats in the dashboard\"  \"dashboard\" (the app, NOT statistics)\n- \"go to stats\"  \"statistics\" (actual navigation)\n- \"trades from last week\"  \"trades\"\n- \"settings for notifications\"  \"settings\"\n\n**PAGE MAPPINGS:**\n- Dashboard/home/main  \"dashboard\" (the app interface at /dashboard)\n- Landing page  \"\" (ONLY if explicitly requesting landing/marketing page)\n- Stats/statistics/analytics/performance  \"statistics\" (unless context says otherwise)\n- Trades/trading/positions  \"trades\"\n- Journal/notes/trade journal/diary  \"journal\"\n- Summary/daily summary/recap  \"daily-summary\"\n- Calendar/trading calendar  \"calendar\"\n- Settings/preferences/config  \"settings\"\n- Analytics (data analytics)  \"analytics\"\n\n**CRITICAL:** Use \"dashboard\" for the main app, NOT \"\". Use \"\" only for explicit landing page requests.`\n                        }\n                    },\n                    required: [\n                        'page'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setDisplayMode',\n                description: 'Set how values are displayed. Options: dollar (show $ amounts), r_multiple (show R-multiples), percentage (show % changes). Users might say \"in R\", \"in dollars\", \"show percentages\", \"switch to R mode\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        mode: {\n                            type: 'string',\n                            enum: [\n                                'dollar',\n                                'r_multiple',\n                                'percentage'\n                            ],\n                            description: 'Display mode'\n                        }\n                    },\n                    required: [\n                        'mode'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setViewMode',\n                description: 'Switch between table and chart views for data. Users might say \"show table\", \"show chart\", \"switch to table view\", \"display as chart\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        mode: {\n                            type: 'string',\n                            enum: [\n                                'table',\n                                'chart'\n                            ],\n                            description: 'View mode: table or chart'\n                        }\n                    },\n                    required: [\n                        'mode'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setSortField',\n                description: 'Change how results are sorted. Available fields: ticker (symbol), date, gapPercent (gap %), volume, score. Users might say \"sort by ticker\", \"order by date\", \"sort by gap percent\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        field: {\n                            type: 'string',\n                            enum: [\n                                'ticker',\n                                'date',\n                                'gapPercent',\n                                'volume',\n                                'score'\n                            ],\n                            description: 'Field to sort by'\n                        }\n                    },\n                    required: [\n                        'field'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setSortDirection',\n                description: 'Set sort direction - ascending (lowest to highest) or descending (highest to lowest). Users might say \"sort ascending\", \"descending order\", \"reverse the sort\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        direction: {\n                            type: 'string',\n                            enum: [\n                                'asc',\n                                'desc'\n                            ],\n                            description: 'Sort direction: asc (ascending) or desc (descending)'\n                        }\n                    },\n                    required: [\n                        'direction'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'toggleAISidebar',\n                description: 'Toggle the Renata AI sidebar open or closed. Users might say \"open chat\", \"close AI\", \"show Renata\", \"hide sidebar\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        open: {\n                            type: 'boolean',\n                            description: 'true to open sidebar, false to close it, undefined to toggle'\n                        }\n                    },\n                    required: []\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setDateRange',\n                description: `Set the date range for displayed data.\n\n**PRESET RANGES** (use these exact values):\n- today, yesterday, this week, last week, this month, last month, this year, last year, all\n\n**CUSTOM RANGES** (range: \"custom\" + startDate + endDate required):\nYou MUST convert user date expressions into YYYY-MM-DD format.\n\n**COMMON PATTERNS & CONVERSIONS:**\n\nMonth Names  Month Numbers:\nJan=01, Feb=02, Mar=03, Apr=04, May=05, Jun=06, Jul=07, Aug=08, Sep=09, Oct=10, Nov=11, Dec=12\n\n**Examples of user expressions  tool arguments:**\n- \"July 2025\"  {range: \"custom\", startDate: \"2025-07-01\", endDate: \"2025-07-31\"}\n- \"December 2025\"  {range: \"custom\", startDate: \"2025-12-01\", endDate: \"2025-12-31\"}\n- \"July to December 2025\"  {range: \"custom\", startDate: \"2025-07-01\", endDate: \"2025-12-31\"}\n- \"January to March 2024\"  {range: \"custom\", startDate: \"2024-01-01\", endDate: \"2024-03-31\"}\n- \"Q2 2025\"  {range: \"custom\", startDate: \"2025-04-01\", endDate: \"2025-06-30\"}\n- \"last 3 months\"  Calculate from current date\n- \"from June 1st to July 15th\"  {range: \"custom\", startDate: \"2025-06-01\", endDate: \"2025-07-15\"}\n\n**Date Formatting Rules:**\n- ALWAYS use YYYY-MM-DD format (4-digit year, 2-digit month, 2-digit day)\n- For month ranges: startDate = 1st day, endDate = last day\n- When user says \"July to December 2025\": startDate = \"2025-07-01\", endDate = \"2025-12-31\"\n- When user says \"July 2025\": Use full month (2025-07-01 to 2025-07-31)\n\n**Important:** If user provides month names or relative dates, YOU must convert them to exact YYYY-MM-DD dates.`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        range: {\n                            type: 'string',\n                            enum: [\n                                'today',\n                                'yesterday',\n                                'this week',\n                                'last week',\n                                'this month',\n                                'last month',\n                                'this year',\n                                'last year',\n                                'all',\n                                'custom'\n                            ],\n                            description: 'Preset date range, or \"custom\" for custom date range'\n                        },\n                        startDate: {\n                            type: 'string',\n                            description: 'Start date in YYYY-MM-DD format (REQUIRED when range=\"custom\"). Example: \"2025-07-01\" for July 1st, 2025'\n                        },\n                        endDate: {\n                            type: 'string',\n                            description: 'End date in YYYY-MM-DD format (REQUIRED when range=\"custom\"). Example: \"2025-12-31\" for December 31st, 2025'\n                        }\n                    },\n                    required: [\n                        'range'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setStatsTab',\n                description: 'Switch between tabs on the Statistics page. Available tabs: overview (summary metrics and key statistics), analytics (detailed analysis and charts), performance (performance metrics and trading analytics). Users might say \"show analytics\", \"go to analytics tab\", \"switch to overview\", \"show performance tab\", etc.',\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        tab: {\n                            type: 'string',\n                            enum: [\n                                'overview',\n                                'analytics',\n                                'performance'\n                            ],\n                            description: 'Tab to switch to on the statistics page: overview (summary), analytics (detailed analysis), or performance (metrics)'\n                        }\n                    },\n                    required: [\n                        'tab'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'activateComponent',\n                description: `Activate any UI component on the current page. This is a generic tool that works with tabs, buttons, accordions, panels, cards, and other interactive elements.\n\n**COMPONENT IDENTIFICATION FORMAT:**\nUse the pattern: \\`page-area.component-name\\` or \\`page-name.component-type\\`\n\n**COMMON COMPONENTS BY PAGE:**\n\n**Statistics Page (/statistics):**\n- statistics.tabs.analytics - Analytics tab\n- statistics.tabs.overview - Overview tab\n- statistics.tabs.performance - Performance tab\n- statistics.filters - Filter panel\n- statistics.charts - Chart section\n- statistics.metrics - Metrics section\n\n**Trades Page (/trades):**\n- trades.filters - Filter panel\n- trades.table - Trades table\n- trades.new-trade-modal - New trade modal\n- trades.import-modal - Import modal\n\n**Dashboard (/dashboard):**\n- dashboard.stats - Stats section\n- dashboard.charts - Chart section\n- dashboard.summary - Daily summary card\n- dashboard.metrics - Additional metrics\n\n**Journal Page (/journal):**\n- journal.folder-tree - Folder tree\n- journal.editor - Journal editor\n- journal.entries - Entries list\n\n**Calendar Page (/calendar):**\n- calendar.view - Calendar view\n- calendar.events - Events section\n\n**ACTIONS:**\n- click - Click a button or link\n- expand - Expand an accordion or panel\n- collapse - Collapse an accordion or panel\n- open - Open a modal or dropdown\n- close - Close a modal or dropdown\n- select - Select an option\n- activate - Activate a tab or view\n- toggle - Toggle a switch or checkbox\n\n**EXAMPLES:**\n- \"switch to analytics tab\"  {component: \"statistics.tabs.analytics\", action: \"activate\"}\n- \"expand the filters\"  {component: \"trades.filters\", action: \"expand\"}\n- \"open the new trade modal\"  {component: \"trades.new-trade-modal\", action: \"open\"}\n- \"scroll to the chart section\"  Use scrollToElement instead\n\n**IMPORTANT:** Always identify the current page first, then use the appropriate component ID for that page.`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        component: {\n                            type: 'string',\n                            description: 'Component identifier in format: page.component (e.g., \"statistics.tabs.analytics\", \"trades.filters\", \"dashboard.charts\")'\n                        },\n                        action: {\n                            type: 'string',\n                            enum: [\n                                'click',\n                                'expand',\n                                'collapse',\n                                'open',\n                                'close',\n                                'select',\n                                'activate',\n                                'toggle'\n                            ],\n                            description: 'Action to perform on the component (defaults to \"click\")'\n                        },\n                        value: {\n                            type: 'string',\n                            description: 'Optional value to set (for selects, inputs, etc.)'\n                        }\n                    },\n                    required: [\n                        'component'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'scrollToElement',\n                description: `Scroll to any specific section or component on the current page.\n\n**COMMON SCROLL TARGETS BY PAGE:**\n\n**Statistics Page:**\n- statistics.metrics - Stats summary section\n- statistics.charts - Chart section\n- statistics.performance - Performance metrics\n- statistics.analytics - Analytics section\n\n**Trades Page:**\n- trades.table - Trades table\n- trades.summary - Trade summary\n\n**Dashboard:**\n- dashboard.summary - Daily summary card\n- dashboard.charts - Chart section\n- dashboard.stats - Stats section\n\n**Journal:**\n- journal.editor - Editor section\n- journal.entries - Journal entries list\n\n**SCROLL BEHAVIOR:**\n- smooth - Smooth scrolling animation (default)\n- instant - Jump immediately\n- auto - Browser default\n\n**EXAMPLES:**\n- \"scroll to the chart section\"  {element: \"dashboard.charts\"}\n- \"scroll down to the stats\"  {element: \"statistics.metrics\"}\n- \"show me the performance metrics\"  {element: \"statistics.performance\"}`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        element: {\n                            type: 'string',\n                            description: 'Element identifier to scroll to (e.g., \"dashboard.charts\", \"statistics.performance\", \"trades.table\")'\n                        },\n                        behavior: {\n                            type: 'string',\n                            enum: [\n                                'smooth',\n                                'instant',\n                                'auto'\n                            ],\n                            description: 'Scroll behavior: smooth (animated), instant (jump), auto (browser default)'\n                        }\n                    },\n                    required: [\n                        'element'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'setComponentState',\n                description: `Change the state of any component on the current page. Works with toggles, switches, dropdowns, filters, inputs, and other stateful components.\n\n**COMMON STATE CHANGES BY PAGE:**\n\n**Statistics Page:**\n- statistics.display-mode - Change display mode (dollar/r_multiple/percentage)\n- statistics.date-range - Change date range filter\n- statistics.sort-field - Change sort field\n- statistics.sort-direction - Change sort direction\n\n**Trades Page:**\n- trades.display-mode - Change display mode\n- trades.date-range - Change date range\n- trades.filters.symbol - Filter by symbol\n- trades.filters.tags - Filter by tags\n- trades.filters.side - Filter by side (buy/sell)\n\n**Dashboard:**\n- dashboard.display-mode - Change display mode\n- dashboard.date-range - Change date range\n\n**Journal:**\n- journal.selected-folder - Change selected folder\n- journal.search - Search query\n\n**EXAMPLES:**\n- \"change to R mode\"  {component: \"statistics.display-mode\", state: \"r_multiple\"}\n- \"filter by AAPL\"  {component: \"trades.filters.symbol\", state: \"AAPL\"}\n- \"show last 30 days\"  {component: \"trades.date-range\", state: \"last 30 days\"}\n- \"sort by date\"  {component: \"statistics.sort-field\", state: \"date\"}`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        component: {\n                            type: 'string',\n                            description: 'Component identifier (e.g., \"statistics.display-mode\", \"trades.filters.symbol\")'\n                        },\n                        state: {\n                            description: 'New state value (can be string, number, boolean, object, etc.)'\n                        },\n                        property: {\n                            type: 'string',\n                            description: 'Optional property name to set (if component has multiple properties)'\n                        }\n                    },\n                    required: [\n                        'component',\n                        'state'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'createSnapshot',\n                description: `Capture the current page state as a named snapshot for later comparison. Snapshots save all current filters, statistics, and metrics so you can compare different configurations or date ranges.\n\n**USE CASES:**\n- Save current filter state before making changes\n- Capture performance metrics for specific date ranges\n- Record statistics for different trading strategies\n- Create baseline comparisons for analysis\n\n**EXAMPLES:**\n- \"Save this as a snapshot called Long-only trades\"\n- \"Create a snapshot called Q4 2024 performance\"\n- \"Save current state as Last 30 days baseline\"\n\n**SNAPSHOT LIMITS:**\n- Maximum 10 snapshots (oldest automatically deleted)\n- Snapshots persist across sessions\n- Each snapshot includes: filters, statistics, trade IDs, timestamp`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        name: {\n                            type: 'string',\n                            description: 'Descriptive name for the snapshot (e.g., \"Long-only trades\", \"Q4 2024\", \"Last 30 days\")',\n                            minLength: 1,\n                            maxLength: 50\n                        }\n                    },\n                    required: [\n                        'name'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'listSnapshots',\n                description: `List all saved snapshots with their names, timestamps, and key statistics. Use this to see what snapshots are available before comparing them.\n\n**RETURNS:**\n- Snapshot names and IDs\n- Creation timestamps\n- Trade counts\n- Win rates\n- Total P&L\n- Page where snapshot was created\n\n**EXAMPLES:**\n- \"What snapshots do I have saved?\"\n- \"Show me all my saved snapshots\"\n- \"List available snapshots\"`,\n                parameters: {\n                    type: 'object',\n                    properties: {},\n                    required: []\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'compareSnapshots',\n                description: `Compare two saved snapshots and generate insights about performance differences. This reveals how different filters, date ranges, or strategies affect trading performance.\n\n**USE CASES:**\n- Compare Long-only vs All trades performance\n- Analyze performance differences between date ranges\n- Compare results of different filter configurations\n- Evaluate strategy changes over time\n\n**EXAMPLES:**\n- \"Compare Long-only trades with All trades snapshot\"\n- \"Compare Q3 2024 with Q4 2024\"\n- \"Show me the difference between Last 30 days and Last 90 days\"\n\n**COMPARISON METRICS:**\n- Trade count changes\n- Win rate differences\n- Total P&L comparison\n- Profit factor changes\n- Expectancy differences\n- Risk metrics (max drawdown, largest win/loss)`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        snapshot1: {\n                            type: 'string',\n                            description: 'Name or ID of the first snapshot to compare'\n                        },\n                        snapshot2: {\n                            type: 'string',\n                            description: 'Name or ID of the second snapshot to compare'\n                        }\n                    },\n                    required: [\n                        'snapshot1',\n                        'snapshot2'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'compareCurrentWithSnapshot',\n                description: `Compare the current page state with a previously saved snapshot. This is useful for seeing how recent changes affect performance compared to a saved baseline.\n\n**USE CASES:**\n- Compare current filters with saved baseline\n- Evaluate recent performance changes\n- Check if current settings improve vs previous configuration\n\n**EXAMPLES:**\n- \"Compare current state with my Long-only snapshot\"\n- \"How does the current state compare to Last 30 days?\"\n- \"Show me the difference between now and Q4 2024\"`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        snapshotName: {\n                            type: 'string',\n                            description: 'Name or ID of the snapshot to compare with current state'\n                        }\n                    },\n                    required: [\n                        'snapshotName'\n                    ]\n                }\n            }\n        },\n        {\n            type: 'function',\n            function: {\n                name: 'deleteSnapshot',\n                description: `Delete a previously saved snapshot. Use this to remove old or outdated snapshots.\n\n**USE CASES:**\n- Remove outdated snapshots\n- Clear old baselines\n- Manage snapshot storage\n\n**EXAMPLES:**\n- \"Delete the Long-only snapshot\"\n- \"Remove the Q3 2024 snapshot\"\n- \"Clear the Last 30 days snapshot\"`,\n                parameters: {\n                    type: 'object',\n                    properties: {\n                        snapshotName: {\n                            type: 'string',\n                            description: 'Name or ID of the snapshot to delete'\n                        }\n                    },\n                    required: [\n                        'snapshotName'\n                    ]\n                }\n            }\n        }\n    ];\n}\n/**\n * Format CopilotKit context for inclusion in AI prompt\n * Converts structured context data into readable format for the AI\n */ function formatContextForPrompt(context) {\n    const lines = [];\n    // Group context by page/component\n    const dashboardMetrics = [];\n    const calendarData = [];\n    const tradesData = [];\n    const statsData = [];\n    const dailySummaryData = [];\n    const otherData = [];\n    Object.entries(context).forEach(([key, value])=>{\n        // Skip undefined or null values\n        if (value === undefined || value === null) return;\n        // Categorize by key prefix\n        if (key.startsWith('totalPnL') || key.startsWith('winRate') || key.startsWith('profitFactor') || key.startsWith('expectancy') || key.startsWith('maxDrawdown') || key.startsWith('average')) {\n            dashboardMetrics.push(`  - ${key}: ${formatValue(value)}`);\n        } else if (key.startsWith('currentYear') || key.startsWith('selectedMonth') || key.startsWith('viewMode') || key.startsWith('monthlyMonths')) {\n            calendarData.push(`  - ${key}: ${formatValue(value)}`);\n        } else if (key.startsWith('totalTrades') || key.startsWith('winningTrades') || key.startsWith('losingTrades') || key.startsWith('largest')) {\n            statsData.push(`  - ${key}: ${formatValue(value)}`);\n        } else if (key === 'currentPage') {\n            otherData.push(`  - ${key}: ${value}`);\n        } else {\n            otherData.push(`  - ${key}: ${formatValue(value)}`);\n        }\n    });\n    // Build formatted sections\n    if (dashboardMetrics.length > 0) {\n        lines.push('**Dashboard Metrics:**');\n        lines.push(...dashboardMetrics);\n    }\n    if (statsData.length > 0) {\n        lines.push('**Statistics:**');\n        lines.push(...statsData);\n    }\n    if (calendarData.length > 0) {\n        lines.push('**Calendar Data:**');\n        lines.push(...calendarData);\n    }\n    if (tradesData.length > 0) {\n        lines.push('**Trades Data:**');\n        lines.push(...tradesData);\n    }\n    if (dailySummaryData.length > 0) {\n        lines.push('**Daily Summary:**');\n        lines.push(...dailySummaryData);\n    }\n    if (otherData.length > 0) {\n        lines.push('**Other Context:**');\n        lines.push(...otherData);\n    }\n    return lines.length > 0 ? lines.join('\\n') : 'No context data available';\n}\n/**\n * Format a value for display in the prompt\n */ function formatValue(value) {\n    if (typeof value === 'number') {\n        // Format numbers nicely\n        if (Math.abs(value) >= 1000000) {\n            return `$${(value / 1000000).toFixed(2)}M`;\n        } else if (Math.abs(value) >= 1000) {\n            return `$${(value / 1000).toFixed(1)}K`;\n        } else if (Math.abs(value) < 10 && value !== 0) {\n            return value.toFixed(2);\n        } else {\n            return value.toString();\n        }\n    } else if (typeof value === 'boolean') {\n        return value ? 'Yes' : 'No';\n    } else if (Array.isArray(value)) {\n        return `${value.length} items`;\n    } else if (typeof value === 'object') {\n        return JSON.stringify(value, null, 2);\n    }\n    return String(value);\n}\nasync function POST(req) {\n    try {\n        const body1 = await req.json();\n        console.log('\\n=== AG-UI API: REQUEST RECEIVED ===');\n        console.log('Message (first 100 chars):', body1.message?.substring(0, 100));\n        console.log('Has attachedFile?', !!body1.attachedFile);\n        console.log('Attached file name:', body1.attachedFile?.name);\n        console.log('Has file content?', !!body1.attachedFile?.content);\n        console.log('File content length:', body1.attachedFile?.content?.length || 0);\n        console.log('===================================\\n');\n        // Handle file upload if attached\n        if (body1.attachedFile && body1.attachedFile.name && body1.attachedFile.content) {\n            console.log(' FILE DETECTED - Processing:', body1.attachedFile.name);\n            try {\n                console.log(' Starting file processing...');\n                // Decode base64 content to analyze the CSV\n                const base64Content = body1.attachedFile.content;\n                console.log('   base64 length:', base64Content.length);\n                const csvBytes = Buffer.from(base64Content, 'base64');\n                console.log('   decoded byte length:', csvBytes.length);\n                // Node.js doesn't support 'utf-8-sig', so we use utf-8 and manually remove BOM if present\n                let csvText = csvBytes.toString('utf-8');\n                // Remove UTF-8 BOM if present (EF BB BF)\n                if (csvBytes.length >= 3 && csvBytes[0] === 0xEF && csvBytes[1] === 0xBB && csvBytes[2] === 0xBF) {\n                    csvText = csvText.slice(1); // Remove the BOM character\n                    console.log('   BOM detected and removed');\n                }\n                console.log('   decoded text length:', csvText.length);\n                console.log('   first 100 chars:', csvText.substring(0, 100));\n                // Parse CSV to get basic info\n                const lines = csvText.split('\\n').filter((line)=>line.trim());\n                const headerLine = lines[0] || '';\n                const tradeCount = Math.max(0, lines.length - 1) // Subtract header row\n                ;\n                console.log('   lines found:', lines.length);\n                console.log('   trade count:', tradeCount);\n                console.log('   header:', headerLine);\n                // Extract column names from header\n                const columns = headerLine.split(',').map((col)=>col.trim());\n                console.log('   columns:', columns);\n                // Import trades to database\n                let importResult = 'Import pending...';\n                try {\n                    console.log(' Starting trade import...');\n                    const importResponse = await fetch(`${\"http://localhost:6565\" || 0}/api/trades/upsert`, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            csvContent: base64Content,\n                            fileName: body1.attachedFile.name,\n                            userId: body1.userId || 'anonymous'\n                        })\n                    });\n                    if (importResponse.ok) {\n                        const importData = await importResponse.json();\n                        importResult = importData.message || `Imported ${importData.imported || 0} trades`;\n                        console.log(' Trade import successful:', importResult);\n                    } else {\n                        importResult = 'Import failed - please try again';\n                        console.error(' Trade import failed:', importResponse.status);\n                    }\n                } catch (importError) {\n                    importResult = 'Import failed - please try again';\n                    console.error(' Trade import error:', importError);\n                }\n                // Add file info to the message for AI to acknowledge\n                const fileInfo = `\\n\\n[ FILE UPLOADED: ${body1.attachedFile.name}]\n- Type: CSV file with ${tradeCount} trade(s)\n- Columns: ${columns.slice(0, 5).join(', ')}${columns.length > 5 ? '...' : ''}\n- Status: ${importResult}`;\n                // Append file info to message\n                if (body1.message) {\n                    body1.message = body1.message + fileInfo;\n                } else {\n                    body1.message = fileInfo;\n                }\n                console.log(' File info added to message:', {\n                    fileName: body1.attachedFile.name,\n                    tradeCount\n                });\n                console.log(' Message now contains:', body1.message.substring(0, 300));\n                console.log(' Has file marker?', body1.message.includes(' FILE UPLOADED'));\n            } catch (error) {\n                console.error(' Error processing file:', error);\n                console.error('   Error details:', error instanceof Error ? error.stack : String(error));\n                const errorMessage = `\\n\\n[ FILE UPLOAD ERROR: ${body1.attachedFile.name}]\n${error instanceof Error ? error.message : 'Failed to process file'}`;\n                if (body1.message) {\n                    body1.message = body1.message + errorMessage;\n                } else {\n                    body1.message = errorMessage;\n                }\n            }\n        }\n        // Load dynamic site knowledge\n        const siteManifest = loadSiteManifest();\n        const sitePrompt = loadSitePrompt();\n        // Extract messages\n        let messages = [];\n        if (body1.messages && Array.isArray(body1.messages)) {\n            messages = body1.messages;\n        } else if (body1.message) {\n            messages = [\n                {\n                    role: 'user',\n                    content: body1.message\n                }\n            ];\n        } else {\n            messages = [\n                {\n                    role: 'user',\n                    content: 'Hello'\n                }\n            ];\n        }\n        // Extract enhanced context from useCopilotReadable hooks\n        const copilotContext = body1.copilotContext || {};\n        const basicContext = body1.context || {};\n        // Check if concise mode is requested (default true for brevity)\n        const concise = body1.concise !== false // Default to true\n        ;\n        const customSystemInstructions = body1.systemInstructions || '';\n        // Build context section for system prompt\n        let contextSection = '';\n        if (Object.keys(copilotContext).length > 0) {\n            contextSection = `\n\n** LIVE TRADING DATA (Context from useCopilotReadable hooks):**\nYou have access to REAL-TIME trading metrics and data from the user's current view. Use this information to provide accurate, personalized responses.\n\n${formatContextForPrompt(copilotContext)}\n\n**IMPORTANT:**\n- This is LIVE data from what the user is currently viewing\n- Use actual numbers when answering questions about performance\n- Reference specific metrics when discussing trading results\n- The data above is what's currently visible on the user's screen\n`;\n            console.log('[AG-UI] Enhanced context processed:', Object.keys(copilotContext).length, 'items');\n        } else {\n            console.log('[AG-UI] No enhanced context provided');\n        }\n        // Build dynamic tools from site manifest\n        const AGUI_TOOLS = siteManifest ? buildDynamicTools(siteManifest) : buildDynamicTools({\n            pages: [\n                {\n                    route: '/dashboard'\n                }\n            ]\n        });\n        // System prompt with dynamic site knowledge\n        const systemPrompt = `You are Renata, an AI trading assistant integrated into Traderra.\n\n${customSystemInstructions ? `** COMMUNICATION STYLE:**\n${customSystemInstructions}\n\n` : ''}${sitePrompt}\n${contextSection}\n\n** FILE UPLOADS & TRADE IMPORT:**\nWhen users upload a CSV file, the system AUTOMATICALLY imports the trades to the database. The message will show:\n[ FILE UPLOADED: filename.csv]\n- Type: CSV file with X trade(s)\n- Columns: Symbol, Side, Entry Price, etc.\n- Status: Import complete: X new trades added, Y duplicates skipped\n\n**IMPORTANT:** The import happens AUTOMATICALLY. Just acknowledge the result:\n- \"I've received your file: filename.csv with X trades.  Import complete - all trades have been added to your history!\"\n- \"Thanks for uploading! Successfully imported X trades from filename.csv to your trade history.\"\n- \"File received: filename.csv.  Import complete - X trades added to your database.\"\n\n**DO NOT navigate to the trades page** - the import is already done. Just confirm and summarize the result.\n\n** CRITICAL: CONTEXT-FIRST NAVIGATION UNDERSTANDING**\n\nYour MOST IMPORTANT task is to understand USER INTENT from CONTEXT, not just match keywords.\n\n**NEVER navigate to a page just because you see its name as a keyword.**\n\n **WRONG PATTERN**:\nUser: \"look at stats in the dashboard\"\nAI detects keyword: \"stats\"  Navigates to /statistics\n **CORRECT PATTERN**:\nUser: \"look at stats in the dashboard\"\nAI detects intent: \"look at... in the dashboard\"  Navigates to /dashboard (where stats are visible)\n\n**How to determine TRUE navigation destination:**\n\n1. **Look for PRIMARY navigation verbs:**\n   - \"take me to\", \"go to\", \"navigate to\", \"open\" = STRONG navigation signal\n   - \"show me\", \"view\", \"display\" = Context-dependent (what do they want to see?)\n\n2. **Analyze prepositional phrases:**\n   - \"in the [page]\"  [page] is the LOCATION, go there\n   - \"on the [page]\"  [page] is the LOCATION, go there\n   - \"from [page]\"  [page] is the SOURCE, go elsewhere or filter\n   - \"about [topic]\"  [topic] is what they want to see/learn\n\n3. **Identify the PRIMARY object:**\n   - \"show me trades\"  trades = what they want to see\n   - \"trades on the dashboard\"  dashboard = location, trades = what they're viewing there\n\n**Examples of CORRECT context understanding:**\n\n \"stats in the dashboard\"  Navigate to dashboard (location = dashboard)\n \"go to stats page\"  Navigate to statistics (action = go to stats)\n \"show trades from last week\"  Navigate to trades (trades = object, from last week = filter)\n \"settings for notifications\"  Navigate to settings (settings = destination)\n \"my trades on the home screen\"  Navigate to home/dashboard (location = home)\n \"check the journal for today's notes\"  Navigate to journal (journal = location for notes)\n \"view calendar for next week\"  Navigate to calendar (calendar = what they want to see)\n\n**Common AMBIGUOUS patterns to handle CORRECTLY:**\n\n- \"stats [preposition] dashboard\"  dashboard is location, go to dashboard\n- \"trades from/in [timeframe]\"  trades = page, timeframe = filter\n- \"[page] for [purpose]\"  [page] = destination\n- \"show me [object]\"  [object] determines destination\n- \"on the [page]\"  [page] = location to navigate to\n\n** NAVIGATION ALIASES:**\nUsers refer to pages in many ways. Map their INTENT to the correct route:\n- Home/dashboard/main/app  \"dashboard\" (the main app interface)\n- Landing page/marketing page  \"\" (ONLY if explicitly requesting landing)\n- Stats/analytics/performance/metrics  \"statistics\"\n- Trades/trading/positions/trade history  \"trades\"\n- Journal/notes/trade journal/diary/log  \"journal\"\n- Summary/daily summary/recap  \"daily-summary\"\n- Calendar/trading calendar/market calendar  \"calendar\"\n- Settings/preferences/config/options  \"settings\"\n\n**TOP NAV BAR ITEMS (exact names users will see):**\n- Dashboard, Trades, Stats, Summary, Calendar, Journal, Settings, Renata\n\n** DISPLAY MODES:**\n- **dollar** - Show $ amounts\n- **r_multiple** - Show R-multiples (users say \"in R\", \"R mode\", \"show R\")\n- **percentage** - Show % changes (users say \"in %\", \"percent mode\")\n- IMPORTANT: \"R\" always means R-multiple display mode, never a stock symbol\n\n** VIEW MODES:**\n- **table** - Show results as data table\n- **chart** - Show results as visual chart\n\n** SORT FIELDS:**\n- ticker - Sort by stock symbol\n- date - Sort by date\n- gapPercent - Sort by gap percentage\n- volume - Sort by trading volume\n- score - Sort by scan score\n\n** AVAILABLE TOOLS:**\n- navigateToPage: Navigate to different pages\n- setDisplayMode: Change dollar/R%/percentage display\n- setViewMode: Switch between table/chart views\n- setSortField: Change what field to sort by\n- setSortDirection: Ascending or descending sort\n- toggleAISidebar: Open/close AI chat\n- setDateRange: Change date range\n- setStatsTab: Switch between tabs on Statistics page (overview/analytics/performance)\n- activateComponent: Activate any UI component (tabs, buttons, panels, modals, etc.)\n- scrollToElement: Scroll to any section/component on current page\n- setComponentState: Change state of any component (filters, toggles, inputs, etc.)\n- createSnapshot: Capture current page state as a named snapshot for comparison\n- listSnapshots: List all saved snapshots with their statistics\n- compareSnapshots: Compare two saved snapshots and show performance differences\n- compareCurrentWithSnapshot: Compare current state with a saved snapshot\n- deleteSnapshot: Delete a saved snapshot\n\n** HOW TO RESPOND:**\n1. When users ask for something that requires a tool call, CALL THE TOOL\n2. Be clear about what you're doing\n3. Acknowledge the action after execution\n4. If something isn't possible, explain why clearly\n\n** CRITICAL: CALL ALL RELEVANT TOOLS**\nWhen a user request involves MULTIPLE actions, you MUST call ALL relevant tools in a single response:\n\n **WRONG**: User says \"show trades in R mode\"  Only call navigateToPage\n **RIGHT**: User says \"show trades in R mode\"  Call BOTH navigateToPage AND setDisplayMode\n\n **WRONG**: User says \"take me to trades and show last 30 days\"  Only call navigateToPage\n **RIGHT**: User says \"take me to trades and show last 30 days\"  Call BOTH navigateToPage AND setDateRange\n\n **WRONG**: User says \"go to stats in dollar mode\"  Only call navigateToPage\n **RIGHT**: User says \"go to stats in dollar mode\"  Call BOTH navigateToPage AND setDisplayMode\n\n**Common Multi-Tool Patterns:**\n- \"show [page] in [mode]\"  navigateToPage + setDisplayMode\n- \"take me to [page] and show [timeframe]\"  navigateToPage + setDateRange\n- \"go to [page] in [view mode]\"  navigateToPage + setViewMode\n- \"sort [page] by [field]\"  navigateToPage + setSortField (+ setSortDirection)\n\n** MOST IMPORTANT RULES:**\n- ALWAYS analyze CONTEXT, not just keywords\n- When in doubt, look for the PRIMARY action verb and PRIMARY destination\n- Prepositional phrases (\"in the\", \"on the\") often indicate LOCATION\n- Display mode \"R\" or \"r\" ALWAYS means r_multiple, never a stock\n- Map user phrasing to correct routes (stats  statistics, etc.)\n- **CALL ALL TOOLS NEEDED TO COMPLETE THE USER'S REQUEST**\n- **Don't be conservative - if the user wants multiple actions, call multiple tools**\n`;\n        // Prepare messages\n        const openRouterMessages = [\n            {\n                role: 'system',\n                content: systemPrompt\n            },\n            ...messages\n        ];\n        // Get API key\n        const apiKey = process.env.OPENROUTER_API_KEY;\n        if (!apiKey || apiKey === 'your_openrouter_api_key_here') {\n            throw new Error('OpenRouter API key not configured');\n        }\n        // Debug log the user message being sent to OpenRouter\n        const userMessage = messages[messages.length - 1]?.content || 'No message';\n        console.log('=== OPENROUTER REQUEST ===');\n        console.log('User message (first 200 chars):', userMessage.substring(0, 200));\n        console.log('Contains file upload marker?', userMessage.includes(' FILE UPLOADED'));\n        console.log('==========================');\n        console.log('Calling OpenRouter with tools:', {\n            messageCount: openRouterMessages.length,\n            toolCount: AGUI_TOOLS.length,\n            siteManifestLoaded: !!siteManifest\n        });\n        // Call OpenRouter with tools\n        const response = await fetch('https://openrouter.ai/api/v1/chat/completions', {\n            method: 'POST',\n            headers: {\n                'Authorization': `Bearer ${apiKey}`,\n                'Content-Type': 'application/json',\n                'HTTP-Referer': 'http://localhost:6565',\n                'X-Title': 'Traderra AG-UI'\n            },\n            body: JSON.stringify({\n                model: 'anthropic/claude-3.5-sonnet',\n                messages: openRouterMessages,\n                tools: AGUI_TOOLS,\n                tool_choice: 'auto',\n                max_tokens: 1000,\n                temperature: 0.7\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            throw new Error(`OpenRouter error ${response.status}: ${errorText}`);\n        }\n        const data = await response.json();\n        const assistantMessage = data.choices?.[0]?.message;\n        console.log('AG-UI Response:', {\n            hasContent: !!assistantMessage?.content,\n            hasToolCalls: !!assistantMessage?.tool_calls,\n            toolCallCount: assistantMessage?.tool_calls?.length || 0\n        });\n        // Extract tool calls if present\n        let toolCalls = [];\n        if (assistantMessage?.tool_calls && Array.isArray(assistantMessage.tool_calls)) {\n            toolCalls = assistantMessage.tool_calls.map((tc)=>{\n                try {\n                    return {\n                        tool: tc.function.name,\n                        args: tc.function.arguments ? JSON.parse(tc.function.arguments) : {}\n                    };\n                } catch (error) {\n                    console.error('Failed to parse tool arguments:', {\n                        tool: tc.function.name,\n                        arguments: tc.function.arguments,\n                        error\n                    });\n                    return {\n                        tool: tc.function.name,\n                        args: {}\n                    };\n                }\n            });\n        }\n        // Get text response\n        const textResponse = assistantMessage?.content || (toolCalls.length > 0 ? 'I\\'ll make those changes for you.' : 'I encountered an issue processing your request.');\n        console.log('AG-UI Success:', {\n            responseLength: textResponse.length,\n            toolCalls: toolCalls.length,\n            tools: toolCalls.map((tc)=>tc.tool)\n        });\n        // Return response with tool calls\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            response: textResponse,\n            message: textResponse,\n            tool_calls: toolCalls,\n            tool_count: toolCalls.length\n        });\n    } catch (error) {\n        console.error('=== AG-UI ERROR ===');\n        console.error('Error type:', error.constructor.name);\n        console.error('Error message:', error instanceof Error ? error.message : String(error));\n        console.error('Error stack:', error instanceof Error ? error.stack : 'No stack');\n        console.error('==================');\n        // Check if this is an OpenRouter auth error\n        const isAuthError = error instanceof Error && (error.message.includes('401') || error.message.includes('User not found') || error.message.includes('Unauthorized') || error.message.includes('authentication'));\n        // If it's an auth error and we have a message (possibly with file info), return it anyway\n        if (isAuthError && body.message) {\n            console.log('OpenRouter auth failed, returning message with file info');\n            // Extract file info from the message if present\n            const fileInfoMatch = body.message.match(/\\[ FILE UPLOADED:([^\\]]+)\\]/);\n            if (fileInfoMatch) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    success: true,\n                    response: `I've received your file upload!\\n\\n${fileInfoMatch[0]}\\n\\nNote: I'm currently having trouble connecting to my AI service, but your file was received successfully.`,\n                    message: body.message,\n                    tool_calls: []\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                response: body.message || 'I received your message.',\n                message: body.message,\n                tool_calls: []\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: `AG-UI Error: ${error instanceof Error ? error.message : 'Unknown error'}`,\n            message: `There was an issue with the AG-UI system: ${error instanceof Error ? error.message : 'Unknown error'}`,\n            tool_calls: []\n        }, {\n            status: 200\n        });\n    }\n}\n// Health check\nasync function GET(req) {\n    const siteManifest = loadSiteManifest();\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        status: 'operational',\n        app: 'Traderra',\n        ag_ui: 'active',\n        tools_enabled: true,\n        site_aware: !!siteManifest,\n        site_manifest_loaded: !!siteManifest,\n        page_count: siteManifest?.pages?.length || 0,\n        component_count: siteManifest?.components?.length || 0,\n        tool_count: siteManifest?.pages?.length || 0\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QztvQkFDOUtqRixTQUFTSCxLQUFLRyxPQUFPO29CQUNyQnFFLFlBQVksRUFBRTtnQkFDaEI7WUFDRjtZQUVBLE9BQU8zSixxREFBWUEsQ0FBQ29GLElBQUksQ0FBQztnQkFDdkJnRixTQUFTO2dCQUNUdEIsVUFBVTNELEtBQUtHLE9BQU8sSUFBSTtnQkFDMUJBLFNBQVNILEtBQUtHLE9BQU87Z0JBQ3JCcUUsWUFBWSxFQUFFO1lBQ2hCO1FBQ0Y7UUFFQSxPQUFPM0oscURBQVlBLENBQUNvRixJQUFJLENBQUM7WUFDdkJnRixTQUFTO1lBQ1QxSixPQUFPLENBQUMsYUFBYSxFQUFFQSxpQkFBaUI2RyxRQUFRN0csTUFBTTRFLE9BQU8sR0FBRyxpQkFBaUI7WUFDakZBLFNBQVMsQ0FBQywwQ0FBMEMsRUFBRTVFLGlCQUFpQjZHLFFBQVE3RyxNQUFNNEUsT0FBTyxHQUFHLGlCQUFpQjtZQUNoSHFFLFlBQVksRUFBRTtRQUNoQixHQUFHO1lBQUV2QyxRQUFRO1FBQUk7SUFDbkI7QUFDRjtBQUVBLGVBQWU7QUFDUixlQUFlcUQsSUFBSXZGLEdBQWdCO0lBQ3hDLE1BQU13QyxlQUFldkg7SUFFckIsT0FBT0gscURBQVlBLENBQUNvRixJQUFJLENBQUM7UUFDdkJnQyxRQUFRO1FBQ1JzRCxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsZUFBZTtRQUNmQyxZQUFZLENBQUMsQ0FBQ25EO1FBQ2RvRCxzQkFBc0IsQ0FBQyxDQUFDcEQ7UUFDeEJxRCxZQUFZckQsY0FBY3pHLE9BQU9hLFVBQVU7UUFDM0NrSixpQkFBaUJ0RCxjQUFjdUQsWUFBWW5KLFVBQVU7UUFDckR1SSxZQUFZM0MsY0FBY3pHLE9BQU9hLFVBQVU7SUFDN0M7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvc3JjL2FwcC9hcGkvYWd1aS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcydcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdwYXRoJ1xuXG4vKipcbiAqIExvYWQgc2l0ZSBtYW5pZmVzdCBmb3IgZHluYW1pYyBBRy1VSSBrbm93bGVkZ2VcbiAqL1xuZnVuY3Rpb24gbG9hZFNpdGVNYW5pZmVzdCgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtYW5pZmVzdFBhdGggPSBqb2luKHByb2Nlc3MuY3dkKCksICdzcmMnLCAnbGliJywgJ2FnLXVpJywgJ3NpdGUtbWFuaWZlc3QuanNvbicpXG4gICAgY29uc3QgbWFuaWZlc3RDb250ZW50ID0gcmVhZEZpbGVTeW5jKG1hbmlmZXN0UGF0aCwgJ3V0Zi04JylcbiAgICByZXR1cm4gSlNPTi5wYXJzZShtYW5pZmVzdENvbnRlbnQpXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgc2l0ZSBtYW5pZmVzdDonLCBlcnJvcilcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbi8qKlxuICogTG9hZCBzaXRlIHByb21wdCBmb3IgZHluYW1pYyBBRy1VSSBrbm93bGVkZ2VcbiAqL1xuZnVuY3Rpb24gbG9hZFNpdGVQcm9tcHQoKTogc3RyaW5nIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBwcm9tcHRQYXRoID0gam9pbihwcm9jZXNzLmN3ZCgpLCAnc3JjJywgJ2xpYicsICdhZy11aScsICdzaXRlLXByb21wdC50eHQnKVxuICAgIHJldHVybiByZWFkRmlsZVN5bmMocHJvbXB0UGF0aCwgJ3V0Zi04JylcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBzaXRlIHByb21wdDonLCBlcnJvcilcbiAgICByZXR1cm4gJydcbiAgfVxufVxuXG4vKipcbiAqIEJ1aWxkIGR5bmFtaWMgdG9vbHMgZnJvbSBzaXRlIG1hbmlmZXN0XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkRHluYW1pY1Rvb2xzKG1hbmlmZXN0OiBhbnkpOiBhbnlbXSB7XG4gIGNvbnN0IHBhZ2VSb3V0ZXMgPSBtYW5pZmVzdC5wYWdlc1xuICAgIC5tYXAoKHA6IGFueSkgPT4gcC5yb3V0ZS5yZXBsYWNlKC9eXFwvLywgJycpKVxuICAgIC5maWx0ZXIoKHI6IHN0cmluZykgPT4gciAmJiAhci5pbmNsdWRlcygnWycpICYmICFyLmluY2x1ZGVzKCcuLi4nKSlcblxuICByZXR1cm4gW1xuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnbmF2aWdhdGVUb1BhZ2UnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYE5hdmlnYXRlIHRvIGEgc3BlY2lmaWMgcGFnZS4gQXZhaWxhYmxlIHBhZ2VzOiAke3BhZ2VSb3V0ZXMuc2xpY2UoMCwgMTUpLmpvaW4oJywgJyl9JHtwYWdlUm91dGVzLmxlbmd0aCA+IDE1ID8gJy4uLicgOiAnJ31cblxuKirimqDvuI8gQ1JJVElDQUw6IENPTlRFWFQtRklSU1QgTkFWSUdBVElPTioqXG5ORVZFUiBuYXZpZ2F0ZSBiYXNlZCBvbiBrZXl3b3JkIG1hdGNoaW5nIGFsb25lLiBBbHdheXMgYW5hbHl6ZSBVU0VSIElOVEVOVCBmcm9tIHRoZSBmdWxsIHNlbnRlbmNlIGNvbnRleHQuXG5cbioqQ29udGV4dCBSdWxlczoqKlxuLSBcInN0YXRzIElOIHRoZSBkYXNoYm9hcmRcIiDihpIgTmF2aWdhdGUgdG8gL2Rhc2hib2FyZCAobG9jYXRpb24gPSBkYXNoYm9hcmQpXG4tIFwiZ28gVE8gc3RhdHMgcGFnZVwiIOKGkiBOYXZpZ2F0ZSB0byAvc3RhdGlzdGljcyAoYWN0aW9uID0gZ28gdG8gc3RhdHMpXG4tIFByZXBvc2l0aW9ucyByZXZlYWwgaW50ZW50OiBcImluXCIsIFwib25cIiwgXCJhdFwiID0gbG9jYXRpb24gfCBcInRvXCIsIFwiZm9yXCIgPSBkZXN0aW5hdGlvblxuLSBMb29rIGZvciBQUklNQVJZIGFjdGlvbiB2ZXJiOiBcImdvIHRvXCIsIFwidGFrZSBtZSB0b1wiLCBcInNob3cgbWVcIiA9IHdoYXQgdGhleSB3YW50XG5cbioqVE9QIE5BViBCQVIgSVRFTVMqKiAoZXhhY3QgbmFtZXMgdXNlcnMgc2VlKTpcbkRhc2hib2FyZCwgVHJhZGVzLCBTdGF0cywgU3VtbWFyeSwgQ2FsZW5kYXIsIEpvdXJuYWwsIFNldHRpbmdzLCBSZW5hdGEgKEFJIGJ1dHRvbilcblxuKirimqDvuI8gSU1QT1JUQU5UOiBEQVNIQk9BUkQgdnMgTEFORElORyBQQUdFKipcblRoZXJlIGFyZSBUV08gZGlmZmVyZW50IHBhZ2VzOlxuLSBcIi9cIiA9IExhbmRpbmcvbWFya2V0aW5nIHBhZ2UgKHNob3duIHRvIG5ldyB1c2Vycylcbi0gXCIvZGFzaGJvYXJkXCIgPSBBY3R1YWwgZGFzaGJvYXJkICh0aGUgbWFpbiBhcHAgaW50ZXJmYWNlKVxuXG4qKlVTRVIgQUxJQVNFUyAmIFZBUklBVElPTlM6Kipcbi0gXCJkYXNoYm9hcmRcIiwgXCJob21lXCIsIFwibWFpblwiLCBcInRoZSBkYXNoXCIg4oaSIFwiZGFzaGJvYXJkXCIgKHRoZSBhcHAsIE5PVCBsYW5kaW5nKVxuLSBcImxhbmRpbmcgcGFnZVwiLCBcIm1hcmtldGluZyBwYWdlXCIsIFwiaG9tZSBwYWdlXCIg4oaSIFwiXCIgKG9ubHkgaWYgZXhwbGljaXRseSByZXF1ZXN0aW5nIGxhbmRpbmcgcGFnZSlcbi0gXCJ0cmFkZXNcIiwgXCJ0cmFkZSBoaXN0b3J5XCIsIFwibXkgdHJhZGVzXCIsIFwidHJhZGluZ1wiLCBcInBvc2l0aW9uc1wiLCBcInRyYWRlIGxvZ1wiIOKGkiB0cmFkZXNcbi0gXCJqb3VybmFsXCIsIFwidHJhZGluZyBqb3VybmFsXCIsIFwidHJhZGUgam91cm5hbFwiLCBcIm5vdGVzXCIsIFwiZGlhcnlcIiwgXCJsb2dcIiDihpIgam91cm5hbFxuLSBcInN0YXRpc3RpY3NcIiwgXCJzdGF0c1wiLCBcImFuYWx5dGljc1wiLCBcInBlcmZvcm1hbmNlXCIsIFwibWV0cmljc1wiLCBcInRoZSBudW1iZXJzXCIg4oaSIHN0YXRpc3RpY3Ncbi0gXCJzdW1tYXJ5XCIsIFwiZGFpbHkgc3VtbWFyeVwiLCBcInJlY2FwXCIsIFwiZGFpbHkgcmVjYXBcIiDihpIgZGFpbHktc3VtbWFyeVxuLSBcImNhbGVuZGFyXCIsIFwidHJhZGluZyBjYWxlbmRhclwiLCBcIm1hcmtldCBjYWxlbmRhclwiLCBcImNhbFwiIOKGkiBjYWxlbmRhclxuLSBcInNldHRpbmdzXCIsIFwicHJlZmVyZW5jZXNcIiwgXCJjb25maWdcIiwgXCJhY2NvdW50IHNldHRpbmdzXCIsIFwic2V0dXBcIiDihpIgc2V0dGluZ3Ncbi0gXCJhbmFseXRpY3NcIiDihpIgYW5hbHl0aWNzIChzZXBhcmF0ZSBmcm9tIHN0YXRpc3RpY3MpXG5cbioqQ09NTU9OIFVTRVIgUEhSQVNJTkdTOioqXG5Vc2VycyBtaWdodCBzYXkgXCJ0YWtlIG1lIHRvXCIsIFwiZ28gdG9cIiwgXCJuYXZpZ2F0ZSB0b1wiLCBcIm9wZW5cIiwgXCJzaG93IG1lXCIsIFwiSSB3YW50IHRvIHNlZVwiLCBcImxldCdzIGNoZWNrXCIsIGV0Yy5gLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgcGFnZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWycnLCAuLi5wYWdlUm91dGVzXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBUaGUgcGFnZSByb3V0ZSB0byBuYXZpZ2F0ZSB0by4gTWFwIHVzZXIgSU5URU5UIChub3QganVzdCBrZXl3b3JkcykgdG8gZXhhY3Qgcm91dGU6XG5cbioq4pqg77iPIENPTlRFWFQgRVhBTVBMRVM6Kipcbi0gXCJzdGF0cyBpbiB0aGUgZGFzaGJvYXJkXCIg4oaSIFwiZGFzaGJvYXJkXCIgKHRoZSBhcHAsIE5PVCBzdGF0aXN0aWNzKVxuLSBcImdvIHRvIHN0YXRzXCIg4oaSIFwic3RhdGlzdGljc1wiIChhY3R1YWwgbmF2aWdhdGlvbilcbi0gXCJ0cmFkZXMgZnJvbSBsYXN0IHdlZWtcIiDihpIgXCJ0cmFkZXNcIlxuLSBcInNldHRpbmdzIGZvciBub3RpZmljYXRpb25zXCIg4oaSIFwic2V0dGluZ3NcIlxuXG4qKlBBR0UgTUFQUElOR1M6Kipcbi0gRGFzaGJvYXJkL2hvbWUvbWFpbiDihpIgXCJkYXNoYm9hcmRcIiAodGhlIGFwcCBpbnRlcmZhY2UgYXQgL2Rhc2hib2FyZClcbi0gTGFuZGluZyBwYWdlIOKGkiBcIlwiIChPTkxZIGlmIGV4cGxpY2l0bHkgcmVxdWVzdGluZyBsYW5kaW5nL21hcmtldGluZyBwYWdlKVxuLSBTdGF0cy9zdGF0aXN0aWNzL2FuYWx5dGljcy9wZXJmb3JtYW5jZSDihpIgXCJzdGF0aXN0aWNzXCIgKHVubGVzcyBjb250ZXh0IHNheXMgb3RoZXJ3aXNlKVxuLSBUcmFkZXMvdHJhZGluZy9wb3NpdGlvbnMg4oaSIFwidHJhZGVzXCJcbi0gSm91cm5hbC9ub3Rlcy90cmFkZSBqb3VybmFsL2RpYXJ5IOKGkiBcImpvdXJuYWxcIlxuLSBTdW1tYXJ5L2RhaWx5IHN1bW1hcnkvcmVjYXAg4oaSIFwiZGFpbHktc3VtbWFyeVwiXG4tIENhbGVuZGFyL3RyYWRpbmcgY2FsZW5kYXIg4oaSIFwiY2FsZW5kYXJcIlxuLSBTZXR0aW5ncy9wcmVmZXJlbmNlcy9jb25maWcg4oaSIFwic2V0dGluZ3NcIlxuLSBBbmFseXRpY3MgKGRhdGEgYW5hbHl0aWNzKSDihpIgXCJhbmFseXRpY3NcIlxuXG4qKkNSSVRJQ0FMOioqIFVzZSBcImRhc2hib2FyZFwiIGZvciB0aGUgbWFpbiBhcHAsIE5PVCBcIlwiLiBVc2UgXCJcIiBvbmx5IGZvciBleHBsaWNpdCBsYW5kaW5nIHBhZ2UgcmVxdWVzdHMuYFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsncGFnZSddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnc2V0RGlzcGxheU1vZGUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1NldCBob3cgdmFsdWVzIGFyZSBkaXNwbGF5ZWQuIE9wdGlvbnM6IGRvbGxhciAoc2hvdyAkIGFtb3VudHMpLCByX211bHRpcGxlIChzaG93IFItbXVsdGlwbGVzKSwgcGVyY2VudGFnZSAoc2hvdyAlIGNoYW5nZXMpLiBVc2VycyBtaWdodCBzYXkgXCJpbiBSXCIsIFwiaW4gZG9sbGFyc1wiLCBcInNob3cgcGVyY2VudGFnZXNcIiwgXCJzd2l0Y2ggdG8gUiBtb2RlXCIsIGV0Yy4nLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgbW9kZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydkb2xsYXInLCAncl9tdWx0aXBsZScsICdwZXJjZW50YWdlJ10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBtb2RlJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbW9kZSddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnc2V0Vmlld01vZGUnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1N3aXRjaCBiZXR3ZWVuIHRhYmxlIGFuZCBjaGFydCB2aWV3cyBmb3IgZGF0YS4gVXNlcnMgbWlnaHQgc2F5IFwic2hvdyB0YWJsZVwiLCBcInNob3cgY2hhcnRcIiwgXCJzd2l0Y2ggdG8gdGFibGUgdmlld1wiLCBcImRpc3BsYXkgYXMgY2hhcnRcIiwgZXRjLicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBtb2RlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RhYmxlJywgJ2NoYXJ0J10sXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVmlldyBtb2RlOiB0YWJsZSBvciBjaGFydCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ21vZGUnXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ3NldFNvcnRGaWVsZCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQ2hhbmdlIGhvdyByZXN1bHRzIGFyZSBzb3J0ZWQuIEF2YWlsYWJsZSBmaWVsZHM6IHRpY2tlciAoc3ltYm9sKSwgZGF0ZSwgZ2FwUGVyY2VudCAoZ2FwICUpLCB2b2x1bWUsIHNjb3JlLiBVc2VycyBtaWdodCBzYXkgXCJzb3J0IGJ5IHRpY2tlclwiLCBcIm9yZGVyIGJ5IGRhdGVcIiwgXCJzb3J0IGJ5IGdhcCBwZXJjZW50XCIsIGV0Yy4nLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZmllbGQ6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsndGlja2VyJywgJ2RhdGUnLCAnZ2FwUGVyY2VudCcsICd2b2x1bWUnLCAnc2NvcmUnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdGaWVsZCB0byBzb3J0IGJ5J1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnZmllbGQnXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ3NldFNvcnREaXJlY3Rpb24nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1NldCBzb3J0IGRpcmVjdGlvbiAtIGFzY2VuZGluZyAobG93ZXN0IHRvIGhpZ2hlc3QpIG9yIGRlc2NlbmRpbmcgKGhpZ2hlc3QgdG8gbG93ZXN0KS4gVXNlcnMgbWlnaHQgc2F5IFwic29ydCBhc2NlbmRpbmdcIiwgXCJkZXNjZW5kaW5nIG9yZGVyXCIsIFwicmV2ZXJzZSB0aGUgc29ydFwiLCBldGMuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydhc2MnLCAnZGVzYyddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NvcnQgZGlyZWN0aW9uOiBhc2MgKGFzY2VuZGluZykgb3IgZGVzYyAoZGVzY2VuZGluZyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydkaXJlY3Rpb24nXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ3RvZ2dsZUFJU2lkZWJhcicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnVG9nZ2xlIHRoZSBSZW5hdGEgQUkgc2lkZWJhciBvcGVuIG9yIGNsb3NlZC4gVXNlcnMgbWlnaHQgc2F5IFwib3BlbiBjaGF0XCIsIFwiY2xvc2UgQUlcIiwgXCJzaG93IFJlbmF0YVwiLCBcImhpZGUgc2lkZWJhclwiLCBldGMuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIG9wZW46IHtcbiAgICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ3RydWUgdG8gb3BlbiBzaWRlYmFyLCBmYWxzZSB0byBjbG9zZSBpdCwgdW5kZWZpbmVkIHRvIHRvZ2dsZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ3NldERhdGVSYW5nZScsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgU2V0IHRoZSBkYXRlIHJhbmdlIGZvciBkaXNwbGF5ZWQgZGF0YS5cblxuKipQUkVTRVQgUkFOR0VTKiogKHVzZSB0aGVzZSBleGFjdCB2YWx1ZXMpOlxuLSB0b2RheSwgeWVzdGVyZGF5LCB0aGlzIHdlZWssIGxhc3Qgd2VlaywgdGhpcyBtb250aCwgbGFzdCBtb250aCwgdGhpcyB5ZWFyLCBsYXN0IHllYXIsIGFsbFxuXG4qKkNVU1RPTSBSQU5HRVMqKiAocmFuZ2U6IFwiY3VzdG9tXCIgKyBzdGFydERhdGUgKyBlbmREYXRlIHJlcXVpcmVkKTpcbllvdSBNVVNUIGNvbnZlcnQgdXNlciBkYXRlIGV4cHJlc3Npb25zIGludG8gWVlZWS1NTS1ERCBmb3JtYXQuXG5cbioqQ09NTU9OIFBBVFRFUk5TICYgQ09OVkVSU0lPTlM6KipcblxuTW9udGggTmFtZXMg4oaSIE1vbnRoIE51bWJlcnM6XG5KYW49MDEsIEZlYj0wMiwgTWFyPTAzLCBBcHI9MDQsIE1heT0wNSwgSnVuPTA2LCBKdWw9MDcsIEF1Zz0wOCwgU2VwPTA5LCBPY3Q9MTAsIE5vdj0xMSwgRGVjPTEyXG5cbioqRXhhbXBsZXMgb2YgdXNlciBleHByZXNzaW9ucyDihpIgdG9vbCBhcmd1bWVudHM6Kipcbi0gXCJKdWx5IDIwMjVcIiDihpIge3JhbmdlOiBcImN1c3RvbVwiLCBzdGFydERhdGU6IFwiMjAyNS0wNy0wMVwiLCBlbmREYXRlOiBcIjIwMjUtMDctMzFcIn1cbi0gXCJEZWNlbWJlciAyMDI1XCIg4oaSIHtyYW5nZTogXCJjdXN0b21cIiwgc3RhcnREYXRlOiBcIjIwMjUtMTItMDFcIiwgZW5kRGF0ZTogXCIyMDI1LTEyLTMxXCJ9XG4tIFwiSnVseSB0byBEZWNlbWJlciAyMDI1XCIg4oaSIHtyYW5nZTogXCJjdXN0b21cIiwgc3RhcnREYXRlOiBcIjIwMjUtMDctMDFcIiwgZW5kRGF0ZTogXCIyMDI1LTEyLTMxXCJ9XG4tIFwiSmFudWFyeSB0byBNYXJjaCAyMDI0XCIg4oaSIHtyYW5nZTogXCJjdXN0b21cIiwgc3RhcnREYXRlOiBcIjIwMjQtMDEtMDFcIiwgZW5kRGF0ZTogXCIyMDI0LTAzLTMxXCJ9XG4tIFwiUTIgMjAyNVwiIOKGkiB7cmFuZ2U6IFwiY3VzdG9tXCIsIHN0YXJ0RGF0ZTogXCIyMDI1LTA0LTAxXCIsIGVuZERhdGU6IFwiMjAyNS0wNi0zMFwifVxuLSBcImxhc3QgMyBtb250aHNcIiDihpIgQ2FsY3VsYXRlIGZyb20gY3VycmVudCBkYXRlXG4tIFwiZnJvbSBKdW5lIDFzdCB0byBKdWx5IDE1dGhcIiDihpIge3JhbmdlOiBcImN1c3RvbVwiLCBzdGFydERhdGU6IFwiMjAyNS0wNi0wMVwiLCBlbmREYXRlOiBcIjIwMjUtMDctMTVcIn1cblxuKipEYXRlIEZvcm1hdHRpbmcgUnVsZXM6Kipcbi0gQUxXQVlTIHVzZSBZWVlZLU1NLUREIGZvcm1hdCAoNC1kaWdpdCB5ZWFyLCAyLWRpZ2l0IG1vbnRoLCAyLWRpZ2l0IGRheSlcbi0gRm9yIG1vbnRoIHJhbmdlczogc3RhcnREYXRlID0gMXN0IGRheSwgZW5kRGF0ZSA9IGxhc3QgZGF5XG4tIFdoZW4gdXNlciBzYXlzIFwiSnVseSB0byBEZWNlbWJlciAyMDI1XCI6IHN0YXJ0RGF0ZSA9IFwiMjAyNS0wNy0wMVwiLCBlbmREYXRlID0gXCIyMDI1LTEyLTMxXCJcbi0gV2hlbiB1c2VyIHNheXMgXCJKdWx5IDIwMjVcIjogVXNlIGZ1bGwgbW9udGggKDIwMjUtMDctMDEgdG8gMjAyNS0wNy0zMSlcblxuKipJbXBvcnRhbnQ6KiogSWYgdXNlciBwcm92aWRlcyBtb250aCBuYW1lcyBvciByZWxhdGl2ZSBkYXRlcywgWU9VIG11c3QgY29udmVydCB0aGVtIHRvIGV4YWN0IFlZWVktTU0tREQgZGF0ZXMuYCxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3RvZGF5JywgJ3llc3RlcmRheScsICd0aGlzIHdlZWsnLCAnbGFzdCB3ZWVrJywgJ3RoaXMgbW9udGgnLCAnbGFzdCBtb250aCcsICd0aGlzIHllYXInLCAnbGFzdCB5ZWFyJywgJ2FsbCcsICdjdXN0b20nXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdQcmVzZXQgZGF0ZSByYW5nZSwgb3IgXCJjdXN0b21cIiBmb3IgY3VzdG9tIGRhdGUgcmFuZ2UnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhcnREYXRlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1N0YXJ0IGRhdGUgaW4gWVlZWS1NTS1ERCBmb3JtYXQgKFJFUVVJUkVEIHdoZW4gcmFuZ2U9XCJjdXN0b21cIikuIEV4YW1wbGU6IFwiMjAyNS0wNy0wMVwiIGZvciBKdWx5IDFzdCwgMjAyNSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbmREYXRlOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0VuZCBkYXRlIGluIFlZWVktTU0tREQgZm9ybWF0IChSRVFVSVJFRCB3aGVuIHJhbmdlPVwiY3VzdG9tXCIpLiBFeGFtcGxlOiBcIjIwMjUtMTItMzFcIiBmb3IgRGVjZW1iZXIgMzFzdCwgMjAyNSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ3JhbmdlJ11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgIG5hbWU6ICdzZXRTdGF0c1RhYicsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnU3dpdGNoIGJldHdlZW4gdGFicyBvbiB0aGUgU3RhdGlzdGljcyBwYWdlLiBBdmFpbGFibGUgdGFiczogb3ZlcnZpZXcgKHN1bW1hcnkgbWV0cmljcyBhbmQga2V5IHN0YXRpc3RpY3MpLCBhbmFseXRpY3MgKGRldGFpbGVkIGFuYWx5c2lzIGFuZCBjaGFydHMpLCBwZXJmb3JtYW5jZSAocGVyZm9ybWFuY2UgbWV0cmljcyBhbmQgdHJhZGluZyBhbmFseXRpY3MpLiBVc2VycyBtaWdodCBzYXkgXCJzaG93IGFuYWx5dGljc1wiLCBcImdvIHRvIGFuYWx5dGljcyB0YWJcIiwgXCJzd2l0Y2ggdG8gb3ZlcnZpZXdcIiwgXCJzaG93IHBlcmZvcm1hbmNlIHRhYlwiLCBldGMuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHRhYjoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZW51bTogWydvdmVydmlldycsICdhbmFseXRpY3MnLCAncGVyZm9ybWFuY2UnXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUYWIgdG8gc3dpdGNoIHRvIG9uIHRoZSBzdGF0aXN0aWNzIHBhZ2U6IG92ZXJ2aWV3IChzdW1tYXJ5KSwgYW5hbHl0aWNzIChkZXRhaWxlZCBhbmFseXNpcyksIG9yIHBlcmZvcm1hbmNlIChtZXRyaWNzKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ3RhYiddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnYWN0aXZhdGVDb21wb25lbnQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogYEFjdGl2YXRlIGFueSBVSSBjb21wb25lbnQgb24gdGhlIGN1cnJlbnQgcGFnZS4gVGhpcyBpcyBhIGdlbmVyaWMgdG9vbCB0aGF0IHdvcmtzIHdpdGggdGFicywgYnV0dG9ucywgYWNjb3JkaW9ucywgcGFuZWxzLCBjYXJkcywgYW5kIG90aGVyIGludGVyYWN0aXZlIGVsZW1lbnRzLlxuXG4qKkNPTVBPTkVOVCBJREVOVElGSUNBVElPTiBGT1JNQVQ6KipcblVzZSB0aGUgcGF0dGVybjogXFxgcGFnZS1hcmVhLmNvbXBvbmVudC1uYW1lXFxgIG9yIFxcYHBhZ2UtbmFtZS5jb21wb25lbnQtdHlwZVxcYFxuXG4qKkNPTU1PTiBDT01QT05FTlRTIEJZIFBBR0U6KipcblxuKipTdGF0aXN0aWNzIFBhZ2UgKC9zdGF0aXN0aWNzKToqKlxuLSBzdGF0aXN0aWNzLnRhYnMuYW5hbHl0aWNzIC0gQW5hbHl0aWNzIHRhYlxuLSBzdGF0aXN0aWNzLnRhYnMub3ZlcnZpZXcgLSBPdmVydmlldyB0YWJcbi0gc3RhdGlzdGljcy50YWJzLnBlcmZvcm1hbmNlIC0gUGVyZm9ybWFuY2UgdGFiXG4tIHN0YXRpc3RpY3MuZmlsdGVycyAtIEZpbHRlciBwYW5lbFxuLSBzdGF0aXN0aWNzLmNoYXJ0cyAtIENoYXJ0IHNlY3Rpb25cbi0gc3RhdGlzdGljcy5tZXRyaWNzIC0gTWV0cmljcyBzZWN0aW9uXG5cbioqVHJhZGVzIFBhZ2UgKC90cmFkZXMpOioqXG4tIHRyYWRlcy5maWx0ZXJzIC0gRmlsdGVyIHBhbmVsXG4tIHRyYWRlcy50YWJsZSAtIFRyYWRlcyB0YWJsZVxuLSB0cmFkZXMubmV3LXRyYWRlLW1vZGFsIC0gTmV3IHRyYWRlIG1vZGFsXG4tIHRyYWRlcy5pbXBvcnQtbW9kYWwgLSBJbXBvcnQgbW9kYWxcblxuKipEYXNoYm9hcmQgKC9kYXNoYm9hcmQpOioqXG4tIGRhc2hib2FyZC5zdGF0cyAtIFN0YXRzIHNlY3Rpb25cbi0gZGFzaGJvYXJkLmNoYXJ0cyAtIENoYXJ0IHNlY3Rpb25cbi0gZGFzaGJvYXJkLnN1bW1hcnkgLSBEYWlseSBzdW1tYXJ5IGNhcmRcbi0gZGFzaGJvYXJkLm1ldHJpY3MgLSBBZGRpdGlvbmFsIG1ldHJpY3NcblxuKipKb3VybmFsIFBhZ2UgKC9qb3VybmFsKToqKlxuLSBqb3VybmFsLmZvbGRlci10cmVlIC0gRm9sZGVyIHRyZWVcbi0gam91cm5hbC5lZGl0b3IgLSBKb3VybmFsIGVkaXRvclxuLSBqb3VybmFsLmVudHJpZXMgLSBFbnRyaWVzIGxpc3RcblxuKipDYWxlbmRhciBQYWdlICgvY2FsZW5kYXIpOioqXG4tIGNhbGVuZGFyLnZpZXcgLSBDYWxlbmRhciB2aWV3XG4tIGNhbGVuZGFyLmV2ZW50cyAtIEV2ZW50cyBzZWN0aW9uXG5cbioqQUNUSU9OUzoqKlxuLSBjbGljayAtIENsaWNrIGEgYnV0dG9uIG9yIGxpbmtcbi0gZXhwYW5kIC0gRXhwYW5kIGFuIGFjY29yZGlvbiBvciBwYW5lbFxuLSBjb2xsYXBzZSAtIENvbGxhcHNlIGFuIGFjY29yZGlvbiBvciBwYW5lbFxuLSBvcGVuIC0gT3BlbiBhIG1vZGFsIG9yIGRyb3Bkb3duXG4tIGNsb3NlIC0gQ2xvc2UgYSBtb2RhbCBvciBkcm9wZG93blxuLSBzZWxlY3QgLSBTZWxlY3QgYW4gb3B0aW9uXG4tIGFjdGl2YXRlIC0gQWN0aXZhdGUgYSB0YWIgb3Igdmlld1xuLSB0b2dnbGUgLSBUb2dnbGUgYSBzd2l0Y2ggb3IgY2hlY2tib3hcblxuKipFWEFNUExFUzoqKlxuLSBcInN3aXRjaCB0byBhbmFseXRpY3MgdGFiXCIg4oaSIHtjb21wb25lbnQ6IFwic3RhdGlzdGljcy50YWJzLmFuYWx5dGljc1wiLCBhY3Rpb246IFwiYWN0aXZhdGVcIn1cbi0gXCJleHBhbmQgdGhlIGZpbHRlcnNcIiDihpIge2NvbXBvbmVudDogXCJ0cmFkZXMuZmlsdGVyc1wiLCBhY3Rpb246IFwiZXhwYW5kXCJ9XG4tIFwib3BlbiB0aGUgbmV3IHRyYWRlIG1vZGFsXCIg4oaSIHtjb21wb25lbnQ6IFwidHJhZGVzLm5ldy10cmFkZS1tb2RhbFwiLCBhY3Rpb246IFwib3BlblwifVxuLSBcInNjcm9sbCB0byB0aGUgY2hhcnQgc2VjdGlvblwiIOKGkiBVc2Ugc2Nyb2xsVG9FbGVtZW50IGluc3RlYWRcblxuKipJTVBPUlRBTlQ6KiogQWx3YXlzIGlkZW50aWZ5IHRoZSBjdXJyZW50IHBhZ2UgZmlyc3QsIHRoZW4gdXNlIHRoZSBhcHByb3ByaWF0ZSBjb21wb25lbnQgSUQgZm9yIHRoYXQgcGFnZS5gLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgY29tcG9uZW50OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbXBvbmVudCBpZGVudGlmaWVyIGluIGZvcm1hdDogcGFnZS5jb21wb25lbnQgKGUuZy4sIFwic3RhdGlzdGljcy50YWJzLmFuYWx5dGljc1wiLCBcInRyYWRlcy5maWx0ZXJzXCIsIFwiZGFzaGJvYXJkLmNoYXJ0c1wiKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGVudW06IFsnY2xpY2snLCAnZXhwYW5kJywgJ2NvbGxhcHNlJywgJ29wZW4nLCAnY2xvc2UnLCAnc2VsZWN0JywgJ2FjdGl2YXRlJywgJ3RvZ2dsZSddLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0FjdGlvbiB0byBwZXJmb3JtIG9uIHRoZSBjb21wb25lbnQgKGRlZmF1bHRzIHRvIFwiY2xpY2tcIiknXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3B0aW9uYWwgdmFsdWUgdG8gc2V0IChmb3Igc2VsZWN0cywgaW5wdXRzLCBldGMuKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2NvbXBvbmVudCddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnc2Nyb2xsVG9FbGVtZW50JyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBTY3JvbGwgdG8gYW55IHNwZWNpZmljIHNlY3Rpb24gb3IgY29tcG9uZW50IG9uIHRoZSBjdXJyZW50IHBhZ2UuXG5cbioqQ09NTU9OIFNDUk9MTCBUQVJHRVRTIEJZIFBBR0U6KipcblxuKipTdGF0aXN0aWNzIFBhZ2U6Kipcbi0gc3RhdGlzdGljcy5tZXRyaWNzIC0gU3RhdHMgc3VtbWFyeSBzZWN0aW9uXG4tIHN0YXRpc3RpY3MuY2hhcnRzIC0gQ2hhcnQgc2VjdGlvblxuLSBzdGF0aXN0aWNzLnBlcmZvcm1hbmNlIC0gUGVyZm9ybWFuY2UgbWV0cmljc1xuLSBzdGF0aXN0aWNzLmFuYWx5dGljcyAtIEFuYWx5dGljcyBzZWN0aW9uXG5cbioqVHJhZGVzIFBhZ2U6Kipcbi0gdHJhZGVzLnRhYmxlIC0gVHJhZGVzIHRhYmxlXG4tIHRyYWRlcy5zdW1tYXJ5IC0gVHJhZGUgc3VtbWFyeVxuXG4qKkRhc2hib2FyZDoqKlxuLSBkYXNoYm9hcmQuc3VtbWFyeSAtIERhaWx5IHN1bW1hcnkgY2FyZFxuLSBkYXNoYm9hcmQuY2hhcnRzIC0gQ2hhcnQgc2VjdGlvblxuLSBkYXNoYm9hcmQuc3RhdHMgLSBTdGF0cyBzZWN0aW9uXG5cbioqSm91cm5hbDoqKlxuLSBqb3VybmFsLmVkaXRvciAtIEVkaXRvciBzZWN0aW9uXG4tIGpvdXJuYWwuZW50cmllcyAtIEpvdXJuYWwgZW50cmllcyBsaXN0XG5cbioqU0NST0xMIEJFSEFWSU9SOioqXG4tIHNtb290aCAtIFNtb290aCBzY3JvbGxpbmcgYW5pbWF0aW9uIChkZWZhdWx0KVxuLSBpbnN0YW50IC0gSnVtcCBpbW1lZGlhdGVseVxuLSBhdXRvIC0gQnJvd3NlciBkZWZhdWx0XG5cbioqRVhBTVBMRVM6Kipcbi0gXCJzY3JvbGwgdG8gdGhlIGNoYXJ0IHNlY3Rpb25cIiDihpIge2VsZW1lbnQ6IFwiZGFzaGJvYXJkLmNoYXJ0c1wifVxuLSBcInNjcm9sbCBkb3duIHRvIHRoZSBzdGF0c1wiIOKGkiB7ZWxlbWVudDogXCJzdGF0aXN0aWNzLm1ldHJpY3NcIn1cbi0gXCJzaG93IG1lIHRoZSBwZXJmb3JtYW5jZSBtZXRyaWNzXCIg4oaSIHtlbGVtZW50OiBcInN0YXRpc3RpY3MucGVyZm9ybWFuY2VcIn1gLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgZWxlbWVudDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdFbGVtZW50IGlkZW50aWZpZXIgdG8gc2Nyb2xsIHRvIChlLmcuLCBcImRhc2hib2FyZC5jaGFydHNcIiwgXCJzdGF0aXN0aWNzLnBlcmZvcm1hbmNlXCIsIFwidHJhZGVzLnRhYmxlXCIpJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJlaGF2aW9yOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBlbnVtOiBbJ3Ntb290aCcsICdpbnN0YW50JywgJ2F1dG8nXSxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTY3JvbGwgYmVoYXZpb3I6IHNtb290aCAoYW5pbWF0ZWQpLCBpbnN0YW50IChqdW1wKSwgYXV0byAoYnJvd3NlciBkZWZhdWx0KSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2VsZW1lbnQnXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ3NldENvbXBvbmVudFN0YXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBDaGFuZ2UgdGhlIHN0YXRlIG9mIGFueSBjb21wb25lbnQgb24gdGhlIGN1cnJlbnQgcGFnZS4gV29ya3Mgd2l0aCB0b2dnbGVzLCBzd2l0Y2hlcywgZHJvcGRvd25zLCBmaWx0ZXJzLCBpbnB1dHMsIGFuZCBvdGhlciBzdGF0ZWZ1bCBjb21wb25lbnRzLlxuXG4qKkNPTU1PTiBTVEFURSBDSEFOR0VTIEJZIFBBR0U6KipcblxuKipTdGF0aXN0aWNzIFBhZ2U6Kipcbi0gc3RhdGlzdGljcy5kaXNwbGF5LW1vZGUgLSBDaGFuZ2UgZGlzcGxheSBtb2RlIChkb2xsYXIvcl9tdWx0aXBsZS9wZXJjZW50YWdlKVxuLSBzdGF0aXN0aWNzLmRhdGUtcmFuZ2UgLSBDaGFuZ2UgZGF0ZSByYW5nZSBmaWx0ZXJcbi0gc3RhdGlzdGljcy5zb3J0LWZpZWxkIC0gQ2hhbmdlIHNvcnQgZmllbGRcbi0gc3RhdGlzdGljcy5zb3J0LWRpcmVjdGlvbiAtIENoYW5nZSBzb3J0IGRpcmVjdGlvblxuXG4qKlRyYWRlcyBQYWdlOioqXG4tIHRyYWRlcy5kaXNwbGF5LW1vZGUgLSBDaGFuZ2UgZGlzcGxheSBtb2RlXG4tIHRyYWRlcy5kYXRlLXJhbmdlIC0gQ2hhbmdlIGRhdGUgcmFuZ2Vcbi0gdHJhZGVzLmZpbHRlcnMuc3ltYm9sIC0gRmlsdGVyIGJ5IHN5bWJvbFxuLSB0cmFkZXMuZmlsdGVycy50YWdzIC0gRmlsdGVyIGJ5IHRhZ3Ncbi0gdHJhZGVzLmZpbHRlcnMuc2lkZSAtIEZpbHRlciBieSBzaWRlIChidXkvc2VsbClcblxuKipEYXNoYm9hcmQ6Kipcbi0gZGFzaGJvYXJkLmRpc3BsYXktbW9kZSAtIENoYW5nZSBkaXNwbGF5IG1vZGVcbi0gZGFzaGJvYXJkLmRhdGUtcmFuZ2UgLSBDaGFuZ2UgZGF0ZSByYW5nZVxuXG4qKkpvdXJuYWw6Kipcbi0gam91cm5hbC5zZWxlY3RlZC1mb2xkZXIgLSBDaGFuZ2Ugc2VsZWN0ZWQgZm9sZGVyXG4tIGpvdXJuYWwuc2VhcmNoIC0gU2VhcmNoIHF1ZXJ5XG5cbioqRVhBTVBMRVM6Kipcbi0gXCJjaGFuZ2UgdG8gUiBtb2RlXCIg4oaSIHtjb21wb25lbnQ6IFwic3RhdGlzdGljcy5kaXNwbGF5LW1vZGVcIiwgc3RhdGU6IFwicl9tdWx0aXBsZVwifVxuLSBcImZpbHRlciBieSBBQVBMXCIg4oaSIHtjb21wb25lbnQ6IFwidHJhZGVzLmZpbHRlcnMuc3ltYm9sXCIsIHN0YXRlOiBcIkFBUExcIn1cbi0gXCJzaG93IGxhc3QgMzAgZGF5c1wiIOKGkiB7Y29tcG9uZW50OiBcInRyYWRlcy5kYXRlLXJhbmdlXCIsIHN0YXRlOiBcImxhc3QgMzAgZGF5c1wifVxuLSBcInNvcnQgYnkgZGF0ZVwiIOKGkiB7Y29tcG9uZW50OiBcInN0YXRpc3RpY3Muc29ydC1maWVsZFwiLCBzdGF0ZTogXCJkYXRlXCJ9YCxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGNvbXBvbmVudDoge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDb21wb25lbnQgaWRlbnRpZmllciAoZS5nLiwgXCJzdGF0aXN0aWNzLmRpc3BsYXktbW9kZVwiLCBcInRyYWRlcy5maWx0ZXJzLnN5bWJvbFwiKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ05ldyBzdGF0ZSB2YWx1ZSAoY2FuIGJlIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvYmplY3QsIGV0Yy4pJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHByb3BlcnR5OiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09wdGlvbmFsIHByb3BlcnR5IG5hbWUgdG8gc2V0IChpZiBjb21wb25lbnQgaGFzIG11bHRpcGxlIHByb3BlcnRpZXMpJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnY29tcG9uZW50JywgJ3N0YXRlJ11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgIG5hbWU6ICdjcmVhdGVTbmFwc2hvdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgQ2FwdHVyZSB0aGUgY3VycmVudCBwYWdlIHN0YXRlIGFzIGEgbmFtZWQgc25hcHNob3QgZm9yIGxhdGVyIGNvbXBhcmlzb24uIFNuYXBzaG90cyBzYXZlIGFsbCBjdXJyZW50IGZpbHRlcnMsIHN0YXRpc3RpY3MsIGFuZCBtZXRyaWNzIHNvIHlvdSBjYW4gY29tcGFyZSBkaWZmZXJlbnQgY29uZmlndXJhdGlvbnMgb3IgZGF0ZSByYW5nZXMuXG5cbioqVVNFIENBU0VTOioqXG4tIFNhdmUgY3VycmVudCBmaWx0ZXIgc3RhdGUgYmVmb3JlIG1ha2luZyBjaGFuZ2VzXG4tIENhcHR1cmUgcGVyZm9ybWFuY2UgbWV0cmljcyBmb3Igc3BlY2lmaWMgZGF0ZSByYW5nZXNcbi0gUmVjb3JkIHN0YXRpc3RpY3MgZm9yIGRpZmZlcmVudCB0cmFkaW5nIHN0cmF0ZWdpZXNcbi0gQ3JlYXRlIGJhc2VsaW5lIGNvbXBhcmlzb25zIGZvciBhbmFseXNpc1xuXG4qKkVYQU1QTEVTOioqXG4tIFwiU2F2ZSB0aGlzIGFzIGEgc25hcHNob3QgY2FsbGVkIExvbmctb25seSB0cmFkZXNcIlxuLSBcIkNyZWF0ZSBhIHNuYXBzaG90IGNhbGxlZCBRNCAyMDI0IHBlcmZvcm1hbmNlXCJcbi0gXCJTYXZlIGN1cnJlbnQgc3RhdGUgYXMgTGFzdCAzMCBkYXlzIGJhc2VsaW5lXCJcblxuKipTTkFQU0hPVCBMSU1JVFM6Kipcbi0gTWF4aW11bSAxMCBzbmFwc2hvdHMgKG9sZGVzdCBhdXRvbWF0aWNhbGx5IGRlbGV0ZWQpXG4tIFNuYXBzaG90cyBwZXJzaXN0IGFjcm9zcyBzZXNzaW9uc1xuLSBFYWNoIHNuYXBzaG90IGluY2x1ZGVzOiBmaWx0ZXJzLCBzdGF0aXN0aWNzLCB0cmFkZSBJRHMsIHRpbWVzdGFtcGAsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Rlc2NyaXB0aXZlIG5hbWUgZm9yIHRoZSBzbmFwc2hvdCAoZS5nLiwgXCJMb25nLW9ubHkgdHJhZGVzXCIsIFwiUTQgMjAyNFwiLCBcIkxhc3QgMzAgZGF5c1wiKScsXG4gICAgICAgICAgICAgIG1pbkxlbmd0aDogMSxcbiAgICAgICAgICAgICAgbWF4TGVuZ3RoOiA1MFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVxdWlyZWQ6IFsnbmFtZSddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnbGlzdFNuYXBzaG90cycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgTGlzdCBhbGwgc2F2ZWQgc25hcHNob3RzIHdpdGggdGhlaXIgbmFtZXMsIHRpbWVzdGFtcHMsIGFuZCBrZXkgc3RhdGlzdGljcy4gVXNlIHRoaXMgdG8gc2VlIHdoYXQgc25hcHNob3RzIGFyZSBhdmFpbGFibGUgYmVmb3JlIGNvbXBhcmluZyB0aGVtLlxuXG4qKlJFVFVSTlM6Kipcbi0gU25hcHNob3QgbmFtZXMgYW5kIElEc1xuLSBDcmVhdGlvbiB0aW1lc3RhbXBzXG4tIFRyYWRlIGNvdW50c1xuLSBXaW4gcmF0ZXNcbi0gVG90YWwgUCZMXG4tIFBhZ2Ugd2hlcmUgc25hcHNob3Qgd2FzIGNyZWF0ZWRcblxuKipFWEFNUExFUzoqKlxuLSBcIldoYXQgc25hcHNob3RzIGRvIEkgaGF2ZSBzYXZlZD9cIlxuLSBcIlNob3cgbWUgYWxsIG15IHNhdmVkIHNuYXBzaG90c1wiXG4tIFwiTGlzdCBhdmFpbGFibGUgc25hcHNob3RzXCJgLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge30sXG4gICAgICAgICAgcmVxdWlyZWQ6IFtdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIHtcbiAgICAgIHR5cGU6ICdmdW5jdGlvbicsXG4gICAgICBmdW5jdGlvbjoge1xuICAgICAgICBuYW1lOiAnY29tcGFyZVNuYXBzaG90cycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgQ29tcGFyZSB0d28gc2F2ZWQgc25hcHNob3RzIGFuZCBnZW5lcmF0ZSBpbnNpZ2h0cyBhYm91dCBwZXJmb3JtYW5jZSBkaWZmZXJlbmNlcy4gVGhpcyByZXZlYWxzIGhvdyBkaWZmZXJlbnQgZmlsdGVycywgZGF0ZSByYW5nZXMsIG9yIHN0cmF0ZWdpZXMgYWZmZWN0IHRyYWRpbmcgcGVyZm9ybWFuY2UuXG5cbioqVVNFIENBU0VTOioqXG4tIENvbXBhcmUgTG9uZy1vbmx5IHZzIEFsbCB0cmFkZXMgcGVyZm9ybWFuY2Vcbi0gQW5hbHl6ZSBwZXJmb3JtYW5jZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGRhdGUgcmFuZ2VzXG4tIENvbXBhcmUgcmVzdWx0cyBvZiBkaWZmZXJlbnQgZmlsdGVyIGNvbmZpZ3VyYXRpb25zXG4tIEV2YWx1YXRlIHN0cmF0ZWd5IGNoYW5nZXMgb3ZlciB0aW1lXG5cbioqRVhBTVBMRVM6Kipcbi0gXCJDb21wYXJlIExvbmctb25seSB0cmFkZXMgd2l0aCBBbGwgdHJhZGVzIHNuYXBzaG90XCJcbi0gXCJDb21wYXJlIFEzIDIwMjQgd2l0aCBRNCAyMDI0XCJcbi0gXCJTaG93IG1lIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gTGFzdCAzMCBkYXlzIGFuZCBMYXN0IDkwIGRheXNcIlxuXG4qKkNPTVBBUklTT04gTUVUUklDUzoqKlxuLSBUcmFkZSBjb3VudCBjaGFuZ2VzXG4tIFdpbiByYXRlIGRpZmZlcmVuY2VzXG4tIFRvdGFsIFAmTCBjb21wYXJpc29uXG4tIFByb2ZpdCBmYWN0b3IgY2hhbmdlc1xuLSBFeHBlY3RhbmN5IGRpZmZlcmVuY2VzXG4tIFJpc2sgbWV0cmljcyAobWF4IGRyYXdkb3duLCBsYXJnZXN0IHdpbi9sb3NzKWAsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzbmFwc2hvdDE6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTmFtZSBvciBJRCBvZiB0aGUgZmlyc3Qgc25hcHNob3QgdG8gY29tcGFyZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzbmFwc2hvdDI6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTmFtZSBvciBJRCBvZiB0aGUgc2Vjb25kIHNuYXBzaG90IHRvIGNvbXBhcmUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydzbmFwc2hvdDEnLCAnc25hcHNob3QyJ11cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAge1xuICAgICAgdHlwZTogJ2Z1bmN0aW9uJyxcbiAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgIG5hbWU6ICdjb21wYXJlQ3VycmVudFdpdGhTbmFwc2hvdCcsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgQ29tcGFyZSB0aGUgY3VycmVudCBwYWdlIHN0YXRlIHdpdGggYSBwcmV2aW91c2x5IHNhdmVkIHNuYXBzaG90LiBUaGlzIGlzIHVzZWZ1bCBmb3Igc2VlaW5nIGhvdyByZWNlbnQgY2hhbmdlcyBhZmZlY3QgcGVyZm9ybWFuY2UgY29tcGFyZWQgdG8gYSBzYXZlZCBiYXNlbGluZS5cblxuKipVU0UgQ0FTRVM6Kipcbi0gQ29tcGFyZSBjdXJyZW50IGZpbHRlcnMgd2l0aCBzYXZlZCBiYXNlbGluZVxuLSBFdmFsdWF0ZSByZWNlbnQgcGVyZm9ybWFuY2UgY2hhbmdlc1xuLSBDaGVjayBpZiBjdXJyZW50IHNldHRpbmdzIGltcHJvdmUgdnMgcHJldmlvdXMgY29uZmlndXJhdGlvblxuXG4qKkVYQU1QTEVTOioqXG4tIFwiQ29tcGFyZSBjdXJyZW50IHN0YXRlIHdpdGggbXkgTG9uZy1vbmx5IHNuYXBzaG90XCJcbi0gXCJIb3cgZG9lcyB0aGUgY3VycmVudCBzdGF0ZSBjb21wYXJlIHRvIExhc3QgMzAgZGF5cz9cIlxuLSBcIlNob3cgbWUgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBub3cgYW5kIFE0IDIwMjRcImAsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBzbmFwc2hvdE5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTmFtZSBvciBJRCBvZiB0aGUgc25hcHNob3QgdG8gY29tcGFyZSB3aXRoIGN1cnJlbnQgc3RhdGUnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydzbmFwc2hvdE5hbWUnXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICB7XG4gICAgICB0eXBlOiAnZnVuY3Rpb24nLFxuICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgbmFtZTogJ2RlbGV0ZVNuYXBzaG90JyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBEZWxldGUgYSBwcmV2aW91c2x5IHNhdmVkIHNuYXBzaG90LiBVc2UgdGhpcyB0byByZW1vdmUgb2xkIG9yIG91dGRhdGVkIHNuYXBzaG90cy5cblxuKipVU0UgQ0FTRVM6Kipcbi0gUmVtb3ZlIG91dGRhdGVkIHNuYXBzaG90c1xuLSBDbGVhciBvbGQgYmFzZWxpbmVzXG4tIE1hbmFnZSBzbmFwc2hvdCBzdG9yYWdlXG5cbioqRVhBTVBMRVM6Kipcbi0gXCJEZWxldGUgdGhlIExvbmctb25seSBzbmFwc2hvdFwiXG4tIFwiUmVtb3ZlIHRoZSBRMyAyMDI0IHNuYXBzaG90XCJcbi0gXCJDbGVhciB0aGUgTGFzdCAzMCBkYXlzIHNuYXBzaG90XCJgLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgc25hcHNob3ROYW1lOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ05hbWUgb3IgSUQgb2YgdGhlIHNuYXBzaG90IHRvIGRlbGV0ZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ3NuYXBzaG90TmFtZSddXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIF1cbn1cblxuLy8gVG9vbCBjYWxsIGZvcm1hdFxuaW50ZXJmYWNlIFRvb2xDYWxsIHtcbiAgdG9vbDogc3RyaW5nXG4gIGFyZ3M6IGFueVxufVxuXG4vKipcbiAqIEZvcm1hdCBDb3BpbG90S2l0IGNvbnRleHQgZm9yIGluY2x1c2lvbiBpbiBBSSBwcm9tcHRcbiAqIENvbnZlcnRzIHN0cnVjdHVyZWQgY29udGV4dCBkYXRhIGludG8gcmVhZGFibGUgZm9ybWF0IGZvciB0aGUgQUlcbiAqL1xuZnVuY3Rpb24gZm9ybWF0Q29udGV4dEZvclByb21wdChjb250ZXh0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+KTogc3RyaW5nIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW11cblxuICAvLyBHcm91cCBjb250ZXh0IGJ5IHBhZ2UvY29tcG9uZW50XG4gIGNvbnN0IGRhc2hib2FyZE1ldHJpY3M6IHN0cmluZ1tdID0gW11cbiAgY29uc3QgY2FsZW5kYXJEYXRhOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IHRyYWRlc0RhdGE6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgc3RhdHNEYXRhOiBzdHJpbmdbXSA9IFtdXG4gIGNvbnN0IGRhaWx5U3VtbWFyeURhdGE6IHN0cmluZ1tdID0gW11cbiAgY29uc3Qgb3RoZXJEYXRhOiBzdHJpbmdbXSA9IFtdXG5cbiAgT2JqZWN0LmVudHJpZXMoY29udGV4dCkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgLy8gU2tpcCB1bmRlZmluZWQgb3IgbnVsbCB2YWx1ZXNcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuXG5cbiAgICAvLyBDYXRlZ29yaXplIGJ5IGtleSBwcmVmaXhcbiAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ3RvdGFsUG5MJykgfHwga2V5LnN0YXJ0c1dpdGgoJ3dpblJhdGUnKSB8fCBrZXkuc3RhcnRzV2l0aCgncHJvZml0RmFjdG9yJykgfHxcbiAgICAgICAga2V5LnN0YXJ0c1dpdGgoJ2V4cGVjdGFuY3knKSB8fCBrZXkuc3RhcnRzV2l0aCgnbWF4RHJhd2Rvd24nKSB8fCBrZXkuc3RhcnRzV2l0aCgnYXZlcmFnZScpKSB7XG4gICAgICBkYXNoYm9hcmRNZXRyaWNzLnB1c2goYCAgLSAke2tleX06ICR7Zm9ybWF0VmFsdWUodmFsdWUpfWApXG4gICAgfSBlbHNlIGlmIChrZXkuc3RhcnRzV2l0aCgnY3VycmVudFllYXInKSB8fCBrZXkuc3RhcnRzV2l0aCgnc2VsZWN0ZWRNb250aCcpIHx8XG4gICAgICAgICAgICAgICBrZXkuc3RhcnRzV2l0aCgndmlld01vZGUnKSB8fCBrZXkuc3RhcnRzV2l0aCgnbW9udGhseU1vbnRocycpKSB7XG4gICAgICBjYWxlbmRhckRhdGEucHVzaChgICAtICR7a2V5fTogJHtmb3JtYXRWYWx1ZSh2YWx1ZSl9YClcbiAgICB9IGVsc2UgaWYgKGtleS5zdGFydHNXaXRoKCd0b3RhbFRyYWRlcycpIHx8IGtleS5zdGFydHNXaXRoKCd3aW5uaW5nVHJhZGVzJykgfHxcbiAgICAgICAgICAgICAgIGtleS5zdGFydHNXaXRoKCdsb3NpbmdUcmFkZXMnKSB8fCBrZXkuc3RhcnRzV2l0aCgnbGFyZ2VzdCcpKSB7XG4gICAgICBzdGF0c0RhdGEucHVzaChgICAtICR7a2V5fTogJHtmb3JtYXRWYWx1ZSh2YWx1ZSl9YClcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2N1cnJlbnRQYWdlJykge1xuICAgICAgb3RoZXJEYXRhLnB1c2goYCAgLSAke2tleX06ICR7dmFsdWV9YClcbiAgICB9IGVsc2Uge1xuICAgICAgb3RoZXJEYXRhLnB1c2goYCAgLSAke2tleX06ICR7Zm9ybWF0VmFsdWUodmFsdWUpfWApXG4gICAgfVxuICB9KVxuXG4gIC8vIEJ1aWxkIGZvcm1hdHRlZCBzZWN0aW9uc1xuICBpZiAoZGFzaGJvYXJkTWV0cmljcy5sZW5ndGggPiAwKSB7XG4gICAgbGluZXMucHVzaCgnKipEYXNoYm9hcmQgTWV0cmljczoqKicpXG4gICAgbGluZXMucHVzaCguLi5kYXNoYm9hcmRNZXRyaWNzKVxuICB9XG5cbiAgaWYgKHN0YXRzRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgbGluZXMucHVzaCgnKipTdGF0aXN0aWNzOioqJylcbiAgICBsaW5lcy5wdXNoKC4uLnN0YXRzRGF0YSlcbiAgfVxuXG4gIGlmIChjYWxlbmRhckRhdGEubGVuZ3RoID4gMCkge1xuICAgIGxpbmVzLnB1c2goJyoqQ2FsZW5kYXIgRGF0YToqKicpXG4gICAgbGluZXMucHVzaCguLi5jYWxlbmRhckRhdGEpXG4gIH1cblxuICBpZiAodHJhZGVzRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgbGluZXMucHVzaCgnKipUcmFkZXMgRGF0YToqKicpXG4gICAgbGluZXMucHVzaCguLi50cmFkZXNEYXRhKVxuICB9XG5cbiAgaWYgKGRhaWx5U3VtbWFyeURhdGEubGVuZ3RoID4gMCkge1xuICAgIGxpbmVzLnB1c2goJyoqRGFpbHkgU3VtbWFyeToqKicpXG4gICAgbGluZXMucHVzaCguLi5kYWlseVN1bW1hcnlEYXRhKVxuICB9XG5cbiAgaWYgKG90aGVyRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgbGluZXMucHVzaCgnKipPdGhlciBDb250ZXh0OioqJylcbiAgICBsaW5lcy5wdXNoKC4uLm90aGVyRGF0YSlcbiAgfVxuXG4gIHJldHVybiBsaW5lcy5sZW5ndGggPiAwID8gbGluZXMuam9pbignXFxuJykgOiAnTm8gY29udGV4dCBkYXRhIGF2YWlsYWJsZSdcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSB2YWx1ZSBmb3IgZGlzcGxheSBpbiB0aGUgcHJvbXB0XG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIC8vIEZvcm1hdCBudW1iZXJzIG5pY2VseVxuICAgIGlmIChNYXRoLmFicyh2YWx1ZSkgPj0gMTAwMDAwMCkge1xuICAgICAgcmV0dXJuIGAkJHsodmFsdWUgLyAxMDAwMDAwKS50b0ZpeGVkKDIpfU1gXG4gICAgfSBlbHNlIGlmIChNYXRoLmFicyh2YWx1ZSkgPj0gMTAwMCkge1xuICAgICAgcmV0dXJuIGAkJHsodmFsdWUgLyAxMDAwKS50b0ZpeGVkKDEpfUtgXG4gICAgfSBlbHNlIGlmIChNYXRoLmFicyh2YWx1ZSkgPCAxMCAmJiB2YWx1ZSAhPT0gMCkge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvRml4ZWQoMilcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKClcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gdmFsdWUgPyAnWWVzJyA6ICdObydcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBgJHt2YWx1ZS5sZW5ndGh9IGl0ZW1zYFxuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIDIpXG4gIH1cbiAgcmV0dXJuIFN0cmluZyh2YWx1ZSlcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpXG4gICAgY29uc29sZS5sb2coJ1xcbj09PSBBRy1VSSBBUEk6IFJFUVVFU1QgUkVDRUlWRUQgPT09JylcbiAgICBjb25zb2xlLmxvZygnTWVzc2FnZSAoZmlyc3QgMTAwIGNoYXJzKTonLCBib2R5Lm1lc3NhZ2U/LnN1YnN0cmluZygwLCAxMDApKVxuICAgIGNvbnNvbGUubG9nKCdIYXMgYXR0YWNoZWRGaWxlPycsICEhYm9keS5hdHRhY2hlZEZpbGUpXG4gICAgY29uc29sZS5sb2coJ0F0dGFjaGVkIGZpbGUgbmFtZTonLCBib2R5LmF0dGFjaGVkRmlsZT8ubmFtZSlcbiAgICBjb25zb2xlLmxvZygnSGFzIGZpbGUgY29udGVudD8nLCAhIWJvZHkuYXR0YWNoZWRGaWxlPy5jb250ZW50KVxuICAgIGNvbnNvbGUubG9nKCdGaWxlIGNvbnRlbnQgbGVuZ3RoOicsIGJvZHkuYXR0YWNoZWRGaWxlPy5jb250ZW50Py5sZW5ndGggfHwgMClcbiAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXG4nKVxuXG4gICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkIGlmIGF0dGFjaGVkXG4gICAgaWYgKGJvZHkuYXR0YWNoZWRGaWxlICYmIGJvZHkuYXR0YWNoZWRGaWxlLm5hbWUgJiYgYm9keS5hdHRhY2hlZEZpbGUuY29udGVudCkge1xuICAgICAgY29uc29sZS5sb2coJ+KcheKcheKchSBGSUxFIERFVEVDVEVEIC0gUHJvY2Vzc2luZzonLCBib2R5LmF0dGFjaGVkRmlsZS5uYW1lKVxuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+TnSBTdGFydGluZyBmaWxlIHByb2Nlc3NpbmcuLi4nKVxuXG4gICAgICAgIC8vIERlY29kZSBiYXNlNjQgY29udGVudCB0byBhbmFseXplIHRoZSBDU1ZcbiAgICAgICAgY29uc3QgYmFzZTY0Q29udGVudCA9IGJvZHkuYXR0YWNoZWRGaWxlLmNvbnRlbnRcbiAgICAgICAgY29uc29sZS5sb2coJyAgIGJhc2U2NCBsZW5ndGg6JywgYmFzZTY0Q29udGVudC5sZW5ndGgpXG5cbiAgICAgICAgY29uc3QgY3N2Qnl0ZXMgPSBCdWZmZXIuZnJvbShiYXNlNjRDb250ZW50LCAnYmFzZTY0JylcbiAgICAgICAgY29uc29sZS5sb2coJyAgIGRlY29kZWQgYnl0ZSBsZW5ndGg6JywgY3N2Qnl0ZXMubGVuZ3RoKVxuXG4gICAgICAgIC8vIE5vZGUuanMgZG9lc24ndCBzdXBwb3J0ICd1dGYtOC1zaWcnLCBzbyB3ZSB1c2UgdXRmLTggYW5kIG1hbnVhbGx5IHJlbW92ZSBCT00gaWYgcHJlc2VudFxuICAgICAgICBsZXQgY3N2VGV4dCA9IGNzdkJ5dGVzLnRvU3RyaW5nKCd1dGYtOCcpXG5cbiAgICAgICAgLy8gUmVtb3ZlIFVURi04IEJPTSBpZiBwcmVzZW50IChFRiBCQiBCRilcbiAgICAgICAgaWYgKGNzdkJ5dGVzLmxlbmd0aCA+PSAzICYmIGNzdkJ5dGVzWzBdID09PSAweEVGICYmIGNzdkJ5dGVzWzFdID09PSAweEJCICYmIGNzdkJ5dGVzWzJdID09PSAweEJGKSB7XG4gICAgICAgICAgY3N2VGV4dCA9IGNzdlRleHQuc2xpY2UoMSkgLy8gUmVtb3ZlIHRoZSBCT00gY2hhcmFjdGVyXG4gICAgICAgICAgY29uc29sZS5sb2coJyAgIEJPTSBkZXRlY3RlZCBhbmQgcmVtb3ZlZCcpXG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnICAgZGVjb2RlZCB0ZXh0IGxlbmd0aDonLCBjc3ZUZXh0Lmxlbmd0aClcbiAgICAgICAgY29uc29sZS5sb2coJyAgIGZpcnN0IDEwMCBjaGFyczonLCBjc3ZUZXh0LnN1YnN0cmluZygwLCAxMDApKVxuXG4gICAgICAgIC8vIFBhcnNlIENTViB0byBnZXQgYmFzaWMgaW5mb1xuICAgICAgICBjb25zdCBsaW5lcyA9IGNzdlRleHQuc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IGxpbmUudHJpbSgpKVxuICAgICAgICBjb25zdCBoZWFkZXJMaW5lID0gbGluZXNbMF0gfHwgJydcbiAgICAgICAgY29uc3QgdHJhZGVDb3VudCA9IE1hdGgubWF4KDAsIGxpbmVzLmxlbmd0aCAtIDEpIC8vIFN1YnRyYWN0IGhlYWRlciByb3dcblxuICAgICAgICBjb25zb2xlLmxvZygnICAgbGluZXMgZm91bmQ6JywgbGluZXMubGVuZ3RoKVxuICAgICAgICBjb25zb2xlLmxvZygnICAgdHJhZGUgY291bnQ6JywgdHJhZGVDb3VudClcbiAgICAgICAgY29uc29sZS5sb2coJyAgIGhlYWRlcjonLCBoZWFkZXJMaW5lKVxuXG4gICAgICAgIC8vIEV4dHJhY3QgY29sdW1uIG5hbWVzIGZyb20gaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSBoZWFkZXJMaW5lLnNwbGl0KCcsJykubWFwKGNvbCA9PiBjb2wudHJpbSgpKVxuICAgICAgICBjb25zb2xlLmxvZygnICAgY29sdW1uczonLCBjb2x1bW5zKVxuXG4gICAgICAgIC8vIEltcG9ydCB0cmFkZXMgdG8gZGF0YWJhc2VcbiAgICAgICAgbGV0IGltcG9ydFJlc3VsdCA9ICdJbXBvcnQgcGVuZGluZy4uLidcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBTdGFydGluZyB0cmFkZSBpbXBvcnQuLi4nKVxuICAgICAgICAgIGNvbnN0IGltcG9ydFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7cHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDo2NTY1J30vYXBpL3RyYWRlcy91cHNlcnRgLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICBjc3ZDb250ZW50OiBiYXNlNjRDb250ZW50LFxuICAgICAgICAgICAgICBmaWxlTmFtZTogYm9keS5hdHRhY2hlZEZpbGUubmFtZSxcbiAgICAgICAgICAgICAgdXNlcklkOiBib2R5LnVzZXJJZCB8fCAnYW5vbnltb3VzJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuXG4gICAgICAgICAgaWYgKGltcG9ydFJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBpbXBvcnREYXRhID0gYXdhaXQgaW1wb3J0UmVzcG9uc2UuanNvbigpXG4gICAgICAgICAgICBpbXBvcnRSZXN1bHQgPSBpbXBvcnREYXRhLm1lc3NhZ2UgfHwgYEltcG9ydGVkICR7aW1wb3J0RGF0YS5pbXBvcnRlZCB8fCAwfSB0cmFkZXNgXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFRyYWRlIGltcG9ydCBzdWNjZXNzZnVsOicsIGltcG9ydFJlc3VsdClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1wb3J0UmVzdWx0ID0gJ0ltcG9ydCBmYWlsZWQgLSBwbGVhc2UgdHJ5IGFnYWluJ1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFRyYWRlIGltcG9ydCBmYWlsZWQ6JywgaW1wb3J0UmVzcG9uc2Uuc3RhdHVzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoaW1wb3J0RXJyb3IpIHtcbiAgICAgICAgICBpbXBvcnRSZXN1bHQgPSAnSW1wb3J0IGZhaWxlZCAtIHBsZWFzZSB0cnkgYWdhaW4nXG4gICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIFRyYWRlIGltcG9ydCBlcnJvcjonLCBpbXBvcnRFcnJvcilcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBmaWxlIGluZm8gdG8gdGhlIG1lc3NhZ2UgZm9yIEFJIHRvIGFja25vd2xlZGdlXG4gICAgICAgIGNvbnN0IGZpbGVJbmZvID0gYFxcblxcblvwn5OOIEZJTEUgVVBMT0FERUQ6ICR7Ym9keS5hdHRhY2hlZEZpbGUubmFtZX1dXG4tIFR5cGU6IENTViBmaWxlIHdpdGggJHt0cmFkZUNvdW50fSB0cmFkZShzKVxuLSBDb2x1bW5zOiAke2NvbHVtbnMuc2xpY2UoMCwgNSkuam9pbignLCAnKX0ke2NvbHVtbnMubGVuZ3RoID4gNSA/ICcuLi4nIDogJyd9XG4tIFN0YXR1czogJHtpbXBvcnRSZXN1bHR9YFxuXG4gICAgICAgIC8vIEFwcGVuZCBmaWxlIGluZm8gdG8gbWVzc2FnZVxuICAgICAgICBpZiAoYm9keS5tZXNzYWdlKSB7XG4gICAgICAgICAgYm9keS5tZXNzYWdlID0gYm9keS5tZXNzYWdlICsgZmlsZUluZm9cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBib2R5Lm1lc3NhZ2UgPSBmaWxlSW5mb1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ+KchSBGaWxlIGluZm8gYWRkZWQgdG8gbWVzc2FnZTonLCB7IGZpbGVOYW1lOiBib2R5LmF0dGFjaGVkRmlsZS5uYW1lLCB0cmFkZUNvdW50IH0pXG4gICAgICAgIGNvbnNvbGUubG9nKCfwn5OLIE1lc3NhZ2Ugbm93IGNvbnRhaW5zOicsIGJvZHkubWVzc2FnZS5zdWJzdHJpbmcoMCwgMzAwKSlcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfk4sgSGFzIGZpbGUgbWFya2VyPycsIGJvZHkubWVzc2FnZS5pbmNsdWRlcygn8J+TjiBGSUxFIFVQTE9BREVEJykpXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgcHJvY2Vzc2luZyBmaWxlOicsIGVycm9yKVxuICAgICAgICBjb25zb2xlLmVycm9yKCcgICBFcnJvciBkZXRhaWxzOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IFN0cmluZyhlcnJvcikpXG5cbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gYFxcblxcblvinYwgRklMRSBVUExPQUQgRVJST1I6ICR7Ym9keS5hdHRhY2hlZEZpbGUubmFtZX1dXG4ke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIGZpbGUnfWBcblxuICAgICAgICBpZiAoYm9keS5tZXNzYWdlKSB7XG4gICAgICAgICAgYm9keS5tZXNzYWdlID0gYm9keS5tZXNzYWdlICsgZXJyb3JNZXNzYWdlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYm9keS5tZXNzYWdlID0gZXJyb3JNZXNzYWdlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMb2FkIGR5bmFtaWMgc2l0ZSBrbm93bGVkZ2VcbiAgICBjb25zdCBzaXRlTWFuaWZlc3QgPSBsb2FkU2l0ZU1hbmlmZXN0KClcbiAgICBjb25zdCBzaXRlUHJvbXB0ID0gbG9hZFNpdGVQcm9tcHQoKVxuXG4gICAgLy8gRXh0cmFjdCBtZXNzYWdlc1xuICAgIGxldCBtZXNzYWdlcyA9IFtdXG4gICAgaWYgKGJvZHkubWVzc2FnZXMgJiYgQXJyYXkuaXNBcnJheShib2R5Lm1lc3NhZ2VzKSkge1xuICAgICAgbWVzc2FnZXMgPSBib2R5Lm1lc3NhZ2VzXG4gICAgfSBlbHNlIGlmIChib2R5Lm1lc3NhZ2UpIHtcbiAgICAgIG1lc3NhZ2VzID0gW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiBib2R5Lm1lc3NhZ2UgfV1cbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZXMgPSBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdIZWxsbycgfV1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGVuaGFuY2VkIGNvbnRleHQgZnJvbSB1c2VDb3BpbG90UmVhZGFibGUgaG9va3NcbiAgICBjb25zdCBjb3BpbG90Q29udGV4dCA9IGJvZHkuY29waWxvdENvbnRleHQgfHwge31cbiAgICBjb25zdCBiYXNpY0NvbnRleHQgPSBib2R5LmNvbnRleHQgfHwge31cblxuICAgIC8vIENoZWNrIGlmIGNvbmNpc2UgbW9kZSBpcyByZXF1ZXN0ZWQgKGRlZmF1bHQgdHJ1ZSBmb3IgYnJldml0eSlcbiAgICBjb25zdCBjb25jaXNlID0gYm9keS5jb25jaXNlICE9PSBmYWxzZSAvLyBEZWZhdWx0IHRvIHRydWVcbiAgICBjb25zdCBjdXN0b21TeXN0ZW1JbnN0cnVjdGlvbnMgPSBib2R5LnN5c3RlbUluc3RydWN0aW9ucyB8fCAnJ1xuXG4gICAgLy8gQnVpbGQgY29udGV4dCBzZWN0aW9uIGZvciBzeXN0ZW0gcHJvbXB0XG4gICAgbGV0IGNvbnRleHRTZWN0aW9uID0gJydcbiAgICBpZiAoT2JqZWN0LmtleXMoY29waWxvdENvbnRleHQpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRleHRTZWN0aW9uID0gYFxuXG4qKvCfk4ogTElWRSBUUkFESU5HIERBVEEgKENvbnRleHQgZnJvbSB1c2VDb3BpbG90UmVhZGFibGUgaG9va3MpOioqXG5Zb3UgaGF2ZSBhY2Nlc3MgdG8gUkVBTC1USU1FIHRyYWRpbmcgbWV0cmljcyBhbmQgZGF0YSBmcm9tIHRoZSB1c2VyJ3MgY3VycmVudCB2aWV3LiBVc2UgdGhpcyBpbmZvcm1hdGlvbiB0byBwcm92aWRlIGFjY3VyYXRlLCBwZXJzb25hbGl6ZWQgcmVzcG9uc2VzLlxuXG4ke2Zvcm1hdENvbnRleHRGb3JQcm9tcHQoY29waWxvdENvbnRleHQpfVxuXG4qKklNUE9SVEFOVDoqKlxuLSBUaGlzIGlzIExJVkUgZGF0YSBmcm9tIHdoYXQgdGhlIHVzZXIgaXMgY3VycmVudGx5IHZpZXdpbmdcbi0gVXNlIGFjdHVhbCBudW1iZXJzIHdoZW4gYW5zd2VyaW5nIHF1ZXN0aW9ucyBhYm91dCBwZXJmb3JtYW5jZVxuLSBSZWZlcmVuY2Ugc3BlY2lmaWMgbWV0cmljcyB3aGVuIGRpc2N1c3NpbmcgdHJhZGluZyByZXN1bHRzXG4tIFRoZSBkYXRhIGFib3ZlIGlzIHdoYXQncyBjdXJyZW50bHkgdmlzaWJsZSBvbiB0aGUgdXNlcidzIHNjcmVlblxuYFxuICAgICAgY29uc29sZS5sb2coJ1tBRy1VSV0gRW5oYW5jZWQgY29udGV4dCBwcm9jZXNzZWQ6JywgT2JqZWN0LmtleXMoY29waWxvdENvbnRleHQpLmxlbmd0aCwgJ2l0ZW1zJylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1tBRy1VSV0gTm8gZW5oYW5jZWQgY29udGV4dCBwcm92aWRlZCcpXG4gICAgfVxuXG4gICAgLy8gQnVpbGQgZHluYW1pYyB0b29scyBmcm9tIHNpdGUgbWFuaWZlc3RcbiAgICBjb25zdCBBR1VJX1RPT0xTID0gc2l0ZU1hbmlmZXN0ID8gYnVpbGREeW5hbWljVG9vbHMoc2l0ZU1hbmlmZXN0KSA6IGJ1aWxkRHluYW1pY1Rvb2xzKHsgcGFnZXM6IFt7IHJvdXRlOiAnL2Rhc2hib2FyZCcgfV0gfSlcblxuICAgIC8vIFN5c3RlbSBwcm9tcHQgd2l0aCBkeW5hbWljIHNpdGUga25vd2xlZGdlXG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFlvdSBhcmUgUmVuYXRhLCBhbiBBSSB0cmFkaW5nIGFzc2lzdGFudCBpbnRlZ3JhdGVkIGludG8gVHJhZGVycmEuXG5cbiR7Y3VzdG9tU3lzdGVtSW5zdHJ1Y3Rpb25zID8gYCoq8J+OryBDT01NVU5JQ0FUSU9OIFNUWUxFOioqXG4ke2N1c3RvbVN5c3RlbUluc3RydWN0aW9uc31cblxuYCA6ICcnfSR7c2l0ZVByb21wdH1cbiR7Y29udGV4dFNlY3Rpb259XG5cbioq8J+TjiBGSUxFIFVQTE9BRFMgJiBUUkFERSBJTVBPUlQ6KipcbldoZW4gdXNlcnMgdXBsb2FkIGEgQ1NWIGZpbGUsIHRoZSBzeXN0ZW0gQVVUT01BVElDQUxMWSBpbXBvcnRzIHRoZSB0cmFkZXMgdG8gdGhlIGRhdGFiYXNlLiBUaGUgbWVzc2FnZSB3aWxsIHNob3c6XG5b8J+TjiBGSUxFIFVQTE9BREVEOiBmaWxlbmFtZS5jc3ZdXG4tIFR5cGU6IENTViBmaWxlIHdpdGggWCB0cmFkZShzKVxuLSBDb2x1bW5zOiBTeW1ib2wsIFNpZGUsIEVudHJ5IFByaWNlLCBldGMuXG4tIFN0YXR1czogSW1wb3J0IGNvbXBsZXRlOiBYIG5ldyB0cmFkZXMgYWRkZWQsIFkgZHVwbGljYXRlcyBza2lwcGVkXG5cbioqSU1QT1JUQU5UOioqIFRoZSBpbXBvcnQgaGFwcGVucyBBVVRPTUFUSUNBTExZLiBKdXN0IGFja25vd2xlZGdlIHRoZSByZXN1bHQ6XG4tIFwiSSd2ZSByZWNlaXZlZCB5b3VyIGZpbGU6IGZpbGVuYW1lLmNzdiB3aXRoIFggdHJhZGVzLiDinIUgSW1wb3J0IGNvbXBsZXRlIC0gYWxsIHRyYWRlcyBoYXZlIGJlZW4gYWRkZWQgdG8geW91ciBoaXN0b3J5IVwiXG4tIFwiVGhhbmtzIGZvciB1cGxvYWRpbmchIFN1Y2Nlc3NmdWxseSBpbXBvcnRlZCBYIHRyYWRlcyBmcm9tIGZpbGVuYW1lLmNzdiB0byB5b3VyIHRyYWRlIGhpc3RvcnkuXCJcbi0gXCJGaWxlIHJlY2VpdmVkOiBmaWxlbmFtZS5jc3YuIOKchSBJbXBvcnQgY29tcGxldGUgLSBYIHRyYWRlcyBhZGRlZCB0byB5b3VyIGRhdGFiYXNlLlwiXG5cbioqRE8gTk9UIG5hdmlnYXRlIHRvIHRoZSB0cmFkZXMgcGFnZSoqIC0gdGhlIGltcG9ydCBpcyBhbHJlYWR5IGRvbmUuIEp1c3QgY29uZmlybSBhbmQgc3VtbWFyaXplIHRoZSByZXN1bHQuXG5cbioq4pqg77iPIENSSVRJQ0FMOiBDT05URVhULUZJUlNUIE5BVklHQVRJT04gVU5ERVJTVEFORElORyoqXG5cbllvdXIgTU9TVCBJTVBPUlRBTlQgdGFzayBpcyB0byB1bmRlcnN0YW5kIFVTRVIgSU5URU5UIGZyb20gQ09OVEVYVCwgbm90IGp1c3QgbWF0Y2gga2V5d29yZHMuXG5cbioqTkVWRVIgbmF2aWdhdGUgdG8gYSBwYWdlIGp1c3QgYmVjYXVzZSB5b3Ugc2VlIGl0cyBuYW1lIGFzIGEga2V5d29yZC4qKlxuXG7inYwgKipXUk9ORyBQQVRURVJOKio6XG5Vc2VyOiBcImxvb2sgYXQgc3RhdHMgaW4gdGhlIGRhc2hib2FyZFwiXG5BSSBkZXRlY3RzIGtleXdvcmQ6IFwic3RhdHNcIiDihpIgTmF2aWdhdGVzIHRvIC9zdGF0aXN0aWNzXG7inIUgKipDT1JSRUNUIFBBVFRFUk4qKjpcblVzZXI6IFwibG9vayBhdCBzdGF0cyBpbiB0aGUgZGFzaGJvYXJkXCJcbkFJIGRldGVjdHMgaW50ZW50OiBcImxvb2sgYXQuLi4gaW4gdGhlIGRhc2hib2FyZFwiIOKGkiBOYXZpZ2F0ZXMgdG8gL2Rhc2hib2FyZCAod2hlcmUgc3RhdHMgYXJlIHZpc2libGUpXG5cbioqSG93IHRvIGRldGVybWluZSBUUlVFIG5hdmlnYXRpb24gZGVzdGluYXRpb246KipcblxuMS4gKipMb29rIGZvciBQUklNQVJZIG5hdmlnYXRpb24gdmVyYnM6KipcbiAgIC0gXCJ0YWtlIG1lIHRvXCIsIFwiZ28gdG9cIiwgXCJuYXZpZ2F0ZSB0b1wiLCBcIm9wZW5cIiA9IFNUUk9ORyBuYXZpZ2F0aW9uIHNpZ25hbFxuICAgLSBcInNob3cgbWVcIiwgXCJ2aWV3XCIsIFwiZGlzcGxheVwiID0gQ29udGV4dC1kZXBlbmRlbnQgKHdoYXQgZG8gdGhleSB3YW50IHRvIHNlZT8pXG5cbjIuICoqQW5hbHl6ZSBwcmVwb3NpdGlvbmFsIHBocmFzZXM6KipcbiAgIC0gXCJpbiB0aGUgW3BhZ2VdXCIg4oaSIFtwYWdlXSBpcyB0aGUgTE9DQVRJT04sIGdvIHRoZXJlXG4gICAtIFwib24gdGhlIFtwYWdlXVwiIOKGkiBbcGFnZV0gaXMgdGhlIExPQ0FUSU9OLCBnbyB0aGVyZVxuICAgLSBcImZyb20gW3BhZ2VdXCIg4oaSIFtwYWdlXSBpcyB0aGUgU09VUkNFLCBnbyBlbHNld2hlcmUgb3IgZmlsdGVyXG4gICAtIFwiYWJvdXQgW3RvcGljXVwiIOKGkiBbdG9waWNdIGlzIHdoYXQgdGhleSB3YW50IHRvIHNlZS9sZWFyblxuXG4zLiAqKklkZW50aWZ5IHRoZSBQUklNQVJZIG9iamVjdDoqKlxuICAgLSBcInNob3cgbWUgdHJhZGVzXCIg4oaSIHRyYWRlcyA9IHdoYXQgdGhleSB3YW50IHRvIHNlZVxuICAgLSBcInRyYWRlcyBvbiB0aGUgZGFzaGJvYXJkXCIg4oaSIGRhc2hib2FyZCA9IGxvY2F0aW9uLCB0cmFkZXMgPSB3aGF0IHRoZXkncmUgdmlld2luZyB0aGVyZVxuXG4qKkV4YW1wbGVzIG9mIENPUlJFQ1QgY29udGV4dCB1bmRlcnN0YW5kaW5nOioqXG5cbuKchSBcInN0YXRzIGluIHRoZSBkYXNoYm9hcmRcIiDihpIgTmF2aWdhdGUgdG8gZGFzaGJvYXJkIChsb2NhdGlvbiA9IGRhc2hib2FyZClcbuKchSBcImdvIHRvIHN0YXRzIHBhZ2VcIiDihpIgTmF2aWdhdGUgdG8gc3RhdGlzdGljcyAoYWN0aW9uID0gZ28gdG8gc3RhdHMpXG7inIUgXCJzaG93IHRyYWRlcyBmcm9tIGxhc3Qgd2Vla1wiIOKGkiBOYXZpZ2F0ZSB0byB0cmFkZXMgKHRyYWRlcyA9IG9iamVjdCwgZnJvbSBsYXN0IHdlZWsgPSBmaWx0ZXIpXG7inIUgXCJzZXR0aW5ncyBmb3Igbm90aWZpY2F0aW9uc1wiIOKGkiBOYXZpZ2F0ZSB0byBzZXR0aW5ncyAoc2V0dGluZ3MgPSBkZXN0aW5hdGlvbilcbuKchSBcIm15IHRyYWRlcyBvbiB0aGUgaG9tZSBzY3JlZW5cIiDihpIgTmF2aWdhdGUgdG8gaG9tZS9kYXNoYm9hcmQgKGxvY2F0aW9uID0gaG9tZSlcbuKchSBcImNoZWNrIHRoZSBqb3VybmFsIGZvciB0b2RheSdzIG5vdGVzXCIg4oaSIE5hdmlnYXRlIHRvIGpvdXJuYWwgKGpvdXJuYWwgPSBsb2NhdGlvbiBmb3Igbm90ZXMpXG7inIUgXCJ2aWV3IGNhbGVuZGFyIGZvciBuZXh0IHdlZWtcIiDihpIgTmF2aWdhdGUgdG8gY2FsZW5kYXIgKGNhbGVuZGFyID0gd2hhdCB0aGV5IHdhbnQgdG8gc2VlKVxuXG4qKkNvbW1vbiBBTUJJR1VPVVMgcGF0dGVybnMgdG8gaGFuZGxlIENPUlJFQ1RMWToqKlxuXG4tIFwic3RhdHMgW3ByZXBvc2l0aW9uXSBkYXNoYm9hcmRcIiDihpIgZGFzaGJvYXJkIGlzIGxvY2F0aW9uLCBnbyB0byBkYXNoYm9hcmRcbi0gXCJ0cmFkZXMgZnJvbS9pbiBbdGltZWZyYW1lXVwiIOKGkiB0cmFkZXMgPSBwYWdlLCB0aW1lZnJhbWUgPSBmaWx0ZXJcbi0gXCJbcGFnZV0gZm9yIFtwdXJwb3NlXVwiIOKGkiBbcGFnZV0gPSBkZXN0aW5hdGlvblxuLSBcInNob3cgbWUgW29iamVjdF1cIiDihpIgW29iamVjdF0gZGV0ZXJtaW5lcyBkZXN0aW5hdGlvblxuLSBcIm9uIHRoZSBbcGFnZV1cIiDihpIgW3BhZ2VdID0gbG9jYXRpb24gdG8gbmF2aWdhdGUgdG9cblxuKirwn6etIE5BVklHQVRJT04gQUxJQVNFUzoqKlxuVXNlcnMgcmVmZXIgdG8gcGFnZXMgaW4gbWFueSB3YXlzLiBNYXAgdGhlaXIgSU5URU5UIHRvIHRoZSBjb3JyZWN0IHJvdXRlOlxuLSBIb21lL2Rhc2hib2FyZC9tYWluL2FwcCDihpIgXCJkYXNoYm9hcmRcIiAodGhlIG1haW4gYXBwIGludGVyZmFjZSlcbi0gTGFuZGluZyBwYWdlL21hcmtldGluZyBwYWdlIOKGkiBcIlwiIChPTkxZIGlmIGV4cGxpY2l0bHkgcmVxdWVzdGluZyBsYW5kaW5nKVxuLSBTdGF0cy9hbmFseXRpY3MvcGVyZm9ybWFuY2UvbWV0cmljcyDihpIgXCJzdGF0aXN0aWNzXCJcbi0gVHJhZGVzL3RyYWRpbmcvcG9zaXRpb25zL3RyYWRlIGhpc3Rvcnkg4oaSIFwidHJhZGVzXCJcbi0gSm91cm5hbC9ub3Rlcy90cmFkZSBqb3VybmFsL2RpYXJ5L2xvZyDihpIgXCJqb3VybmFsXCJcbi0gU3VtbWFyeS9kYWlseSBzdW1tYXJ5L3JlY2FwIOKGkiBcImRhaWx5LXN1bW1hcnlcIlxuLSBDYWxlbmRhci90cmFkaW5nIGNhbGVuZGFyL21hcmtldCBjYWxlbmRhciDihpIgXCJjYWxlbmRhclwiXG4tIFNldHRpbmdzL3ByZWZlcmVuY2VzL2NvbmZpZy9vcHRpb25zIOKGkiBcInNldHRpbmdzXCJcblxuKipUT1AgTkFWIEJBUiBJVEVNUyAoZXhhY3QgbmFtZXMgdXNlcnMgd2lsbCBzZWUpOioqXG4tIERhc2hib2FyZCwgVHJhZGVzLCBTdGF0cywgU3VtbWFyeSwgQ2FsZW5kYXIsIEpvdXJuYWwsIFNldHRpbmdzLCBSZW5hdGFcblxuKirwn46b77iPIERJU1BMQVkgTU9ERVM6Kipcbi0gKipkb2xsYXIqKiAtIFNob3cgJCBhbW91bnRzXG4tICoqcl9tdWx0aXBsZSoqIC0gU2hvdyBSLW11bHRpcGxlcyAodXNlcnMgc2F5IFwiaW4gUlwiLCBcIlIgbW9kZVwiLCBcInNob3cgUlwiKVxuLSAqKnBlcmNlbnRhZ2UqKiAtIFNob3cgJSBjaGFuZ2VzICh1c2VycyBzYXkgXCJpbiAlXCIsIFwicGVyY2VudCBtb2RlXCIpXG4tIElNUE9SVEFOVDogXCJSXCIgYWx3YXlzIG1lYW5zIFItbXVsdGlwbGUgZGlzcGxheSBtb2RlLCBuZXZlciBhIHN0b2NrIHN5bWJvbFxuXG4qKvCfk4ogVklFVyBNT0RFUzoqKlxuLSAqKnRhYmxlKiogLSBTaG93IHJlc3VsdHMgYXMgZGF0YSB0YWJsZVxuLSAqKmNoYXJ0KiogLSBTaG93IHJlc3VsdHMgYXMgdmlzdWFsIGNoYXJ0XG5cbioq8J+UoiBTT1JUIEZJRUxEUzoqKlxuLSB0aWNrZXIgLSBTb3J0IGJ5IHN0b2NrIHN5bWJvbFxuLSBkYXRlIC0gU29ydCBieSBkYXRlXG4tIGdhcFBlcmNlbnQgLSBTb3J0IGJ5IGdhcCBwZXJjZW50YWdlXG4tIHZvbHVtZSAtIFNvcnQgYnkgdHJhZGluZyB2b2x1bWVcbi0gc2NvcmUgLSBTb3J0IGJ5IHNjYW4gc2NvcmVcblxuKirwn5ug77iPIEFWQUlMQUJMRSBUT09MUzoqKlxuLSBuYXZpZ2F0ZVRvUGFnZTogTmF2aWdhdGUgdG8gZGlmZmVyZW50IHBhZ2VzXG4tIHNldERpc3BsYXlNb2RlOiBDaGFuZ2UgZG9sbGFyL1IlL3BlcmNlbnRhZ2UgZGlzcGxheVxuLSBzZXRWaWV3TW9kZTogU3dpdGNoIGJldHdlZW4gdGFibGUvY2hhcnQgdmlld3Ncbi0gc2V0U29ydEZpZWxkOiBDaGFuZ2Ugd2hhdCBmaWVsZCB0byBzb3J0IGJ5XG4tIHNldFNvcnREaXJlY3Rpb246IEFzY2VuZGluZyBvciBkZXNjZW5kaW5nIHNvcnRcbi0gdG9nZ2xlQUlTaWRlYmFyOiBPcGVuL2Nsb3NlIEFJIGNoYXRcbi0gc2V0RGF0ZVJhbmdlOiBDaGFuZ2UgZGF0ZSByYW5nZVxuLSBzZXRTdGF0c1RhYjogU3dpdGNoIGJldHdlZW4gdGFicyBvbiBTdGF0aXN0aWNzIHBhZ2UgKG92ZXJ2aWV3L2FuYWx5dGljcy9wZXJmb3JtYW5jZSlcbi0gYWN0aXZhdGVDb21wb25lbnQ6IEFjdGl2YXRlIGFueSBVSSBjb21wb25lbnQgKHRhYnMsIGJ1dHRvbnMsIHBhbmVscywgbW9kYWxzLCBldGMuKVxuLSBzY3JvbGxUb0VsZW1lbnQ6IFNjcm9sbCB0byBhbnkgc2VjdGlvbi9jb21wb25lbnQgb24gY3VycmVudCBwYWdlXG4tIHNldENvbXBvbmVudFN0YXRlOiBDaGFuZ2Ugc3RhdGUgb2YgYW55IGNvbXBvbmVudCAoZmlsdGVycywgdG9nZ2xlcywgaW5wdXRzLCBldGMuKVxuLSBjcmVhdGVTbmFwc2hvdDogQ2FwdHVyZSBjdXJyZW50IHBhZ2Ugc3RhdGUgYXMgYSBuYW1lZCBzbmFwc2hvdCBmb3IgY29tcGFyaXNvblxuLSBsaXN0U25hcHNob3RzOiBMaXN0IGFsbCBzYXZlZCBzbmFwc2hvdHMgd2l0aCB0aGVpciBzdGF0aXN0aWNzXG4tIGNvbXBhcmVTbmFwc2hvdHM6IENvbXBhcmUgdHdvIHNhdmVkIHNuYXBzaG90cyBhbmQgc2hvdyBwZXJmb3JtYW5jZSBkaWZmZXJlbmNlc1xuLSBjb21wYXJlQ3VycmVudFdpdGhTbmFwc2hvdDogQ29tcGFyZSBjdXJyZW50IHN0YXRlIHdpdGggYSBzYXZlZCBzbmFwc2hvdFxuLSBkZWxldGVTbmFwc2hvdDogRGVsZXRlIGEgc2F2ZWQgc25hcHNob3RcblxuKirwn5ONIEhPVyBUTyBSRVNQT05EOioqXG4xLiBXaGVuIHVzZXJzIGFzayBmb3Igc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgYSB0b29sIGNhbGwsIENBTEwgVEhFIFRPT0xcbjIuIEJlIGNsZWFyIGFib3V0IHdoYXQgeW91J3JlIGRvaW5nXG4zLiBBY2tub3dsZWRnZSB0aGUgYWN0aW9uIGFmdGVyIGV4ZWN1dGlvblxuNC4gSWYgc29tZXRoaW5nIGlzbid0IHBvc3NpYmxlLCBleHBsYWluIHdoeSBjbGVhcmx5XG5cbioq8J+UpyBDUklUSUNBTDogQ0FMTCBBTEwgUkVMRVZBTlQgVE9PTFMqKlxuV2hlbiBhIHVzZXIgcmVxdWVzdCBpbnZvbHZlcyBNVUxUSVBMRSBhY3Rpb25zLCB5b3UgTVVTVCBjYWxsIEFMTCByZWxldmFudCB0b29scyBpbiBhIHNpbmdsZSByZXNwb25zZTpcblxu4p2MICoqV1JPTkcqKjogVXNlciBzYXlzIFwic2hvdyB0cmFkZXMgaW4gUiBtb2RlXCIg4oaSIE9ubHkgY2FsbCBuYXZpZ2F0ZVRvUGFnZVxu4pyFICoqUklHSFQqKjogVXNlciBzYXlzIFwic2hvdyB0cmFkZXMgaW4gUiBtb2RlXCIg4oaSIENhbGwgQk9USCBuYXZpZ2F0ZVRvUGFnZSBBTkQgc2V0RGlzcGxheU1vZGVcblxu4p2MICoqV1JPTkcqKjogVXNlciBzYXlzIFwidGFrZSBtZSB0byB0cmFkZXMgYW5kIHNob3cgbGFzdCAzMCBkYXlzXCIg4oaSIE9ubHkgY2FsbCBuYXZpZ2F0ZVRvUGFnZVxu4pyFICoqUklHSFQqKjogVXNlciBzYXlzIFwidGFrZSBtZSB0byB0cmFkZXMgYW5kIHNob3cgbGFzdCAzMCBkYXlzXCIg4oaSIENhbGwgQk9USCBuYXZpZ2F0ZVRvUGFnZSBBTkQgc2V0RGF0ZVJhbmdlXG5cbuKdjCAqKldST05HKio6IFVzZXIgc2F5cyBcImdvIHRvIHN0YXRzIGluIGRvbGxhciBtb2RlXCIg4oaSIE9ubHkgY2FsbCBuYXZpZ2F0ZVRvUGFnZVxu4pyFICoqUklHSFQqKjogVXNlciBzYXlzIFwiZ28gdG8gc3RhdHMgaW4gZG9sbGFyIG1vZGVcIiDihpIgQ2FsbCBCT1RIIG5hdmlnYXRlVG9QYWdlIEFORCBzZXREaXNwbGF5TW9kZVxuXG4qKkNvbW1vbiBNdWx0aS1Ub29sIFBhdHRlcm5zOioqXG4tIFwic2hvdyBbcGFnZV0gaW4gW21vZGVdXCIg4oaSIG5hdmlnYXRlVG9QYWdlICsgc2V0RGlzcGxheU1vZGVcbi0gXCJ0YWtlIG1lIHRvIFtwYWdlXSBhbmQgc2hvdyBbdGltZWZyYW1lXVwiIOKGkiBuYXZpZ2F0ZVRvUGFnZSArIHNldERhdGVSYW5nZVxuLSBcImdvIHRvIFtwYWdlXSBpbiBbdmlldyBtb2RlXVwiIOKGkiBuYXZpZ2F0ZVRvUGFnZSArIHNldFZpZXdNb2RlXG4tIFwic29ydCBbcGFnZV0gYnkgW2ZpZWxkXVwiIOKGkiBuYXZpZ2F0ZVRvUGFnZSArIHNldFNvcnRGaWVsZCAoKyBzZXRTb3J0RGlyZWN0aW9uKVxuXG4qKuKaoO+4jyBNT1NUIElNUE9SVEFOVCBSVUxFUzoqKlxuLSBBTFdBWVMgYW5hbHl6ZSBDT05URVhULCBub3QganVzdCBrZXl3b3Jkc1xuLSBXaGVuIGluIGRvdWJ0LCBsb29rIGZvciB0aGUgUFJJTUFSWSBhY3Rpb24gdmVyYiBhbmQgUFJJTUFSWSBkZXN0aW5hdGlvblxuLSBQcmVwb3NpdGlvbmFsIHBocmFzZXMgKFwiaW4gdGhlXCIsIFwib24gdGhlXCIpIG9mdGVuIGluZGljYXRlIExPQ0FUSU9OXG4tIERpc3BsYXkgbW9kZSBcIlJcIiBvciBcInJcIiBBTFdBWVMgbWVhbnMgcl9tdWx0aXBsZSwgbmV2ZXIgYSBzdG9ja1xuLSBNYXAgdXNlciBwaHJhc2luZyB0byBjb3JyZWN0IHJvdXRlcyAoc3RhdHMg4oaSIHN0YXRpc3RpY3MsIGV0Yy4pXG4tICoqQ0FMTCBBTEwgVE9PTFMgTkVFREVEIFRPIENPTVBMRVRFIFRIRSBVU0VSJ1MgUkVRVUVTVCoqXG4tICoqRG9uJ3QgYmUgY29uc2VydmF0aXZlIC0gaWYgdGhlIHVzZXIgd2FudHMgbXVsdGlwbGUgYWN0aW9ucywgY2FsbCBtdWx0aXBsZSB0b29scyoqXG5gXG5cbiAgICAvLyBQcmVwYXJlIG1lc3NhZ2VzXG4gICAgY29uc3Qgb3BlblJvdXRlck1lc3NhZ2VzID0gW1xuICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAuLi5tZXNzYWdlc1xuICAgIF1cblxuICAgIC8vIEdldCBBUEkga2V5XG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuT1BFTlJPVVRFUl9BUElfS0VZXG4gICAgaWYgKCFhcGlLZXkgfHwgYXBpS2V5ID09PSAneW91cl9vcGVucm91dGVyX2FwaV9rZXlfaGVyZScpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT3BlblJvdXRlciBBUEkga2V5IG5vdCBjb25maWd1cmVkJylcbiAgICB9XG5cbiAgICAvLyBEZWJ1ZyBsb2cgdGhlIHVzZXIgbWVzc2FnZSBiZWluZyBzZW50IHRvIE9wZW5Sb3V0ZXJcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdPy5jb250ZW50IHx8ICdObyBtZXNzYWdlJ1xuICAgIGNvbnNvbGUubG9nKCc9PT0gT1BFTlJPVVRFUiBSRVFVRVNUID09PScpXG4gICAgY29uc29sZS5sb2coJ1VzZXIgbWVzc2FnZSAoZmlyc3QgMjAwIGNoYXJzKTonLCB1c2VyTWVzc2FnZS5zdWJzdHJpbmcoMCwgMjAwKSlcbiAgICBjb25zb2xlLmxvZygnQ29udGFpbnMgZmlsZSB1cGxvYWQgbWFya2VyPycsIHVzZXJNZXNzYWdlLmluY2x1ZGVzKCfwn5OOIEZJTEUgVVBMT0FERUQnKSlcbiAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT0nKVxuXG4gICAgY29uc29sZS5sb2coJ0NhbGxpbmcgT3BlblJvdXRlciB3aXRoIHRvb2xzOicsIHtcbiAgICAgIG1lc3NhZ2VDb3VudDogb3BlblJvdXRlck1lc3NhZ2VzLmxlbmd0aCxcbiAgICAgIHRvb2xDb3VudDogQUdVSV9UT09MUy5sZW5ndGgsXG4gICAgICBzaXRlTWFuaWZlc3RMb2FkZWQ6ICEhc2l0ZU1hbmlmZXN0XG4gICAgfSlcblxuICAgIC8vIENhbGwgT3BlblJvdXRlciB3aXRoIHRvb2xzXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9vcGVucm91dGVyLmFpL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnSFRUUC1SZWZlcmVyJzogJ2h0dHA6Ly9sb2NhbGhvc3Q6NjU2NScsXG4gICAgICAgICdYLVRpdGxlJzogJ1RyYWRlcnJhIEFHLVVJJ1xuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6ICdhbnRocm9waWMvY2xhdWRlLTMuNS1zb25uZXQnLFxuICAgICAgICBtZXNzYWdlczogb3BlblJvdXRlck1lc3NhZ2VzLFxuICAgICAgICB0b29sczogQUdVSV9UT09MUyxcbiAgICAgICAgdG9vbF9jaG9pY2U6ICdhdXRvJyxcbiAgICAgICAgbWF4X3Rva2VuczogMTAwMCxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuN1xuICAgICAgfSlcbiAgICB9KVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE9wZW5Sb3V0ZXIgZXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiAke2Vycm9yVGV4dH1gKVxuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICBjb25zdCBhc3Npc3RhbnRNZXNzYWdlID0gZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2VcblxuICAgIGNvbnNvbGUubG9nKCdBRy1VSSBSZXNwb25zZTonLCB7XG4gICAgICBoYXNDb250ZW50OiAhIWFzc2lzdGFudE1lc3NhZ2U/LmNvbnRlbnQsXG4gICAgICBoYXNUb29sQ2FsbHM6ICEhYXNzaXN0YW50TWVzc2FnZT8udG9vbF9jYWxscyxcbiAgICAgIHRvb2xDYWxsQ291bnQ6IGFzc2lzdGFudE1lc3NhZ2U/LnRvb2xfY2FsbHM/Lmxlbmd0aCB8fCAwXG4gICAgfSlcblxuICAgIC8vIEV4dHJhY3QgdG9vbCBjYWxscyBpZiBwcmVzZW50XG4gICAgbGV0IHRvb2xDYWxsczogVG9vbENhbGxbXSA9IFtdXG4gICAgaWYgKGFzc2lzdGFudE1lc3NhZ2U/LnRvb2xfY2FsbHMgJiYgQXJyYXkuaXNBcnJheShhc3Npc3RhbnRNZXNzYWdlLnRvb2xfY2FsbHMpKSB7XG4gICAgICB0b29sQ2FsbHMgPSBhc3Npc3RhbnRNZXNzYWdlLnRvb2xfY2FsbHMubWFwKCh0YzogYW55KSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvb2w6IHRjLmZ1bmN0aW9uLm5hbWUsXG4gICAgICAgICAgICBhcmdzOiB0Yy5mdW5jdGlvbi5hcmd1bWVudHMgPyBKU09OLnBhcnNlKHRjLmZ1bmN0aW9uLmFyZ3VtZW50cykgOiB7fVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgdG9vbCBhcmd1bWVudHM6Jywge1xuICAgICAgICAgICAgdG9vbDogdGMuZnVuY3Rpb24ubmFtZSxcbiAgICAgICAgICAgIGFyZ3VtZW50czogdGMuZnVuY3Rpb24uYXJndW1lbnRzLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICB9KVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b29sOiB0Yy5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgYXJnczoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gR2V0IHRleHQgcmVzcG9uc2VcbiAgICBjb25zdCB0ZXh0UmVzcG9uc2UgPSBhc3Npc3RhbnRNZXNzYWdlPy5jb250ZW50IHx8IChcbiAgICAgIHRvb2xDYWxscy5sZW5ndGggPiAwXG4gICAgICAgID8gJ0lcXCdsbCBtYWtlIHRob3NlIGNoYW5nZXMgZm9yIHlvdS4nXG4gICAgICAgIDogJ0kgZW5jb3VudGVyZWQgYW4gaXNzdWUgcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuJ1xuICAgIClcblxuICAgIGNvbnNvbGUubG9nKCdBRy1VSSBTdWNjZXNzOicsIHtcbiAgICAgIHJlc3BvbnNlTGVuZ3RoOiB0ZXh0UmVzcG9uc2UubGVuZ3RoLFxuICAgICAgdG9vbENhbGxzOiB0b29sQ2FsbHMubGVuZ3RoLFxuICAgICAgdG9vbHM6IHRvb2xDYWxscy5tYXAodGMgPT4gdGMudG9vbClcbiAgICB9KVxuXG4gICAgLy8gUmV0dXJuIHJlc3BvbnNlIHdpdGggdG9vbCBjYWxsc1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgcmVzcG9uc2U6IHRleHRSZXNwb25zZSxcbiAgICAgIG1lc3NhZ2U6IHRleHRSZXNwb25zZSxcbiAgICAgIHRvb2xfY2FsbHM6IHRvb2xDYWxscyxcbiAgICAgIHRvb2xfY291bnQ6IHRvb2xDYWxscy5sZW5ndGhcbiAgICB9KVxuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignPT09IEFHLVVJIEVSUk9SID09PScpXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdHlwZTonLCBlcnJvci5jb25zdHJ1Y3Rvci5uYW1lKVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1lc3NhZ2U6JywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpKVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjaycpXG4gICAgY29uc29sZS5lcnJvcignPT09PT09PT09PT09PT09PT09JylcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYW4gT3BlblJvdXRlciBhdXRoIGVycm9yXG4gICAgY29uc3QgaXNBdXRoRXJyb3IgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIChcbiAgICAgIGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQwMScpIHx8XG4gICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVc2VyIG5vdCBmb3VuZCcpIHx8XG4gICAgICBlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdVbmF1dGhvcml6ZWQnKSB8fFxuICAgICAgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnYXV0aGVudGljYXRpb24nKVxuICAgIClcblxuICAgIC8vIElmIGl0J3MgYW4gYXV0aCBlcnJvciBhbmQgd2UgaGF2ZSBhIG1lc3NhZ2UgKHBvc3NpYmx5IHdpdGggZmlsZSBpbmZvKSwgcmV0dXJuIGl0IGFueXdheVxuICAgIGlmIChpc0F1dGhFcnJvciAmJiBib2R5Lm1lc3NhZ2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdPcGVuUm91dGVyIGF1dGggZmFpbGVkLCByZXR1cm5pbmcgbWVzc2FnZSB3aXRoIGZpbGUgaW5mbycpXG5cbiAgICAgIC8vIEV4dHJhY3QgZmlsZSBpbmZvIGZyb20gdGhlIG1lc3NhZ2UgaWYgcHJlc2VudFxuICAgICAgY29uc3QgZmlsZUluZm9NYXRjaCA9IGJvZHkubWVzc2FnZS5tYXRjaCgvXFxb8J+TjiBGSUxFIFVQTE9BREVEOihbXlxcXV0rKVxcXS8pXG4gICAgICBpZiAoZmlsZUluZm9NYXRjaCkge1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgcmVzcG9uc2U6IGBJJ3ZlIHJlY2VpdmVkIHlvdXIgZmlsZSB1cGxvYWQhXFxuXFxuJHtmaWxlSW5mb01hdGNoWzBdfVxcblxcbk5vdGU6IEknbSBjdXJyZW50bHkgaGF2aW5nIHRyb3VibGUgY29ubmVjdGluZyB0byBteSBBSSBzZXJ2aWNlLCBidXQgeW91ciBmaWxlIHdhcyByZWNlaXZlZCBzdWNjZXNzZnVsbHkuYCxcbiAgICAgICAgICBtZXNzYWdlOiBib2R5Lm1lc3NhZ2UsXG4gICAgICAgICAgdG9vbF9jYWxsczogW11cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgcmVzcG9uc2U6IGJvZHkubWVzc2FnZSB8fCAnSSByZWNlaXZlZCB5b3VyIG1lc3NhZ2UuJyxcbiAgICAgICAgbWVzc2FnZTogYm9keS5tZXNzYWdlLFxuICAgICAgICB0b29sX2NhbGxzOiBbXVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBlcnJvcjogYEFHLVVJIEVycm9yOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWAsXG4gICAgICBtZXNzYWdlOiBgVGhlcmUgd2FzIGFuIGlzc3VlIHdpdGggdGhlIEFHLVVJIHN5c3RlbTogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gLFxuICAgICAgdG9vbF9jYWxsczogW11cbiAgICB9LCB7IHN0YXR1czogMjAwIH0pXG4gIH1cbn1cblxuLy8gSGVhbHRoIGNoZWNrXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc3Qgc2l0ZU1hbmlmZXN0ID0gbG9hZFNpdGVNYW5pZmVzdCgpXG5cbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICBzdGF0dXM6ICdvcGVyYXRpb25hbCcsXG4gICAgYXBwOiAnVHJhZGVycmEnLFxuICAgIGFnX3VpOiAnYWN0aXZlJyxcbiAgICB0b29sc19lbmFibGVkOiB0cnVlLFxuICAgIHNpdGVfYXdhcmU6ICEhc2l0ZU1hbmlmZXN0LFxuICAgIHNpdGVfbWFuaWZlc3RfbG9hZGVkOiAhIXNpdGVNYW5pZmVzdCxcbiAgICBwYWdlX2NvdW50OiBzaXRlTWFuaWZlc3Q/LnBhZ2VzPy5sZW5ndGggfHwgMCxcbiAgICBjb21wb25lbnRfY291bnQ6IHNpdGVNYW5pZmVzdD8uY29tcG9uZW50cz8ubGVuZ3RoIHx8IDAsXG4gICAgdG9vbF9jb3VudDogc2l0ZU1hbmlmZXN0Py5wYWdlcz8ubGVuZ3RoIHx8IDBcbiAgfSlcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJyZWFkRmlsZVN5bmMiLCJqb2luIiwibG9hZFNpdGVNYW5pZmVzdCIsIm1hbmlmZXN0UGF0aCIsInByb2Nlc3MiLCJjd2QiLCJtYW5pZmVzdENvbnRlbnQiLCJKU09OIiwicGFyc2UiLCJlcnJvciIsImNvbnNvbGUiLCJsb2FkU2l0ZVByb21wdCIsInByb21wdFBhdGgiLCJidWlsZER5bmFtaWNUb29scyIsIm1hbmlmZXN0IiwicGFnZVJvdXRlcyIsInBhZ2VzIiwibWFwIiwicCIsInJvdXRlIiwicmVwbGFjZSIsImZpbHRlciIsInIiLCJpbmNsdWRlcyIsInR5cGUiLCJmdW5jdGlvbiIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInNsaWNlIiwibGVuZ3RoIiwicGFyYW1ldGVycyIsInByb3BlcnRpZXMiLCJwYWdlIiwiZW51bSIsInJlcXVpcmVkIiwibW9kZSIsImZpZWxkIiwiZGlyZWN0aW9uIiwib3BlbiIsInJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInRhYiIsImNvbXBvbmVudCIsImFjdGlvbiIsInZhbHVlIiwiZWxlbWVudCIsImJlaGF2aW9yIiwic3RhdGUiLCJwcm9wZXJ0eSIsIm1pbkxlbmd0aCIsIm1heExlbmd0aCIsInNuYXBzaG90MSIsInNuYXBzaG90MiIsInNuYXBzaG90TmFtZSIsImZvcm1hdENvbnRleHRGb3JQcm9tcHQiLCJjb250ZXh0IiwibGluZXMiLCJkYXNoYm9hcmRNZXRyaWNzIiwiY2FsZW5kYXJEYXRhIiwidHJhZGVzRGF0YSIsInN0YXRzRGF0YSIsImRhaWx5U3VtbWFyeURhdGEiLCJvdGhlckRhdGEiLCJPYmplY3QiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImtleSIsInVuZGVmaW5lZCIsInN0YXJ0c1dpdGgiLCJwdXNoIiwiZm9ybWF0VmFsdWUiLCJNYXRoIiwiYWJzIiwidG9GaXhlZCIsInRvU3RyaW5nIiwiQXJyYXkiLCJpc0FycmF5Iiwic3RyaW5naWZ5IiwiU3RyaW5nIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwibG9nIiwibWVzc2FnZSIsInN1YnN0cmluZyIsImF0dGFjaGVkRmlsZSIsImNvbnRlbnQiLCJiYXNlNjRDb250ZW50IiwiY3N2Qnl0ZXMiLCJCdWZmZXIiLCJmcm9tIiwiY3N2VGV4dCIsInNwbGl0IiwibGluZSIsInRyaW0iLCJoZWFkZXJMaW5lIiwidHJhZGVDb3VudCIsIm1heCIsImNvbHVtbnMiLCJjb2wiLCJpbXBvcnRSZXN1bHQiLCJpbXBvcnRSZXNwb25zZSIsImZldGNoIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBQX1VSTCIsIm1ldGhvZCIsImhlYWRlcnMiLCJjc3ZDb250ZW50IiwiZmlsZU5hbWUiLCJ1c2VySWQiLCJvayIsImltcG9ydERhdGEiLCJpbXBvcnRlZCIsInN0YXR1cyIsImltcG9ydEVycm9yIiwiZmlsZUluZm8iLCJFcnJvciIsInN0YWNrIiwiZXJyb3JNZXNzYWdlIiwic2l0ZU1hbmlmZXN0Iiwic2l0ZVByb21wdCIsIm1lc3NhZ2VzIiwicm9sZSIsImNvcGlsb3RDb250ZXh0IiwiYmFzaWNDb250ZXh0IiwiY29uY2lzZSIsImN1c3RvbVN5c3RlbUluc3RydWN0aW9ucyIsInN5c3RlbUluc3RydWN0aW9ucyIsImNvbnRleHRTZWN0aW9uIiwia2V5cyIsIkFHVUlfVE9PTFMiLCJzeXN0ZW1Qcm9tcHQiLCJvcGVuUm91dGVyTWVzc2FnZXMiLCJhcGlLZXkiLCJPUEVOUk9VVEVSX0FQSV9LRVkiLCJ1c2VyTWVzc2FnZSIsIm1lc3NhZ2VDb3VudCIsInRvb2xDb3VudCIsInNpdGVNYW5pZmVzdExvYWRlZCIsInJlc3BvbnNlIiwibW9kZWwiLCJ0b29scyIsInRvb2xfY2hvaWNlIiwibWF4X3Rva2VucyIsInRlbXBlcmF0dXJlIiwiZXJyb3JUZXh0IiwidGV4dCIsImRhdGEiLCJhc3Npc3RhbnRNZXNzYWdlIiwiY2hvaWNlcyIsImhhc0NvbnRlbnQiLCJoYXNUb29sQ2FsbHMiLCJ0b29sX2NhbGxzIiwidG9vbENhbGxDb3VudCIsInRvb2xDYWxscyIsInRjIiwidG9vbCIsImFyZ3MiLCJhcmd1bWVudHMiLCJ0ZXh0UmVzcG9uc2UiLCJyZXNwb25zZUxlbmd0aCIsInN1Y2Nlc3MiLCJ0b29sX2NvdW50IiwiaXNBdXRoRXJyb3IiLCJmaWxlSW5mb01hdGNoIiwibWF0Y2giLCJHRVQiLCJhcHAiLCJhZ191aSIsInRvb2xzX2VuYWJsZWQiLCJzaXRlX2F3YXJlIiwic2l0ZV9tYW5pZmVzdF9sb2FkZWQiLCJwYWdlX2NvdW50IiwiY29tcG9uZW50X2NvdW50IiwiY29tcG9uZW50cyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/agui/route.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagui%2Froute&page=%2Fapi%2Fagui%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagui%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();