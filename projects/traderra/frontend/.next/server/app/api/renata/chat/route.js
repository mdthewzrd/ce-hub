/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/renata/chat/route";
exports.ids = ["app/api/renata/chat/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frenata%2Fchat%2Froute&page=%2Fapi%2Frenata%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frenata%2Fchat%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frenata%2Fchat%2Froute&page=%2Fapi%2Frenata%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frenata%2Fchat%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_michaeldurante_ai_dev_ce_hub_projects_traderra_frontend_src_app_api_renata_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./src/app/api/renata/chat/route.ts */ \"(rsc)/./src/app/api/renata/chat/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/renata/chat/route\",\n        pathname: \"/api/renata/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/renata/chat/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/michaeldurante/ai dev/ce-hub/projects/traderra/frontend/src/app/api/renata/chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_michaeldurante_ai_dev_ce_hub_projects_traderra_frontend_src_app_api_renata_chat_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/renata/chat/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZyZW5hdGElMkZjaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZyZW5hdGElMkZjaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcmVuYXRhJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1pY2hhZWxkdXJhbnRlJTJGYWklMjBkZXYlMkZjZS1odWIlMkZwcm9qZWN0cyUyRnRyYWRlcnJhJTJGZnJvbnRlbmQlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbWljaGFlbGR1cmFudGUlMkZhaSUyMGRldiUyRmNlLWh1YiUyRnByb2plY3RzJTJGdHJhZGVycmElMkZmcm9udGVuZCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUMwRDtBQUM1SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9D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QXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTiw2QkFBNkIsNkZBQWU7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkZBQW1CO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLDZFQUFZO0FBQzFCO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQSIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCB7IGdldFJlcXVlc3RNZXRhIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVxdWVzdC1tZXRhXCI7XG5pbXBvcnQgeyBnZXRUcmFjZXIsIFNwYW5LaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL3RyYWNlclwiO1xuaW1wb3J0IHsgbm9ybWFsaXplQXBwUGF0aCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9yb3V0ZXIvdXRpbHMvYXBwLXBhdGhzXCI7XG5pbXBvcnQgeyBOb2RlTmV4dFJlcXVlc3QsIE5vZGVOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9iYXNlLWh0dHAvbm9kZVwiO1xuaW1wb3J0IHsgTmV4dFJlcXVlc3RBZGFwdGVyLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3NwZWMtZXh0ZW5zaW9uL2FkYXB0ZXJzL25leHQtcmVxdWVzdFwiO1xuaW1wb3J0IHsgQmFzZVNlcnZlclNwYW4gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBnZXRSZXZhbGlkYXRlUmVhc29uIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvaW5zdHJ1bWVudGF0aW9uL3V0aWxzXCI7XG5pbXBvcnQgeyBzZW5kUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9zZW5kLXJlc3BvbnNlXCI7XG5pbXBvcnQgeyBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMsIHRvTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvdXRpbHNcIjtcbmltcG9ydCB7IGdldENhY2hlQ29udHJvbEhlYWRlciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9jYWNoZS1jb250cm9sXCI7XG5pbXBvcnQgeyBJTkZJTklURV9DQUNIRSwgTkVYVF9DQUNIRV9UQUdTX0hFQURFUiB9IGZyb20gXCJuZXh0L2Rpc3QvbGliL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgTm9GYWxsYmFja0Vycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL25vLWZhbGxiYWNrLWVycm9yLmV4dGVybmFsXCI7XG5pbXBvcnQgeyBDYWNoZWRSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXNwb25zZS1jYWNoZVwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL3NyYy9hcHAvYXBpL3JlbmF0YS9jaGF0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZW5hdGEvY2hhdC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3JlbmF0YS9jaGF0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9yZW5hdGEvY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9zcmMvYXBwL2FwaS9yZW5hdGEvY2hhdC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzLCBjdHgpIHtcbiAgICB2YXIgX25leHRDb25maWdfZXhwZXJpbWVudGFsO1xuICAgIGxldCBzcmNQYWdlID0gXCIvYXBpL3JlbmF0YS9jaGF0L3JvdXRlXCI7XG4gICAgLy8gdHVyYm9wYWNrIGRvZXNuJ3Qgbm9ybWFsaXplIGAvaW5kZXhgIGluIHRoZSBwYWdlIG5hbWVcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIHRvIHByb2Nlc3MgZHluYW1pYyByb3V0ZXMgcHJvcGVybHlcbiAgICAvLyBUT0RPOiBmaXggdHVyYm9wYWNrIHByb3ZpZGluZyBkaWZmZXJpbmcgdmFsdWUgZnJvbSB3ZWJwYWNrXG4gICAgaWYgKHByb2Nlc3MuZW52LlRVUkJPUEFDSykge1xuICAgICAgICBzcmNQYWdlID0gc3JjUGFnZS5yZXBsYWNlKC9cXC9pbmRleCQvLCAnJykgfHwgJy8nO1xuICAgIH0gZWxzZSBpZiAoc3JjUGFnZSA9PT0gJy9pbmRleCcpIHtcbiAgICAgICAgLy8gd2UgYWx3YXlzIG5vcm1hbGl6ZSAvaW5kZXggc3BlY2lmaWNhbGx5XG4gICAgICAgIHNyY1BhZ2UgPSAnLyc7XG4gICAgfVxuICAgIGNvbnN0IG11bHRpWm9uZURyYWZ0TW9kZSA9IHByb2Nlc3MuZW52Ll9fTkVYVF9NVUxUSV9aT05FX0RSQUZUX01PREU7XG4gICAgY29uc3QgcHJlcGFyZVJlc3VsdCA9IGF3YWl0IHJvdXRlTW9kdWxlLnByZXBhcmUocmVxLCByZXMsIHtcbiAgICAgICAgc3JjUGFnZSxcbiAgICAgICAgbXVsdGlab25lRHJhZnRNb2RlXG4gICAgfSk7XG4gICAgaWYgKCFwcmVwYXJlUmVzdWx0KSB7XG4gICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDAwO1xuICAgICAgICByZXMuZW5kKCdCYWQgUmVxdWVzdCcpO1xuICAgICAgICBjdHgud2FpdFVudGlsID09IG51bGwgPyB2b2lkIDAgOiBjdHgud2FpdFVudGlsLmNhbGwoY3R4LCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCB7IGJ1aWxkSWQsIHBhcmFtcywgbmV4dENvbmZpZywgaXNEcmFmdE1vZGUsIHByZXJlbmRlck1hbmlmZXN0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0LCBpc09uRGVtYW5kUmV2YWxpZGF0ZSwgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsIHJlc29sdmVkUGF0aG5hbWUgfSA9IHByZXBhcmVSZXN1bHQ7XG4gICAgY29uc3Qgbm9ybWFsaXplZFNyY1BhZ2UgPSBub3JtYWxpemVBcHBQYXRoKHNyY1BhZ2UpO1xuICAgIGxldCBpc0lzciA9IEJvb2xlYW4ocHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV0gfHwgcHJlcmVuZGVyTWFuaWZlc3Qucm91dGVzW3Jlc29sdmVkUGF0aG5hbWVdKTtcbiAgICBpZiAoaXNJc3IgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNvbnN0IGlzUHJlcmVuZGVyZWQgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgICAgIGNvbnN0IHByZXJlbmRlckluZm8gPSBwcmVyZW5kZXJNYW5pZmVzdC5keW5hbWljUm91dGVzW25vcm1hbGl6ZWRTcmNQYWdlXTtcbiAgICAgICAgaWYgKHByZXJlbmRlckluZm8pIHtcbiAgICAgICAgICAgIGlmIChwcmVyZW5kZXJJbmZvLmZhbGxiYWNrID09PSBmYWxzZSAmJiAhaXNQcmVyZW5kZXJlZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBOb0ZhbGxiYWNrRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBsZXQgY2FjaGVLZXkgPSBudWxsO1xuICAgIGlmIChpc0lzciAmJiAhcm91dGVNb2R1bGUuaXNEZXYgJiYgIWlzRHJhZnRNb2RlKSB7XG4gICAgICAgIGNhY2hlS2V5ID0gcmVzb2x2ZWRQYXRobmFtZTtcbiAgICAgICAgLy8gZW5zdXJlIC9pbmRleCBhbmQgLyBpcyBub3JtYWxpemVkIHRvIG9uZSBrZXlcbiAgICAgICAgY2FjaGVLZXkgPSBjYWNoZUtleSA9PT0gJy9pbmRleCcgPyAnLycgOiBjYWNoZUtleTtcbiAgICB9XG4gICAgY29uc3Qgc3VwcG9ydHNEeW5hbWljUmVzcG9uc2UgPSAvLyBJZiB3ZSdyZSBpbiBkZXZlbG9wbWVudCwgd2UgYWx3YXlzIHN1cHBvcnQgZHluYW1pYyBIVE1MXG4gICAgcm91dGVNb2R1bGUuaXNEZXYgPT09IHRydWUgfHwgLy8gSWYgdGhpcyBpcyBub3QgU1NHIG9yIGRvZXMgbm90IGhhdmUgc3RhdGljIHBhdGhzLCB0aGVuIGl0IHN1cHBvcnRzXG4gICAgLy8gZHluYW1pYyBIVE1MLlxuICAgICFpc0lzcjtcbiAgICAvLyBUaGlzIGlzIGEgcmV2YWxpZGF0aW9uIHJlcXVlc3QgaWYgdGhlIHJlcXVlc3QgaXMgZm9yIGEgc3RhdGljXG4gICAgLy8gcGFnZSBhbmQgaXQgaXMgbm90IGJlaW5nIHJlc3VtZWQgZnJvbSBhIHBvc3Rwb25lZCByZW5kZXIgYW5kXG4gICAgLy8gaXQgaXMgbm90IGEgZHluYW1pYyBSU0MgcmVxdWVzdCB0aGVuIGl0IGlzIGEgcmV2YWxpZGF0aW9uXG4gICAgLy8gcmVxdWVzdC5cbiAgICBjb25zdCBpc1JldmFsaWRhdGUgPSBpc0lzciAmJiAhc3VwcG9ydHNEeW5hbWljUmVzcG9uc2U7XG4gICAgY29uc3QgbWV0aG9kID0gcmVxLm1ldGhvZCB8fCAnR0VUJztcbiAgICBjb25zdCB0cmFjZXIgPSBnZXRUcmFjZXIoKTtcbiAgICBjb25zdCBhY3RpdmVTcGFuID0gdHJhY2VyLmdldEFjdGl2ZVNjb3BlU3BhbigpO1xuICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgIHBhcmFtcyxcbiAgICAgICAgcHJlcmVuZGVyTWFuaWZlc3QsXG4gICAgICAgIHJlbmRlck9wdHM6IHtcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbDoge1xuICAgICAgICAgICAgICAgIGNhY2hlQ29tcG9uZW50czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5jYWNoZUNvbXBvbmVudHMpLFxuICAgICAgICAgICAgICAgIGF1dGhJbnRlcnJ1cHRzOiBCb29sZWFuKG5leHRDb25maWcuZXhwZXJpbWVudGFsLmF1dGhJbnRlcnJ1cHRzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlLFxuICAgICAgICAgICAgaW5jcmVtZW50YWxDYWNoZTogZ2V0UmVxdWVzdE1ldGEocmVxLCAnaW5jcmVtZW50YWxDYWNoZScpLFxuICAgICAgICAgICAgY2FjaGVMaWZlUHJvZmlsZXM6IChfbmV4dENvbmZpZ19leHBlcmltZW50YWwgPSBuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbC5jYWNoZUxpZmUsXG4gICAgICAgICAgICBpc1JldmFsaWRhdGUsXG4gICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWwsXG4gICAgICAgICAgICBvbkNsb3NlOiAoY2IpPT57XG4gICAgICAgICAgICAgICAgcmVzLm9uKCdjbG9zZScsIGNiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkFmdGVyVGFza0Vycm9yOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBvbkluc3RydW1lbnRhdGlvblJlcXVlc3RFcnJvcjogKGVycm9yLCBfcmVxdWVzdCwgZXJyb3JDb250ZXh0KT0+cm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnJvciwgZXJyb3JDb250ZXh0LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KVxuICAgICAgICB9LFxuICAgICAgICBzaGFyZWRDb250ZXh0OiB7XG4gICAgICAgICAgICBidWlsZElkXG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNvbnN0IG5vZGVOZXh0UmVxID0gbmV3IE5vZGVOZXh0UmVxdWVzdChyZXEpO1xuICAgIGNvbnN0IG5vZGVOZXh0UmVzID0gbmV3IE5vZGVOZXh0UmVzcG9uc2UocmVzKTtcbiAgICBjb25zdCBuZXh0UmVxID0gTmV4dFJlcXVlc3RBZGFwdGVyLmZyb21Ob2RlTmV4dFJlcXVlc3Qobm9kZU5leHRSZXEsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UocmVzKSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaW52b2tlUm91dGVNb2R1bGUgPSBhc3luYyAoc3Bhbik9PntcbiAgICAgICAgICAgIHJldHVybiByb3V0ZU1vZHVsZS5oYW5kbGUobmV4dFJlcSwgY29udGV4dCkuZmluYWxseSgoKT0+e1xuICAgICAgICAgICAgICAgIGlmICghc3BhbikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlcyh7XG4gICAgICAgICAgICAgICAgICAgICdodHRwLnN0YXR1c19jb2RlJzogcmVzLnN0YXR1c0NvZGUsXG4gICAgICAgICAgICAgICAgICAgICduZXh0LnJzYyc6IGZhbHNlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vdFNwYW5BdHRyaWJ1dGVzID0gdHJhY2VyLmdldFJvb3RTcGFuQXR0cmlidXRlcygpO1xuICAgICAgICAgICAgICAgIC8vIFdlIHdlcmUgdW5hYmxlIHRvIGdldCBhdHRyaWJ1dGVzLCBwcm9iYWJseSBPVEVMIGlzIG5vdCBlbmFibGVkXG4gICAgICAgICAgICAgICAgaWYgKCFyb290U3BhbkF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKSAhPT0gQmFzZVNlcnZlclNwYW4uaGFuZGxlUmVxdWVzdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuZXhwZWN0ZWQgcm9vdCBzcGFuIHR5cGUgJyR7cm9vdFNwYW5BdHRyaWJ1dGVzLmdldCgnbmV4dC5zcGFuX3R5cGUnKX0nLiBQbGVhc2UgcmVwb3J0IHRoaXMgTmV4dC5qcyBpc3N1ZSBodHRwczovL2dpdGh1Yi5jb20vdmVyY2VsL25leHQuanNgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCByb3V0ZSA9IHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQucm91dGUnKTtcbiAgICAgICAgICAgICAgICBpZiAocm91dGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke21ldGhvZH0gJHtyb3V0ZX1gO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQucm91dGUnOiByb3V0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dC5zcGFuX25hbWUnOiBuYW1lXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnVwZGF0ZU5hbWUobmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGAke21ldGhvZH0gJHtyZXEudXJsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBoYW5kbGVSZXNwb25zZSA9IGFzeW5jIChjdXJyZW50U3Bhbik9PntcbiAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlR2VuZXJhdG9yID0gYXN5bmMgKHsgcHJldmlvdXNDYWNoZUVudHJ5IH0pPT57XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzT25EZW1hbmRSZXZhbGlkYXRlICYmIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkICYmICFwcmV2aW91c0NhY2hlRW50cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXNDb2RlID0gNDA0O1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb24tZGVtYW5kIHJldmFsaWRhdGUgYWx3YXlzIHNldHMgdGhpcyBoZWFkZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgJ1JFVkFMSURBVEVEJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuZW5kKCdUaGlzIHBhZ2UgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGludm9rZVJvdXRlTW9kdWxlKGN1cnJlbnRTcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmZldGNoTWV0cmljcyA9IGNvbnRleHQucmVuZGVyT3B0cy5mZXRjaE1ldHJpY3M7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwZW5kaW5nV2FpdFVudGlsID0gY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWw7XG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdXNpbmcgcHJvdmlkZWQgd2FpdFVudGlsIGlmIGF2YWlsYWJsZVxuICAgICAgICAgICAgICAgICAgICAvLyBpZiBpdCdzIG5vdCB3ZSBmYWxsYmFjayB0byBzZW5kUmVzcG9uc2UncyBoYW5kbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVuZGluZ1dhaXRVbnRpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC53YWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHgud2FpdFVudGlsKHBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlbmRpbmdXYWl0VW50aWwgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVUYWdzID0gY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFRhZ3M7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpYyByZXNwb25zZSwgd2UgY2FuIGNhY2hlIGl0IHNvIGxvbmdcbiAgICAgICAgICAgICAgICAgICAgLy8gYXMgaXQncyBub3QgZWRnZS5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSXNyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcmVzcG9uc2UuYmxvYigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29weSB0aGUgaGVhZGVycyBmcm9tIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlVGFncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbTkVYVF9DQUNIRV9UQUdTX0hFQURFUl0gPSBjYWNoZVRhZ3M7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddICYmIGJsb2IudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gYmxvYi50eXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV2YWxpZGF0ZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZSA9PT0gJ3VuZGVmaW5lZCcgfHwgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPj0gSU5GSU5JVEVfQ0FDSEUgPyBmYWxzZSA6IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhwaXJlID0gdHlwZW9mIGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRFeHBpcmUgPj0gSU5GSU5JVEVfQ0FDSEUgPyB1bmRlZmluZWQgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjYWNoZSBlbnRyeSBmb3IgdGhlIHJlc3BvbnNlLlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVFbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBraW5kOiBDYWNoZWRSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogQnVmZmVyLmZyb20oYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGVDb250cm9sOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVFbnRyeTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlbmQgcmVzcG9uc2Ugd2l0aG91dCBjYWNoaW5nIGlmIG5vdCBJU1JcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIHJlc3BvbnNlLCBjb250ZXh0LnJlbmRlck9wdHMucGVuZGluZ1dhaXRVbnRpbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGlzIGlzIGEgYmFja2dyb3VuZCByZXZhbGlkYXRlIHdlIG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSByZXF1ZXN0IGVycm9yIGhlcmUgYXMgaXQgd29uJ3QgYmUgYnViYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNDYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiBwcmV2aW91c0NhY2hlRW50cnkuaXNTdGFsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVQYXRoOiBzcmNQYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByb3V0ZXJTZXJ2ZXJDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSBhd2FpdCByb3V0ZU1vZHVsZS5oYW5kbGVSZXNwb25zZSh7XG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIG5leHRDb25maWcsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXksXG4gICAgICAgICAgICAgICAgcm91dGVLaW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICAgICAgICAgIGlzRmFsbGJhY2s6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICAgICAgICAgIGlzUm91dGVQUFJFbmFibGVkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlT25seUdlbmVyYXRlZCxcbiAgICAgICAgICAgICAgICByZXNwb25zZUdlbmVyYXRvcixcbiAgICAgICAgICAgICAgICB3YWl0VW50aWw6IGN0eC53YWl0VW50aWxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2UgZG9uJ3QgY3JlYXRlIGEgY2FjaGVFbnRyeSBmb3IgSVNSXG4gICAgICAgICAgICBpZiAoIWlzSXNyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoKGNhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZSA9IGNhY2hlRW50cnkudmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfY2FjaGVFbnRyeV92YWx1ZS5raW5kKSAhPT0gQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSkge1xuICAgICAgICAgICAgICAgIHZhciBfY2FjaGVFbnRyeV92YWx1ZTE7XG4gICAgICAgICAgICAgICAgdGhyb3cgT2JqZWN0LmRlZmluZVByb3BlcnR5KG5ldyBFcnJvcihgSW52YXJpYW50OiBhcHAtcm91dGUgcmVjZWl2ZWQgaW52YWxpZCBjYWNoZSBlbnRyeSAke2NhY2hlRW50cnkgPT0gbnVsbCA/IHZvaWQgMCA6IChfY2FjaGVFbnRyeV92YWx1ZTEgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUxLmtpbmR9YCksIFwiX19ORVhUX0VSUk9SX0NPREVcIiwge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogXCJFNzAxXCIsXG4gICAgICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSkge1xuICAgICAgICAgICAgICAgIHJlcy5zZXRIZWFkZXIoJ3gtbmV4dGpzLWNhY2hlJywgaXNPbkRlbWFuZFJldmFsaWRhdGUgPyAnUkVWQUxJREFURUQnIDogY2FjaGVFbnRyeS5pc01pc3MgPyAnTUlTUycgOiBjYWNoZUVudHJ5LmlzU3RhbGUgPyAnU1RBTEUnIDogJ0hJVCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gRHJhZnQgbW9kZSBzaG91bGQgbmV2ZXIgYmUgY2FjaGVkXG4gICAgICAgICAgICBpZiAoaXNEcmFmdE1vZGUpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJywgJ3ByaXZhdGUsIG5vLWNhY2hlLCBuby1zdG9yZSwgbWF4LWFnZT0wLCBtdXN0LXJldmFsaWRhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSBmcm9tTm9kZU91dGdvaW5nSHR0cEhlYWRlcnMoY2FjaGVFbnRyeS52YWx1ZS5oZWFkZXJzKTtcbiAgICAgICAgICAgIGlmICghKGdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykgJiYgaXNJc3IpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5kZWxldGUoTkVYVF9DQUNIRV9UQUdTX0hFQURFUik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZiBjYWNoZSBjb250cm9sIGlzIGFscmVhZHkgc2V0IG9uIHRoZSByZXNwb25zZSB3ZSBkb24ndFxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXQgdG8gYWxsb3cgdXNlcnMgdG8gY3VzdG9taXplIGl0IHZpYSBuZXh0LmNvbmZpZ1xuICAgICAgICAgICAgaWYgKGNhY2hlRW50cnkuY2FjaGVDb250cm9sICYmICFyZXMuZ2V0SGVhZGVyKCdDYWNoZS1Db250cm9sJykgJiYgIWhlYWRlcnMuZ2V0KCdDYWNoZS1Db250cm9sJykpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLnNldCgnQ2FjaGUtQ29udHJvbCcsIGdldENhY2hlQ29udHJvbEhlYWRlcihjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKGNhY2hlRW50cnkudmFsdWUuYm9keSwge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBjYWNoZUVudHJ5LnZhbHVlLnN0YXR1cyB8fCAyMDBcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPOiBhY3RpdmVTcGFuIGNvZGUgcGF0aCBpcyBmb3Igd2hlbiB3cmFwcGVkIGJ5XG4gICAgICAgIC8vIG5leHQtc2VydmVyIGNhbiBiZSByZW1vdmVkIHdoZW4gdGhpcyBpcyBubyBsb25nZXIgdXNlZFxuICAgICAgICBpZiAoYWN0aXZlU3Bhbikge1xuICAgICAgICAgICAgYXdhaXQgaGFuZGxlUmVzcG9uc2UoYWN0aXZlU3Bhbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhd2FpdCB0cmFjZXIud2l0aFByb3BhZ2F0ZWRDb250ZXh0KHJlcS5oZWFkZXJzLCAoKT0+dHJhY2VyLnRyYWNlKEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QsIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbk5hbWU6IGAke21ldGhvZH0gJHtyZXEudXJsfWAsXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IFNwYW5LaW5kLlNFUlZFUixcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAubWV0aG9kJzogbWV0aG9kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2h0dHAudGFyZ2V0JzogcmVxLnVybFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGFuZGxlUmVzcG9uc2UpKTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0ZhbGxiYWNrRXJyb3IpKSB7XG4gICAgICAgICAgICBhd2FpdCByb3V0ZU1vZHVsZS5vblJlcXVlc3RFcnJvcihyZXEsIGVyciwge1xuICAgICAgICAgICAgICAgIHJvdXRlcktpbmQ6ICdBcHAgUm91dGVyJyxcbiAgICAgICAgICAgICAgICByb3V0ZVBhdGg6IG5vcm1hbGl6ZWRTcmNQYWdlLFxuICAgICAgICAgICAgICAgIHJvdXRlVHlwZTogJ3JvdXRlJyxcbiAgICAgICAgICAgICAgICByZXZhbGlkYXRlUmVhc29uOiBnZXRSZXZhbGlkYXRlUmVhc29uKHtcbiAgICAgICAgICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICBpc09uRGVtYW5kUmV2YWxpZGF0ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZXRocm93IHNvIHRoYXQgd2UgY2FuIGhhbmRsZSBzZXJ2aW5nIGVycm9yIHBhZ2VcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBkdXJpbmcgc3RhdGljIGdlbmVyYXRpb24sIHRocm93IHRoZSBlcnJvciBhZ2Fpbi5cbiAgICAgICAgaWYgKGlzSXNyKSB0aHJvdyBlcnI7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgc2VuZCBhIDUwMCByZXNwb25zZS5cbiAgICAgICAgYXdhaXQgc2VuZFJlc3BvbnNlKG5vZGVOZXh0UmVxLCBub2RlTmV4dFJlcywgbmV3IFJlc3BvbnNlKG51bGwsIHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwXG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frenata%2Fchat%2Froute&page=%2Fapi%2Frenata%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frenata%2Fchat%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/renata/chat/route.ts":
/*!******************************************!*\
  !*** ./src/app/api/renata/chat/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Dynamic mode detection - analyze user message to determine appropriate mode\nfunction detectOptimalMode(userMessage) {\n    const messageLower = userMessage.toLowerCase();\n    // Coach mode - wants improvement, feedback, coaching\n    const coachKeywords = [\n        'improve',\n        'better',\n        'feedback',\n        'how can i',\n        'what should i',\n        'coach me',\n        'help me get better',\n        'review my',\n        'critique',\n        'suggestions',\n        'advice on'\n    ];\n    // Analyst mode - wants data, analysis, statistics\n    const analystKeywords = [\n        'analyze',\n        'analysis',\n        'data',\n        'statistics',\n        'stats',\n        'performance',\n        'metrics',\n        'numbers',\n        'breakdown',\n        'show me',\n        'what are my',\n        'how well',\n        'win rate',\n        'profit',\n        'loss',\n        'expectancy',\n        'sharpe ratio',\n        'drawdown'\n    ];\n    // Mentor mode - wants guidance, wisdom, long-term perspective\n    const mentorKeywords = [\n        'mentor',\n        'guidance',\n        'wisdom',\n        'long term',\n        'career',\n        'journey',\n        'experience',\n        'teach me',\n        'learning path',\n        'what should i focus on',\n        'future',\n        'goals'\n    ];\n    // Check for analyst mode first (most specific)\n    if (analystKeywords.some((keyword)=>messageLower.includes(keyword))) {\n        return 'analyst';\n    }\n    // Check for coach mode\n    if (coachKeywords.some((keyword)=>messageLower.includes(keyword))) {\n        return 'coach';\n    }\n    // Check for mentor mode\n    if (mentorKeywords.some((keyword)=>messageLower.includes(keyword))) {\n        return 'mentor';\n    }\n    // Default to renata for conversational messages\n    return 'renata';\n}\n// Filter function to make responses more conversational and less stats-focused\nfunction filterRenataResponse(originalMessage, backendResponse) {\n    // Only catch very specific, generic stats-heavy patterns\n    const responseLower = backendResponse.toLowerCase();\n    const messageLower = originalMessage.toLowerCase();\n    // Check for specific problematic patterns from the backend\n    const problematicPatterns = [\n        /hello.*ready to work on improving your trading.*\\d+\\.?\\d*%.*win rate/i,\n        /your recent.*\\d+\\.?\\d*%.*win rate.*shows/i,\n        /ready to work on improving.*\\d+\\.?\\d*%.*win rate/i,\n        /strong performance this period.*\\d+\\.?\\d*%.*win rate.*\\d+\\.?\\d*r.*expectancy/i,\n        /focus on maintaining consistency.*process.*recent performance/i\n    ];\n    // Check for emotional/conversational messages that shouldn't get stats\n    const isEmotionalOrConversational = [\n        'bad trade',\n        'loss',\n        'losing',\n        'frustrated',\n        'happy with',\n        'excited about',\n        'how are you',\n        'how\\'s it going',\n        'what\\'s up',\n        'thanks',\n        'awesome',\n        'terrible'\n    ].some((keyword)=>messageLower.includes(keyword));\n    // If it's an emotional message but the response is stats-heavy, filter it\n    if (isEmotionalOrConversational && (responseLower.includes('win rate') || responseLower.includes('expectancy') || responseLower.includes('performance') || responseLower.includes('consistency') || responseLower.includes('execution'))) {\n        // Generate empathetic, contextual responses\n        if (messageLower.includes('bad trade') || messageLower.includes('loss') || messageLower.includes('losing')) {\n            return \"I'm sorry to hear about that. Trading can be challenging, and losses are part of the journey. Would you like to talk about what happened or discuss some strategies for moving forward?\";\n        } else if (messageLower.includes('frustrated')) {\n            return \"I understand that frustration. Trading has its ups and downs. Sometimes taking a step back can help. What's been particularly challenging lately?\";\n        } else if (messageLower.includes('happy') || messageLower.includes('excited')) {\n            return \"That's great to hear! It sounds like you've had some positive trading experiences. What's working well for you right now?\";\n        } else {\n            return \"I hear you. Trading can definitely be an emotional journey. I'm here to chat about whatever's on your mind - trading related or not. What would help right now?\";\n        }\n    }\n    // Check if it matches other problematic patterns\n    for (const pattern of problematicPatterns){\n        if (pattern.test(backendResponse)) {\n            // Generate contextual responses based on the original message\n            if (messageLower.includes('hello') || messageLower.includes('hey') || messageLower.includes('hi')) {\n                return \"Hi there! How are you today? I'm here to chat about anything trading-related or just to have a conversation. What's on your mind?\";\n            } else if (messageLower.includes('how are you') || messageLower.includes(\"how's it going\")) {\n                return \"I'm doing great, thanks for asking! I'm excited to chat with you about trading or whatever else you'd like to discuss. How are you doing?\";\n            } else if (messageLower.includes('help') || messageLower.includes('can you')) {\n                return \"Absolutely! I'd be happy to help. What specifically would you like to talk about or work on today?\";\n            } else if (messageLower.includes('strategy') || messageLower.includes('strategies')) {\n                return \"I love talking about trading strategies! What aspect are you interested in? Risk management, entry/exit points, position sizing, or something else?\";\n            } else {\n                return \"Hello! I'm Renata, your AI assistant. I'm here to help with trading insights, strategy discussions, market analysis, or just chat. What would you like to explore?\";\n            }\n        }\n    }\n    // Return the original response for everything else\n    return backendResponse;\n}\n// Enhanced Renata chat API - Connects to backend AI with CopilotKit integration\nasync function POST(req) {\n    try {\n        const body = await req.json();\n        // Handle both single message and messages array formats\n        let message;\n        if (body.message) {\n            message = body.message;\n        } else if (body.messages && body.messages.length > 0) {\n            const lastMessage = body.messages[body.messages.length - 1];\n            message = lastMessage.content || '';\n        } else {\n            message = '';\n        }\n        const { mode = 'renata', context, smartAnalysis, concise, systemInstructions, attachedFile, userId } = body;\n        // Check if concise mode is requested (default true for brevity)\n        const conciseMode = concise !== false;\n        const customInstructions = systemInstructions || '';\n        // Handle file upload if attached\n        if (attachedFile && attachedFile.name && attachedFile.content) {\n            console.log('File attached:', attachedFile.name);\n            try {\n                // Decode base64 content to analyze the CSV\n                const base64Content = attachedFile.content;\n                const csvBytes = Buffer.from(base64Content, 'base64');\n                const csvText = csvBytes.toString('utf-8-sig');\n                // Parse CSV to get basic info\n                const lines = csvText.split('\\n').filter((line)=>line.trim());\n                const headerLine = lines[0] || '';\n                const tradeCount = Math.max(0, lines.length - 1) // Subtract header row\n                ;\n                // Extract column names from header\n                const columns = headerLine.split(',').map((col)=>col.trim());\n                // Add file info to the message for AI to acknowledge\n                const fileInfo = `\\n\\n[ FILE UPLOADED: ${attachedFile.name}]\n- Type: CSV file with ${tradeCount} trade(s)\n- Columns: ${columns.slice(0, 5).join(', ')}${columns.length > 5 ? '...' : ''}\n- Status: File received and ready for import`;\n                // Append file info to message\n                message = message + fileInfo;\n                console.log('File info added to message:', {\n                    fileName: attachedFile.name,\n                    tradeCount\n                });\n            } catch (error) {\n                console.error('Error processing file:', error);\n                const errorMessage = `\\n\\n[ FILE UPLOAD ERROR: ${attachedFile.name}]\n${error instanceof Error ? error.message : 'Failed to process file'}`;\n                message = message + errorMessage;\n            }\n        }\n        // Dynamic mode detection - analyze the message to determine optimal mode\n        const optimalMode = detectOptimalMode(message);\n        const effectiveMode = mode === 'renata' && optimalMode !== 'renata' ? optimalMode : mode;\n        console.log(' Renata Chat API - Forwarding to backend AI');\n        console.log(' Message:', message);\n        console.log(' User selected mode:', mode);\n        console.log(' Detected optimal mode:', optimalMode);\n        console.log(' Effective mode being used:', effectiveMode);\n        console.log(' Context:', context);\n        console.log(' Concise mode:', conciseMode);\n        console.log(' Custom instructions:', customInstructions ? 'Yes' : 'No');\n        // For Renata mode, add conversational guidance\n        if (effectiveMode === 'renata') {\n            console.log(' Renata mode detected - using conversational style');\n        }\n        try {\n            // Forward to backend AI endpoint for intelligent processing\n            const backendResponse = await fetch('http://localhost:6500/ai/conversation', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    message: message,\n                    mode: effectiveMode,\n                    ui_context: {\n                        ...context,\n                        currentPage: context?.page || 'dashboard',\n                        timestamp: new Date().toISOString()\n                    },\n                    conversation_history: [],\n                    context: {\n                        userPreferences: {\n                            ai_mode: effectiveMode,\n                            verbosity: conciseMode ? \"concise\" : \"normal\",\n                            stats_basis: effectiveMode === 'renata' ? null : \"gross\",\n                            unit_mode: effectiveMode === 'renata' ? null : context?.displayMode || \"dollar\",\n                            conversation_style: effectiveMode === 'renata' ? 'conversational' : 'analytical',\n                            avoid_auto_stats: effectiveMode === 'renata' ? true : false,\n                            system_instructions: customInstructions // Pass custom instructions to backend\n                        }\n                    }\n                })\n            });\n            if (!backendResponse.ok) {\n                console.error(' Backend AI error:', backendResponse.status, backendResponse.statusText);\n                throw new Error(`Backend AI returned ${backendResponse.status}: ${backendResponse.statusText}`);\n            }\n            const aiResponse = await backendResponse.json();\n            console.log(' Backend AI response:', aiResponse);\n            // Process any UI actions from the backend response\n            if (aiResponse.ui_action) {\n                console.log(' UI Action detected:', aiResponse.ui_action);\n            }\n            // Filter response for Renata mode to be less stats-focused\n            let filteredResponse = aiResponse.response;\n            if (effectiveMode === 'renata') {\n                filteredResponse = filterRenataResponse(message, aiResponse.response);\n                if (filteredResponse !== aiResponse.response) {\n                    console.log(' Renata response filtered for conversational style');\n                    console.log(' Original:', aiResponse.response);\n                    console.log(' Filtered:', filteredResponse);\n                } else {\n                    console.log(' Renata response passed through (no filtering needed)');\n                }\n            }\n            // Return the enhanced response from the backend\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: filteredResponse,\n                mode_used: effectiveMode,\n                original_mode: mode,\n                optimal_mode: optimalMode,\n                mode_switched: optimalMode !== mode && mode === 'renata',\n                timestamp: aiResponse.timestamp || new Date().toISOString(),\n                command_type: aiResponse.command_type,\n                intent: aiResponse.intent,\n                confidence: aiResponse.confidence,\n                ui_action: aiResponse.ui_action,\n                ai_mode_change: aiResponse.ai_mode_change,\n                learning_applied: aiResponse.learning_applied || false,\n                navigationCommands: aiResponse.ui_action ? [\n                    aiResponse.ui_action\n                ] : [],\n                nlpAnalysis: {\n                    dateRange: null,\n                    intents: [\n                        aiResponse.intent\n                    ] || 0,\n                    advancedParams: aiResponse.ui_action?.parameters || {}\n                }\n            });\n        } catch (backendError) {\n            console.error(' Backend connection error:', backendError);\n            // Fallback to basic response if backend is unavailable\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                response: \"I'm having trouble connecting to my AI backend right now. Please try again in a moment.\",\n                mode_used: effectiveMode,\n                original_mode: mode,\n                optimal_mode: optimalMode,\n                mode_switched: optimalMode !== mode && mode === 'renata',\n                timestamp: new Date().toISOString(),\n                command_type: \"error\",\n                intent: \"backend_error\",\n                confidence: 0.0,\n                error: backendError instanceof Error ? backendError.message : 'Unknown backend error',\n                navigationCommands: [],\n                nlpAnalysis: null\n            }, {\n                status: 503\n            });\n        }\n    } catch (error) {\n        console.error(' Renata Chat API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error',\n            message: 'I apologize, but I encountered an internal error. Please try again in a moment.',\n            details: error instanceof Error ? error.message : 'Unknown error',\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvc3JjL2FwcC9hcGkvcmVuYXRhL2NoYXQvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuXG4vLyBEeW5hbWljIG1vZGUgZGV0ZWN0aW9uIC0gYW5hbHl6ZSB1c2VyIG1lc3NhZ2UgdG8gZGV0ZXJtaW5lIGFwcHJvcHJpYXRlIG1vZGVcbmZ1bmN0aW9uIGRldGVjdE9wdGltYWxNb2RlKHVzZXJNZXNzYWdlOiBzdHJpbmcpOiAncmVuYXRhJyB8ICdjb2FjaCcgfCAnYW5hbHlzdCcgfCAnbWVudG9yJyB7XG4gIGNvbnN0IG1lc3NhZ2VMb3dlciA9IHVzZXJNZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gQ29hY2ggbW9kZSAtIHdhbnRzIGltcHJvdmVtZW50LCBmZWVkYmFjaywgY29hY2hpbmdcbiAgY29uc3QgY29hY2hLZXl3b3JkcyA9IFtcbiAgICAnaW1wcm92ZScsICdiZXR0ZXInLCAnZmVlZGJhY2snLCAnaG93IGNhbiBpJywgJ3doYXQgc2hvdWxkIGknLCAnY29hY2ggbWUnLFxuICAgICdoZWxwIG1lIGdldCBiZXR0ZXInLCAncmV2aWV3IG15JywgJ2NyaXRpcXVlJywgJ3N1Z2dlc3Rpb25zJywgJ2FkdmljZSBvbidcbiAgXTtcblxuICAvLyBBbmFseXN0IG1vZGUgLSB3YW50cyBkYXRhLCBhbmFseXNpcywgc3RhdGlzdGljc1xuICBjb25zdCBhbmFseXN0S2V5d29yZHMgPSBbXG4gICAgJ2FuYWx5emUnLCAnYW5hbHlzaXMnLCAnZGF0YScsICdzdGF0aXN0aWNzJywgJ3N0YXRzJywgJ3BlcmZvcm1hbmNlJywgJ21ldHJpY3MnLFxuICAgICdudW1iZXJzJywgJ2JyZWFrZG93bicsICdzaG93IG1lJywgJ3doYXQgYXJlIG15JywgJ2hvdyB3ZWxsJywgJ3dpbiByYXRlJyxcbiAgICAncHJvZml0JywgJ2xvc3MnLCAnZXhwZWN0YW5jeScsICdzaGFycGUgcmF0aW8nLCAnZHJhd2Rvd24nXG4gIF07XG5cbiAgLy8gTWVudG9yIG1vZGUgLSB3YW50cyBndWlkYW5jZSwgd2lzZG9tLCBsb25nLXRlcm0gcGVyc3BlY3RpdmVcbiAgY29uc3QgbWVudG9yS2V5d29yZHMgPSBbXG4gICAgJ21lbnRvcicsICdndWlkYW5jZScsICd3aXNkb20nLCAnbG9uZyB0ZXJtJywgJ2NhcmVlcicsICdqb3VybmV5JywgJ2V4cGVyaWVuY2UnLFxuICAgICd0ZWFjaCBtZScsICdsZWFybmluZyBwYXRoJywgJ3doYXQgc2hvdWxkIGkgZm9jdXMgb24nLCAnZnV0dXJlJywgJ2dvYWxzJ1xuICBdO1xuXG4gIC8vIENoZWNrIGZvciBhbmFseXN0IG1vZGUgZmlyc3QgKG1vc3Qgc3BlY2lmaWMpXG4gIGlmIChhbmFseXN0S2V5d29yZHMuc29tZShrZXl3b3JkID0+IG1lc3NhZ2VMb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICByZXR1cm4gJ2FuYWx5c3QnO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGNvYWNoIG1vZGVcbiAgaWYgKGNvYWNoS2V5d29yZHMuc29tZShrZXl3b3JkID0+IG1lc3NhZ2VMb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICByZXR1cm4gJ2NvYWNoJztcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBtZW50b3IgbW9kZVxuICBpZiAobWVudG9yS2V5d29yZHMuc29tZShrZXl3b3JkID0+IG1lc3NhZ2VMb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICByZXR1cm4gJ21lbnRvcic7XG4gIH1cblxuICAvLyBEZWZhdWx0IHRvIHJlbmF0YSBmb3IgY29udmVyc2F0aW9uYWwgbWVzc2FnZXNcbiAgcmV0dXJuICdyZW5hdGEnO1xufVxuXG4vLyBGaWx0ZXIgZnVuY3Rpb24gdG8gbWFrZSByZXNwb25zZXMgbW9yZSBjb252ZXJzYXRpb25hbCBhbmQgbGVzcyBzdGF0cy1mb2N1c2VkXG5mdW5jdGlvbiBmaWx0ZXJSZW5hdGFSZXNwb25zZShvcmlnaW5hbE1lc3NhZ2U6IHN0cmluZywgYmFja2VuZFJlc3BvbnNlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBPbmx5IGNhdGNoIHZlcnkgc3BlY2lmaWMsIGdlbmVyaWMgc3RhdHMtaGVhdnkgcGF0dGVybnNcbiAgY29uc3QgcmVzcG9uc2VMb3dlciA9IGJhY2tlbmRSZXNwb25zZS50b0xvd2VyQ2FzZSgpXG4gIGNvbnN0IG1lc3NhZ2VMb3dlciA9IG9yaWdpbmFsTWVzc2FnZS50b0xvd2VyQ2FzZSgpXG5cbiAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIHByb2JsZW1hdGljIHBhdHRlcm5zIGZyb20gdGhlIGJhY2tlbmRcbiAgY29uc3QgcHJvYmxlbWF0aWNQYXR0ZXJucyA9IFtcbiAgICAvaGVsbG8uKnJlYWR5IHRvIHdvcmsgb24gaW1wcm92aW5nIHlvdXIgdHJhZGluZy4qXFxkK1xcLj9cXGQqJS4qd2luIHJhdGUvaSxcbiAgICAveW91ciByZWNlbnQuKlxcZCtcXC4/XFxkKiUuKndpbiByYXRlLipzaG93cy9pLFxuICAgIC9yZWFkeSB0byB3b3JrIG9uIGltcHJvdmluZy4qXFxkK1xcLj9cXGQqJS4qd2luIHJhdGUvaSxcbiAgICAvc3Ryb25nIHBlcmZvcm1hbmNlIHRoaXMgcGVyaW9kLipcXGQrXFwuP1xcZColLip3aW4gcmF0ZS4qXFxkK1xcLj9cXGQqci4qZXhwZWN0YW5jeS9pLFxuICAgIC9mb2N1cyBvbiBtYWludGFpbmluZyBjb25zaXN0ZW5jeS4qcHJvY2Vzcy4qcmVjZW50IHBlcmZvcm1hbmNlL2lcbiAgXVxuXG4gIC8vIENoZWNrIGZvciBlbW90aW9uYWwvY29udmVyc2F0aW9uYWwgbWVzc2FnZXMgdGhhdCBzaG91bGRuJ3QgZ2V0IHN0YXRzXG4gIGNvbnN0IGlzRW1vdGlvbmFsT3JDb252ZXJzYXRpb25hbCA9IFtcbiAgICAnYmFkIHRyYWRlJywgJ2xvc3MnLCAnbG9zaW5nJywgJ2ZydXN0cmF0ZWQnLCAnaGFwcHkgd2l0aCcsICdleGNpdGVkIGFib3V0JyxcbiAgICAnaG93IGFyZSB5b3UnLCAnaG93XFwncyBpdCBnb2luZycsICd3aGF0XFwncyB1cCcsICd0aGFua3MnLCAnYXdlc29tZScsICd0ZXJyaWJsZSdcbiAgXS5zb21lKGtleXdvcmQgPT4gbWVzc2FnZUxvd2VyLmluY2x1ZGVzKGtleXdvcmQpKTtcblxuICAvLyBJZiBpdCdzIGFuIGVtb3Rpb25hbCBtZXNzYWdlIGJ1dCB0aGUgcmVzcG9uc2UgaXMgc3RhdHMtaGVhdnksIGZpbHRlciBpdFxuICBpZiAoaXNFbW90aW9uYWxPckNvbnZlcnNhdGlvbmFsICYmIChcbiAgICByZXNwb25zZUxvd2VyLmluY2x1ZGVzKCd3aW4gcmF0ZScpIHx8XG4gICAgcmVzcG9uc2VMb3dlci5pbmNsdWRlcygnZXhwZWN0YW5jeScpIHx8XG4gICAgcmVzcG9uc2VMb3dlci5pbmNsdWRlcygncGVyZm9ybWFuY2UnKSB8fFxuICAgIHJlc3BvbnNlTG93ZXIuaW5jbHVkZXMoJ2NvbnNpc3RlbmN5JykgfHxcbiAgICByZXNwb25zZUxvd2VyLmluY2x1ZGVzKCdleGVjdXRpb24nKVxuICApKSB7XG4gICAgLy8gR2VuZXJhdGUgZW1wYXRoZXRpYywgY29udGV4dHVhbCByZXNwb25zZXNcbiAgICBpZiAobWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdiYWQgdHJhZGUnKSB8fCBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2xvc3MnKSB8fCBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2xvc2luZycpKSB7XG4gICAgICByZXR1cm4gXCJJJ20gc29ycnkgdG8gaGVhciBhYm91dCB0aGF0LiBUcmFkaW5nIGNhbiBiZSBjaGFsbGVuZ2luZywgYW5kIGxvc3NlcyBhcmUgcGFydCBvZiB0aGUgam91cm5leS4gV291bGQgeW91IGxpa2UgdG8gdGFsayBhYm91dCB3aGF0IGhhcHBlbmVkIG9yIGRpc2N1c3Mgc29tZSBzdHJhdGVnaWVzIGZvciBtb3ZpbmcgZm9yd2FyZD9cIjtcbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2VMb3dlci5pbmNsdWRlcygnZnJ1c3RyYXRlZCcpKSB7XG4gICAgICByZXR1cm4gXCJJIHVuZGVyc3RhbmQgdGhhdCBmcnVzdHJhdGlvbi4gVHJhZGluZyBoYXMgaXRzIHVwcyBhbmQgZG93bnMuIFNvbWV0aW1lcyB0YWtpbmcgYSBzdGVwIGJhY2sgY2FuIGhlbHAuIFdoYXQncyBiZWVuIHBhcnRpY3VsYXJseSBjaGFsbGVuZ2luZyBsYXRlbHk/XCI7XG4gICAgfSBlbHNlIGlmIChtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2hhcHB5JykgfHwgbWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdleGNpdGVkJykpIHtcbiAgICAgIHJldHVybiBcIlRoYXQncyBncmVhdCB0byBoZWFyISBJdCBzb3VuZHMgbGlrZSB5b3UndmUgaGFkIHNvbWUgcG9zaXRpdmUgdHJhZGluZyBleHBlcmllbmNlcy4gV2hhdCdzIHdvcmtpbmcgd2VsbCBmb3IgeW91IHJpZ2h0IG5vdz9cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFwiSSBoZWFyIHlvdS4gVHJhZGluZyBjYW4gZGVmaW5pdGVseSBiZSBhbiBlbW90aW9uYWwgam91cm5leS4gSSdtIGhlcmUgdG8gY2hhdCBhYm91dCB3aGF0ZXZlcidzIG9uIHlvdXIgbWluZCAtIHRyYWRpbmcgcmVsYXRlZCBvciBub3QuIFdoYXQgd291bGQgaGVscCByaWdodCBub3c/XCI7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgaXQgbWF0Y2hlcyBvdGhlciBwcm9ibGVtYXRpYyBwYXR0ZXJuc1xuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcHJvYmxlbWF0aWNQYXR0ZXJucykge1xuICAgIGlmIChwYXR0ZXJuLnRlc3QoYmFja2VuZFJlc3BvbnNlKSkge1xuICAgICAgLy8gR2VuZXJhdGUgY29udGV4dHVhbCByZXNwb25zZXMgYmFzZWQgb24gdGhlIG9yaWdpbmFsIG1lc3NhZ2VcbiAgICAgIGlmIChtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2hlbGxvJykgfHwgbWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdoZXknKSB8fCBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ2hpJykpIHtcbiAgICAgICAgcmV0dXJuIFwiSGkgdGhlcmUhIEhvdyBhcmUgeW91IHRvZGF5PyBJJ20gaGVyZSB0byBjaGF0IGFib3V0IGFueXRoaW5nIHRyYWRpbmctcmVsYXRlZCBvciBqdXN0IHRvIGhhdmUgYSBjb252ZXJzYXRpb24uIFdoYXQncyBvbiB5b3VyIG1pbmQ/XCJcbiAgICAgIH0gZWxzZSBpZiAobWVzc2FnZUxvd2VyLmluY2x1ZGVzKCdob3cgYXJlIHlvdScpIHx8IG1lc3NhZ2VMb3dlci5pbmNsdWRlcyhcImhvdydzIGl0IGdvaW5nXCIpKSB7XG4gICAgICAgIHJldHVybiBcIkknbSBkb2luZyBncmVhdCwgdGhhbmtzIGZvciBhc2tpbmchIEknbSBleGNpdGVkIHRvIGNoYXQgd2l0aCB5b3UgYWJvdXQgdHJhZGluZyBvciB3aGF0ZXZlciBlbHNlIHlvdSdkIGxpa2UgdG8gZGlzY3Vzcy4gSG93IGFyZSB5b3UgZG9pbmc/XCI7XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VMb3dlci5pbmNsdWRlcygnaGVscCcpIHx8IG1lc3NhZ2VMb3dlci5pbmNsdWRlcygnY2FuIHlvdScpKSB7XG4gICAgICAgIHJldHVybiBcIkFic29sdXRlbHkhIEknZCBiZSBoYXBweSB0byBoZWxwLiBXaGF0IHNwZWNpZmljYWxseSB3b3VsZCB5b3UgbGlrZSB0byB0YWxrIGFib3V0IG9yIHdvcmsgb24gdG9kYXk/XCI7XG4gICAgICB9IGVsc2UgaWYgKG1lc3NhZ2VMb3dlci5pbmNsdWRlcygnc3RyYXRlZ3knKSB8fCBtZXNzYWdlTG93ZXIuaW5jbHVkZXMoJ3N0cmF0ZWdpZXMnKSkge1xuICAgICAgICByZXR1cm4gXCJJIGxvdmUgdGFsa2luZyBhYm91dCB0cmFkaW5nIHN0cmF0ZWdpZXMhIFdoYXQgYXNwZWN0IGFyZSB5b3UgaW50ZXJlc3RlZCBpbj8gUmlzayBtYW5hZ2VtZW50LCBlbnRyeS9leGl0IHBvaW50cywgcG9zaXRpb24gc2l6aW5nLCBvciBzb21ldGhpbmcgZWxzZT9cIjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBcIkhlbGxvISBJJ20gUmVuYXRhLCB5b3VyIEFJIGFzc2lzdGFudC4gSSdtIGhlcmUgdG8gaGVscCB3aXRoIHRyYWRpbmcgaW5zaWdodHMsIHN0cmF0ZWd5IGRpc2N1c3Npb25zLCBtYXJrZXQgYW5hbHlzaXMsIG9yIGp1c3QgY2hhdC4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byBleHBsb3JlP1wiXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJuIHRoZSBvcmlnaW5hbCByZXNwb25zZSBmb3IgZXZlcnl0aGluZyBlbHNlXG4gIHJldHVybiBiYWNrZW5kUmVzcG9uc2Vcbn1cblxuLy8gRW5oYW5jZWQgUmVuYXRhIGNoYXQgQVBJIC0gQ29ubmVjdHMgdG8gYmFja2VuZCBBSSB3aXRoIENvcGlsb3RLaXQgaW50ZWdyYXRpb25cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxuXG4gICAgLy8gSGFuZGxlIGJvdGggc2luZ2xlIG1lc3NhZ2UgYW5kIG1lc3NhZ2VzIGFycmF5IGZvcm1hdHNcbiAgICBsZXQgbWVzc2FnZTogc3RyaW5nXG4gICAgaWYgKGJvZHkubWVzc2FnZSkge1xuICAgICAgbWVzc2FnZSA9IGJvZHkubWVzc2FnZVxuICAgIH0gZWxzZSBpZiAoYm9keS5tZXNzYWdlcyAmJiBib2R5Lm1lc3NhZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGxhc3RNZXNzYWdlID0gYm9keS5tZXNzYWdlc1tib2R5Lm1lc3NhZ2VzLmxlbmd0aCAtIDFdXG4gICAgICBtZXNzYWdlID0gbGFzdE1lc3NhZ2UuY29udGVudCB8fCAnJ1xuICAgIH0gZWxzZSB7XG4gICAgICBtZXNzYWdlID0gJydcbiAgICB9XG5cbiAgICBjb25zdCB7IG1vZGUgPSAncmVuYXRhJywgY29udGV4dCwgc21hcnRBbmFseXNpcywgY29uY2lzZSwgc3lzdGVtSW5zdHJ1Y3Rpb25zLCBhdHRhY2hlZEZpbGUsIHVzZXJJZCB9ID0gYm9keVxuXG4gICAgLy8gQ2hlY2sgaWYgY29uY2lzZSBtb2RlIGlzIHJlcXVlc3RlZCAoZGVmYXVsdCB0cnVlIGZvciBicmV2aXR5KVxuICAgIGNvbnN0IGNvbmNpc2VNb2RlID0gY29uY2lzZSAhPT0gZmFsc2VcbiAgICBjb25zdCBjdXN0b21JbnN0cnVjdGlvbnMgPSBzeXN0ZW1JbnN0cnVjdGlvbnMgfHwgJydcblxuICAgIC8vIEhhbmRsZSBmaWxlIHVwbG9hZCBpZiBhdHRhY2hlZFxuICAgIGlmIChhdHRhY2hlZEZpbGUgJiYgYXR0YWNoZWRGaWxlLm5hbWUgJiYgYXR0YWNoZWRGaWxlLmNvbnRlbnQpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdGaWxlIGF0dGFjaGVkOicsIGF0dGFjaGVkRmlsZS5uYW1lKVxuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBEZWNvZGUgYmFzZTY0IGNvbnRlbnQgdG8gYW5hbHl6ZSB0aGUgQ1NWXG4gICAgICAgIGNvbnN0IGJhc2U2NENvbnRlbnQgPSBhdHRhY2hlZEZpbGUuY29udGVudFxuICAgICAgICBjb25zdCBjc3ZCeXRlcyA9IEJ1ZmZlci5mcm9tKGJhc2U2NENvbnRlbnQsICdiYXNlNjQnKVxuICAgICAgICBjb25zdCBjc3ZUZXh0ID0gY3N2Qnl0ZXMudG9TdHJpbmcoJ3V0Zi04LXNpZycpXG5cbiAgICAgICAgLy8gUGFyc2UgQ1NWIHRvIGdldCBiYXNpYyBpbmZvXG4gICAgICAgIGNvbnN0IGxpbmVzID0gY3N2VGV4dC5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkpXG4gICAgICAgIGNvbnN0IGhlYWRlckxpbmUgPSBsaW5lc1swXSB8fCAnJ1xuICAgICAgICBjb25zdCB0cmFkZUNvdW50ID0gTWF0aC5tYXgoMCwgbGluZXMubGVuZ3RoIC0gMSkgLy8gU3VidHJhY3QgaGVhZGVyIHJvd1xuXG4gICAgICAgIC8vIEV4dHJhY3QgY29sdW1uIG5hbWVzIGZyb20gaGVhZGVyXG4gICAgICAgIGNvbnN0IGNvbHVtbnMgPSBoZWFkZXJMaW5lLnNwbGl0KCcsJykubWFwKGNvbCA9PiBjb2wudHJpbSgpKVxuXG4gICAgICAgIC8vIEFkZCBmaWxlIGluZm8gdG8gdGhlIG1lc3NhZ2UgZm9yIEFJIHRvIGFja25vd2xlZGdlXG4gICAgICAgIGNvbnN0IGZpbGVJbmZvID0gYFxcblxcblvwn5OOIEZJTEUgVVBMT0FERUQ6ICR7YXR0YWNoZWRGaWxlLm5hbWV9XVxuLSBUeXBlOiBDU1YgZmlsZSB3aXRoICR7dHJhZGVDb3VudH0gdHJhZGUocylcbi0gQ29sdW1uczogJHtjb2x1bW5zLnNsaWNlKDAsIDUpLmpvaW4oJywgJyl9JHtjb2x1bW5zLmxlbmd0aCA+IDUgPyAnLi4uJyA6ICcnfVxuLSBTdGF0dXM6IEZpbGUgcmVjZWl2ZWQgYW5kIHJlYWR5IGZvciBpbXBvcnRgXG5cbiAgICAgICAgLy8gQXBwZW5kIGZpbGUgaW5mbyB0byBtZXNzYWdlXG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlICsgZmlsZUluZm9cblxuICAgICAgICBjb25zb2xlLmxvZygnRmlsZSBpbmZvIGFkZGVkIHRvIG1lc3NhZ2U6JywgeyBmaWxlTmFtZTogYXR0YWNoZWRGaWxlLm5hbWUsIHRyYWRlQ291bnQgfSlcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgZmlsZTonLCBlcnJvcilcblxuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBgXFxuXFxuW+KdjCBGSUxFIFVQTE9BRCBFUlJPUjogJHthdHRhY2hlZEZpbGUubmFtZX1dXG4ke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ0ZhaWxlZCB0byBwcm9jZXNzIGZpbGUnfWBcblxuICAgICAgICBtZXNzYWdlID0gbWVzc2FnZSArIGVycm9yTWVzc2FnZVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIER5bmFtaWMgbW9kZSBkZXRlY3Rpb24gLSBhbmFseXplIHRoZSBtZXNzYWdlIHRvIGRldGVybWluZSBvcHRpbWFsIG1vZGVcbiAgICBjb25zdCBvcHRpbWFsTW9kZSA9IGRldGVjdE9wdGltYWxNb2RlKG1lc3NhZ2UpXG4gICAgY29uc3QgZWZmZWN0aXZlTW9kZSA9IChtb2RlID09PSAncmVuYXRhJyAmJiBvcHRpbWFsTW9kZSAhPT0gJ3JlbmF0YScpID8gb3B0aW1hbE1vZGUgOiBtb2RlXG5cbiAgICBjb25zb2xlLmxvZygn8J+UhCBSZW5hdGEgQ2hhdCBBUEkgLSBGb3J3YXJkaW5nIHRvIGJhY2tlbmQgQUknKVxuICAgIGNvbnNvbGUubG9nKCfwn5OdIE1lc3NhZ2U6JywgbWVzc2FnZSlcbiAgICBjb25zb2xlLmxvZygn8J+OryBVc2VyIHNlbGVjdGVkIG1vZGU6JywgbW9kZSlcbiAgICBjb25zb2xlLmxvZygn8J+noCBEZXRlY3RlZCBvcHRpbWFsIG1vZGU6Jywgb3B0aW1hbE1vZGUpXG4gICAgY29uc29sZS5sb2coJ+KaoSBFZmZlY3RpdmUgbW9kZSBiZWluZyB1c2VkOicsIGVmZmVjdGl2ZU1vZGUpXG4gICAgY29uc29sZS5sb2coJ/CflKcgQ29udGV4dDonLCBjb250ZXh0KVxuICAgIGNvbnNvbGUubG9nKCfinKggQ29uY2lzZSBtb2RlOicsIGNvbmNpc2VNb2RlKVxuICAgIGNvbnNvbGUubG9nKCfwn5OcIEN1c3RvbSBpbnN0cnVjdGlvbnM6JywgY3VzdG9tSW5zdHJ1Y3Rpb25zID8gJ1llcycgOiAnTm8nKVxuXG4gICAgLy8gRm9yIFJlbmF0YSBtb2RlLCBhZGQgY29udmVyc2F0aW9uYWwgZ3VpZGFuY2VcbiAgICBpZiAoZWZmZWN0aXZlTW9kZSA9PT0gJ3JlbmF0YScpIHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn6SWIFJlbmF0YSBtb2RlIGRldGVjdGVkIC0gdXNpbmcgY29udmVyc2F0aW9uYWwgc3R5bGUnKVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAvLyBGb3J3YXJkIHRvIGJhY2tlbmQgQUkgZW5kcG9pbnQgZm9yIGludGVsbGlnZW50IHByb2Nlc3NpbmdcbiAgICAgIGNvbnN0IGJhY2tlbmRSZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwOi8vbG9jYWxob3N0OjY1MDAvYWkvY29udmVyc2F0aW9uJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxuICAgICAgICAgIG1vZGU6IGVmZmVjdGl2ZU1vZGUsXG4gICAgICAgICAgdWlfY29udGV4dDoge1xuICAgICAgICAgICAgLi4uY29udGV4dCxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiBjb250ZXh0Py5wYWdlIHx8ICdkYXNoYm9hcmQnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnZlcnNhdGlvbl9oaXN0b3J5OiBbXSwgLy8gQ291bGQgYmUgZW5oYW5jZWQgd2l0aCBzZXNzaW9uIGhpc3RvcnlcbiAgICAgICAgICBjb250ZXh0OiB7XG4gICAgICAgICAgICB1c2VyUHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgYWlfbW9kZTogZWZmZWN0aXZlTW9kZSxcbiAgICAgICAgICAgICAgdmVyYm9zaXR5OiBjb25jaXNlTW9kZSA/IFwiY29uY2lzZVwiIDogXCJub3JtYWxcIixcbiAgICAgICAgICAgICAgc3RhdHNfYmFzaXM6IGVmZmVjdGl2ZU1vZGUgPT09ICdyZW5hdGEnID8gbnVsbCA6IFwiZ3Jvc3NcIiwgLy8gTm8gc3RhdHMgYmFzaXMgZm9yIHJlbmF0YSBtb2RlXG4gICAgICAgICAgICAgIHVuaXRfbW9kZTogZWZmZWN0aXZlTW9kZSA9PT0gJ3JlbmF0YScgPyBudWxsIDogKGNvbnRleHQ/LmRpc3BsYXlNb2RlIHx8IFwiZG9sbGFyXCIpLCAvLyBObyB1bml0IG1vZGUgZm9yIHJlbmF0YVxuICAgICAgICAgICAgICBjb252ZXJzYXRpb25fc3R5bGU6IGVmZmVjdGl2ZU1vZGUgPT09ICdyZW5hdGEnID8gJ2NvbnZlcnNhdGlvbmFsJyA6ICdhbmFseXRpY2FsJywgLy8gUmVuYXRhIGlzIGNvbnZlcnNhdGlvbmFsXG4gICAgICAgICAgICAgIGF2b2lkX2F1dG9fc3RhdHM6IGVmZmVjdGl2ZU1vZGUgPT09ICdyZW5hdGEnID8gdHJ1ZSA6IGZhbHNlLCAvLyBFeHBsaWNpdGx5IGF2b2lkIGF1dG8gc3RhdHMgZm9yIHJlbmF0YVxuICAgICAgICAgICAgICBzeXN0ZW1faW5zdHJ1Y3Rpb25zOiBjdXN0b21JbnN0cnVjdGlvbnMgLy8gUGFzcyBjdXN0b20gaW5zdHJ1Y3Rpb25zIHRvIGJhY2tlbmRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9KVxuXG4gICAgICBpZiAoIWJhY2tlbmRSZXNwb25zZS5vaykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFja2VuZCBBSSBlcnJvcjonLCBiYWNrZW5kUmVzcG9uc2Uuc3RhdHVzLCBiYWNrZW5kUmVzcG9uc2Uuc3RhdHVzVGV4dClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYWNrZW5kIEFJIHJldHVybmVkICR7YmFja2VuZFJlc3BvbnNlLnN0YXR1c306ICR7YmFja2VuZFJlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIH1cblxuICAgICAgY29uc3QgYWlSZXNwb25zZSA9IGF3YWl0IGJhY2tlbmRSZXNwb25zZS5qc29uKClcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQmFja2VuZCBBSSByZXNwb25zZTonLCBhaVJlc3BvbnNlKVxuXG4gICAgICAvLyBQcm9jZXNzIGFueSBVSSBhY3Rpb25zIGZyb20gdGhlIGJhY2tlbmQgcmVzcG9uc2VcbiAgICAgIGlmIChhaVJlc3BvbnNlLnVpX2FjdGlvbikge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+OryBVSSBBY3Rpb24gZGV0ZWN0ZWQ6JywgYWlSZXNwb25zZS51aV9hY3Rpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIEZpbHRlciByZXNwb25zZSBmb3IgUmVuYXRhIG1vZGUgdG8gYmUgbGVzcyBzdGF0cy1mb2N1c2VkXG4gICAgICBsZXQgZmlsdGVyZWRSZXNwb25zZSA9IGFpUmVzcG9uc2UucmVzcG9uc2VcbiAgICAgIGlmIChlZmZlY3RpdmVNb2RlID09PSAncmVuYXRhJykge1xuICAgICAgICBmaWx0ZXJlZFJlc3BvbnNlID0gZmlsdGVyUmVuYXRhUmVzcG9uc2UobWVzc2FnZSwgYWlSZXNwb25zZS5yZXNwb25zZSlcbiAgICAgICAgaWYgKGZpbHRlcmVkUmVzcG9uc2UgIT09IGFpUmVzcG9uc2UucmVzcG9uc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UhCBSZW5hdGEgcmVzcG9uc2UgZmlsdGVyZWQgZm9yIGNvbnZlcnNhdGlvbmFsIHN0eWxlJylcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+TnSBPcmlnaW5hbDonLCBhaVJlc3BvbnNlLnJlc3BvbnNlKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIEZpbHRlcmVkOicsIGZpbHRlcmVkUmVzcG9uc2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ+KchSBSZW5hdGEgcmVzcG9uc2UgcGFzc2VkIHRocm91Z2ggKG5vIGZpbHRlcmluZyBuZWVkZWQpJylcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIGVuaGFuY2VkIHJlc3BvbnNlIGZyb20gdGhlIGJhY2tlbmRcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIHJlc3BvbnNlOiBmaWx0ZXJlZFJlc3BvbnNlLFxuICAgICAgICBtb2RlX3VzZWQ6IGVmZmVjdGl2ZU1vZGUsXG4gICAgICAgIG9yaWdpbmFsX21vZGU6IG1vZGUsXG4gICAgICAgIG9wdGltYWxfbW9kZTogb3B0aW1hbE1vZGUsXG4gICAgICAgIG1vZGVfc3dpdGNoZWQ6IG9wdGltYWxNb2RlICE9PSBtb2RlICYmIG1vZGUgPT09ICdyZW5hdGEnLFxuICAgICAgICB0aW1lc3RhbXA6IGFpUmVzcG9uc2UudGltZXN0YW1wIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgY29tbWFuZF90eXBlOiBhaVJlc3BvbnNlLmNvbW1hbmRfdHlwZSxcbiAgICAgICAgaW50ZW50OiBhaVJlc3BvbnNlLmludGVudCxcbiAgICAgICAgY29uZmlkZW5jZTogYWlSZXNwb25zZS5jb25maWRlbmNlLFxuICAgICAgICB1aV9hY3Rpb246IGFpUmVzcG9uc2UudWlfYWN0aW9uLFxuICAgICAgICBhaV9tb2RlX2NoYW5nZTogYWlSZXNwb25zZS5haV9tb2RlX2NoYW5nZSxcbiAgICAgICAgbGVhcm5pbmdfYXBwbGllZDogYWlSZXNwb25zZS5sZWFybmluZ19hcHBsaWVkIHx8IGZhbHNlLFxuICAgICAgICBuYXZpZ2F0aW9uQ29tbWFuZHM6IGFpUmVzcG9uc2UudWlfYWN0aW9uID8gW2FpUmVzcG9uc2UudWlfYWN0aW9uXSA6IFtdLFxuICAgICAgICBubHBBbmFseXNpczoge1xuICAgICAgICAgIGRhdGVSYW5nZTogbnVsbCxcbiAgICAgICAgICBpbnRlbnRzOiBbYWlSZXNwb25zZS5pbnRlbnRdIHx8IFtdLFxuICAgICAgICAgIGFkdmFuY2VkUGFyYW1zOiBhaVJlc3BvbnNlLnVpX2FjdGlvbj8ucGFyYW1ldGVycyB8fCB7fVxuICAgICAgICB9XG4gICAgICB9KVxuXG4gICAgfSBjYXRjaCAoYmFja2VuZEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCfinYwgQmFja2VuZCBjb25uZWN0aW9uIGVycm9yOicsIGJhY2tlbmRFcnJvcilcblxuICAgICAgLy8gRmFsbGJhY2sgdG8gYmFzaWMgcmVzcG9uc2UgaWYgYmFja2VuZCBpcyB1bmF2YWlsYWJsZVxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgcmVzcG9uc2U6IFwiSSdtIGhhdmluZyB0cm91YmxlIGNvbm5lY3RpbmcgdG8gbXkgQUkgYmFja2VuZCByaWdodCBub3cuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBtb21lbnQuXCIsXG4gICAgICAgIG1vZGVfdXNlZDogZWZmZWN0aXZlTW9kZSxcbiAgICAgICAgb3JpZ2luYWxfbW9kZTogbW9kZSxcbiAgICAgICAgb3B0aW1hbF9tb2RlOiBvcHRpbWFsTW9kZSxcbiAgICAgICAgbW9kZV9zd2l0Y2hlZDogb3B0aW1hbE1vZGUgIT09IG1vZGUgJiYgbW9kZSA9PT0gJ3JlbmF0YScsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBjb21tYW5kX3R5cGU6IFwiZXJyb3JcIixcbiAgICAgICAgaW50ZW50OiBcImJhY2tlbmRfZXJyb3JcIixcbiAgICAgICAgY29uZmlkZW5jZTogMC4wLFxuICAgICAgICBlcnJvcjogYmFja2VuZEVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBiYWNrZW5kRXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGJhY2tlbmQgZXJyb3InLFxuICAgICAgICBuYXZpZ2F0aW9uQ29tbWFuZHM6IFtdLFxuICAgICAgICBubHBBbmFseXNpczogbnVsbFxuICAgICAgfSwgeyBzdGF0dXM6IDUwMyB9KVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBSZW5hdGEgQ2hhdCBBUEkgZXJyb3I6JywgZXJyb3IpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdJIGFwb2xvZ2l6ZSwgYnV0IEkgZW5jb3VudGVyZWQgYW4gaW50ZXJuYWwgZXJyb3IuIFBsZWFzZSB0cnkgYWdhaW4gaW4gYSBtb21lbnQuJyxcbiAgICAgIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gIH1cbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZGV0ZWN0T3B0aW1hbE1vZGUiLCJ1c2VyTWVzc2FnZSIsIm1lc3NhZ2VMb3dlciIsInRvTG93ZXJDYXNlIiwiY29hY2hLZXl3b3JkcyIsImFuYWx5c3RLZXl3b3JkcyIsIm1lbnRvcktleXdvcmRzIiwic29tZSIsImtleXdvcmQiLCJpbmNsdWRlcyIsImZpbHRlclJlbmF0YVJlc3BvbnNlIiwib3JpZ2luYWxNZXNzYWdlIiwiYmFja2VuZFJlc3BvbnNlIiwicmVzcG9uc2VMb3dlciIsInByb2JsZW1hdGljUGF0dGVybnMiLCJpc0Vtb3Rpb25hbE9yQ29udmVyc2F0aW9uYWwiLCJwYXR0ZXJuIiwidGVzdCIsIlBPU1QiLCJyZXEiLCJib2R5IiwianNvbiIsIm1lc3NhZ2UiLCJtZXNzYWdlcyIsImxlbmd0aCIsImxhc3RNZXNzYWdlIiwiY29udGVudCIsIm1vZGUiLCJjb250ZXh0Iiwic21hcnRBbmFseXNpcyIsImNvbmNpc2UiLCJzeXN0ZW1JbnN0cnVjdGlvbnMiLCJhdHRhY2hlZEZpbGUiLCJ1c2VySWQiLCJjb25jaXNlTW9kZSIsImN1c3RvbUluc3RydWN0aW9ucyIsIm5hbWUiLCJjb25zb2xlIiwibG9nIiwiYmFzZTY0Q29udGVudCIsImNzdkJ5dGVzIiwiQnVmZmVyIiwiZnJvbSIsImNzdlRleHQiLCJ0b1N0cmluZyIsImxpbmVzIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsImhlYWRlckxpbmUiLCJ0cmFkZUNvdW50IiwiTWF0aCIsIm1heCIsImNvbHVtbnMiLCJtYXAiLCJjb2wiLCJmaWxlSW5mbyIsInNsaWNlIiwiam9pbiIsImZpbGVOYW1lIiwiZXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJFcnJvciIsIm9wdGltYWxNb2RlIiwiZWZmZWN0aXZlTW9kZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1aV9jb250ZXh0IiwiY3VycmVudFBhZ2UiLCJwYWdlIiwidGltZXN0YW1wIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiY29udmVyc2F0aW9uX2hpc3RvcnkiLCJ1c2VyUHJlZmVyZW5jZXMiLCJhaV9tb2RlIiwidmVyYm9zaXR5Iiwic3RhdHNfYmFzaXMiLCJ1bml0X21vZGUiLCJkaXNwbGF5TW9kZSIsImNvbnZlcnNhdGlvbl9zdHlsZSIsImF2b2lkX2F1dG9fc3RhdHMiLCJzeXN0ZW1faW5zdHJ1Y3Rpb25zIiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiYWlSZXNwb25zZSIsInVpX2FjdGlvbiIsImZpbHRlcmVkUmVzcG9uc2UiLCJyZXNwb25zZSIsIm1vZGVfdXNlZCIsIm9yaWdpbmFsX21vZGUiLCJvcHRpbWFsX21vZGUiLCJtb2RlX3N3aXRjaGVkIiwiY29tbWFuZF90eXBlIiwiaW50ZW50IiwiY29uZmlkZW5jZSIsImFpX21vZGVfY2hhbmdlIiwibGVhcm5pbmdfYXBwbGllZCIsIm5hdmlnYXRpb25Db21tYW5kcyIsIm5scEFuYWx5c2lzIiwiZGF0ZVJhbmdlIiwiaW50ZW50cyIsImFkdmFuY2VkUGFyYW1zIiwicGFyYW1ldGVycyIsImJhY2tlbmRFcnJvciIsImRldGFpbHMiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/renata/chat/route.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Frenata%2Fchat%2Froute&page=%2Fapi%2Frenata%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Frenata%2Fchat%2Froute.ts&appDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmichaeldurante%2Fai%20dev%2Fce-hub%2Fprojects%2Ftraderra%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();