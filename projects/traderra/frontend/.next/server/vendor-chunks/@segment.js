"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@segment";
exports.ids = ["vendor-chunks/@segment"];
exports.modules = {

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatch: () => (/* binding */ dispatch),\n/* harmony export */   getDelay: () => (/* binding */ getDelay)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _callback__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callback */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n\n\n/* The amount of time in ms to wait before invoking the callback. */\nvar getDelay = function (startTimeInEpochMS, timeoutInMS) {\n    var elapsedTime = Date.now() - startTimeInEpochMS;\n    // increasing the timeout increases the delay by almost the same amount -- this is weird legacy behavior.\n    return Math.max((timeoutInMS !== null && timeoutInMS !== void 0 ? timeoutInMS : 300) - elapsedTime, 0);\n};\n/**\n * Push an event into the dispatch queue and invoke any callbacks.\n *\n * @param event - Segment event to enqueue.\n * @param queue - Queue to dispatch against.\n * @param emitter - This is typically an instance of \"Analytics\" -- used for metrics / progress information.\n * @param options\n */\nfunction dispatch(ctx, queue, emitter, options) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var startTime, dispatched;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    emitter.emit('dispatch_start', ctx);\n                    startTime = Date.now();\n                    if (!queue.isEmpty()) return [3 /*break*/, 2];\n                    return [4 /*yield*/, queue.dispatchSingle(ctx)];\n                case 1:\n                    dispatched = _a.sent();\n                    return [3 /*break*/, 4];\n                case 2: return [4 /*yield*/, queue.dispatch(ctx)];\n                case 3:\n                    dispatched = _a.sent();\n                    _a.label = 4;\n                case 4:\n                    if (!(options === null || options === void 0 ? void 0 : options.callback)) return [3 /*break*/, 6];\n                    return [4 /*yield*/, (0,_callback__WEBPACK_IMPORTED_MODULE_1__.invokeCallback)(dispatched, options.callback, getDelay(startTime, options.timeout))];\n                case 5:\n                    dispatched = _a.sent();\n                    _a.label = 6;\n                case 6:\n                    if (options === null || options === void 0 ? void 0 : options.debug) {\n                        dispatched.flush();\n                    }\n                    return [2 /*return*/, dispatched];\n            }\n        });\n    });\n}\n//# sourceMappingURL=dispatch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0M7QUFDRjtBQUM3QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxXQUFXLGdEQUFTO0FBQ3BCO0FBQ0EsZUFBZSxrREFBVztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMseURBQWM7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vYW5hbHl0aWNzL2Rpc3BhdGNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19nZW5lcmF0b3IgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGludm9rZUNhbGxiYWNrIH0gZnJvbSAnLi4vY2FsbGJhY2snO1xuLyogVGhlIGFtb3VudCBvZiB0aW1lIGluIG1zIHRvIHdhaXQgYmVmb3JlIGludm9raW5nIHRoZSBjYWxsYmFjay4gKi9cbmV4cG9ydCB2YXIgZ2V0RGVsYXkgPSBmdW5jdGlvbiAoc3RhcnRUaW1lSW5FcG9jaE1TLCB0aW1lb3V0SW5NUykge1xuICAgIHZhciBlbGFwc2VkVGltZSA9IERhdGUubm93KCkgLSBzdGFydFRpbWVJbkVwb2NoTVM7XG4gICAgLy8gaW5jcmVhc2luZyB0aGUgdGltZW91dCBpbmNyZWFzZXMgdGhlIGRlbGF5IGJ5IGFsbW9zdCB0aGUgc2FtZSBhbW91bnQgLS0gdGhpcyBpcyB3ZWlyZCBsZWdhY3kgYmVoYXZpb3IuXG4gICAgcmV0dXJuIE1hdGgubWF4KCh0aW1lb3V0SW5NUyAhPT0gbnVsbCAmJiB0aW1lb3V0SW5NUyAhPT0gdm9pZCAwID8gdGltZW91dEluTVMgOiAzMDApIC0gZWxhcHNlZFRpbWUsIDApO1xufTtcbi8qKlxuICogUHVzaCBhbiBldmVudCBpbnRvIHRoZSBkaXNwYXRjaCBxdWV1ZSBhbmQgaW52b2tlIGFueSBjYWxsYmFja3MuXG4gKlxuICogQHBhcmFtIGV2ZW50IC0gU2VnbWVudCBldmVudCB0byBlbnF1ZXVlLlxuICogQHBhcmFtIHF1ZXVlIC0gUXVldWUgdG8gZGlzcGF0Y2ggYWdhaW5zdC5cbiAqIEBwYXJhbSBlbWl0dGVyIC0gVGhpcyBpcyB0eXBpY2FsbHkgYW4gaW5zdGFuY2Ugb2YgXCJBbmFseXRpY3NcIiAtLSB1c2VkIGZvciBtZXRyaWNzIC8gcHJvZ3Jlc3MgaW5mb3JtYXRpb24uXG4gKiBAcGFyYW0gb3B0aW9uc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGlzcGF0Y2goY3R4LCBxdWV1ZSwgZW1pdHRlciwgb3B0aW9ucykge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0YXJ0VGltZSwgZGlzcGF0Y2hlZDtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgZW1pdHRlci5lbWl0KCdkaXNwYXRjaF9zdGFydCcsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcXVldWUuaXNFbXB0eSgpKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgcXVldWUuZGlzcGF0Y2hTaW5nbGUoY3R4KV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBkaXNwYXRjaGVkID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6IHJldHVybiBbNCAvKnlpZWxkKi8sIHF1ZXVlLmRpc3BhdGNoKGN0eCldO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlZCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA0O1xuICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmNhbGxiYWNrKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNl07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGludm9rZUNhbGxiYWNrKGRpc3BhdGNoZWQsIG9wdGlvbnMuY2FsbGJhY2ssIGdldERlbGF5KHN0YXJ0VGltZSwgb3B0aW9ucy50aW1lb3V0KSldO1xuICAgICAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlZCA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSA2O1xuICAgICAgICAgICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kZWJ1Zykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGF0Y2hlZC5mbHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBkaXNwYXRjaGVkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXNwYXRjaC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/callback/index.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   invokeCallback: () => (/* binding */ invokeCallback),\n/* harmony export */   pTimeout: () => (/* binding */ pTimeout),\n/* harmony export */   sleep: () => (/* binding */ sleep)\n/* harmony export */ });\nfunction pTimeout(promise, timeout) {\n    return new Promise(function (resolve, reject) {\n        var timeoutId = setTimeout(function () {\n            reject(Error('Promise timed out'));\n        }, timeout);\n        promise\n            .then(function (val) {\n            clearTimeout(timeoutId);\n            return resolve(val);\n        })\n            .catch(reject);\n    });\n}\nfunction sleep(timeoutInMs) {\n    return new Promise(function (resolve) { return setTimeout(resolve, timeoutInMs); });\n}\n/**\n * @param ctx\n * @param callback - the function to invoke\n * @param delay - aka \"timeout\". The amount of time in ms to wait before invoking the callback.\n */\nfunction invokeCallback(ctx, callback, delay) {\n    var cb = function () {\n        try {\n            return Promise.resolve(callback(ctx));\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    };\n    return (sleep(delay)\n        // pTimeout ensures that the callback can't cause the context to hang\n        .then(function () { return pTimeout(cb(), 1000); })\n        .catch(function (err) {\n        ctx === null || ctx === void 0 ? void 0 : ctx.log('warn', 'Callback Error', { error: err });\n        ctx === null || ctx === void 0 ? void 0 : ctx.stats.increment('callback_error');\n    })\n        .then(function () { return ctx; }));\n}\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQLDRDQUE0QywwQ0FBMEM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw4QkFBOEI7QUFDMUQ7QUFDQSxzRkFBc0YsWUFBWTtBQUNsRztBQUNBLEtBQUs7QUFDTCw0QkFBNEIsYUFBYTtBQUN6QztBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY2FsbGJhY2svaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIHBUaW1lb3V0KHByb21pc2UsIHRpbWVvdXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QoRXJyb3IoJ1Byb21pc2UgdGltZWQgb3V0JykpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgcHJvbWlzZVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZSh2YWwpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKHJlamVjdCk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gc2xlZXAodGltZW91dEluTXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmV0dXJuIHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dEluTXMpOyB9KTtcbn1cbi8qKlxuICogQHBhcmFtIGN0eFxuICogQHBhcmFtIGNhbGxiYWNrIC0gdGhlIGZ1bmN0aW9uIHRvIGludm9rZVxuICogQHBhcmFtIGRlbGF5IC0gYWthIFwidGltZW91dFwiLiBUaGUgYW1vdW50IG9mIHRpbWUgaW4gbXMgdG8gd2FpdCBiZWZvcmUgaW52b2tpbmcgdGhlIGNhbGxiYWNrLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52b2tlQ2FsbGJhY2soY3R4LCBjYWxsYmFjaywgZGVsYXkpIHtcbiAgICB2YXIgY2IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGNhbGxiYWNrKGN0eCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gKHNsZWVwKGRlbGF5KVxuICAgICAgICAvLyBwVGltZW91dCBlbnN1cmVzIHRoYXQgdGhlIGNhbGxiYWNrIGNhbid0IGNhdXNlIHRoZSBjb250ZXh0IHRvIGhhbmdcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gcFRpbWVvdXQoY2IoKSwgMTAwMCk7IH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGN0eCA9PT0gbnVsbCB8fCBjdHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN0eC5sb2coJ3dhcm4nLCAnQ2FsbGJhY2sgRXJyb3InLCB7IGVycm9yOiBlcnIgfSk7XG4gICAgICAgIGN0eCA9PT0gbnVsbCB8fCBjdHggPT09IHZvaWQgMCA/IHZvaWQgMCA6IGN0eC5zdGF0cy5pbmNyZW1lbnQoJ2NhbGxiYWNrX2Vycm9yJyk7XG4gICAgfSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24gKCkgeyByZXR1cm4gY3R4OyB9KSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/context/index.js ***!
  \************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextCancelation: () => (/* binding */ ContextCancelation),\n/* harmony export */   CoreContext: () => (/* binding */ CoreContext)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../logger */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\");\n/* harmony import */ var _stats__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../stats */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\");\n\n\n\n\nvar ContextCancelation = /** @class */ (function () {\n    function ContextCancelation(options) {\n        var _a, _b, _c;\n        this.retry = (_a = options.retry) !== null && _a !== void 0 ? _a : true;\n        this.type = (_b = options.type) !== null && _b !== void 0 ? _b : 'plugin Error';\n        this.reason = (_c = options.reason) !== null && _c !== void 0 ? _c : '';\n    }\n    return ContextCancelation;\n}());\n\nvar CoreContext = /** @class */ (function () {\n    function CoreContext(event, id, stats, logger) {\n        if (id === void 0) { id = (0,_lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(); }\n        if (stats === void 0) { stats = new _stats__WEBPACK_IMPORTED_MODULE_2__.NullStats(); }\n        if (logger === void 0) { logger = new _logger__WEBPACK_IMPORTED_MODULE_3__.CoreLogger(); }\n        this.attempts = 0;\n        this.event = event;\n        this._id = id;\n        this.logger = logger;\n        this.stats = stats;\n    }\n    CoreContext.system = function () {\n        // This should be overridden by the subclass to return an instance of the subclass.\n    };\n    CoreContext.prototype.isSame = function (other) {\n        return other.id === this.id;\n    };\n    CoreContext.prototype.cancel = function (error) {\n        if (error) {\n            throw error;\n        }\n        throw new ContextCancelation({ reason: 'Context Cancel' });\n    };\n    CoreContext.prototype.log = function (level, message, extras) {\n        this.logger.log(level, message, extras);\n    };\n    Object.defineProperty(CoreContext.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreContext.prototype.updateEvent = function (path, val) {\n        var _a;\n        // Don't allow integrations that are set to false to be overwritten with integration settings.\n        if (path.split('.')[0] === 'integrations') {\n            var integrationName = path.split('.')[1];\n            if (((_a = this.event.integrations) === null || _a === void 0 ? void 0 : _a[integrationName]) === false) {\n                return this.event;\n            }\n        }\n        (0,dset__WEBPACK_IMPORTED_MODULE_1__.dset)(this.event, path, val);\n        return this.event;\n    };\n    CoreContext.prototype.failedDelivery = function () {\n        return this._failedDelivery;\n    };\n    CoreContext.prototype.setFailedDelivery = function (options) {\n        this._failedDelivery = options;\n    };\n    CoreContext.prototype.logs = function () {\n        return this.logger.logs;\n    };\n    CoreContext.prototype.flush = function () {\n        this.logger.flush();\n        this.stats.flush();\n    };\n    CoreContext.prototype.toJSON = function () {\n        return {\n            id: this._id,\n            event: this.event,\n            logs: this.logger.logs,\n            metrics: this.stats.metrics,\n        };\n    };\n    return CoreContext;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMEM7QUFDZDtBQUNXO0FBQ0Y7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDNkI7QUFDOUI7QUFDQTtBQUNBLDZCQUE2QixLQUFLLGdEQUFJO0FBQ3RDLGdDQUFnQyxZQUFZLDZDQUFTO0FBQ3JELGlDQUFpQyxhQUFhLCtDQUFVO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDBCQUEwQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMENBQUk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3NCO0FBQ3ZCIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vY29udGV4dC9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAnQGx1a2VlZC91dWlkJztcbmltcG9ydCB7IGRzZXQgfSBmcm9tICdkc2V0JztcbmltcG9ydCB7IENvcmVMb2dnZXIgfSBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgTnVsbFN0YXRzIH0gZnJvbSAnLi4vc3RhdHMnO1xudmFyIENvbnRleHRDYW5jZWxhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb250ZXh0Q2FuY2VsYXRpb24ob3B0aW9ucykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgdGhpcy5yZXRyeSA9IChfYSA9IG9wdGlvbnMucmV0cnkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHRydWU7XG4gICAgICAgIHRoaXMudHlwZSA9IChfYiA9IG9wdGlvbnMudHlwZSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogJ3BsdWdpbiBFcnJvcic7XG4gICAgICAgIHRoaXMucmVhc29uID0gKF9jID0gb3B0aW9ucy5yZWFzb24pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnO1xuICAgIH1cbiAgICByZXR1cm4gQ29udGV4dENhbmNlbGF0aW9uO1xufSgpKTtcbmV4cG9ydCB7IENvbnRleHRDYW5jZWxhdGlvbiB9O1xudmFyIENvcmVDb250ZXh0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVDb250ZXh0KGV2ZW50LCBpZCwgc3RhdHMsIGxvZ2dlcikge1xuICAgICAgICBpZiAoaWQgPT09IHZvaWQgMCkgeyBpZCA9IHV1aWQoKTsgfVxuICAgICAgICBpZiAoc3RhdHMgPT09IHZvaWQgMCkgeyBzdGF0cyA9IG5ldyBOdWxsU3RhdHMoKTsgfVxuICAgICAgICBpZiAobG9nZ2VyID09PSB2b2lkIDApIHsgbG9nZ2VyID0gbmV3IENvcmVMb2dnZXIoKTsgfVxuICAgICAgICB0aGlzLmF0dGVtcHRzID0gMDtcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjtcbiAgICAgICAgdGhpcy5zdGF0cyA9IHN0YXRzO1xuICAgIH1cbiAgICBDb3JlQ29udGV4dC5zeXN0ZW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIG92ZXJyaWRkZW4gYnkgdGhlIHN1YmNsYXNzIHRvIHJldHVybiBhbiBpbnN0YW5jZSBvZiB0aGUgc3ViY2xhc3MuXG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUuaXNTYW1lID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci5pZCA9PT0gdGhpcy5pZDtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5jYW5jZWwgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgQ29udGV4dENhbmNlbGF0aW9uKHsgcmVhc29uOiAnQ29udGV4dCBDYW5jZWwnIH0pO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChsZXZlbCwgbWVzc2FnZSwgZXh0cmFzKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZyhsZXZlbCwgbWVzc2FnZSwgZXh0cmFzKTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb3JlQ29udGV4dC5wcm90b3R5cGUsIFwiaWRcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pZDtcbiAgICAgICAgfSxcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0pO1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS51cGRhdGVFdmVudCA9IGZ1bmN0aW9uIChwYXRoLCB2YWwpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvLyBEb24ndCBhbGxvdyBpbnRlZ3JhdGlvbnMgdGhhdCBhcmUgc2V0IHRvIGZhbHNlIHRvIGJlIG92ZXJ3cml0dGVuIHdpdGggaW50ZWdyYXRpb24gc2V0dGluZ3MuXG4gICAgICAgIGlmIChwYXRoLnNwbGl0KCcuJylbMF0gPT09ICdpbnRlZ3JhdGlvbnMnKSB7XG4gICAgICAgICAgICB2YXIgaW50ZWdyYXRpb25OYW1lID0gcGF0aC5zcGxpdCgnLicpWzFdO1xuICAgICAgICAgICAgaWYgKCgoX2EgPSB0aGlzLmV2ZW50LmludGVncmF0aW9ucykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW2ludGVncmF0aW9uTmFtZV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRzZXQodGhpcy5ldmVudCwgcGF0aCwgdmFsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnQ7XG4gICAgfTtcbiAgICBDb3JlQ29udGV4dC5wcm90b3R5cGUuZmFpbGVkRGVsaXZlcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mYWlsZWREZWxpdmVyeTtcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5zZXRGYWlsZWREZWxpdmVyeSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX2ZhaWxlZERlbGl2ZXJ5ID0gb3B0aW9ucztcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5sb2dzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2dnZXIubG9ncztcbiAgICB9O1xuICAgIENvcmVDb250ZXh0LnByb3RvdHlwZS5mbHVzaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZmx1c2goKTtcbiAgICAgICAgdGhpcy5zdGF0cy5mbHVzaCgpO1xuICAgIH07XG4gICAgQ29yZUNvbnRleHQucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZCxcbiAgICAgICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICAgICAgbG9nczogdGhpcy5sb2dnZXIubG9ncyxcbiAgICAgICAgICAgIG1ldHJpY3M6IHRoaXMuc3RhdHMubWV0cmljcyxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlQ29udGV4dDtcbn0oKSk7XG5leHBvcnQgeyBDb3JlQ29udGV4dCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/events/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventFactory: () => (/* binding */ CoreEventFactory)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var dset__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! dset */ \"(rsc)/./node_modules/dset/dist/index.mjs\");\n/* harmony import */ var _utils_pick__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/pick */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\");\n/* harmony import */ var _validation_assertions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../validation/assertions */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n\n\n\n\n\n/**\n * Internal settings object that is used internally by the factory\n */\nvar InternalEventFactorySettings = /** @class */ (function () {\n    function InternalEventFactorySettings(settings) {\n        var _a, _b;\n        this.settings = settings;\n        this.createMessageId = settings.createMessageId;\n        this.onEventMethodCall = (_a = settings.onEventMethodCall) !== null && _a !== void 0 ? _a : (function () { });\n        this.onFinishedEvent = (_b = settings.onFinishedEvent) !== null && _b !== void 0 ? _b : (function () { });\n    }\n    return InternalEventFactorySettings;\n}());\nvar CoreEventFactory = /** @class */ (function () {\n    function CoreEventFactory(settings) {\n        this.settings = new InternalEventFactorySettings(settings);\n    }\n    CoreEventFactory.prototype.track = function (event, properties, options, integrationOptions) {\n        this.settings.onEventMethodCall({ type: 'track', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { event: event, type: 'track', properties: properties !== null && properties !== void 0 ? properties : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationOptions) }));\n    };\n    CoreEventFactory.prototype.page = function (category, page, properties, options, integrationOptions) {\n        var _a;\n        this.settings.onEventMethodCall({ type: 'page', options: options });\n        var event = {\n            type: 'page',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationOptions),\n        };\n        if (category !== null) {\n            event.category = category;\n            event.properties = (_a = event.properties) !== null && _a !== void 0 ? _a : {};\n            event.properties.category = category;\n        }\n        if (page !== null) {\n            event.name = page;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.screen = function (category, screen, properties, options, integrationOptions) {\n        this.settings.onEventMethodCall({ type: 'screen', options: options });\n        var event = {\n            type: 'screen',\n            properties: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, properties),\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationOptions),\n        };\n        if (category !== null) {\n            event.category = category;\n        }\n        if (screen !== null) {\n            event.name = screen;\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), event));\n    };\n    CoreEventFactory.prototype.identify = function (userId, traits, options, integrationsOptions) {\n        this.settings.onEventMethodCall({ type: 'identify', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'identify', userId: userId, traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: integrationsOptions }));\n    };\n    CoreEventFactory.prototype.group = function (groupId, traits, options, integrationOptions) {\n        this.settings.onEventMethodCall({ type: 'group', options: options });\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), { type: 'group', traits: traits !== null && traits !== void 0 ? traits : {}, options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationOptions), //\n            groupId: groupId }));\n    };\n    CoreEventFactory.prototype.alias = function (to, from, // TODO: can we make this undefined?\n    options, integrationOptions) {\n        this.settings.onEventMethodCall({ type: 'alias', options: options });\n        var base = {\n            userId: to,\n            type: 'alias',\n            options: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options),\n            integrations: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationOptions),\n        };\n        if (from !== null) {\n            base.previousId = from;\n        }\n        if (to === undefined) {\n            return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, base), this.baseEvent()));\n        }\n        return this.normalize((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.baseEvent()), base));\n    };\n    CoreEventFactory.prototype.baseEvent = function () {\n        return {\n            integrations: {},\n            options: {},\n        };\n    };\n    /**\n     * Builds the context part of an event based on \"foreign\" keys that\n     * are provided in the `Options` parameter for an Event\n     */\n    CoreEventFactory.prototype.context = function (options) {\n        var _a;\n        /**\n         * If the event options are known keys from this list, we move them to the top level of the event.\n         * Any other options are moved to context.\n         */\n        var eventOverrideKeys = [\n            'userId',\n            'anonymousId',\n            'timestamp',\n            'messageId',\n        ];\n        delete options['integrations'];\n        var providedOptionsKeys = Object.keys(options);\n        var context = (_a = options.context) !== null && _a !== void 0 ? _a : {};\n        var eventOverrides = {};\n        providedOptionsKeys.forEach(function (key) {\n            if (key === 'context') {\n                return;\n            }\n            if (eventOverrideKeys.includes(key)) {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(eventOverrides, key, options[key]);\n            }\n            else {\n                (0,dset__WEBPACK_IMPORTED_MODULE_0__.dset)(context, key, options[key]);\n            }\n        });\n        return [context, eventOverrides];\n    };\n    CoreEventFactory.prototype.normalize = function (event) {\n        var _a, _b;\n        var integrationBooleans = Object.keys((_a = event.integrations) !== null && _a !== void 0 ? _a : {}).reduce(function (integrationNames, name) {\n            var _a;\n            var _b;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationNames), (_a = {}, _a[name] = Boolean((_b = event.integrations) === null || _b === void 0 ? void 0 : _b[name]), _a));\n        }, {});\n        // filter out any undefined options\n        event.options = (0,_utils_pick__WEBPACK_IMPORTED_MODULE_2__.pickBy)(event.options || {}, function (_, value) {\n            return value !== undefined;\n        });\n        // This is pretty trippy, but here's what's going on:\n        // - a) We don't pass initial integration options as part of the event, only if they're true or false\n        // - b) We do accept per integration overrides (like integrations.Amplitude.sessionId) at the event level\n        // Hence the need to convert base integration options to booleans, but maintain per event integration overrides\n        var allIntegrations = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, integrationBooleans), (_b = event.options) === null || _b === void 0 ? void 0 : _b.integrations);\n        var _c = event.options\n            ? this.context(event.options)\n            : [], context = _c[0], overrides = _c[1];\n        var options = event.options, rest = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__rest)(event, [\"options\"]);\n        var evt = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ timestamp: new Date() }, rest), { context: context, integrations: allIntegrations }), overrides), { messageId: options.messageId || this.settings.createMessageId() });\n        this.settings.onFinishedEvent(evt);\n        (0,_validation_assertions__WEBPACK_IMPORTED_MODULE_3__.validateEvent)(evt);\n        return evt;\n    };\n    return CoreEventFactory;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXlDO0FBQ1o7QUFDRDtBQUNXO0FBQ2tCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvSEFBb0g7QUFDcEgsZ0hBQWdIO0FBQ2hIO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0UsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyx1QkFBdUIsdUdBQXVHLFdBQVcsK0NBQVEsR0FBRywwQkFBMEIsK0NBQVEsR0FBRyx1QkFBdUI7QUFDbFE7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLGdDQUFnQztBQUMxRTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLCtDQUFRLENBQUMsK0NBQVEsR0FBRztBQUNsRDtBQUNBO0FBQ0EsMENBQTBDLGtDQUFrQztBQUM1RTtBQUNBO0FBQ0Esd0JBQXdCLCtDQUFRLEdBQUc7QUFDbkMscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQSwwQ0FBMEMsb0NBQW9DO0FBQzlFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLDRGQUE0RixXQUFXLCtDQUFRLEdBQUcsK0NBQStDO0FBQzFPO0FBQ0E7QUFDQSwwQ0FBMEMsaUNBQWlDO0FBQzNFLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsdUJBQXVCLHlFQUF5RSxXQUFXLCtDQUFRLEdBQUcsMEJBQTBCLCtDQUFRLEdBQUc7QUFDN00sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyxpQ0FBaUM7QUFDM0U7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLCtDQUFRLEdBQUc7QUFDaEMsMEJBQTBCLCtDQUFRLEdBQUc7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDdEQ7QUFDQSw4QkFBOEIsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1Qix1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDBDQUFJO0FBQ3BCO0FBQ0E7QUFDQSxnQkFBZ0IsMENBQUk7QUFDcEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyR0FBMkc7QUFDM0c7QUFDQTtBQUNBLG1CQUFtQiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsNkJBQTZCO0FBQ3BFLFNBQVMsSUFBSTtBQUNiO0FBQ0Esd0JBQXdCLG1EQUFNLG9CQUFvQjtBQUNsRDtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBUSxDQUFDLCtDQUFRLEdBQUc7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLDZDQUFNO0FBQ2xELGtCQUFrQiwrQ0FBUSxDQUFDLCtDQUFRLENBQUMsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLHVCQUF1QixXQUFXLGlEQUFpRCxpQkFBaUIsaUVBQWlFO0FBQzdOO0FBQ0EsUUFBUSxxRUFBYTtBQUNyQjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQzJCO0FBQzVCIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vZXZlbnRzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduLCBfX3Jlc3QgfSBmcm9tIFwidHNsaWJcIjtcbmV4cG9ydCAqIGZyb20gJy4vaW50ZXJmYWNlcyc7XG5pbXBvcnQgeyBkc2V0IH0gZnJvbSAnZHNldCc7XG5pbXBvcnQgeyBwaWNrQnkgfSBmcm9tICcuLi91dGlscy9waWNrJztcbmltcG9ydCB7IHZhbGlkYXRlRXZlbnQgfSBmcm9tICcuLi92YWxpZGF0aW9uL2Fzc2VydGlvbnMnO1xuLyoqXG4gKiBJbnRlcm5hbCBzZXR0aW5ncyBvYmplY3QgdGhhdCBpcyB1c2VkIGludGVybmFsbHkgYnkgdGhlIGZhY3RvcnlcbiAqL1xudmFyIEludGVybmFsRXZlbnRGYWN0b3J5U2V0dGluZ3MgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSW50ZXJuYWxFdmVudEZhY3RvcnlTZXR0aW5ncyhzZXR0aW5ncykge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuY3JlYXRlTWVzc2FnZUlkID0gc2V0dGluZ3MuY3JlYXRlTWVzc2FnZUlkO1xuICAgICAgICB0aGlzLm9uRXZlbnRNZXRob2RDYWxsID0gKF9hID0gc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IChmdW5jdGlvbiAoKSB7IH0pO1xuICAgICAgICB0aGlzLm9uRmluaXNoZWRFdmVudCA9IChfYiA9IHNldHRpbmdzLm9uRmluaXNoZWRFdmVudCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogKGZ1bmN0aW9uICgpIHsgfSk7XG4gICAgfVxuICAgIHJldHVybiBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzO1xufSgpKTtcbnZhciBDb3JlRXZlbnRGYWN0b3J5ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVFdmVudEZhY3Rvcnkoc2V0dGluZ3MpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IG5ldyBJbnRlcm5hbEV2ZW50RmFjdG9yeVNldHRpbmdzKHNldHRpbmdzKTtcbiAgICB9XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoZXZlbnQsIHByb3BlcnRpZXMsIG9wdGlvbnMsIGludGVncmF0aW9uT3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3RyYWNrJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyBldmVudDogZXZlbnQsIHR5cGU6ICd0cmFjaycsIHByb3BlcnRpZXM6IHByb3BlcnRpZXMgIT09IG51bGwgJiYgcHJvcGVydGllcyAhPT0gdm9pZCAwID8gcHJvcGVydGllcyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGludGVncmF0aW9uT3B0aW9ucykgfSkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChjYXRlZ29yeSwgcGFnZSwgcHJvcGVydGllcywgb3B0aW9ucywgaW50ZWdyYXRpb25PcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdwYWdlJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgdmFyIGV2ZW50ID0ge1xuICAgICAgICAgICAgdHlwZTogJ3BhZ2UnLFxuICAgICAgICAgICAgcHJvcGVydGllczogX19hc3NpZ24oe30sIHByb3BlcnRpZXMpLFxuICAgICAgICAgICAgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25PcHRpb25zKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNhdGVnb3J5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBldmVudC5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICAgICAgZXZlbnQucHJvcGVydGllcyA9IChfYSA9IGV2ZW50LnByb3BlcnRpZXMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9O1xuICAgICAgICAgICAgZXZlbnQucHJvcGVydGllcy5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBldmVudC5uYW1lID0gcGFnZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCBldmVudCkpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50RmFjdG9yeS5wcm90b3R5cGUuc2NyZWVuID0gZnVuY3Rpb24gKGNhdGVnb3J5LCBzY3JlZW4sIHByb3BlcnRpZXMsIG9wdGlvbnMsIGludGVncmF0aW9uT3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ3NjcmVlbicsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBldmVudCA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdzY3JlZW4nLFxuICAgICAgICAgICAgcHJvcGVydGllczogX19hc3NpZ24oe30sIHByb3BlcnRpZXMpLFxuICAgICAgICAgICAgb3B0aW9uczogX19hc3NpZ24oe30sIG9wdGlvbnMpLFxuICAgICAgICAgICAgaW50ZWdyYXRpb25zOiBfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25PcHRpb25zKSxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNhdGVnb3J5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBldmVudC5jYXRlZ29yeSA9IGNhdGVnb3J5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChzY3JlZW4gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGV2ZW50Lm5hbWUgPSBzY3JlZW47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgZXZlbnQpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmlkZW50aWZ5ID0gZnVuY3Rpb24gKHVzZXJJZCwgdHJhaXRzLCBvcHRpb25zLCBpbnRlZ3JhdGlvbnNPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3Mub25FdmVudE1ldGhvZENhbGwoeyB0eXBlOiAnaWRlbnRpZnknLCBvcHRpb25zOiBvcHRpb25zIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub3JtYWxpemUoX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuYmFzZUV2ZW50KCkpLCB7IHR5cGU6ICdpZGVudGlmeScsIHVzZXJJZDogdXNlcklkLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogaW50ZWdyYXRpb25zT3B0aW9ucyB9KSk7XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ncm91cCA9IGZ1bmN0aW9uIChncm91cElkLCB0cmFpdHMsIG9wdGlvbnMsIGludGVncmF0aW9uT3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRXZlbnRNZXRob2RDYWxsKHsgdHlwZTogJ2dyb3VwJywgb3B0aW9uczogb3B0aW9ucyB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCB0aGlzLmJhc2VFdmVudCgpKSwgeyB0eXBlOiAnZ3JvdXAnLCB0cmFpdHM6IHRyYWl0cyAhPT0gbnVsbCAmJiB0cmFpdHMgIT09IHZvaWQgMCA/IHRyYWl0cyA6IHt9LCBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksIGludGVncmF0aW9uczogX19hc3NpZ24oe30sIGludGVncmF0aW9uT3B0aW9ucyksIC8vXG4gICAgICAgICAgICBncm91cElkOiBncm91cElkIH0pKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gKHRvLCBmcm9tLCAvLyBUT0RPOiBjYW4gd2UgbWFrZSB0aGlzIHVuZGVmaW5lZD9cbiAgICBvcHRpb25zLCBpbnRlZ3JhdGlvbk9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5vbkV2ZW50TWV0aG9kQ2FsbCh7IHR5cGU6ICdhbGlhcycsIG9wdGlvbnM6IG9wdGlvbnMgfSk7XG4gICAgICAgIHZhciBiYXNlID0ge1xuICAgICAgICAgICAgdXNlcklkOiB0byxcbiAgICAgICAgICAgIHR5cGU6ICdhbGlhcycsXG4gICAgICAgICAgICBvcHRpb25zOiBfX2Fzc2lnbih7fSwgb3B0aW9ucyksXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnM6IF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbk9wdGlvbnMpLFxuICAgICAgICB9O1xuICAgICAgICBpZiAoZnJvbSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYmFzZS5wcmV2aW91c0lkID0gZnJvbTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9ybWFsaXplKF9fYXNzaWduKF9fYXNzaWduKHt9LCBiYXNlKSwgdGhpcy5iYXNlRXZlbnQoKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5vcm1hbGl6ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSwgdGhpcy5iYXNlRXZlbnQoKSksIGJhc2UpKTtcbiAgICB9O1xuICAgIENvcmVFdmVudEZhY3RvcnkucHJvdG90eXBlLmJhc2VFdmVudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGludGVncmF0aW9uczoge30sXG4gICAgICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEJ1aWxkcyB0aGUgY29udGV4dCBwYXJ0IG9mIGFuIGV2ZW50IGJhc2VkIG9uIFwiZm9yZWlnblwiIGtleXMgdGhhdFxuICAgICAqIGFyZSBwcm92aWRlZCBpbiB0aGUgYE9wdGlvbnNgIHBhcmFtZXRlciBmb3IgYW4gRXZlbnRcbiAgICAgKi9cbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5jb250ZXh0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIGV2ZW50IG9wdGlvbnMgYXJlIGtub3duIGtleXMgZnJvbSB0aGlzIGxpc3QsIHdlIG1vdmUgdGhlbSB0byB0aGUgdG9wIGxldmVsIG9mIHRoZSBldmVudC5cbiAgICAgICAgICogQW55IG90aGVyIG9wdGlvbnMgYXJlIG1vdmVkIHRvIGNvbnRleHQuXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZXZlbnRPdmVycmlkZUtleXMgPSBbXG4gICAgICAgICAgICAndXNlcklkJyxcbiAgICAgICAgICAgICdhbm9ueW1vdXNJZCcsXG4gICAgICAgICAgICAndGltZXN0YW1wJyxcbiAgICAgICAgICAgICdtZXNzYWdlSWQnLFxuICAgICAgICBdO1xuICAgICAgICBkZWxldGUgb3B0aW9uc1snaW50ZWdyYXRpb25zJ107XG4gICAgICAgIHZhciBwcm92aWRlZE9wdGlvbnNLZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucyk7XG4gICAgICAgIHZhciBjb250ZXh0ID0gKF9hID0gb3B0aW9ucy5jb250ZXh0KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB7fTtcbiAgICAgICAgdmFyIGV2ZW50T3ZlcnJpZGVzID0ge307XG4gICAgICAgIHByb3ZpZGVkT3B0aW9uc0tleXMuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5ID09PSAnY29udGV4dCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXZlbnRPdmVycmlkZUtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgICAgICAgIGRzZXQoZXZlbnRPdmVycmlkZXMsIGtleSwgb3B0aW9uc1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRzZXQoY29udGV4dCwga2V5LCBvcHRpb25zW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtjb250ZXh0LCBldmVudE92ZXJyaWRlc107XG4gICAgfTtcbiAgICBDb3JlRXZlbnRGYWN0b3J5LnByb3RvdHlwZS5ub3JtYWxpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIF9hLCBfYjtcbiAgICAgICAgdmFyIGludGVncmF0aW9uQm9vbGVhbnMgPSBPYmplY3Qua2V5cygoX2EgPSBldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KS5yZWR1Y2UoZnVuY3Rpb24gKGludGVncmF0aW9uTmFtZXMsIG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIHZhciBfYjtcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW50ZWdyYXRpb25OYW1lcyksIChfYSA9IHt9LCBfYVtuYW1lXSA9IEJvb2xlYW4oKF9iID0gZXZlbnQuaW50ZWdyYXRpb25zKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbbmFtZV0pLCBfYSkpO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGZpbHRlciBvdXQgYW55IHVuZGVmaW5lZCBvcHRpb25zXG4gICAgICAgIGV2ZW50Lm9wdGlvbnMgPSBwaWNrQnkoZXZlbnQub3B0aW9ucyB8fCB7fSwgZnVuY3Rpb24gKF8sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFRoaXMgaXMgcHJldHR5IHRyaXBweSwgYnV0IGhlcmUncyB3aGF0J3MgZ29pbmcgb246XG4gICAgICAgIC8vIC0gYSkgV2UgZG9uJ3QgcGFzcyBpbml0aWFsIGludGVncmF0aW9uIG9wdGlvbnMgYXMgcGFydCBvZiB0aGUgZXZlbnQsIG9ubHkgaWYgdGhleSdyZSB0cnVlIG9yIGZhbHNlXG4gICAgICAgIC8vIC0gYikgV2UgZG8gYWNjZXB0IHBlciBpbnRlZ3JhdGlvbiBvdmVycmlkZXMgKGxpa2UgaW50ZWdyYXRpb25zLkFtcGxpdHVkZS5zZXNzaW9uSWQpIGF0IHRoZSBldmVudCBsZXZlbFxuICAgICAgICAvLyBIZW5jZSB0aGUgbmVlZCB0byBjb252ZXJ0IGJhc2UgaW50ZWdyYXRpb24gb3B0aW9ucyB0byBib29sZWFucywgYnV0IG1haW50YWluIHBlciBldmVudCBpbnRlZ3JhdGlvbiBvdmVycmlkZXNcbiAgICAgICAgdmFyIGFsbEludGVncmF0aW9ucyA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBpbnRlZ3JhdGlvbkJvb2xlYW5zKSwgKF9iID0gZXZlbnQub3B0aW9ucykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmludGVncmF0aW9ucyk7XG4gICAgICAgIHZhciBfYyA9IGV2ZW50Lm9wdGlvbnNcbiAgICAgICAgICAgID8gdGhpcy5jb250ZXh0KGV2ZW50Lm9wdGlvbnMpXG4gICAgICAgICAgICA6IFtdLCBjb250ZXh0ID0gX2NbMF0sIG92ZXJyaWRlcyA9IF9jWzFdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGV2ZW50Lm9wdGlvbnMsIHJlc3QgPSBfX3Jlc3QoZXZlbnQsIFtcIm9wdGlvbnNcIl0pO1xuICAgICAgICB2YXIgZXZ0ID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oeyB0aW1lc3RhbXA6IG5ldyBEYXRlKCkgfSwgcmVzdCksIHsgY29udGV4dDogY29udGV4dCwgaW50ZWdyYXRpb25zOiBhbGxJbnRlZ3JhdGlvbnMgfSksIG92ZXJyaWRlcyksIHsgbWVzc2FnZUlkOiBvcHRpb25zLm1lc3NhZ2VJZCB8fCB0aGlzLnNldHRpbmdzLmNyZWF0ZU1lc3NhZ2VJZCgpIH0pO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm9uRmluaXNoZWRFdmVudChldnQpO1xuICAgICAgICB2YWxpZGF0ZUV2ZW50KGV2dCk7XG4gICAgICAgIHJldHVybiBldnQ7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50RmFjdG9yeTtcbn0oKSk7XG5leHBvcnQgeyBDb3JlRXZlbnRGYWN0b3J5IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/logger/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreLogger: () => (/* binding */ CoreLogger)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n\nvar CoreLogger = /** @class */ (function () {\n    function CoreLogger() {\n        this._logs = [];\n    }\n    CoreLogger.prototype.log = function (level, message, extras) {\n        var time = new Date();\n        this._logs.push({\n            level: level,\n            message: message,\n            time: time,\n            extras: extras,\n        });\n    };\n    Object.defineProperty(CoreLogger.prototype, \"logs\", {\n        get: function () {\n            return this._logs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CoreLogger.prototype.flush = function () {\n        if (this.logs.length > 1) {\n            var formatted = this._logs.reduce(function (logs, log) {\n                var _a;\n                var _b, _c;\n                var line = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, log), { json: JSON.stringify(log.extras, null, ' '), extras: log.extras });\n                delete line['time'];\n                var key = (_c = (_b = log.time) === null || _b === void 0 ? void 0 : _b.toISOString()) !== null && _c !== void 0 ? _c : '';\n                if (logs[key]) {\n                    key = \"\".concat(key, \"-\").concat(Math.random());\n                }\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, logs), (_a = {}, _a[key] = line, _a));\n            }, {});\n            // ie doesn't like console.table\n            if (console.table) {\n                console.table(formatted);\n            }\n            else {\n                console.log(formatted);\n            }\n        }\n        else {\n            this.logs.forEach(function (logEntry) {\n                var level = logEntry.level, message = logEntry.message, extras = logEntry.extras;\n                if (level === 'info' || level === 'debug') {\n                    console.log(message, extras !== null && extras !== void 0 ? extras : '');\n                }\n                else {\n                    console[level](message, extras !== null && extras !== void 0 ? extras : '');\n                }\n            });\n        }\n        this._logs = [];\n    };\n    return CoreLogger;\n}());\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxVQUFVLGlFQUFpRTtBQUMxSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLCtDQUFRLENBQUMsK0NBQVEsR0FBRyxpQkFBaUI7QUFDNUQsYUFBYSxJQUFJO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ3FCO0FBQ3RCIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vbG9nZ2VyL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXNzaWduIH0gZnJvbSBcInRzbGliXCI7XG52YXIgQ29yZUxvZ2dlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb3JlTG9nZ2VyKCkge1xuICAgICAgICB0aGlzLl9sb2dzID0gW107XG4gICAgfVxuICAgIENvcmVMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIChsZXZlbCwgbWVzc2FnZSwgZXh0cmFzKSB7XG4gICAgICAgIHZhciB0aW1lID0gbmV3IERhdGUoKTtcbiAgICAgICAgdGhpcy5fbG9ncy5wdXNoKHtcbiAgICAgICAgICAgIGxldmVsOiBsZXZlbCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXG4gICAgICAgICAgICB0aW1lOiB0aW1lLFxuICAgICAgICAgICAgZXh0cmFzOiBleHRyYXMsXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KENvcmVMb2dnZXIucHJvdG90eXBlLCBcImxvZ3NcIiwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2dzO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgQ29yZUxvZ2dlci5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmxvZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuX2xvZ3MucmVkdWNlKGZ1bmN0aW9uIChsb2dzLCBsb2cpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IF9fYXNzaWduKF9fYXNzaWduKHt9LCBsb2cpLCB7IGpzb246IEpTT04uc3RyaW5naWZ5KGxvZy5leHRyYXMsIG51bGwsICcgJyksIGV4dHJhczogbG9nLmV4dHJhcyB9KTtcbiAgICAgICAgICAgICAgICBkZWxldGUgbGluZVsndGltZSddO1xuICAgICAgICAgICAgICAgIHZhciBrZXkgPSAoX2MgPSAoX2IgPSBsb2cudGltZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRvSVNPU3RyaW5nKCkpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6ICcnO1xuICAgICAgICAgICAgICAgIGlmIChsb2dzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gXCJcIi5jb25jYXQoa2V5LCBcIi1cIikuY29uY2F0KE1hdGgucmFuZG9tKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGxvZ3MpLCAoX2EgPSB7fSwgX2Fba2V5XSA9IGxpbmUsIF9hKSk7XG4gICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAvLyBpZSBkb2Vzbid0IGxpa2UgY29uc29sZS50YWJsZVxuICAgICAgICAgICAgaWYgKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLnRhYmxlKGZvcm1hdHRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmb3JtYXR0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sb2dzLmZvckVhY2goZnVuY3Rpb24gKGxvZ0VudHJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxldmVsID0gbG9nRW50cnkubGV2ZWwsIG1lc3NhZ2UgPSBsb2dFbnRyeS5tZXNzYWdlLCBleHRyYXMgPSBsb2dFbnRyeS5leHRyYXM7XG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID09PSAnaW5mbycgfHwgbGV2ZWwgPT09ICdkZWJ1ZycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobWVzc2FnZSwgZXh0cmFzICE9PSBudWxsICYmIGV4dHJhcyAhPT0gdm9pZCAwID8gZXh0cmFzIDogJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZVtsZXZlbF0obWVzc2FnZSwgZXh0cmFzICE9PSBudWxsICYmIGV4dHJhcyAhPT0gdm9pZCAwID8gZXh0cmFzIDogJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2xvZ3MgPSBbXTtcbiAgICB9O1xuICAgIHJldHVybiBDb3JlTG9nZ2VyO1xufSgpKTtcbmV4cG9ydCB7IENvcmVMb2dnZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/logger/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   backoff: () => (/* binding */ backoff)\n/* harmony export */ });\nfunction backoff(params) {\n    var random = Math.random() + 1;\n    var _a = params.minTimeout, minTimeout = _a === void 0 ? 500 : _a, _b = params.factor, factor = _b === void 0 ? 2 : _b, attempt = params.attempt, _c = params.maxTimeout, maxTimeout = _c === void 0 ? Infinity : _c;\n    return Math.min(random * minTimeout * Math.pow(factor, attempt), maxTimeout);\n}\n//# sourceMappingURL=backoff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvYmFja29mZi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gYmFja29mZihwYXJhbXMpIHtcbiAgICB2YXIgcmFuZG9tID0gTWF0aC5yYW5kb20oKSArIDE7XG4gICAgdmFyIF9hID0gcGFyYW1zLm1pblRpbWVvdXQsIG1pblRpbWVvdXQgPSBfYSA9PT0gdm9pZCAwID8gNTAwIDogX2EsIF9iID0gcGFyYW1zLmZhY3RvciwgZmFjdG9yID0gX2IgPT09IHZvaWQgMCA/IDIgOiBfYiwgYXR0ZW1wdCA9IHBhcmFtcy5hdHRlbXB0LCBfYyA9IHBhcmFtcy5tYXhUaW1lb3V0LCBtYXhUaW1lb3V0ID0gX2MgPT09IHZvaWQgMCA/IEluZmluaXR5IDogX2M7XG4gICAgcmV0dXJuIE1hdGgubWluKHJhbmRvbSAqIG1pblRpbWVvdXQgKiBNYXRoLnBvdyhmYWN0b3IsIGF0dGVtcHQpLCBtYXhUaW1lb3V0KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJhY2tvZmYuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ON_REMOVE_FROM_FUTURE: () => (/* binding */ ON_REMOVE_FROM_FUTURE),\n/* harmony export */   PriorityQueue: () => (/* binding */ PriorityQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _backoff__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./backoff */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n\n\n\n/**\n * @internal\n */\nvar ON_REMOVE_FROM_FUTURE = 'onRemoveFromFuture';\nvar PriorityQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(PriorityQueue, _super);\n    function PriorityQueue(maxAttempts, queue, seen) {\n        var _this = _super.call(this) || this;\n        _this.future = [];\n        _this.maxAttempts = maxAttempts;\n        _this.queue = queue;\n        _this.seen = seen !== null && seen !== void 0 ? seen : {};\n        return _this;\n    }\n    PriorityQueue.prototype.push = function () {\n        var _this = this;\n        var items = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            items[_i] = arguments[_i];\n        }\n        var accepted = items.map(function (operation) {\n            var attempts = _this.updateAttempts(operation);\n            if (attempts > _this.maxAttempts || _this.includes(operation)) {\n                return false;\n            }\n            _this.queue.push(operation);\n            return true;\n        });\n        this.queue = this.queue.sort(function (a, b) { return _this.getAttempts(a) - _this.getAttempts(b); });\n        return accepted;\n    };\n    PriorityQueue.prototype.pushWithBackoff = function (item, minTimeout) {\n        var _this = this;\n        if (minTimeout === void 0) { minTimeout = 0; }\n        // One immediate retry unless we have a minimum timeout (e.g. for rate limiting)\n        if (minTimeout == 0 && this.getAttempts(item) === 0) {\n            return this.push(item)[0];\n        }\n        var attempt = this.updateAttempts(item);\n        if (attempt > this.maxAttempts || this.includes(item)) {\n            return false;\n        }\n        var timeout = (0,_backoff__WEBPACK_IMPORTED_MODULE_1__.backoff)({ attempt: attempt - 1 });\n        if (minTimeout > 0 && timeout < minTimeout) {\n            timeout = minTimeout;\n        }\n        setTimeout(function () {\n            _this.queue.push(item);\n            // remove from future list\n            _this.future = _this.future.filter(function (f) { return f.id !== item.id; });\n            // Lets listeners know that a 'future' message is now available in the queue\n            _this.emit(ON_REMOVE_FROM_FUTURE);\n        }, timeout);\n        this.future.push(item);\n        return true;\n    };\n    PriorityQueue.prototype.getAttempts = function (item) {\n        var _a;\n        return (_a = this.seen[item.id]) !== null && _a !== void 0 ? _a : 0;\n    };\n    PriorityQueue.prototype.updateAttempts = function (item) {\n        this.seen[item.id] = this.getAttempts(item) + 1;\n        return this.getAttempts(item);\n    };\n    PriorityQueue.prototype.includes = function (item) {\n        return (this.queue.includes(item) ||\n            this.future.includes(item) ||\n            Boolean(this.queue.find(function (i) { return i.id === item.id; })) ||\n            Boolean(this.future.find(function (i) { return i.id === item.id; })));\n    };\n    PriorityQueue.prototype.pop = function () {\n        return this.queue.shift();\n    };\n    Object.defineProperty(PriorityQueue.prototype, \"length\", {\n        get: function () {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(PriorityQueue.prototype, \"todo\", {\n        get: function () {\n            return this.queue.length + this.future.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return PriorityQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_2__.Emitter));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcHJpb3JpdHktcXVldWUvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBa0M7QUFDeUI7QUFDdkI7QUFDcEM7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLElBQUksZ0RBQVM7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsdURBQXVELHFEQUFxRDtBQUM1RztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLGlEQUFPLEdBQUcsc0JBQXNCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwwQkFBMEI7QUFDeEY7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELDBCQUEwQjtBQUM3RSxvREFBb0QsMEJBQTBCO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDLENBQUMscUVBQU87QUFDZ0I7QUFDekIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS9wcmlvcml0eS1xdWV1ZS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2V4dGVuZHMgfSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBiYWNrb2ZmIH0gZnJvbSAnLi9iYWNrb2ZmJztcbi8qKlxuICogQGludGVybmFsXG4gKi9cbmV4cG9ydCB2YXIgT05fUkVNT1ZFX0ZST01fRlVUVVJFID0gJ29uUmVtb3ZlRnJvbUZ1dHVyZSc7XG52YXIgUHJpb3JpdHlRdWV1ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoUHJpb3JpdHlRdWV1ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBQcmlvcml0eVF1ZXVlKG1heEF0dGVtcHRzLCBxdWV1ZSwgc2Vlbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5mdXR1cmUgPSBbXTtcbiAgICAgICAgX3RoaXMubWF4QXR0ZW1wdHMgPSBtYXhBdHRlbXB0cztcbiAgICAgICAgX3RoaXMucXVldWUgPSBxdWV1ZTtcbiAgICAgICAgX3RoaXMuc2VlbiA9IHNlZW4gIT09IG51bGwgJiYgc2VlbiAhPT0gdm9pZCAwID8gc2VlbiA6IHt9O1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgaXRlbXNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWNjZXB0ZWQgPSBpdGVtcy5tYXAoZnVuY3Rpb24gKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgdmFyIGF0dGVtcHRzID0gX3RoaXMudXBkYXRlQXR0ZW1wdHMob3BlcmF0aW9uKTtcbiAgICAgICAgICAgIGlmIChhdHRlbXB0cyA+IF90aGlzLm1heEF0dGVtcHRzIHx8IF90aGlzLmluY2x1ZGVzKG9wZXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5xdWV1ZS5wdXNoKG9wZXJhdGlvbik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsgcmV0dXJuIF90aGlzLmdldEF0dGVtcHRzKGEpIC0gX3RoaXMuZ2V0QXR0ZW1wdHMoYik7IH0pO1xuICAgICAgICByZXR1cm4gYWNjZXB0ZWQ7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5wdXNoV2l0aEJhY2tvZmYgPSBmdW5jdGlvbiAoaXRlbSwgbWluVGltZW91dCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAobWluVGltZW91dCA9PT0gdm9pZCAwKSB7IG1pblRpbWVvdXQgPSAwOyB9XG4gICAgICAgIC8vIE9uZSBpbW1lZGlhdGUgcmV0cnkgdW5sZXNzIHdlIGhhdmUgYSBtaW5pbXVtIHRpbWVvdXQgKGUuZy4gZm9yIHJhdGUgbGltaXRpbmcpXG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID09IDAgJiYgdGhpcy5nZXRBdHRlbXB0cyhpdGVtKSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHVzaChpdGVtKVswXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYXR0ZW1wdCA9IHRoaXMudXBkYXRlQXR0ZW1wdHMoaXRlbSk7XG4gICAgICAgIGlmIChhdHRlbXB0ID4gdGhpcy5tYXhBdHRlbXB0cyB8fCB0aGlzLmluY2x1ZGVzKGl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRpbWVvdXQgPSBiYWNrb2ZmKHsgYXR0ZW1wdDogYXR0ZW1wdCAtIDEgfSk7XG4gICAgICAgIGlmIChtaW5UaW1lb3V0ID4gMCAmJiB0aW1lb3V0IDwgbWluVGltZW91dCkge1xuICAgICAgICAgICAgdGltZW91dCA9IG1pblRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5xdWV1ZS5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIGZyb20gZnV0dXJlIGxpc3RcbiAgICAgICAgICAgIF90aGlzLmZ1dHVyZSA9IF90aGlzLmZ1dHVyZS5maWx0ZXIoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYuaWQgIT09IGl0ZW0uaWQ7IH0pO1xuICAgICAgICAgICAgLy8gTGV0cyBsaXN0ZW5lcnMga25vdyB0aGF0IGEgJ2Z1dHVyZScgbWVzc2FnZSBpcyBub3cgYXZhaWxhYmxlIGluIHRoZSBxdWV1ZVxuICAgICAgICAgICAgX3RoaXMuZW1pdChPTl9SRU1PVkVfRlJPTV9GVVRVUkUpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgdGhpcy5mdXR1cmUucHVzaChpdGVtKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5nZXRBdHRlbXB0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuc2VlbltpdGVtLmlkXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcbiAgICB9O1xuICAgIFByaW9yaXR5UXVldWUucHJvdG90eXBlLnVwZGF0ZUF0dGVtcHRzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5zZWVuW2l0ZW0uaWRdID0gdGhpcy5nZXRBdHRlbXB0cyhpdGVtKSArIDE7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dGVtcHRzKGl0ZW0pO1xuICAgIH07XG4gICAgUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gKHRoaXMucXVldWUuaW5jbHVkZXMoaXRlbSkgfHxcbiAgICAgICAgICAgIHRoaXMuZnV0dXJlLmluY2x1ZGVzKGl0ZW0pIHx8XG4gICAgICAgICAgICBCb29sZWFuKHRoaXMucXVldWUuZmluZChmdW5jdGlvbiAoaSkgeyByZXR1cm4gaS5pZCA9PT0gaXRlbS5pZDsgfSkpIHx8XG4gICAgICAgICAgICBCb29sZWFuKHRoaXMuZnV0dXJlLmZpbmQoZnVuY3Rpb24gKGkpIHsgcmV0dXJuIGkuaWQgPT09IGl0ZW0uaWQ7IH0pKSk7XG4gICAgfTtcbiAgICBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZS5wb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnNoaWZ0KCk7XG4gICAgfTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUsIFwibGVuZ3RoXCIsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGg7XG4gICAgICAgIH0sXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUHJpb3JpdHlRdWV1ZS5wcm90b3R5cGUsIFwidG9kb1wiLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoICsgdGhpcy5mdXR1cmUubGVuZ3RoO1xuICAgICAgICB9LFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIFByaW9yaXR5UXVldWU7XG59KEVtaXR0ZXIpKTtcbmV4cG9ydCB7IFByaW9yaXR5UXVldWUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   attempt: () => (/* binding */ attempt),\n/* harmony export */   ensure: () => (/* binding */ ensure)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n\n\nfunction tryAsync(fn) {\n    return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n        var err_1;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, fn()];\n                case 1: return [2 /*return*/, _a.sent()];\n                case 2:\n                    err_1 = _a.sent();\n                    return [2 /*return*/, Promise.reject(err_1)];\n                case 3: return [2 /*return*/];\n            }\n        });\n    });\n}\nfunction attempt(ctx, plugin) {\n    ctx.log('debug', 'plugin', { plugin: plugin.name });\n    var start = new Date().getTime();\n    var hook = plugin[ctx.event.type];\n    if (hook === undefined) {\n        return Promise.resolve(ctx);\n    }\n    var newCtx = tryAsync(function () { return hook.apply(plugin, [ctx]); })\n        .then(function (ctx) {\n        var done = new Date().getTime() - start;\n        ctx.stats.gauge('plugin_time', done, [\"plugin:\".concat(plugin.name)]);\n        return ctx;\n    })\n        .catch(function (err) {\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation &&\n            err.type === 'middleware_cancellation') {\n            throw err;\n        }\n        if (err instanceof _context__WEBPACK_IMPORTED_MODULE_1__.ContextCancelation) {\n            ctx.log('warn', err.type, {\n                plugin: plugin.name,\n                error: err,\n            });\n            return err;\n        }\n        ctx.log('error', 'plugin Error', {\n            plugin: plugin.name,\n            error: err,\n        });\n        ctx.stats.increment('plugin_error', 1, [\"plugin:\".concat(plugin.name)]);\n        return err;\n    });\n    return newCtx;\n}\nfunction ensure(ctx, plugin) {\n    return attempt(ctx, plugin).then(function (newContext) {\n        if (newContext instanceof _context__WEBPACK_IMPORTED_MODULE_1__.CoreContext) {\n            return newContext;\n        }\n        ctx.log('debug', 'Context canceled');\n        ctx.stats.increment('context_canceled');\n        ctx.cancel(newContext);\n    });\n}\n//# sourceMappingURL=delivery.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErQztBQUNjO0FBQzdEO0FBQ0EsV0FBVyxnREFBUztBQUNwQjtBQUNBLGVBQWUsa0RBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ087QUFDUCxpQ0FBaUMscUJBQXFCO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsbUNBQW1DO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsMkJBQTJCLHdEQUFrQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0RBQWtCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1A7QUFDQSxrQ0FBa0MsaURBQVc7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZGVsaXZlcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hd2FpdGVyLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgQ29yZUNvbnRleHQsIENvbnRleHRDYW5jZWxhdGlvbiB9IGZyb20gJy4uL2NvbnRleHQnO1xuZnVuY3Rpb24gdHJ5QXN5bmMoZm4pIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlcnJfMTtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFswLCAyLCAsIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZm4oKV07XG4gICAgICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gWzIgLypyZXR1cm4qLywgX2Euc2VudCgpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIGVycl8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgUHJvbWlzZS5yZWplY3QoZXJyXzEpXTtcbiAgICAgICAgICAgICAgICBjYXNlIDM6IHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gYXR0ZW1wdChjdHgsIHBsdWdpbikge1xuICAgIGN0eC5sb2coJ2RlYnVnJywgJ3BsdWdpbicsIHsgcGx1Z2luOiBwbHVnaW4ubmFtZSB9KTtcbiAgICB2YXIgc3RhcnQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB2YXIgaG9vayA9IHBsdWdpbltjdHguZXZlbnQudHlwZV07XG4gICAgaWYgKGhvb2sgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGN0eCk7XG4gICAgfVxuICAgIHZhciBuZXdDdHggPSB0cnlBc3luYyhmdW5jdGlvbiAoKSB7IHJldHVybiBob29rLmFwcGx5KHBsdWdpbiwgW2N0eF0pOyB9KVxuICAgICAgICAudGhlbihmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHZhciBkb25lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzdGFydDtcbiAgICAgICAgY3R4LnN0YXRzLmdhdWdlKCdwbHVnaW5fdGltZScsIGRvbmUsIFtcInBsdWdpbjpcIi5jb25jYXQocGx1Z2luLm5hbWUpXSk7XG4gICAgICAgIHJldHVybiBjdHg7XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIENvbnRleHRDYW5jZWxhdGlvbiAmJlxuICAgICAgICAgICAgZXJyLnR5cGUgPT09ICdtaWRkbGV3YXJlX2NhbmNlbGxhdGlvbicpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgQ29udGV4dENhbmNlbGF0aW9uKSB7XG4gICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgZXJyLnR5cGUsIHtcbiAgICAgICAgICAgICAgICBwbHVnaW46IHBsdWdpbi5uYW1lLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmxvZygnZXJyb3InLCAncGx1Z2luIEVycm9yJywge1xuICAgICAgICAgICAgcGx1Z2luOiBwbHVnaW4ubmFtZSxcbiAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgIH0pO1xuICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdwbHVnaW5fZXJyb3InLCAxLCBbXCJwbHVnaW46XCIuY29uY2F0KHBsdWdpbi5uYW1lKV0pO1xuICAgICAgICByZXR1cm4gZXJyO1xuICAgIH0pO1xuICAgIHJldHVybiBuZXdDdHg7XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlKGN0eCwgcGx1Z2luKSB7XG4gICAgcmV0dXJuIGF0dGVtcHQoY3R4LCBwbHVnaW4pLnRoZW4oZnVuY3Rpb24gKG5ld0NvbnRleHQpIHtcbiAgICAgICAgaWYgKG5ld0NvbnRleHQgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0NvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnQ29udGV4dCBjYW5jZWxlZCcpO1xuICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdjb250ZXh0X2NhbmNlbGVkJyk7XG4gICAgICAgIGN0eC5jYW5jZWwobmV3Q29udGV4dCk7XG4gICAgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kZWxpdmVyeS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreEventQueue: () => (/* binding */ CoreEventQueue)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var _utils_group_by__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/group-by */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\");\n/* harmony import */ var _priority_queue__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../priority-queue */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../context */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _task_task_group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../task/task-group */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\");\n/* harmony import */ var _delivery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./delivery */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/delivery.js\");\n\n\n\n\n\n\n\nvar CoreEventQueue = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(CoreEventQueue, _super);\n    function CoreEventQueue(priorityQueue) {\n        var _this = _super.call(this) || this;\n        /**\n         * All event deliveries get suspended until all the tasks in this task group are complete.\n         * For example: a middleware that augments the event object should be loaded safely as a\n         * critical task, this way, event queue will wait for it to be ready before sending events.\n         *\n         * This applies to all the events already in the queue, and the upcoming ones\n         */\n        _this.criticalTasks = (0,_task_task_group__WEBPACK_IMPORTED_MODULE_1__.createTaskGroup)();\n        _this.plugins = [];\n        _this.failedInitializations = [];\n        _this.flushing = false;\n        _this.queue = priorityQueue;\n        _this.queue.on(_priority_queue__WEBPACK_IMPORTED_MODULE_2__.ON_REMOVE_FROM_FUTURE, function () {\n            _this.scheduleFlush(0);\n        });\n        return _this;\n    }\n    CoreEventQueue.prototype.register = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var handleLoadError, err_1;\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.plugins.push(plugin);\n                        handleLoadError = function (err) {\n                            _this.failedInitializations.push(plugin.name);\n                            _this.emit('initialization_failure', plugin);\n                            console.warn(plugin.name, err);\n                            ctx.log('warn', 'Failed to load destination', {\n                                plugin: plugin.name,\n                                error: err,\n                            });\n                            // Filter out the failed plugin by excluding it from the list\n                            _this.plugins = _this.plugins.filter(function (p) { return p !== plugin; });\n                        };\n                        if (!(plugin.type === 'destination' && plugin.name !== 'Segment.io')) return [3 /*break*/, 1];\n                        plugin.load(ctx, instance).catch(handleLoadError);\n                        return [3 /*break*/, 4];\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, plugin.load(ctx, instance)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_1 = _a.sent();\n                        handleLoadError(err_1);\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.deregister = function (ctx, plugin, instance) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var e_1;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 3, , 4]);\n                        if (!plugin.unload) return [3 /*break*/, 2];\n                        return [4 /*yield*/, Promise.resolve(plugin.unload(ctx, instance))];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        this.plugins = this.plugins.filter(function (p) { return p.name !== plugin.name; });\n                        return [3 /*break*/, 4];\n                    case 3:\n                        e_1 = _a.sent();\n                        ctx.log('warn', 'Failed to unload destination', {\n                            plugin: plugin.name,\n                            error: e_1,\n                        });\n                        return [3 /*break*/, 4];\n                    case 4: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatch = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var willDeliver;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.push(ctx);\n                willDeliver = this.subscribeToDelivery(ctx);\n                this.scheduleFlush(0);\n                return [2 /*return*/, willDeliver];\n            });\n        });\n    };\n    CoreEventQueue.prototype.subscribeToDelivery = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve) {\n                        var onDeliver = function (flushed, delivered) {\n                            if (flushed.isSame(ctx)) {\n                                _this.off('flush', onDeliver);\n                                if (delivered) {\n                                    resolve(flushed);\n                                }\n                                else {\n                                    resolve(flushed);\n                                }\n                            }\n                        };\n                        _this.on('flush', onDeliver);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.dispatchSingle = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _this = this;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                ctx.log('debug', 'Dispatching');\n                ctx.stats.increment('message_dispatched');\n                this.queue.updateAttempts(ctx);\n                ctx.attempts = 1;\n                return [2 /*return*/, this.deliver(ctx).catch(function (err) {\n                        var accepted = _this.enqueuRetry(err, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err });\n                            return ctx;\n                        }\n                        return _this.subscribeToDelivery(ctx);\n                    })];\n            });\n        });\n    };\n    CoreEventQueue.prototype.isEmpty = function () {\n        return this.queue.length === 0;\n    };\n    CoreEventQueue.prototype.scheduleFlush = function (timeout) {\n        var _this = this;\n        if (timeout === void 0) { timeout = 500; }\n        if (this.flushing) {\n            return;\n        }\n        this.flushing = true;\n        setTimeout(function () {\n            // eslint-disable-next-line @typescript-eslint/no-floating-promises\n            _this.flush().then(function () {\n                setTimeout(function () {\n                    _this.flushing = false;\n                    if (_this.queue.length) {\n                        _this.scheduleFlush(0);\n                    }\n                }, 0);\n            });\n        }, timeout);\n    };\n    CoreEventQueue.prototype.deliver = function (ctx) {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var start, done, err_2, error;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.criticalTasks.done()];\n                    case 1:\n                        _a.sent();\n                        start = Date.now();\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.flushOne(ctx)];\n                    case 3:\n                        ctx = _a.sent();\n                        done = Date.now() - start;\n                        this.emit('delivery_success', ctx);\n                        ctx.stats.gauge('delivered', done);\n                        ctx.log('debug', 'Delivered', ctx.event);\n                        return [2 /*return*/, ctx];\n                    case 4:\n                        err_2 = _a.sent();\n                        error = err_2;\n                        ctx.log('error', 'Failed to deliver', error);\n                        this.emit('delivery_failure', ctx, error);\n                        ctx.stats.increment('delivery_failed');\n                        throw err_2;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.enqueuRetry = function (err, ctx) {\n        var retriable = !(err instanceof _context__WEBPACK_IMPORTED_MODULE_3__.ContextCancelation) || err.retry;\n        if (!retriable) {\n            return false;\n        }\n        return this.queue.pushWithBackoff(ctx);\n    };\n    CoreEventQueue.prototype.flush = function () {\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var ctx, err_3, accepted;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.queue.length === 0) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx = this.queue.pop();\n                        if (!ctx) {\n                            return [2 /*return*/, []];\n                        }\n                        ctx.attempts = this.queue.getAttempts(ctx);\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.deliver(ctx)];\n                    case 2:\n                        ctx = _a.sent();\n                        this.emit('flush', ctx, true);\n                        return [3 /*break*/, 4];\n                    case 3:\n                        err_3 = _a.sent();\n                        accepted = this.enqueuRetry(err_3, ctx);\n                        if (!accepted) {\n                            ctx.setFailedDelivery({ reason: err_3 });\n                            this.emit('flush', ctx, false);\n                        }\n                        return [2 /*return*/, []];\n                    case 4: return [2 /*return*/, [ctx]];\n                }\n            });\n        });\n    };\n    CoreEventQueue.prototype.isReady = function () {\n        // return this.plugins.every((p) => p.isLoaded())\n        // should we wait for every plugin to load?\n        return true;\n    };\n    CoreEventQueue.prototype.availableExtensions = function (denyList) {\n        var available = this.plugins.filter(function (p) {\n            var _a, _b, _c;\n            // Only filter out destination plugins or the Segment.io plugin\n            if (p.type !== 'destination' && p.name !== 'Segment.io') {\n                return true;\n            }\n            var alternativeNameMatch = undefined;\n            (_a = p.alternativeNames) === null || _a === void 0 ? void 0 : _a.forEach(function (name) {\n                if (denyList[name] !== undefined) {\n                    alternativeNameMatch = denyList[name];\n                }\n            });\n            // Explicit integration option takes precedence, `All: false` does not apply to Segment.io\n            return ((_c = (_b = denyList[p.name]) !== null && _b !== void 0 ? _b : alternativeNameMatch) !== null && _c !== void 0 ? _c : (p.name === 'Segment.io' ? true : denyList.All) !== false);\n        });\n        var _a = (0,_utils_group_by__WEBPACK_IMPORTED_MODULE_4__.groupBy)(available, 'type'), _b = _a.before, before = _b === void 0 ? [] : _b, _c = _a.enrichment, enrichment = _c === void 0 ? [] : _c, _d = _a.destination, destination = _d === void 0 ? [] : _d, _e = _a.after, after = _e === void 0 ? [] : _e;\n        return {\n            before: before,\n            enrichment: enrichment,\n            destinations: destination,\n            after: after,\n        };\n    };\n    CoreEventQueue.prototype.flushOne = function (ctx) {\n        var _a, _b;\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this, void 0, void 0, function () {\n            var _c, before, enrichment, _i, before_1, beforeWare, temp, _d, enrichment_1, enrichmentWare, temp, _e, destinations, after, afterCalls;\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this, function (_f) {\n                switch (_f.label) {\n                    case 0:\n                        if (!this.isReady()) {\n                            throw new Error('Not ready');\n                        }\n                        if (ctx.attempts > 1) {\n                            this.emit('delivery_retry', ctx);\n                        }\n                        _c = this.availableExtensions((_a = ctx.event.integrations) !== null && _a !== void 0 ? _a : {}), before = _c.before, enrichment = _c.enrichment;\n                        _i = 0, before_1 = before;\n                        _f.label = 1;\n                    case 1:\n                        if (!(_i < before_1.length)) return [3 /*break*/, 4];\n                        beforeWare = before_1[_i];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.ensure)(ctx, beforeWare)];\n                    case 2:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, beforeWare);\n                        _f.label = 3;\n                    case 3:\n                        _i++;\n                        return [3 /*break*/, 1];\n                    case 4:\n                        _d = 0, enrichment_1 = enrichment;\n                        _f.label = 5;\n                    case 5:\n                        if (!(_d < enrichment_1.length)) return [3 /*break*/, 8];\n                        enrichmentWare = enrichment_1[_d];\n                        return [4 /*yield*/, (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, enrichmentWare)];\n                    case 6:\n                        temp = _f.sent();\n                        if (temp instanceof _context__WEBPACK_IMPORTED_MODULE_3__.CoreContext) {\n                            ctx = temp;\n                        }\n                        this.emit('message_enriched', ctx, enrichmentWare);\n                        _f.label = 7;\n                    case 7:\n                        _d++;\n                        return [3 /*break*/, 5];\n                    case 8:\n                        _e = this.availableExtensions((_b = ctx.event.integrations) !== null && _b !== void 0 ? _b : {}), destinations = _e.destinations, after = _e.after;\n                        return [4 /*yield*/, new Promise(function (resolve, reject) {\n                                setTimeout(function () {\n                                    var attempts = destinations.map(function (destination) {\n                                        return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, destination);\n                                    });\n                                    Promise.all(attempts).then(resolve).catch(reject);\n                                }, 0);\n                            })];\n                    case 9:\n                        _f.sent();\n                        ctx.stats.increment('message_delivered');\n                        this.emit('message_delivered', ctx);\n                        afterCalls = after.map(function (after) { return (0,_delivery__WEBPACK_IMPORTED_MODULE_5__.attempt)(ctx, after); });\n                        return [4 /*yield*/, Promise.all(afterCalls)];\n                    case 10:\n                        _f.sent();\n                        return [2 /*return*/, ctx];\n                }\n            });\n        });\n    };\n    return CoreEventQueue;\n}(_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_6__.Emitter));\n\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vcXVldWUvZXZlbnQtcXVldWUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBMEQ7QUFDZDtBQUNjO0FBQ0c7QUFDRjtBQUNOO0FBQ1I7QUFDN0M7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLGlFQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGtFQUFxQjtBQUM1QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0E7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQSxnRkFBZ0Ysc0JBQXNCO0FBQ3RHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwRUFBMEUsZ0NBQWdDO0FBQzFHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLGVBQWUsZ0RBQVM7QUFDeEI7QUFDQSxtQkFBbUIsa0RBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxhQUFhO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLHlDQUF5Qyx3REFBa0I7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxnREFBUztBQUN4QjtBQUNBLG1CQUFtQixrREFBVztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxlQUFlO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNULGlCQUFpQix3REFBTztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGdEQUFTO0FBQ3hCO0FBQ0EsbUJBQW1CLGtEQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SEFBdUg7QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxpREFBTTtBQUNuRDtBQUNBO0FBQ0EsNENBQTRDLGlEQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLGtEQUFPO0FBQ3BEO0FBQ0E7QUFDQSw0Q0FBNEMsaURBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVIQUF1SDtBQUN2SDtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0Msa0RBQU87QUFDdEQscUNBQXFDO0FBQ3JDO0FBQ0EsaUNBQWlDO0FBQ2pDLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxPQUFPLGtEQUFPLGVBQWU7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLENBQUMsQ0FBQyxxRUFBTztBQUNpQjtBQUMxQiIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3F1ZXVlL2V2ZW50LXF1ZXVlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fYXdhaXRlciwgX19leHRlbmRzLCBfX2dlbmVyYXRvciB9IGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgZ3JvdXBCeSB9IGZyb20gJy4uL3V0aWxzL2dyb3VwLWJ5JztcbmltcG9ydCB7IE9OX1JFTU9WRV9GUk9NX0ZVVFVSRSB9IGZyb20gJy4uL3ByaW9yaXR5LXF1ZXVlJztcbmltcG9ydCB7IENvcmVDb250ZXh0LCBDb250ZXh0Q2FuY2VsYXRpb24gfSBmcm9tICcuLi9jb250ZXh0JztcbmltcG9ydCB7IEVtaXR0ZXIgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBjcmVhdGVUYXNrR3JvdXAgfSBmcm9tICcuLi90YXNrL3Rhc2stZ3JvdXAnO1xuaW1wb3J0IHsgYXR0ZW1wdCwgZW5zdXJlIH0gZnJvbSAnLi9kZWxpdmVyeSc7XG52YXIgQ29yZUV2ZW50UXVldWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENvcmVFdmVudFF1ZXVlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvcmVFdmVudFF1ZXVlKHByaW9yaXR5UXVldWUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsbCBldmVudCBkZWxpdmVyaWVzIGdldCBzdXNwZW5kZWQgdW50aWwgYWxsIHRoZSB0YXNrcyBpbiB0aGlzIHRhc2sgZ3JvdXAgYXJlIGNvbXBsZXRlLlxuICAgICAgICAgKiBGb3IgZXhhbXBsZTogYSBtaWRkbGV3YXJlIHRoYXQgYXVnbWVudHMgdGhlIGV2ZW50IG9iamVjdCBzaG91bGQgYmUgbG9hZGVkIHNhZmVseSBhcyBhXG4gICAgICAgICAqIGNyaXRpY2FsIHRhc2ssIHRoaXMgd2F5LCBldmVudCBxdWV1ZSB3aWxsIHdhaXQgZm9yIGl0IHRvIGJlIHJlYWR5IGJlZm9yZSBzZW5kaW5nIGV2ZW50cy5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhpcyBhcHBsaWVzIHRvIGFsbCB0aGUgZXZlbnRzIGFscmVhZHkgaW4gdGhlIHF1ZXVlLCBhbmQgdGhlIHVwY29taW5nIG9uZXNcbiAgICAgICAgICovXG4gICAgICAgIF90aGlzLmNyaXRpY2FsVGFza3MgPSBjcmVhdGVUYXNrR3JvdXAoKTtcbiAgICAgICAgX3RoaXMucGx1Z2lucyA9IFtdO1xuICAgICAgICBfdGhpcy5mYWlsZWRJbml0aWFsaXphdGlvbnMgPSBbXTtcbiAgICAgICAgX3RoaXMuZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMucXVldWUgPSBwcmlvcml0eVF1ZXVlO1xuICAgICAgICBfdGhpcy5xdWV1ZS5vbihPTl9SRU1PVkVfRlJPTV9GVVRVUkUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnNjaGVkdWxlRmx1c2goMCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChjdHgsIHBsdWdpbiwgaW5zdGFuY2UpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZUxvYWRFcnJvciwgZXJyXzE7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5zLnB1c2gocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUxvYWRFcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mYWlsZWRJbml0aWFsaXphdGlvbnMucHVzaChwbHVnaW4ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZW1pdCgnaW5pdGlhbGl6YXRpb25fZmFpbHVyZScsIHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKHBsdWdpbi5uYW1lLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5sb2coJ3dhcm4nLCAnRmFpbGVkIHRvIGxvYWQgZGVzdGluYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBlcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlsdGVyIG91dCB0aGUgZmFpbGVkIHBsdWdpbiBieSBleGNsdWRpbmcgaXQgZnJvbSB0aGUgbGlzdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnBsdWdpbnMgPSBfdGhpcy5wbHVnaW5zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcCAhPT0gcGx1Z2luOyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShwbHVnaW4udHlwZSA9PT0gJ2Rlc3RpbmF0aW9uJyAmJiBwbHVnaW4ubmFtZSAhPT0gJ1NlZ21lbnQuaW8nKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4ubG9hZChjdHgsIGluc3RhbmNlKS5jYXRjaChoYW5kbGVMb2FkRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnRyeXMucHVzaChbMSwgMywgLCA0XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBwbHVnaW4ubG9hZChjdHgsIGluc3RhbmNlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMyAvKmJyZWFrKi8sIDRdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMSA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZUxvYWRFcnJvcihlcnJfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRlcmVnaXN0ZXIgPSBmdW5jdGlvbiAoY3R4LCBwbHVnaW4sIGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlXzE7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzAsIDMsICwgNF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4udW5sb2FkKSByZXR1cm4gWzMgLypicmVhayovLCAyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIFByb21pc2UucmVzb2x2ZShwbHVnaW4udW5sb2FkKGN0eCwgaW5zdGFuY2UpKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW5zID0gdGhpcy5wbHVnaW5zLmZpbHRlcihmdW5jdGlvbiAocCkgeyByZXR1cm4gcC5uYW1lICE9PSBwbHVnaW4ubmFtZTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZV8xID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnd2FybicsICdGYWlsZWQgdG8gdW5sb2FkIGRlc3RpbmF0aW9uJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbjogcGx1Z2luLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGVfMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChjdHgpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHdpbGxEZWxpdmVyO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGN0eC5sb2coJ2RlYnVnJywgJ0Rpc3BhdGNoaW5nJyk7XG4gICAgICAgICAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnbWVzc2FnZV9kaXNwYXRjaGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKGN0eCk7XG4gICAgICAgICAgICAgICAgd2lsbERlbGl2ZXIgPSB0aGlzLnN1YnNjcmliZVRvRGVsaXZlcnkoY3R4KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlRmx1c2goMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHdpbGxEZWxpdmVyXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5zdWJzY3JpYmVUb0RlbGl2ZXJ5ID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9uRGVsaXZlciA9IGZ1bmN0aW9uIChmbHVzaGVkLCBkZWxpdmVyZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmx1c2hlZC5pc1NhbWUoY3R4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vZmYoJ2ZsdXNoJywgb25EZWxpdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRlbGl2ZXJlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShmbHVzaGVkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmx1c2hlZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMub24oJ2ZsdXNoJywgb25EZWxpdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRpc3BhdGNoU2luZ2xlID0gZnVuY3Rpb24gKGN0eCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGN0eC5sb2coJ2RlYnVnJywgJ0Rpc3BhdGNoaW5nJyk7XG4gICAgICAgICAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnbWVzc2FnZV9kaXNwYXRjaGVkJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS51cGRhdGVBdHRlbXB0cyhjdHgpO1xuICAgICAgICAgICAgICAgIGN0eC5hdHRlbXB0cyA9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIHRoaXMuZGVsaXZlcihjdHgpLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhY2NlcHRlZCA9IF90aGlzLmVucXVldVJldHJ5KGVyciwgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWNjZXB0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHguc2V0RmFpbGVkRGVsaXZlcnkoeyByZWFzb246IGVyciB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnN1YnNjcmliZVRvRGVsaXZlcnkoY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMDtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5zY2hlZHVsZUZsdXNoID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRpbWVvdXQgPT09IHZvaWQgMCkgeyB0aW1lb3V0ID0gNTAwOyB9XG4gICAgICAgIGlmICh0aGlzLmZsdXNoaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5mbHVzaGluZyA9IHRydWU7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAgICAgX3RoaXMuZmx1c2goKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmx1c2hpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLnF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2NoZWR1bGVGbHVzaCgwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHRpbWVvdXQpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmRlbGl2ZXIgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdGFydCwgZG9uZSwgZXJyXzIsIGVycm9yO1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiByZXR1cm4gWzQgLyp5aWVsZCovLCB0aGlzLmNyaXRpY2FsVGFza3MuZG9uZSgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2EubGFiZWwgPSAyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS50cnlzLnB1c2goWzIsIDQsICwgNV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgdGhpcy5mbHVzaE9uZShjdHgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSA9IERhdGUubm93KCkgLSBzdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfc3VjY2VzcycsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuZ2F1Z2UoJ2RlbGl2ZXJlZCcsIGRvbmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmxvZygnZGVidWcnLCAnRGVsaXZlcmVkJywgY3R4LmV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovLCBjdHhdO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJfMiA9IF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gZXJyXzI7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubG9nKCdlcnJvcicsICdGYWlsZWQgdG8gZGVsaXZlcicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGVsaXZlcnlfZmFpbHVyZScsIGN0eCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnN0YXRzLmluY3JlbWVudCgnZGVsaXZlcnlfZmFpbGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnJfMjtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmVucXVldVJldHJ5ID0gZnVuY3Rpb24gKGVyciwgY3R4KSB7XG4gICAgICAgIHZhciByZXRyaWFibGUgPSAhKGVyciBpbnN0YW5jZW9mIENvbnRleHRDYW5jZWxhdGlvbikgfHwgZXJyLnJldHJ5O1xuICAgICAgICBpZiAoIXJldHJpYWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLnB1c2hXaXRoQmFja29mZihjdHgpO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4LCBlcnJfMywgYWNjZXB0ZWQ7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gdGhpcy5xdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3R4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi8sIFtdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5hdHRlbXB0cyA9IHRoaXMucXVldWUuZ2V0QXR0ZW1wdHMoY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLmxhYmVsID0gMTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2EudHJ5cy5wdXNoKFsxLCAzLCAsIDRdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHRoaXMuZGVsaXZlcihjdHgpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY3R4ID0gX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdmbHVzaCcsIGN0eCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA0XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyXzMgPSBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY2NlcHRlZCA9IHRoaXMuZW5xdWV1UmV0cnkoZXJyXzMsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFjY2VwdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LnNldEZhaWxlZERlbGl2ZXJ5KHsgcmVhc29uOiBlcnJfMyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2ZsdXNoJywgY3R4LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgW11dO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJldHVybiBbMiAvKnJldHVybiovLCBbY3R4XV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZUV2ZW50UXVldWUucHJvdG90eXBlLmlzUmVhZHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHJldHVybiB0aGlzLnBsdWdpbnMuZXZlcnkoKHApID0+IHAuaXNMb2FkZWQoKSlcbiAgICAgICAgLy8gc2hvdWxkIHdlIHdhaXQgZm9yIGV2ZXJ5IHBsdWdpbiB0byBsb2FkP1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIENvcmVFdmVudFF1ZXVlLnByb3RvdHlwZS5hdmFpbGFibGVFeHRlbnNpb25zID0gZnVuY3Rpb24gKGRlbnlMaXN0KSB7XG4gICAgICAgIHZhciBhdmFpbGFibGUgPSB0aGlzLnBsdWdpbnMuZmlsdGVyKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgICAgIC8vIE9ubHkgZmlsdGVyIG91dCBkZXN0aW5hdGlvbiBwbHVnaW5zIG9yIHRoZSBTZWdtZW50LmlvIHBsdWdpblxuICAgICAgICAgICAgaWYgKHAudHlwZSAhPT0gJ2Rlc3RpbmF0aW9uJyAmJiBwLm5hbWUgIT09ICdTZWdtZW50LmlvJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGFsdGVybmF0aXZlTmFtZU1hdGNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgKF9hID0gcC5hbHRlcm5hdGl2ZU5hbWVzKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChkZW55TGlzdFtuYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsdGVybmF0aXZlTmFtZU1hdGNoID0gZGVueUxpc3RbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBFeHBsaWNpdCBpbnRlZ3JhdGlvbiBvcHRpb24gdGFrZXMgcHJlY2VkZW5jZSwgYEFsbDogZmFsc2VgIGRvZXMgbm90IGFwcGx5IHRvIFNlZ21lbnQuaW9cbiAgICAgICAgICAgIHJldHVybiAoKF9jID0gKF9iID0gZGVueUxpc3RbcC5uYW1lXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogYWx0ZXJuYXRpdmVOYW1lTWF0Y2gpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IChwLm5hbWUgPT09ICdTZWdtZW50LmlvJyA/IHRydWUgOiBkZW55TGlzdC5BbGwpICE9PSBmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgX2EgPSBncm91cEJ5KGF2YWlsYWJsZSwgJ3R5cGUnKSwgX2IgPSBfYS5iZWZvcmUsIGJlZm9yZSA9IF9iID09PSB2b2lkIDAgPyBbXSA6IF9iLCBfYyA9IF9hLmVucmljaG1lbnQsIGVucmljaG1lbnQgPSBfYyA9PT0gdm9pZCAwID8gW10gOiBfYywgX2QgPSBfYS5kZXN0aW5hdGlvbiwgZGVzdGluYXRpb24gPSBfZCA9PT0gdm9pZCAwID8gW10gOiBfZCwgX2UgPSBfYS5hZnRlciwgYWZ0ZXIgPSBfZSA9PT0gdm9pZCAwID8gW10gOiBfZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogYmVmb3JlLFxuICAgICAgICAgICAgZW5yaWNobWVudDogZW5yaWNobWVudCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uczogZGVzdGluYXRpb24sXG4gICAgICAgICAgICBhZnRlcjogYWZ0ZXIsXG4gICAgICAgIH07XG4gICAgfTtcbiAgICBDb3JlRXZlbnRRdWV1ZS5wcm90b3R5cGUuZmx1c2hPbmUgPSBmdW5jdGlvbiAoY3R4KSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBfYywgYmVmb3JlLCBlbnJpY2htZW50LCBfaSwgYmVmb3JlXzEsIGJlZm9yZVdhcmUsIHRlbXAsIF9kLCBlbnJpY2htZW50XzEsIGVucmljaG1lbnRXYXJlLCB0ZW1wLCBfZSwgZGVzdGluYXRpb25zLCBhZnRlciwgYWZ0ZXJDYWxscztcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2YpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9mLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc1JlYWR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCByZWFkeScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN0eC5hdHRlbXB0cyA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2RlbGl2ZXJ5X3JldHJ5JywgY3R4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF9jID0gdGhpcy5hdmFpbGFibGVFeHRlbnNpb25zKChfYSA9IGN0eC5ldmVudC5pbnRlZ3JhdGlvbnMpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KSwgYmVmb3JlID0gX2MuYmVmb3JlLCBlbnJpY2htZW50ID0gX2MuZW5yaWNobWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pID0gMCwgYmVmb3JlXzEgPSBiZWZvcmU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKF9pIDwgYmVmb3JlXzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgNF07XG4gICAgICAgICAgICAgICAgICAgICAgICBiZWZvcmVXYXJlID0gYmVmb3JlXzFbX2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZW5zdXJlKGN0eCwgYmVmb3JlV2FyZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wID0gX2Yuc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXAgaW5zdGFuY2VvZiBDb3JlQ29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN0eCA9IHRlbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ21lc3NhZ2VfZW5yaWNoZWQnLCBjdHgsIGJlZm9yZVdhcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2YubGFiZWwgPSAzO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICBfaSsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFszIC8qYnJlYWsqLywgMV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kID0gMCwgZW5yaWNobWVudF8xID0gZW5yaWNobWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9mLmxhYmVsID0gNTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoX2QgPCBlbnJpY2htZW50XzEubGVuZ3RoKSkgcmV0dXJuIFszIC8qYnJlYWsqLywgOF07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnJpY2htZW50V2FyZSA9IGVucmljaG1lbnRfMVtfZF07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBhdHRlbXB0KGN0eCwgZW5yaWNobWVudFdhcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcCA9IF9mLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZW1wIGluc3RhbmNlb2YgQ29yZUNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdHggPSB0ZW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlX2VucmljaGVkJywgY3R4LCBlbnJpY2htZW50V2FyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5sYWJlbCA9IDc7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kKys7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzMgLypicmVhayovLCA1XTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgICAgICAgICAgICAgX2UgPSB0aGlzLmF2YWlsYWJsZUV4dGVuc2lvbnMoKF9iID0gY3R4LmV2ZW50LmludGVncmF0aW9ucykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDoge30pLCBkZXN0aW5hdGlvbnMgPSBfZS5kZXN0aW5hdGlvbnMsIGFmdGVyID0gX2UuYWZ0ZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dGVtcHRzID0gZGVzdGluYXRpb25zLm1hcChmdW5jdGlvbiAoZGVzdGluYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXR0ZW1wdChjdHgsIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoYXR0ZW1wdHMpLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguc3RhdHMuaW5jcmVtZW50KCdtZXNzYWdlX2RlbGl2ZXJlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdtZXNzYWdlX2RlbGl2ZXJlZCcsIGN0eCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZnRlckNhbGxzID0gYWZ0ZXIubWFwKGZ1bmN0aW9uIChhZnRlcikgeyByZXR1cm4gYXR0ZW1wdChjdHgsIGFmdGVyKTsgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBQcm9taXNlLmFsbChhZnRlckNhbGxzKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgICAgICAgICAgICAgICBfZi5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qLywgY3R4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZUV2ZW50UXVldWU7XG59KEVtaXR0ZXIpKTtcbmV4cG9ydCB7IENvcmVFdmVudFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ldmVudC1xdWV1ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/stats/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CoreStats: () => (/* binding */ CoreStats),\n/* harmony export */   NullStats: () => (/* binding */ NullStats)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n\nvar compactMetricType = function (type) {\n    var enums = {\n        gauge: 'g',\n        counter: 'c',\n    };\n    return enums[type];\n};\nvar CoreStats = /** @class */ (function () {\n    function CoreStats() {\n        this.metrics = [];\n    }\n    CoreStats.prototype.increment = function (metric, by, tags) {\n        if (by === void 0) { by = 1; }\n        this.metrics.push({\n            metric: metric,\n            value: by,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'counter',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.gauge = function (metric, value, tags) {\n        this.metrics.push({\n            metric: metric,\n            value: value,\n            tags: tags !== null && tags !== void 0 ? tags : [],\n            type: 'gauge',\n            timestamp: Date.now(),\n        });\n    };\n    CoreStats.prototype.flush = function () {\n        var formatted = this.metrics.map(function (m) { return ((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({}, m), { tags: m.tags.join(',') })); });\n        // ie doesn't like console.table\n        if (console.table) {\n            console.table(formatted);\n        }\n        else {\n            console.log(formatted);\n        }\n        this.metrics = [];\n    };\n    /**\n     * compact keys for smaller payload\n     */\n    CoreStats.prototype.serialize = function () {\n        return this.metrics.map(function (m) {\n            return {\n                m: m.metric,\n                v: m.value,\n                t: m.tags,\n                k: compactMetricType(m.type),\n                e: m.timestamp,\n            };\n        });\n    };\n    return CoreStats;\n}());\n\nvar NullStats = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(NullStats, _super);\n    function NullStats() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    NullStats.prototype.gauge = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.increment = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.flush = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n    };\n    NullStats.prototype.serialize = function () {\n        var _args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _args[_i] = arguments[_i];\n        }\n        return [];\n    };\n    return NullStats;\n}(CoreStats));\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0Esd0RBQXdELFFBQVEsK0NBQVEsQ0FBQywrQ0FBUSxHQUFHLFFBQVEsd0JBQXdCLEtBQUs7QUFDekg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCO0FBQ0EsSUFBSSxnREFBUztBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsdUJBQXVCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ29CO0FBQ3JCIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vc3RhdHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIGNvbXBhY3RNZXRyaWNUeXBlID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZW51bXMgPSB7XG4gICAgICAgIGdhdWdlOiAnZycsXG4gICAgICAgIGNvdW50ZXI6ICdjJyxcbiAgICB9O1xuICAgIHJldHVybiBlbnVtc1t0eXBlXTtcbn07XG52YXIgQ29yZVN0YXRzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvcmVTdGF0cygpIHtcbiAgICAgICAgdGhpcy5tZXRyaWNzID0gW107XG4gICAgfVxuICAgIENvcmVTdGF0cy5wcm90b3R5cGUuaW5jcmVtZW50ID0gZnVuY3Rpb24gKG1ldHJpYywgYnksIHRhZ3MpIHtcbiAgICAgICAgaWYgKGJ5ID09PSB2b2lkIDApIHsgYnkgPSAxOyB9XG4gICAgICAgIHRoaXMubWV0cmljcy5wdXNoKHtcbiAgICAgICAgICAgIG1ldHJpYzogbWV0cmljLFxuICAgICAgICAgICAgdmFsdWU6IGJ5LFxuICAgICAgICAgICAgdGFnczogdGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB2b2lkIDAgPyB0YWdzIDogW10sXG4gICAgICAgICAgICB0eXBlOiAnY291bnRlcicsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29yZVN0YXRzLnByb3RvdHlwZS5nYXVnZSA9IGZ1bmN0aW9uIChtZXRyaWMsIHZhbHVlLCB0YWdzKSB7XG4gICAgICAgIHRoaXMubWV0cmljcy5wdXNoKHtcbiAgICAgICAgICAgIG1ldHJpYzogbWV0cmljLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdGFnczogdGFncyAhPT0gbnVsbCAmJiB0YWdzICE9PSB2b2lkIDAgPyB0YWdzIDogW10sXG4gICAgICAgICAgICB0eXBlOiAnZ2F1Z2UnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvcmVTdGF0cy5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBmb3JtYXR0ZWQgPSB0aGlzLm1ldHJpY3MubWFwKGZ1bmN0aW9uIChtKSB7IHJldHVybiAoX19hc3NpZ24oX19hc3NpZ24oe30sIG0pLCB7IHRhZ3M6IG0udGFncy5qb2luKCcsJykgfSkpOyB9KTtcbiAgICAgICAgLy8gaWUgZG9lc24ndCBsaWtlIGNvbnNvbGUudGFibGVcbiAgICAgICAgaWYgKGNvbnNvbGUudGFibGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUudGFibGUoZm9ybWF0dGVkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tZXRyaWNzID0gW107XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBjb21wYWN0IGtleXMgZm9yIHNtYWxsZXIgcGF5bG9hZFxuICAgICAqL1xuICAgIENvcmVTdGF0cy5wcm90b3R5cGUuc2VyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRyaWNzLm1hcChmdW5jdGlvbiAobSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBtOiBtLm1ldHJpYyxcbiAgICAgICAgICAgICAgICB2OiBtLnZhbHVlLFxuICAgICAgICAgICAgICAgIHQ6IG0udGFncyxcbiAgICAgICAgICAgICAgICBrOiBjb21wYWN0TWV0cmljVHlwZShtLnR5cGUpLFxuICAgICAgICAgICAgICAgIGU6IG0udGltZXN0YW1wLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29yZVN0YXRzO1xufSgpKTtcbmV4cG9ydCB7IENvcmVTdGF0cyB9O1xudmFyIE51bGxTdGF0cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTnVsbFN0YXRzLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIE51bGxTdGF0cygpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBOdWxsU3RhdHMucHJvdG90eXBlLmdhdWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuaW5jcmVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIF9hcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE51bGxTdGF0cy5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgTnVsbFN0YXRzLnByb3RvdHlwZS5zZXJpYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgX2FyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfTtcbiAgICByZXR1cm4gTnVsbFN0YXRzO1xufShDb3JlU3RhdHMpKTtcbmV4cG9ydCB7IE51bGxTdGF0cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/stats/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/task/task-group.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTaskGroup: () => (/* binding */ createTaskGroup)\n/* harmony export */ });\n/* harmony import */ var _utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/is-thenable */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\");\n\nvar createTaskGroup = function () {\n    var taskCompletionPromise;\n    var resolvePromise;\n    var count = 0;\n    return {\n        done: function () { return taskCompletionPromise; },\n        run: function (op) {\n            var returnValue = op();\n            if ((0,_utils_is_thenable__WEBPACK_IMPORTED_MODULE_0__.isThenable)(returnValue)) {\n                if (++count === 1) {\n                    taskCompletionPromise = new Promise(function (res) { return (resolvePromise = res); });\n                }\n                returnValue.finally(function () { return --count === 0 && resolvePromise(); });\n            }\n            return returnValue;\n        },\n    };\n};\n//# sourceMappingURL=task-group.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdGFzay90YXNrLWdyb3VwLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWtEO0FBQzNDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0JBQStCO0FBQzNEO0FBQ0E7QUFDQSxnQkFBZ0IsOERBQVU7QUFDMUI7QUFDQSx5RUFBeUUsZ0NBQWdDO0FBQ3pHO0FBQ0Esa0RBQWtELDJDQUEyQztBQUM3RjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3Rhc2svdGFzay1ncm91cC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1RoZW5hYmxlIH0gZnJvbSAnLi4vdXRpbHMvaXMtdGhlbmFibGUnO1xuZXhwb3J0IHZhciBjcmVhdGVUYXNrR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRhc2tDb21wbGV0aW9uUHJvbWlzZTtcbiAgICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gICAgdmFyIGNvdW50ID0gMDtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb25lOiBmdW5jdGlvbiAoKSB7IHJldHVybiB0YXNrQ29tcGxldGlvblByb21pc2U7IH0sXG4gICAgICAgIHJ1bjogZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgICAgICB2YXIgcmV0dXJuVmFsdWUgPSBvcCgpO1xuICAgICAgICAgICAgaWYgKGlzVGhlbmFibGUocmV0dXJuVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCsrY291bnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza0NvbXBsZXRpb25Qcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gKHJlc29sdmVQcm9taXNlID0gcmVzKTsgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLmZpbmFsbHkoZnVuY3Rpb24gKCkgeyByZXR1cm4gLS1jb3VudCA9PT0gMCAmJiByZXNvbHZlUHJvbWlzZSgpOyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRhc2stZ3JvdXAuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/task/task-group.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   bindAll: () => (/* binding */ bindAll)\n/* harmony export */ });\nfunction bindAll(obj) {\n    var proto = obj.constructor.prototype;\n    for (var _i = 0, _a = Object.getOwnPropertyNames(proto); _i < _a.length; _i++) {\n        var key = _a[_i];\n        if (key !== 'constructor') {\n            var desc = Object.getOwnPropertyDescriptor(obj.constructor.prototype, key);\n            if (!!desc && typeof desc.value === 'function') {\n                obj[key] = obj[key].bind(obj);\n            }\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=bind-all.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvYmluZC1hbGwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQSw2REFBNkQsZ0JBQWdCO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9iaW5kLWFsbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gYmluZEFsbChvYmopIHtcbiAgICB2YXIgcHJvdG8gPSBvYmouY29uc3RydWN0b3IucHJvdG90eXBlO1xuICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhwcm90byk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBfYVtfaV07XG4gICAgICAgIGlmIChrZXkgIT09ICdjb25zdHJ1Y3RvcicpIHtcbiAgICAgICAgICAgIHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBrZXkpO1xuICAgICAgICAgICAgaWYgKCEhZGVzYyAmJiB0eXBlb2YgZGVzYy52YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIG9ialtrZXldID0gb2JqW2tleV0uYmluZChvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iaW5kLWFsbC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   groupBy: () => (/* binding */ groupBy)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n\nfunction groupBy(collection, grouper) {\n    var results = {};\n    collection.forEach(function (item) {\n        var _a;\n        var key = undefined;\n        if (typeof grouper === 'string') {\n            var suggestedKey = item[grouper];\n            key =\n                typeof suggestedKey !== 'string'\n                    ? JSON.stringify(suggestedKey)\n                    : suggestedKey;\n        }\n        else if (grouper instanceof Function) {\n            key = grouper(item);\n        }\n        if (key === undefined) {\n            return;\n        }\n        results[key] = (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)((0,tslib__WEBPACK_IMPORTED_MODULE_0__.__spreadArray)([], ((_a = results[key]) !== null && _a !== void 0 ? _a : []), true), [item], false);\n    });\n    return results;\n}\n//# sourceMappingURL=group-by.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvZ3JvdXAtYnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBc0M7QUFDL0I7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG9EQUFhLENBQUMsb0RBQWE7QUFDbEQsS0FBSztBQUNMO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3V0aWxzL2dyb3VwLWJ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fc3ByZWFkQXJyYXkgfSBmcm9tIFwidHNsaWJcIjtcbmV4cG9ydCBmdW5jdGlvbiBncm91cEJ5KGNvbGxlY3Rpb24sIGdyb3VwZXIpIHtcbiAgICB2YXIgcmVzdWx0cyA9IHt9O1xuICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBrZXkgPSB1bmRlZmluZWQ7XG4gICAgICAgIGlmICh0eXBlb2YgZ3JvdXBlciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHZhciBzdWdnZXN0ZWRLZXkgPSBpdGVtW2dyb3VwZXJdO1xuICAgICAgICAgICAga2V5ID1cbiAgICAgICAgICAgICAgICB0eXBlb2Ygc3VnZ2VzdGVkS2V5ICE9PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgICAgICA/IEpTT04uc3RyaW5naWZ5KHN1Z2dlc3RlZEtleSlcbiAgICAgICAgICAgICAgICAgICAgOiBzdWdnZXN0ZWRLZXk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZ3JvdXBlciBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICBrZXkgPSBncm91cGVyKGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdHNba2V5XSA9IF9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSwgKChfYSA9IHJlc3VsdHNba2V5XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW10pLCB0cnVlKSwgW2l0ZW1dLCBmYWxzZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ncm91cC1ieS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/group-by.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isThenable: () => (/* binding */ isThenable)\n/* harmony export */ });\n/**\n *  Check if  thenable\n *  (instanceof Promise doesn't respect realms)\n */\nvar isThenable = function (value) {\n    return typeof value === 'object' &&\n        value !== null &&\n        'then' in value &&\n        typeof value.then === 'function';\n};\n//# sourceMappingURL=is-thenable.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvaXMtdGhlbmFibGUuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9pcy10aGVuYWJsZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqICBDaGVjayBpZiAgdGhlbmFibGVcbiAqICAoaW5zdGFuY2VvZiBQcm9taXNlIGRvZXNuJ3QgcmVzcGVjdCByZWFsbXMpXG4gKi9cbmV4cG9ydCB2YXIgaXNUaGVuYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gICAgICAgIHZhbHVlICE9PSBudWxsICYmXG4gICAgICAgICd0aGVuJyBpbiB2YWx1ZSAmJlxuICAgICAgICB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pcy10aGVuYWJsZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/is-thenable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/utils/pick.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickBy: () => (/* binding */ pickBy)\n/* harmony export */ });\nvar pickBy = function (obj, fn) {\n    return Object.keys(obj)\n        .filter(function (k) { return fn(k, obj[k]); })\n        .reduce(function (acc, key) { return ((acc[key] = obj[key]), acc); }, {});\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdXRpbHMvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBLCtCQUErQix1QkFBdUI7QUFDdEQsc0NBQXNDLHNDQUFzQyxJQUFJO0FBQ2hGO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS91dGlscy9waWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB2YXIgcGlja0J5ID0gZnVuY3Rpb24gKG9iaiwgZm4pIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKVxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrKSB7IHJldHVybiBmbihrLCBvYmpba10pOyB9KVxuICAgICAgICAucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGtleSkgeyByZXR1cm4gKChhY2Nba2V5XSA9IG9ialtrZXldKSwgYWNjKTsgfSwge30pO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpY2suanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/pick.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertEventExists: () => (/* binding */ assertEventExists),\n/* harmony export */   assertEventType: () => (/* binding */ assertEventType),\n/* harmony export */   assertMessageId: () => (/* binding */ assertMessageId),\n/* harmony export */   assertTrackEventName: () => (/* binding */ assertTrackEventName),\n/* harmony export */   assertTrackEventProperties: () => (/* binding */ assertTrackEventProperties),\n/* harmony export */   assertTraits: () => (/* binding */ assertTraits),\n/* harmony export */   assertUserIdentity: () => (/* binding */ assertUserIdentity),\n/* harmony export */   validateEvent: () => (/* binding */ validateEvent)\n/* harmony export */ });\n/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./errors */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n/* harmony import */ var _helpers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\");\n\n\nvar stringError = 'is not a string';\nvar objError = 'is not an object';\nvar nilError = 'is nil';\n// user identity check could hypothetically could be used in the browser event factory, but not 100% sure -- so this is node only for now\nfunction assertUserIdentity(event) {\n    var USER_FIELD_NAME = '.userId/anonymousId/previousId/groupId';\n    var getAnyUserId = function (event) { var _a, _b, _c; return (_c = (_b = (_a = event.userId) !== null && _a !== void 0 ? _a : event.anonymousId) !== null && _b !== void 0 ? _b : event.groupId) !== null && _c !== void 0 ? _c : event.previousId; };\n    var id = getAnyUserId(event);\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, nilError);\n    }\n    else if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(id)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError(USER_FIELD_NAME, stringError);\n    }\n}\nfunction assertEventExists(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.exists)(event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', nilError);\n    }\n    if (typeof event !== 'object') {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('Event', objError);\n    }\n}\nfunction assertEventType(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.type)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.type', stringError);\n    }\n}\nfunction assertTrackEventName(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.event)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.event', stringError);\n    }\n}\nfunction assertTrackEventProperties(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.properties)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.properties', objError);\n    }\n}\nfunction assertTraits(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isPlainObject)(event.traits)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.traits', objError);\n    }\n}\nfunction assertMessageId(event) {\n    if (!(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.isString)(event.messageId)) {\n        throw new _errors__WEBPACK_IMPORTED_MODULE_1__.ValidationError('.messageId', stringError);\n    }\n}\nfunction validateEvent(event) {\n    assertEventExists(event);\n    assertEventType(event);\n    assertMessageId(event);\n    if (event.type === 'track') {\n        assertTrackEventName(event);\n        assertTrackEventProperties(event);\n    }\n    if (['group', 'identify'].includes(event.type)) {\n        assertTraits(event);\n    }\n}\n//# sourceMappingURL=assertions.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkM7QUFDaUI7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0EsMENBQTBDLGdCQUFnQjtBQUMxRDtBQUNBLFNBQVMsZ0RBQU07QUFDZixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQSxjQUFjLGtEQUFRO0FBQ3RCLGtCQUFrQixvREFBZTtBQUNqQztBQUNBO0FBQ087QUFDUCxTQUFTLGdEQUFNO0FBQ2Ysa0JBQWtCLG9EQUFlO0FBQ2pDO0FBQ0E7QUFDQSxrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyx1REFBYTtBQUN0QixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1AsU0FBUyxrREFBUTtBQUNqQixrQkFBa0Isb0RBQWU7QUFDakM7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9hc3NlcnRpb25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7IGlzU3RyaW5nLCBpc1BsYWluT2JqZWN0LCBleGlzdHMgfSBmcm9tICcuL2hlbHBlcnMnO1xudmFyIHN0cmluZ0Vycm9yID0gJ2lzIG5vdCBhIHN0cmluZyc7XG52YXIgb2JqRXJyb3IgPSAnaXMgbm90IGFuIG9iamVjdCc7XG52YXIgbmlsRXJyb3IgPSAnaXMgbmlsJztcbi8vIHVzZXIgaWRlbnRpdHkgY2hlY2sgY291bGQgaHlwb3RoZXRpY2FsbHkgY291bGQgYmUgdXNlZCBpbiB0aGUgYnJvd3NlciBldmVudCBmYWN0b3J5LCBidXQgbm90IDEwMCUgc3VyZSAtLSBzbyB0aGlzIGlzIG5vZGUgb25seSBmb3Igbm93XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VXNlcklkZW50aXR5KGV2ZW50KSB7XG4gICAgdmFyIFVTRVJfRklFTERfTkFNRSA9ICcudXNlcklkL2Fub255bW91c0lkL3ByZXZpb3VzSWQvZ3JvdXBJZCc7XG4gICAgdmFyIGdldEFueVVzZXJJZCA9IGZ1bmN0aW9uIChldmVudCkgeyB2YXIgX2EsIF9iLCBfYzsgcmV0dXJuIChfYyA9IChfYiA9IChfYSA9IGV2ZW50LnVzZXJJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXZlbnQuYW5vbnltb3VzSWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGV2ZW50Lmdyb3VwSWQpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IGV2ZW50LnByZXZpb3VzSWQ7IH07XG4gICAgdmFyIGlkID0gZ2V0QW55VXNlcklkKGV2ZW50KTtcbiAgICBpZiAoIWV4aXN0cyhpZCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcihVU0VSX0ZJRUxEX05BTUUsIG5pbEVycm9yKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIWlzU3RyaW5nKGlkKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKFVTRVJfRklFTERfTkFNRSwgc3RyaW5nRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRFdmVudEV4aXN0cyhldmVudCkge1xuICAgIGlmICghZXhpc3RzKGV2ZW50KSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCdFdmVudCcsIG5pbEVycm9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ29iamVjdCcpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignRXZlbnQnLCBvYmpFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEV2ZW50VHlwZShldmVudCkge1xuICAgIGlmICghaXNTdHJpbmcoZXZlbnQudHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLnR5cGUnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydFRyYWNrRXZlbnROYW1lKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC5ldmVudCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLmV2ZW50Jywgc3RyaW5nRXJyb3IpO1xuICAgIH1cbn1cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRUcmFja0V2ZW50UHJvcGVydGllcyhldmVudCkge1xuICAgIGlmICghaXNQbGFpbk9iamVjdChldmVudC5wcm9wZXJ0aWVzKSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCcucHJvcGVydGllcycsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0VHJhaXRzKGV2ZW50KSB7XG4gICAgaWYgKCFpc1BsYWluT2JqZWN0KGV2ZW50LnRyYWl0cykpIHtcbiAgICAgICAgdGhyb3cgbmV3IFZhbGlkYXRpb25FcnJvcignLnRyYWl0cycsIG9iakVycm9yKTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0TWVzc2FnZUlkKGV2ZW50KSB7XG4gICAgaWYgKCFpc1N0cmluZyhldmVudC5tZXNzYWdlSWQpKSB7XG4gICAgICAgIHRocm93IG5ldyBWYWxpZGF0aW9uRXJyb3IoJy5tZXNzYWdlSWQnLCBzdHJpbmdFcnJvcik7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRXZlbnQoZXZlbnQpIHtcbiAgICBhc3NlcnRFdmVudEV4aXN0cyhldmVudCk7XG4gICAgYXNzZXJ0RXZlbnRUeXBlKGV2ZW50KTtcbiAgICBhc3NlcnRNZXNzYWdlSWQoZXZlbnQpO1xuICAgIGlmIChldmVudC50eXBlID09PSAndHJhY2snKSB7XG4gICAgICAgIGFzc2VydFRyYWNrRXZlbnROYW1lKGV2ZW50KTtcbiAgICAgICAgYXNzZXJ0VHJhY2tFdmVudFByb3BlcnRpZXMoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoWydncm91cCcsICdpZGVudGlmeSddLmluY2x1ZGVzKGV2ZW50LnR5cGUpKSB7XG4gICAgICAgIGFzc2VydFRyYWl0cyhldmVudCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXNzZXJ0aW9ucy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/errors.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ValidationError: () => (/* binding */ ValidationError)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! tslib */ \"(rsc)/./node_modules/tslib/tslib.es6.js\");\n\nvar ValidationError = /** @class */ (function (_super) {\n    (0,tslib__WEBPACK_IMPORTED_MODULE_0__.__extends)(ValidationError, _super);\n    function ValidationError(field, message) {\n        var _this = _super.call(this, \"\".concat(field, \" \").concat(message)) || this;\n        _this.field = field;\n        return _this;\n    }\n    return ValidationError;\n}(Error));\n\n//# sourceMappingURL=errors.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9lcnJvcnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBa0M7QUFDbEM7QUFDQSxJQUFJLGdEQUFTO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUMwQjtBQUMzQiIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1jb3JlL2Rpc3QvZXNtL3ZhbGlkYXRpb24vZXJyb3JzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZXh0ZW5kcyB9IGZyb20gXCJ0c2xpYlwiO1xudmFyIFZhbGlkYXRpb25FcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoVmFsaWRhdGlvbkVycm9yLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFZhbGlkYXRpb25FcnJvcihmaWVsZCwgbWVzc2FnZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBcIlwiLmNvbmNhdChmaWVsZCwgXCIgXCIpLmNvbmNhdChtZXNzYWdlKSkgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZmllbGQgPSBmaWVsZDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gVmFsaWRhdGlvbkVycm9yO1xufShFcnJvcikpO1xuZXhwb3J0IHsgVmFsaWRhdGlvbkVycm9yIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lcnJvcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   exists: () => (/* binding */ exists),\n/* harmony export */   isFunction: () => (/* binding */ isFunction),\n/* harmony export */   isNumber: () => (/* binding */ isNumber),\n/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),\n/* harmony export */   isString: () => (/* binding */ isString)\n/* harmony export */ });\nfunction isString(obj) {\n    return typeof obj === 'string';\n}\nfunction isNumber(obj) {\n    return typeof obj === 'number';\n}\nfunction isFunction(obj) {\n    return typeof obj === 'function';\n}\nfunction exists(val) {\n    return val !== undefined && val !== null;\n}\nfunction isPlainObject(obj) {\n    return (Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() === 'object');\n}\n//# sourceMappingURL=helpers.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUvZGlzdC9lc20vdmFsaWRhdGlvbi9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtY29yZS9kaXN0L2VzbS92YWxpZGF0aW9uL2hlbHBlcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGlzU3RyaW5nKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnc3RyaW5nJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcihvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ251bWJlcic7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ2Z1bmN0aW9uJztcbn1cbmV4cG9ydCBmdW5jdGlvbiBleGlzdHModmFsKSB7XG4gICAgcmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkICYmIHZhbCAhPT0gbnVsbDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCkgPT09ICdvYmplY3QnKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhlbHBlcnMuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDeferred: () => (/* binding */ createDeferred)\n/* harmony export */ });\n/**\n * Return a promise that can be externally resolved\n */\nvar createDeferred = function () {\n    var resolve;\n    var reject;\n    var settled = false;\n    var promise = new Promise(function (_resolve, _reject) {\n        resolve = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _resolve.apply(void 0, args);\n        };\n        reject = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            settled = true;\n            _reject.apply(void 0, args);\n        };\n    });\n    return {\n        resolve: resolve,\n        reject: reject,\n        promise: promise,\n        isSettled: function () { return settled; },\n    };\n};\n//# sourceMappingURL=create-deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vY3JlYXRlLWRlZmVycmVkL2NyZWF0ZS1kZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHVCQUF1QjtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLGlCQUFpQjtBQUNsRDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9jcmVhdGUtZGVmZXJyZWQvY3JlYXRlLWRlZmVycmVkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmV0dXJuIGEgcHJvbWlzZSB0aGF0IGNhbiBiZSBleHRlcm5hbGx5IHJlc29sdmVkXG4gKi9cbmV4cG9ydCB2YXIgY3JlYXRlRGVmZXJyZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc29sdmU7XG4gICAgdmFyIHJlamVjdDtcbiAgICB2YXIgc2V0dGxlZCA9IGZhbHNlO1xuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKF9yZXNvbHZlLCBfcmVqZWN0KSB7XG4gICAgICAgIHJlc29sdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXR0bGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIF9yZXNvbHZlLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHJlamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldHRsZWQgPSB0cnVlO1xuICAgICAgICAgICAgX3JlamVjdC5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc29sdmU6IHJlc29sdmUsXG4gICAgICAgIHJlamVjdDogcmVqZWN0LFxuICAgICAgICBwcm9taXNlOiBwcm9taXNlLFxuICAgICAgICBpc1NldHRsZWQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNldHRsZWQ7IH0sXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtZGVmZXJyZWQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Emitter: () => (/* binding */ Emitter)\n/* harmony export */ });\n/**\n * Event Emitter that takes the expected contract as a generic\n * @example\n * ```ts\n *  type Contract = {\n *    delivery_success: [DeliverySuccessResponse, Metrics],\n *    delivery_failure: [DeliveryError]\n * }\n *  new Emitter<Contract>()\n *  .on('delivery_success', (res, metrics) => ...)\n *  .on('delivery_failure', (err) => ...)\n * ```\n */\nvar Emitter = /** @class */ (function () {\n    function Emitter(options) {\n        var _a;\n        this.callbacks = {};\n        this.warned = false;\n        this.maxListeners = (_a = options === null || options === void 0 ? void 0 : options.maxListeners) !== null && _a !== void 0 ? _a : 10;\n    }\n    Emitter.prototype.warnIfPossibleMemoryLeak = function (event) {\n        if (this.warned) {\n            return;\n        }\n        if (this.maxListeners &&\n            this.callbacks[event].length > this.maxListeners) {\n            console.warn(\"Event Emitter: Possible memory leak detected; \".concat(String(event), \" has exceeded \").concat(this.maxListeners, \" listeners.\"));\n            this.warned = true;\n        }\n    };\n    Emitter.prototype.on = function (event, callback) {\n        if (!this.callbacks[event]) {\n            this.callbacks[event] = [callback];\n        }\n        else {\n            this.callbacks[event].push(callback);\n            this.warnIfPossibleMemoryLeak(event);\n        }\n        return this;\n    };\n    Emitter.prototype.once = function (event, callback) {\n        var _this = this;\n        var on = function () {\n            var args = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                args[_i] = arguments[_i];\n            }\n            _this.off(event, on);\n            callback.apply(_this, args);\n        };\n        this.on(event, on);\n        return this;\n    };\n    Emitter.prototype.off = function (event, callback) {\n        var _a;\n        var fns = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        var without = fns.filter(function (fn) { return fn !== callback; });\n        this.callbacks[event] = without;\n        return this;\n    };\n    Emitter.prototype.emit = function (event) {\n        var _this = this;\n        var _a;\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        var callbacks = (_a = this.callbacks[event]) !== null && _a !== void 0 ? _a : [];\n        callbacks.forEach(function (callback) {\n            callback.apply(_this, args);\n        });\n        return this;\n    };\n    return Emitter;\n}());\n\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMvZGlzdC9lc20vZW1pdHRlci9lbWl0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0VBQXdFO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsdUJBQXVCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQseUJBQXlCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHVCQUF1QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDa0I7QUFDbkIiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscy9kaXN0L2VzbS9lbWl0dGVyL2VtaXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFdmVudCBFbWl0dGVyIHRoYXQgdGFrZXMgdGhlIGV4cGVjdGVkIGNvbnRyYWN0IGFzIGEgZ2VuZXJpY1xuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAgdHlwZSBDb250cmFjdCA9IHtcbiAqICAgIGRlbGl2ZXJ5X3N1Y2Nlc3M6IFtEZWxpdmVyeVN1Y2Nlc3NSZXNwb25zZSwgTWV0cmljc10sXG4gKiAgICBkZWxpdmVyeV9mYWlsdXJlOiBbRGVsaXZlcnlFcnJvcl1cbiAqIH1cbiAqICBuZXcgRW1pdHRlcjxDb250cmFjdD4oKVxuICogIC5vbignZGVsaXZlcnlfc3VjY2VzcycsIChyZXMsIG1ldHJpY3MpID0+IC4uLilcbiAqICAub24oJ2RlbGl2ZXJ5X2ZhaWx1cmUnLCAoZXJyKSA9PiAuLi4pXG4gKiBgYGBcbiAqL1xudmFyIEVtaXR0ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRW1pdHRlcihvcHRpb25zKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgdGhpcy53YXJuZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tYXhMaXN0ZW5lcnMgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMubWF4TGlzdGVuZXJzKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxMDtcbiAgICB9XG4gICAgRW1pdHRlci5wcm90b3R5cGUud2FybklmUG9zc2libGVNZW1vcnlMZWFrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLndhcm5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heExpc3RlbmVycyAmJlxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdLmxlbmd0aCA+IHRoaXMubWF4TGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXCJFdmVudCBFbWl0dGVyOiBQb3NzaWJsZSBtZW1vcnkgbGVhayBkZXRlY3RlZDsgXCIuY29uY2F0KFN0cmluZyhldmVudCksIFwiIGhhcyBleGNlZWRlZCBcIikuY29uY2F0KHRoaXMubWF4TGlzdGVuZXJzLCBcIiBsaXN0ZW5lcnMuXCIpKTtcbiAgICAgICAgICAgIHRoaXMud2FybmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgRW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICghdGhpcy5jYWxsYmFja3NbZXZlbnRdKSB7XG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc1tldmVudF0gPSBbY2FsbGJhY2tdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbZXZlbnRdLnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgdGhpcy53YXJuSWZQb3NzaWJsZU1lbW9yeUxlYWsoZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRW1pdHRlci5wcm90b3R5cGUub25jZSA9IGZ1bmN0aW9uIChldmVudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMub2ZmKGV2ZW50LCBvbik7XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseShfdGhpcywgYXJncyk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub24oZXZlbnQsIG9uKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdmFyIGZucyA9IChfYSA9IHRoaXMuY2FsbGJhY2tzW2V2ZW50XSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogW107XG4gICAgICAgIHZhciB3aXRob3V0ID0gZm5zLmZpbHRlcihmdW5jdGlvbiAoZm4pIHsgcmV0dXJuIGZuICE9PSBjYWxsYmFjazsgfSk7XG4gICAgICAgIHRoaXMuY2FsbGJhY2tzW2V2ZW50XSA9IHdpdGhvdXQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHZhciBhcmdzID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMTsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBhcmdzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYWxsYmFja3MgPSAoX2EgPSB0aGlzLmNhbGxiYWNrc1tldmVudF0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IFtdO1xuICAgICAgICBjYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KF90aGlzLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIEVtaXR0ZXI7XG59KCkpO1xuZXhwb3J0IHsgRW1pdHRlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW1pdHRlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* binding */ Analytics)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/utils/bind-all.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _settings__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./settings */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../generated/version */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../plugins/segmentio */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\");\n/* harmony import */ var _event_factory__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./event-factory */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\");\n/* harmony import */ var _dispatch_emit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dispatch-emit */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\");\n/* harmony import */ var _emitter__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./emitter */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _event_queue__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./event-queue */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../lib/http-client */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n\n\n\n\n\n\n\nclass Analytics extends _emitter__WEBPACK_IMPORTED_MODULE_5__.NodeEmitter {\n    _eventFactory;\n    _isClosed = false;\n    _pendingEvents = 0;\n    _closeAndFlushDefaultTimeout;\n    _publisher;\n    _isFlushing = false;\n    _queue;\n    ready;\n    constructor(settings) {\n        super();\n        (0,_settings__WEBPACK_IMPORTED_MODULE_0__.validateSettings)(settings);\n        this._eventFactory = new _event_factory__WEBPACK_IMPORTED_MODULE_3__.NodeEventFactory();\n        this._queue = new _event_queue__WEBPACK_IMPORTED_MODULE_7__.NodeEventQueue();\n        const flushInterval = settings.flushInterval ?? 10000;\n        this._closeAndFlushDefaultTimeout = flushInterval * 1.25; // add arbitrary multiplier in case an event is in a plugin.\n        const { plugin, publisher } = (0,_plugins_segmentio__WEBPACK_IMPORTED_MODULE_2__.createConfiguredNodePlugin)({\n            writeKey: settings.writeKey,\n            host: settings.host,\n            path: settings.path,\n            maxRetries: settings.maxRetries ?? 3,\n            flushAt: settings.flushAt ?? settings.maxEventsInBatch ?? 15,\n            httpRequestTimeout: settings.httpRequestTimeout,\n            disable: settings.disable,\n            flushInterval,\n            httpClient: typeof settings.httpClient === 'function'\n                ? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(settings.httpClient)\n                : settings.httpClient ?? new _lib_http_client__WEBPACK_IMPORTED_MODULE_8__.FetchHTTPClient(),\n            oauthSettings: settings.oauthSettings,\n        }, this);\n        this._publisher = publisher;\n        this.ready = this.register(plugin).then(() => undefined);\n        this.emit('initialize', settings);\n        (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_9__.bindAll)(this);\n    }\n    get VERSION() {\n        return _generated_version__WEBPACK_IMPORTED_MODULE_1__.version;\n    }\n    /**\n     * Call this method to stop collecting new events and flush all existing events.\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    closeAndFlush({ timeout = this._closeAndFlushDefaultTimeout, } = {}) {\n        return this.flush({ timeout, close: true });\n    }\n    /**\n     * Call this method to flush all existing events..\n     * This method also waits for any event method-specific callbacks to be triggered,\n     * and any of their subsequent promises to be resolved/rejected.\n     */\n    async flush({ timeout, close = false, } = {}) {\n        if (this._isFlushing) {\n            // if we're already flushing, then we don't need to do anything\n            console.warn('Overlapping flush calls detected. Please wait for the previous flush to finish before calling .flush again');\n            return;\n        }\n        else {\n            this._isFlushing = true;\n        }\n        if (close) {\n            this._isClosed = true;\n        }\n        this._publisher.flush(this._pendingEvents);\n        const promise = new Promise((resolve) => {\n            if (!this._pendingEvents) {\n                resolve();\n            }\n            else {\n                this.once('drained', () => {\n                    resolve();\n                });\n            }\n        }).finally(() => {\n            this._isFlushing = false;\n        });\n        return timeout ? (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_10__.pTimeout)(promise, timeout).catch(() => undefined) : promise;\n    }\n    _dispatch(segmentEvent, callback) {\n        if (this._isClosed) {\n            this.emit('call_after_close', segmentEvent);\n            return undefined;\n        }\n        this._pendingEvents++;\n        (0,_dispatch_emit__WEBPACK_IMPORTED_MODULE_4__.dispatchAndEmit)(segmentEvent, this._queue, this, callback)\n            .catch((ctx) => ctx)\n            .finally(() => {\n            this._pendingEvents--;\n            if (!this._pendingEvents) {\n                this.emit('drained');\n            }\n        });\n    }\n    /**\n     * Combines two unassociated user identities.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#alias\n     */\n    alias({ userId, previousId, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.alias(userId, previousId, {\n            context,\n            integrations,\n            timestamp,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Associates an identified user with a collective.\n     *  @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#group\n     */\n    group({ timestamp, groupId, userId, anonymousId, traits = {}, context, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.group(groupId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Includes a unique userId and (maybe anonymousId) and any optional traits you know about them.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#identify\n     */\n    identify({ userId, anonymousId, traits = {}, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.identify(userId, traits, {\n            context,\n            anonymousId,\n            userId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * The page method lets you record page views on your website, along with optional extra information about the page being viewed.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#page\n     */\n    page({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.page(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records screen views on your app, along with optional extra information\n     * about the screen viewed by the user.\n     *\n     * TODO: This is not documented on the segment docs ATM (for node).\n     */\n    screen({ userId, anonymousId, category, name, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.screen(category ?? null, name ?? null, properties, { context, anonymousId, userId, timestamp, integrations, messageId });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Records actions your users perform.\n     * @link https://segment.com/docs/connections/sources/catalog/libraries/server/node/#track\n     */\n    track({ userId, anonymousId, event, properties, context, timestamp, integrations, messageId, }, callback) {\n        const segmentEvent = this._eventFactory.track(event, properties, {\n            context,\n            userId,\n            anonymousId,\n            timestamp,\n            integrations,\n            messageId,\n        });\n        this._dispatch(segmentEvent, callback);\n    }\n    /**\n     * Registers one or more plugins to augment Analytics functionality.\n     * @param plugins\n     */\n    register(...plugins) {\n        return this._queue.criticalTasks.run(async () => {\n            const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n            const registrations = plugins.map((xt) => this._queue.register(ctx, xt, this));\n            await Promise.all(registrations);\n            this.emit('register', plugins.map((el) => el.name));\n        });\n    }\n    /**\n     * Deregisters one or more plugins based on their names.\n     * @param pluginNames - The names of one or more plugins to deregister.\n     */\n    async deregister(...pluginNames) {\n        const ctx = _context__WEBPACK_IMPORTED_MODULE_6__.Context.system();\n        const deregistrations = pluginNames.map((pl) => {\n            const plugin = this._queue.plugins.find((p) => p.name === pl);\n            if (plugin) {\n                return this._queue.deregister(ctx, plugin, this);\n            }\n            else {\n                ctx.log('warn', `plugin ${pl} not found`);\n            }\n        });\n        await Promise.all(deregistrations);\n        this.emit('deregister', pluginNames);\n    }\n}\n//# sourceMappingURL=analytics-node.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUE0RDtBQUNkO0FBQ0M7QUFDbUI7QUFDZjtBQUNEO0FBQ1Y7QUFDSjtBQUNXO0FBQ007QUFDOUMsd0JBQXdCLGlEQUFXO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwyREFBZ0I7QUFDeEIsaUNBQWlDLDREQUFnQjtBQUNqRCwwQkFBMEIsd0RBQWM7QUFDeEM7QUFDQSxrRUFBa0U7QUFDbEUsZ0JBQWdCLG9CQUFvQixFQUFFLDhFQUEwQjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsNkRBQWU7QUFDckMsNkNBQTZDLDZEQUFlO0FBQzVEO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZ0VBQU87QUFDZjtBQUNBO0FBQ0EsZUFBZSx1REFBTztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsK0NBQStDLElBQUk7QUFDdkUsNEJBQTRCLHNCQUFzQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsMEJBQTBCLElBQUk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxTQUFTO0FBQ1QseUJBQXlCLGtFQUFRO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSwrREFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksa0VBQWtFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxvREFBb0QscUNBQXFDO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsZ0NBQWdDLGdEQUFnRDtBQUMvRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLCtGQUErRjtBQUMxRyxtR0FBbUcsa0VBQWtFO0FBQ3JLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLCtGQUErRjtBQUM1RyxxR0FBcUcsa0VBQWtFO0FBQ3ZLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksc0ZBQXNGO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsNkNBQU87QUFDL0I7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQiw2Q0FBTztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsSUFBSTtBQUM5QztBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2FuYWx5dGljcy1ub2RlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJpbmRBbGwsIHBUaW1lb3V0IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgdmFsaWRhdGVTZXR0aW5ncyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGNyZWF0ZUNvbmZpZ3VyZWROb2RlUGx1Z2luIH0gZnJvbSAnLi4vcGx1Z2lucy9zZWdtZW50aW8nO1xuaW1wb3J0IHsgTm9kZUV2ZW50RmFjdG9yeSB9IGZyb20gJy4vZXZlbnQtZmFjdG9yeSc7XG5pbXBvcnQgeyBkaXNwYXRjaEFuZEVtaXQgfSBmcm9tICcuL2Rpc3BhdGNoLWVtaXQnO1xuaW1wb3J0IHsgTm9kZUVtaXR0ZXIgfSBmcm9tICcuL2VtaXR0ZXInO1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJy4vY29udGV4dCc7XG5pbXBvcnQgeyBOb2RlRXZlbnRRdWV1ZSB9IGZyb20gJy4vZXZlbnQtcXVldWUnO1xuaW1wb3J0IHsgRmV0Y2hIVFRQQ2xpZW50IH0gZnJvbSAnLi4vbGliL2h0dHAtY2xpZW50JztcbmV4cG9ydCBjbGFzcyBBbmFseXRpY3MgZXh0ZW5kcyBOb2RlRW1pdHRlciB7XG4gICAgX2V2ZW50RmFjdG9yeTtcbiAgICBfaXNDbG9zZWQgPSBmYWxzZTtcbiAgICBfcGVuZGluZ0V2ZW50cyA9IDA7XG4gICAgX2Nsb3NlQW5kRmx1c2hEZWZhdWx0VGltZW91dDtcbiAgICBfcHVibGlzaGVyO1xuICAgIF9pc0ZsdXNoaW5nID0gZmFsc2U7XG4gICAgX3F1ZXVlO1xuICAgIHJlYWR5O1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHZhbGlkYXRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLl9ldmVudEZhY3RvcnkgPSBuZXcgTm9kZUV2ZW50RmFjdG9yeSgpO1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IG5ldyBOb2RlRXZlbnRRdWV1ZSgpO1xuICAgICAgICBjb25zdCBmbHVzaEludGVydmFsID0gc2V0dGluZ3MuZmx1c2hJbnRlcnZhbCA/PyAxMDAwMDtcbiAgICAgICAgdGhpcy5fY2xvc2VBbmRGbHVzaERlZmF1bHRUaW1lb3V0ID0gZmx1c2hJbnRlcnZhbCAqIDEuMjU7IC8vIGFkZCBhcmJpdHJhcnkgbXVsdGlwbGllciBpbiBjYXNlIGFuIGV2ZW50IGlzIGluIGEgcGx1Z2luLlxuICAgICAgICBjb25zdCB7IHBsdWdpbiwgcHVibGlzaGVyIH0gPSBjcmVhdGVDb25maWd1cmVkTm9kZVBsdWdpbih7XG4gICAgICAgICAgICB3cml0ZUtleTogc2V0dGluZ3Mud3JpdGVLZXksXG4gICAgICAgICAgICBob3N0OiBzZXR0aW5ncy5ob3N0LFxuICAgICAgICAgICAgcGF0aDogc2V0dGluZ3MucGF0aCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IHNldHRpbmdzLm1heFJldHJpZXMgPz8gMyxcbiAgICAgICAgICAgIGZsdXNoQXQ6IHNldHRpbmdzLmZsdXNoQXQgPz8gc2V0dGluZ3MubWF4RXZlbnRzSW5CYXRjaCA/PyAxNSxcbiAgICAgICAgICAgIGh0dHBSZXF1ZXN0VGltZW91dDogc2V0dGluZ3MuaHR0cFJlcXVlc3RUaW1lb3V0LFxuICAgICAgICAgICAgZGlzYWJsZTogc2V0dGluZ3MuZGlzYWJsZSxcbiAgICAgICAgICAgIGZsdXNoSW50ZXJ2YWwsXG4gICAgICAgICAgICBodHRwQ2xpZW50OiB0eXBlb2Ygc2V0dGluZ3MuaHR0cENsaWVudCA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgID8gbmV3IEZldGNoSFRUUENsaWVudChzZXR0aW5ncy5odHRwQ2xpZW50KVxuICAgICAgICAgICAgICAgIDogc2V0dGluZ3MuaHR0cENsaWVudCA/PyBuZXcgRmV0Y2hIVFRQQ2xpZW50KCksXG4gICAgICAgICAgICBvYXV0aFNldHRpbmdzOiBzZXR0aW5ncy5vYXV0aFNldHRpbmdzLFxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgICAgdGhpcy5fcHVibGlzaGVyID0gcHVibGlzaGVyO1xuICAgICAgICB0aGlzLnJlYWR5ID0gdGhpcy5yZWdpc3RlcihwbHVnaW4pLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbiAgICAgICAgdGhpcy5lbWl0KCdpbml0aWFsaXplJywgc2V0dGluZ3MpO1xuICAgICAgICBiaW5kQWxsKHRoaXMpO1xuICAgIH1cbiAgICBnZXQgVkVSU0lPTigpIHtcbiAgICAgICAgcmV0dXJuIHZlcnNpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gc3RvcCBjb2xsZWN0aW5nIG5ldyBldmVudHMgYW5kIGZsdXNoIGFsbCBleGlzdGluZyBldmVudHMuXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyB3YWl0cyBmb3IgYW55IGV2ZW50IG1ldGhvZC1zcGVjaWZpYyBjYWxsYmFja3MgdG8gYmUgdHJpZ2dlcmVkLFxuICAgICAqIGFuZCBhbnkgb2YgdGhlaXIgc3Vic2VxdWVudCBwcm9taXNlcyB0byBiZSByZXNvbHZlZC9yZWplY3RlZC5cbiAgICAgKi9cbiAgICBjbG9zZUFuZEZsdXNoKHsgdGltZW91dCA9IHRoaXMuX2Nsb3NlQW5kRmx1c2hEZWZhdWx0VGltZW91dCwgfSA9IHt9KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZsdXNoKHsgdGltZW91dCwgY2xvc2U6IHRydWUgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgdGhpcyBtZXRob2QgdG8gZmx1c2ggYWxsIGV4aXN0aW5nIGV2ZW50cy4uXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyB3YWl0cyBmb3IgYW55IGV2ZW50IG1ldGhvZC1zcGVjaWZpYyBjYWxsYmFja3MgdG8gYmUgdHJpZ2dlcmVkLFxuICAgICAqIGFuZCBhbnkgb2YgdGhlaXIgc3Vic2VxdWVudCBwcm9taXNlcyB0byBiZSByZXNvbHZlZC9yZWplY3RlZC5cbiAgICAgKi9cbiAgICBhc3luYyBmbHVzaCh7IHRpbWVvdXQsIGNsb3NlID0gZmFsc2UsIH0gPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5faXNGbHVzaGluZykge1xuICAgICAgICAgICAgLy8gaWYgd2UncmUgYWxyZWFkeSBmbHVzaGluZywgdGhlbiB3ZSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ092ZXJsYXBwaW5nIGZsdXNoIGNhbGxzIGRldGVjdGVkLiBQbGVhc2Ugd2FpdCBmb3IgdGhlIHByZXZpb3VzIGZsdXNoIHRvIGZpbmlzaCBiZWZvcmUgY2FsbGluZyAuZmx1c2ggYWdhaW4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2lzRmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjbG9zZSkge1xuICAgICAgICAgICAgdGhpcy5faXNDbG9zZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3B1Ymxpc2hlci5mbHVzaCh0aGlzLl9wZW5kaW5nRXZlbnRzKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX3BlbmRpbmdFdmVudHMpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uY2UoJ2RyYWluZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9pc0ZsdXNoaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGltZW91dCA/IHBUaW1lb3V0KHByb21pc2UsIHRpbWVvdXQpLmNhdGNoKCgpID0+IHVuZGVmaW5lZCkgOiBwcm9taXNlO1xuICAgIH1cbiAgICBfZGlzcGF0Y2goc2VnbWVudEV2ZW50LCBjYWxsYmFjaykge1xuICAgICAgICBpZiAodGhpcy5faXNDbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdCgnY2FsbF9hZnRlcl9jbG9zZScsIHNlZ21lbnRFdmVudCk7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3BlbmRpbmdFdmVudHMrKztcbiAgICAgICAgZGlzcGF0Y2hBbmRFbWl0KHNlZ21lbnRFdmVudCwgdGhpcy5fcXVldWUsIHRoaXMsIGNhbGxiYWNrKVxuICAgICAgICAgICAgLmNhdGNoKChjdHgpID0+IGN0eClcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3BlbmRpbmdFdmVudHMtLTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fcGVuZGluZ0V2ZW50cykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZHJhaW5lZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIHVuYXNzb2NpYXRlZCB1c2VyIGlkZW50aXRpZXMuXG4gICAgICogQGxpbmsgaHR0cHM6Ly9zZWdtZW50LmNvbS9kb2NzL2Nvbm5lY3Rpb25zL3NvdXJjZXMvY2F0YWxvZy9saWJyYXJpZXMvc2VydmVyL25vZGUvI2FsaWFzXG4gICAgICovXG4gICAgYWxpYXMoeyB1c2VySWQsIHByZXZpb3VzSWQsIGNvbnRleHQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5hbGlhcyh1c2VySWQsIHByZXZpb3VzSWQsIHtcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBpbnRlZ3JhdGlvbnMsXG4gICAgICAgICAgICB0aW1lc3RhbXAsXG4gICAgICAgICAgICBtZXNzYWdlSWQsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzb2NpYXRlcyBhbiBpZGVudGlmaWVkIHVzZXIgd2l0aCBhIGNvbGxlY3RpdmUuXG4gICAgICogIEBsaW5rIGh0dHBzOi8vc2VnbWVudC5jb20vZG9jcy9jb25uZWN0aW9ucy9zb3VyY2VzL2NhdGFsb2cvbGlicmFyaWVzL3NlcnZlci9ub2RlLyNncm91cFxuICAgICAqL1xuICAgIGdyb3VwKHsgdGltZXN0YW1wLCBncm91cElkLCB1c2VySWQsIGFub255bW91c0lkLCB0cmFpdHMgPSB7fSwgY29udGV4dCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQsIH0sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IHNlZ21lbnRFdmVudCA9IHRoaXMuX2V2ZW50RmFjdG9yeS5ncm91cChncm91cElkLCB0cmFpdHMsIHtcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBhbm9ueW1vdXNJZCxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNsdWRlcyBhIHVuaXF1ZSB1c2VySWQgYW5kIChtYXliZSBhbm9ueW1vdXNJZCkgYW5kIGFueSBvcHRpb25hbCB0cmFpdHMgeW91IGtub3cgYWJvdXQgdGhlbS5cbiAgICAgKiBAbGluayBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvbm9kZS8jaWRlbnRpZnlcbiAgICAgKi9cbiAgICBpZGVudGlmeSh7IHVzZXJJZCwgYW5vbnltb3VzSWQsIHRyYWl0cyA9IHt9LCBjb250ZXh0LCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkLCB9LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBzZWdtZW50RXZlbnQgPSB0aGlzLl9ldmVudEZhY3RvcnkuaWRlbnRpZnkodXNlcklkLCB0cmFpdHMsIHtcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICBhbm9ueW1vdXNJZCxcbiAgICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgcGFnZSBtZXRob2QgbGV0cyB5b3UgcmVjb3JkIHBhZ2Ugdmlld3Mgb24geW91ciB3ZWJzaXRlLCBhbG9uZyB3aXRoIG9wdGlvbmFsIGV4dHJhIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwYWdlIGJlaW5nIHZpZXdlZC5cbiAgICAgKiBAbGluayBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvbm9kZS8jcGFnZVxuICAgICAqL1xuICAgIHBhZ2UoeyB1c2VySWQsIGFub255bW91c0lkLCBjYXRlZ29yeSwgbmFtZSwgcHJvcGVydGllcywgY29udGV4dCwgdGltZXN0YW1wLCBpbnRlZ3JhdGlvbnMsIG1lc3NhZ2VJZCwgfSwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgc2VnbWVudEV2ZW50ID0gdGhpcy5fZXZlbnRGYWN0b3J5LnBhZ2UoY2F0ZWdvcnkgPz8gbnVsbCwgbmFtZSA/PyBudWxsLCBwcm9wZXJ0aWVzLCB7IGNvbnRleHQsIGFub255bW91c0lkLCB1c2VySWQsIHRpbWVzdGFtcCwgaW50ZWdyYXRpb25zLCBtZXNzYWdlSWQgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmRzIHNjcmVlbiB2aWV3cyBvbiB5b3VyIGFwcCwgYWxvbmcgd2l0aCBvcHRpb25hbCBleHRyYSBpbmZvcm1hdGlvblxuICAgICAqIGFib3V0IHRoZSBzY3JlZW4gdmlld2VkIGJ5IHRoZSB1c2VyLlxuICAgICAqXG4gICAgICogVE9ETzogVGhpcyBpcyBub3QgZG9jdW1lbnRlZCBvbiB0aGUgc2VnbWVudCBkb2NzIEFUTSAoZm9yIG5vZGUpLlxuICAgICAqL1xuICAgIHNjcmVlbih7IHVzZXJJZCwgYW5vbnltb3VzSWQsIGNhdGVnb3J5LCBuYW1lLCBwcm9wZXJ0aWVzLCBjb250ZXh0LCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkLCB9LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBzZWdtZW50RXZlbnQgPSB0aGlzLl9ldmVudEZhY3Rvcnkuc2NyZWVuKGNhdGVnb3J5ID8/IG51bGwsIG5hbWUgPz8gbnVsbCwgcHJvcGVydGllcywgeyBjb250ZXh0LCBhbm9ueW1vdXNJZCwgdXNlcklkLCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkIH0pO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaChzZWdtZW50RXZlbnQsIGNhbGxiYWNrKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVjb3JkcyBhY3Rpb25zIHlvdXIgdXNlcnMgcGVyZm9ybS5cbiAgICAgKiBAbGluayBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvbm9kZS8jdHJhY2tcbiAgICAgKi9cbiAgICB0cmFjayh7IHVzZXJJZCwgYW5vbnltb3VzSWQsIGV2ZW50LCBwcm9wZXJ0aWVzLCBjb250ZXh0LCB0aW1lc3RhbXAsIGludGVncmF0aW9ucywgbWVzc2FnZUlkLCB9LCBjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBzZWdtZW50RXZlbnQgPSB0aGlzLl9ldmVudEZhY3RvcnkudHJhY2soZXZlbnQsIHByb3BlcnRpZXMsIHtcbiAgICAgICAgICAgIGNvbnRleHQsXG4gICAgICAgICAgICB1c2VySWQsXG4gICAgICAgICAgICBhbm9ueW1vdXNJZCxcbiAgICAgICAgICAgIHRpbWVzdGFtcCxcbiAgICAgICAgICAgIGludGVncmF0aW9ucyxcbiAgICAgICAgICAgIG1lc3NhZ2VJZCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2Rpc3BhdGNoKHNlZ21lbnRFdmVudCwgY2FsbGJhY2spO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgb25lIG9yIG1vcmUgcGx1Z2lucyB0byBhdWdtZW50IEFuYWx5dGljcyBmdW5jdGlvbmFsaXR5LlxuICAgICAqIEBwYXJhbSBwbHVnaW5zXG4gICAgICovXG4gICAgcmVnaXN0ZXIoLi4ucGx1Z2lucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUuY3JpdGljYWxUYXNrcy5ydW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3R4ID0gQ29udGV4dC5zeXN0ZW0oKTtcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBwbHVnaW5zLm1hcCgoeHQpID0+IHRoaXMuX3F1ZXVlLnJlZ2lzdGVyKGN0eCwgeHQsIHRoaXMpKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlZ2lzdHJhdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy5lbWl0KCdyZWdpc3RlcicsIHBsdWdpbnMubWFwKChlbCkgPT4gZWwubmFtZSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVyZWdpc3RlcnMgb25lIG9yIG1vcmUgcGx1Z2lucyBiYXNlZCBvbiB0aGVpciBuYW1lcy5cbiAgICAgKiBAcGFyYW0gcGx1Z2luTmFtZXMgLSBUaGUgbmFtZXMgb2Ygb25lIG9yIG1vcmUgcGx1Z2lucyB0byBkZXJlZ2lzdGVyLlxuICAgICAqL1xuICAgIGFzeW5jIGRlcmVnaXN0ZXIoLi4ucGx1Z2luTmFtZXMpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gQ29udGV4dC5zeXN0ZW0oKTtcbiAgICAgICAgY29uc3QgZGVyZWdpc3RyYXRpb25zID0gcGx1Z2luTmFtZXMubWFwKChwbCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGx1Z2luID0gdGhpcy5fcXVldWUucGx1Z2lucy5maW5kKChwKSA9PiBwLm5hbWUgPT09IHBsKTtcbiAgICAgICAgICAgIGlmIChwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcXVldWUuZGVyZWdpc3RlcihjdHgsIHBsdWdpbiwgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHgubG9nKCd3YXJuJywgYHBsdWdpbiAke3BsfSBub3QgZm91bmRgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGRlcmVnaXN0cmF0aW9ucyk7XG4gICAgICAgIHRoaXMuZW1pdCgnZGVyZWdpc3RlcicsIHBsdWdpbk5hbWVzKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmFseXRpY3Mtbm9kZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/context.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Context: () => (/* binding */ Context)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/context/index.js\");\n// create a derived class since we may want to add node specific things to Context later\n\n// While this is not a type, it is a definition\nclass Context extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.CoreContext {\n    static system() {\n        return new this({ type: 'track', event: 'system' });\n    }\n}\n//# sourceMappingURL=context.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNzRDtBQUN0RDtBQUNPLHNCQUFzQixnRUFBVztBQUN4QztBQUNBLDBCQUEwQixnQ0FBZ0M7QUFDMUQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2NvbnRleHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gY3JlYXRlIGEgZGVyaXZlZCBjbGFzcyBzaW5jZSB3ZSBtYXkgd2FudCB0byBhZGQgbm9kZSBzcGVjaWZpYyB0aGluZ3MgdG8gQ29udGV4dCBsYXRlclxuaW1wb3J0IHsgQ29yZUNvbnRleHQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG4vLyBXaGlsZSB0aGlzIGlzIG5vdCBhIHR5cGUsIGl0IGlzIGEgZGVmaW5pdGlvblxuZXhwb3J0IGNsYXNzIENvbnRleHQgZXh0ZW5kcyBDb3JlQ29udGV4dCB7XG4gICAgc3RhdGljIHN5c3RlbSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdzeXN0ZW0nIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbnRleHQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dispatchAndEmit: () => (/* binding */ dispatchAndEmit)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/analytics/dispatch.js\");\n/* harmony import */ var _context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n\n\nconst normalizeDispatchCb = (cb) => (ctx) => {\n    const failedDelivery = ctx.failedDelivery();\n    return failedDelivery ? cb(failedDelivery.reason, ctx) : cb(undefined, ctx);\n};\n/* Dispatch function, but swallow promise rejections and use event emitter instead */\nconst dispatchAndEmit = async (event, queue, emitter, callback) => {\n    try {\n        const context = new _context__WEBPACK_IMPORTED_MODULE_0__.Context(event);\n        const ctx = await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.dispatch)(context, queue, emitter, {\n            ...(callback ? { callback: normalizeDispatchCb(callback) } : {}),\n        });\n        const failedDelivery = ctx.failedDelivery();\n        if (failedDelivery) {\n            emitter.emit('error', {\n                code: 'delivery_failure',\n                reason: failedDelivery.reason,\n                ctx: ctx,\n            });\n        }\n        else {\n            emitter.emit(event.type, ctx);\n        }\n    }\n    catch (err) {\n        emitter.emit('error', {\n            code: 'unknown',\n            reason: err,\n        });\n    }\n};\n//# sourceMappingURL=dispatch-emit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2Rpc3BhdGNoLWVtaXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ2Y7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSw0QkFBNEIsNkNBQU87QUFDbkMsMEJBQTBCLGlFQUFRO0FBQ2xDLDZCQUE2QiwwQ0FBMEMsSUFBSTtBQUMzRSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZGlzcGF0Y2gtZW1pdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkaXNwYXRjaCB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmltcG9ydCB7IENvbnRleHQgfSBmcm9tICcuL2NvbnRleHQnO1xuY29uc3Qgbm9ybWFsaXplRGlzcGF0Y2hDYiA9IChjYikgPT4gKGN0eCkgPT4ge1xuICAgIGNvbnN0IGZhaWxlZERlbGl2ZXJ5ID0gY3R4LmZhaWxlZERlbGl2ZXJ5KCk7XG4gICAgcmV0dXJuIGZhaWxlZERlbGl2ZXJ5ID8gY2IoZmFpbGVkRGVsaXZlcnkucmVhc29uLCBjdHgpIDogY2IodW5kZWZpbmVkLCBjdHgpO1xufTtcbi8qIERpc3BhdGNoIGZ1bmN0aW9uLCBidXQgc3dhbGxvdyBwcm9taXNlIHJlamVjdGlvbnMgYW5kIHVzZSBldmVudCBlbWl0dGVyIGluc3RlYWQgKi9cbmV4cG9ydCBjb25zdCBkaXNwYXRjaEFuZEVtaXQgPSBhc3luYyAoZXZlbnQsIHF1ZXVlLCBlbWl0dGVyLCBjYWxsYmFjaykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSBuZXcgQ29udGV4dChldmVudCk7XG4gICAgICAgIGNvbnN0IGN0eCA9IGF3YWl0IGRpc3BhdGNoKGNvbnRleHQsIHF1ZXVlLCBlbWl0dGVyLCB7XG4gICAgICAgICAgICAuLi4oY2FsbGJhY2sgPyB7IGNhbGxiYWNrOiBub3JtYWxpemVEaXNwYXRjaENiKGNhbGxiYWNrKSB9IDoge30pLFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgZmFpbGVkRGVsaXZlcnkgPSBjdHguZmFpbGVkRGVsaXZlcnkoKTtcbiAgICAgICAgaWYgKGZhaWxlZERlbGl2ZXJ5KSB7XG4gICAgICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgICAgIGNvZGU6ICdkZWxpdmVyeV9mYWlsdXJlJyxcbiAgICAgICAgICAgICAgICByZWFzb246IGZhaWxlZERlbGl2ZXJ5LnJlYXNvbixcbiAgICAgICAgICAgICAgICBjdHg6IGN0eCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW1pdHRlci5lbWl0KGV2ZW50LnR5cGUsIGN0eCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBlbWl0dGVyLmVtaXQoJ2Vycm9yJywge1xuICAgICAgICAgICAgY29kZTogJ3Vua25vd24nLFxuICAgICAgICAgICAgcmVhc29uOiBlcnIsXG4gICAgICAgIH0pO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kaXNwYXRjaC1lbWl0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/dispatch-emit.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/emitter.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEmitter: () => (/* binding */ NodeEmitter)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\nclass NodeEmitter extends _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_0__.Emitter {\n}\n//# sourceMappingURL=emitter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2VtaXR0ZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDcEQsMEJBQTBCLHFFQUFPO0FBQ3hDO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZW1pdHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuZXhwb3J0IGNsYXNzIE5vZGVFbWl0dGVyIGV4dGVuZHMgRW1pdHRlciB7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1lbWl0dGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/emitter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventFactory: () => (/* binding */ NodeEventFactory)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/events/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/assertions.js\");\n/* harmony import */ var _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/get-message-id */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\");\n\n\nclass NodeEventFactory extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventFactory {\n    constructor() {\n        super({\n            createMessageId: _lib_get_message_id__WEBPACK_IMPORTED_MODULE_0__.createMessageId,\n            onFinishedEvent: (event) => {\n                (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.assertUserIdentity)(event);\n            },\n        });\n    }\n}\n//# sourceMappingURL=event-factory.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUN2QjtBQUNqRCwrQkFBK0IscUVBQWdCO0FBQ3REO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQSxnQkFBZ0IsMkVBQWtCO0FBQ2xDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LWZhY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXNzZXJ0VXNlcklkZW50aXR5LCBDb3JlRXZlbnRGYWN0b3J5IH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgY3JlYXRlTWVzc2FnZUlkIH0gZnJvbSAnLi4vbGliL2dldC1tZXNzYWdlLWlkJztcbmV4cG9ydCBjbGFzcyBOb2RlRXZlbnRGYWN0b3J5IGV4dGVuZHMgQ29yZUV2ZW50RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIGNyZWF0ZU1lc3NhZ2VJZCxcbiAgICAgICAgICAgIG9uRmluaXNoZWRFdmVudDogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgYXNzZXJ0VXNlcklkZW50aXR5KGV2ZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV2ZW50LWZhY3RvcnkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-factory.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NodeEventQueue: () => (/* binding */ NodeEventQueue)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/index.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/queue/event-queue.js\");\n\nclass NodePriorityQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.PriorityQueue {\n    constructor() {\n        super(1, []);\n    }\n    // do not use an internal \"seen\" map\n    getAttempts(ctx) {\n        return ctx.attempts ?? 0;\n    }\n    updateAttempts(ctx) {\n        ctx.attempts = this.getAttempts(ctx) + 1;\n        return this.getAttempts(ctx);\n    }\n}\nclass NodeEventQueue extends _segment_analytics_core__WEBPACK_IMPORTED_MODULE_1__.CoreEventQueue {\n    constructor() {\n        super(new NodePriorityQueue());\n    }\n}\n//# sourceMappingURL=event-queue.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL2V2ZW50LXF1ZXVlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF3RTtBQUN4RSxnQ0FBZ0Msa0VBQWE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sNkJBQTZCLG1FQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9hcHAvZXZlbnQtcXVldWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29yZUV2ZW50UXVldWUsIFByaW9yaXR5UXVldWUgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5jbGFzcyBOb2RlUHJpb3JpdHlRdWV1ZSBleHRlbmRzIFByaW9yaXR5UXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigxLCBbXSk7XG4gICAgfVxuICAgIC8vIGRvIG5vdCB1c2UgYW4gaW50ZXJuYWwgXCJzZWVuXCIgbWFwXG4gICAgZ2V0QXR0ZW1wdHMoY3R4KSB7XG4gICAgICAgIHJldHVybiBjdHguYXR0ZW1wdHMgPz8gMDtcbiAgICB9XG4gICAgdXBkYXRlQXR0ZW1wdHMoY3R4KSB7XG4gICAgICAgIGN0eC5hdHRlbXB0cyA9IHRoaXMuZ2V0QXR0ZW1wdHMoY3R4KSArIDE7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dGVtcHRzKGN0eCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE5vZGVFdmVudFF1ZXVlIGV4dGVuZHMgQ29yZUV2ZW50UXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihuZXcgTm9kZVByaW9yaXR5UXVldWUoKSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZXZlbnQtcXVldWUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/event-queue.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/app/settings.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validateSettings: () => (/* binding */ validateSettings)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/validation/errors.js\");\n\nconst validateSettings = (settings) => {\n    if (!settings.writeKey) {\n        throw new _segment_analytics_core__WEBPACK_IMPORTED_MODULE_0__.ValidationError('writeKey', 'writeKey is missing.');\n    }\n};\n//# sourceMappingURL=settings.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTBEO0FBQ25EO0FBQ1A7QUFDQSxrQkFBa0Isb0VBQWU7QUFDakM7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vYXBwL3NldHRpbmdzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZhbGlkYXRpb25FcnJvciB9IGZyb20gJ0BzZWdtZW50L2FuYWx5dGljcy1jb3JlJztcbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVNldHRpbmdzID0gKHNldHRpbmdzKSA9PiB7XG4gICAgaWYgKCFzZXR0aW5ncy53cml0ZUtleSkge1xuICAgICAgICB0aHJvdyBuZXcgVmFsaWRhdGlvbkVycm9yKCd3cml0ZUtleScsICd3cml0ZUtleSBpcyBtaXNzaW5nLicpO1xuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXR0aW5ncy5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/settings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/generated/version.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   version: () => (/* binding */ version)\n/* harmony export */ });\n// This file is generated.\nconst version = '2.3.0';\n//# sourceMappingURL=version.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vZ2VuZXJhdGVkL3ZlcnNpb24uanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2dlbmVyYXRlZC92ZXJzaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoaXMgZmlsZSBpcyBnZW5lcmF0ZWQuXG5leHBvcnQgY29uc3QgdmVyc2lvbiA9ICcyLjMuMCc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD12ZXJzaW9uLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.common.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _app_context__WEBPACK_IMPORTED_MODULE_1__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _lib_http_client__WEBPACK_IMPORTED_MODULE_2__.FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _app_analytics_node__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./app/analytics-node */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/analytics-node.js\");\n/* harmony import */ var _app_context__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./app/context */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/app/context.js\");\n/* harmony import */ var _lib_http_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/http-client */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\");\n\n\n\n//# sourceMappingURL=index.common.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguY29tbW9uLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFpRDtBQUNUO0FBQ2E7QUFDckQiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9pbmRleC5jb21tb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgQW5hbHl0aWNzIH0gZnJvbSAnLi9hcHAvYW5hbHl0aWNzLW5vZGUnO1xuZXhwb3J0IHsgQ29udGV4dCB9IGZyb20gJy4vYXBwL2NvbnRleHQnO1xuZXhwb3J0IHsgRmV0Y2hIVFRQQ2xpZW50LCB9IGZyb20gJy4vbGliL2h0dHAtY2xpZW50Jztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmNvbW1vbi5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.js":
/*!****************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Analytics: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics),\n/* harmony export */   Context: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.Context),\n/* harmony export */   FetchHTTPClient: () => (/* reexport safe */ _index_common__WEBPACK_IMPORTED_MODULE_0__.FetchHTTPClient),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _index_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index.common */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.common.js\");\n\n// export Analytics as both a named export and a default export (for backwards-compat. reasons)\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_index_common__WEBPACK_IMPORTED_MODULE_0__.Analytics);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBK0I7QUFDL0I7QUFDMkM7QUFDM0MsaUVBQWUsb0RBQVMsRUFBQztBQUN6QiIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vaW5kZXguY29tbW9uJztcbi8vIGV4cG9ydCBBbmFseXRpY3MgYXMgYm90aCBhIG5hbWVkIGV4cG9ydCBhbmQgYSBkZWZhdWx0IGV4cG9ydCAoZm9yIGJhY2t3YXJkcy1jb21wYXQuIHJlYXNvbnMpXG5pbXBvcnQgeyBBbmFseXRpY3MgfSBmcm9tICcuL2luZGV4LmNvbW1vbic7XG5leHBvcnQgZGVmYXVsdCBBbmFseXRpY3M7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/abort.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortController: () => (/* binding */ AbortController),\n/* harmony export */   AbortSignal: () => (/* binding */ AbortSignal),\n/* harmony export */   abortSignalAfterTimeout: () => (/* binding */ abortSignalAfterTimeout)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n/* harmony import */ var _env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./env */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n/**\n * use non-native event emitter for the benefit of non-node runtimes like CF workers.\n */\n\n\n/**\n * adapted from: https://www.npmjs.com/package/node-abort-controller\n */\nclass AbortSignal {\n    onabort = null;\n    aborted = false;\n    eventEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    toString() {\n        return '[object AbortSignal]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortSignal';\n    }\n    removeEventListener(...args) {\n        this.eventEmitter.off(...args);\n    }\n    addEventListener(...args) {\n        this.eventEmitter.on(...args);\n    }\n    dispatchEvent(type) {\n        const event = { type, target: this };\n        const handlerName = `on${type}`;\n        if (typeof this[handlerName] === 'function') {\n            ;\n            this[handlerName](event);\n        }\n        this.eventEmitter.emit(type, event);\n    }\n}\n/**\n * This polyfill is only neccessary to support versions of node < 14.17.\n * Can be removed once node 14 support is dropped.\n */\nclass AbortController {\n    signal = new AbortSignal();\n    abort() {\n        if (this.signal.aborted)\n            return;\n        this.signal.aborted = true;\n        this.signal.dispatchEvent('abort');\n    }\n    toString() {\n        return '[object AbortController]';\n    }\n    get [Symbol.toStringTag]() {\n        return 'AbortController';\n    }\n}\n/**\n * @param timeoutMs - Set a request timeout, after which the request is cancelled.\n */\nconst abortSignalAfterTimeout = (timeoutMs) => {\n    if ((0,_env__WEBPACK_IMPORTED_MODULE_0__.detectRuntime)() === 'cloudflare-worker') {\n        return []; // TODO: this is broken in cloudflare workers, otherwise results in \"A hanging Promise was canceled...\" error.\n    }\n    const ac = new (globalThis.AbortController || AbortController)();\n    const timeoutId = setTimeout(() => {\n        ac.abort();\n    }, timeoutMs);\n    // Allow Node.js processes to exit early if only the timeout is running\n    timeoutId?.unref?.();\n    return [ac.signal, timeoutId];\n};\n//# sourceMappingURL=abort.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQzJEO0FBQ3JCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLHVCQUF1QixxRUFBTztBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QixpQ0FBaUMsS0FBSztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxRQUFRLG1EQUFhO0FBQ3JCLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Fib3J0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogdXNlIG5vbi1uYXRpdmUgZXZlbnQgZW1pdHRlciBmb3IgdGhlIGJlbmVmaXQgb2Ygbm9uLW5vZGUgcnVudGltZXMgbGlrZSBDRiB3b3JrZXJzLlxuICovXG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuaW1wb3J0IHsgZGV0ZWN0UnVudGltZSB9IGZyb20gJy4vZW52Jztcbi8qKlxuICogYWRhcHRlZCBmcm9tOiBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9ub2RlLWFib3J0LWNvbnRyb2xsZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEFib3J0U2lnbmFsIHtcbiAgICBvbmFib3J0ID0gbnVsbDtcbiAgICBhYm9ydGVkID0gZmFsc2U7XG4gICAgZXZlbnRFbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICdbb2JqZWN0IEFib3J0U2lnbmFsXSc7XG4gICAgfVxuICAgIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpIHtcbiAgICAgICAgcmV0dXJuICdBYm9ydFNpZ25hbCc7XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoLi4uYXJncykge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vZmYoLi4uYXJncyk7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIoLi4uYXJncykge1xuICAgICAgICB0aGlzLmV2ZW50RW1pdHRlci5vbiguLi5hcmdzKTtcbiAgICB9XG4gICAgZGlzcGF0Y2hFdmVudCh0eXBlKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0geyB0eXBlLCB0YXJnZXQ6IHRoaXMgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlck5hbWUgPSBgb24ke3R5cGV9YDtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzW2hhbmRsZXJOYW1lXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgO1xuICAgICAgICAgICAgdGhpc1toYW5kbGVyTmFtZV0oZXZlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRFbWl0dGVyLmVtaXQodHlwZSwgZXZlbnQpO1xuICAgIH1cbn1cbi8qKlxuICogVGhpcyBwb2x5ZmlsbCBpcyBvbmx5IG5lY2Nlc3NhcnkgdG8gc3VwcG9ydCB2ZXJzaW9ucyBvZiBub2RlIDwgMTQuMTcuXG4gKiBDYW4gYmUgcmVtb3ZlZCBvbmNlIG5vZGUgMTQgc3VwcG9ydCBpcyBkcm9wcGVkLlxuICovXG5leHBvcnQgY2xhc3MgQWJvcnRDb250cm9sbGVyIHtcbiAgICBzaWduYWwgPSBuZXcgQWJvcnRTaWduYWwoKTtcbiAgICBhYm9ydCgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2lnbmFsLmFib3J0ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuc2lnbmFsLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNpZ25hbC5kaXNwYXRjaEV2ZW50KCdhYm9ydCcpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuICdbb2JqZWN0IEFib3J0Q29udHJvbGxlcl0nO1xuICAgIH1cbiAgICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKSB7XG4gICAgICAgIHJldHVybiAnQWJvcnRDb250cm9sbGVyJztcbiAgICB9XG59XG4vKipcbiAqIEBwYXJhbSB0aW1lb3V0TXMgLSBTZXQgYSByZXF1ZXN0IHRpbWVvdXQsIGFmdGVyIHdoaWNoIHRoZSByZXF1ZXN0IGlzIGNhbmNlbGxlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGFib3J0U2lnbmFsQWZ0ZXJUaW1lb3V0ID0gKHRpbWVvdXRNcykgPT4ge1xuICAgIGlmIChkZXRlY3RSdW50aW1lKCkgPT09ICdjbG91ZGZsYXJlLXdvcmtlcicpIHtcbiAgICAgICAgcmV0dXJuIFtdOyAvLyBUT0RPOiB0aGlzIGlzIGJyb2tlbiBpbiBjbG91ZGZsYXJlIHdvcmtlcnMsIG90aGVyd2lzZSByZXN1bHRzIGluIFwiQSBoYW5naW5nIFByb21pc2Ugd2FzIGNhbmNlbGVkLi4uXCIgZXJyb3IuXG4gICAgfVxuICAgIGNvbnN0IGFjID0gbmV3IChnbG9iYWxUaGlzLkFib3J0Q29udHJvbGxlciB8fCBBYm9ydENvbnRyb2xsZXIpKCk7XG4gICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGFjLmFib3J0KCk7XG4gICAgfSwgdGltZW91dE1zKTtcbiAgICAvLyBBbGxvdyBOb2RlLmpzIHByb2Nlc3NlcyB0byBleGl0IGVhcmx5IGlmIG9ubHkgdGhlIHRpbWVvdXQgaXMgcnVubmluZ1xuICAgIHRpbWVvdXRJZD8udW5yZWY/LigpO1xuICAgIHJldHVybiBbYWMuc2lnbmFsLCB0aW1lb3V0SWRdO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFib3J0LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   tryCreateFormattedUrl: () => (/* binding */ tryCreateFormattedUrl)\n/* harmony export */ });\nconst stripTrailingSlash = (str) => str.replace(/\\/$/, '');\n/**\n *\n * @param host e.g. \"http://foo.com\"\n * @param path e.g. \"/bar\"\n * @returns \"e.g.\" \"http://foo.com/bar\"\n */\nconst tryCreateFormattedUrl = (host, path) => {\n    return stripTrailingSlash(new URL(path || '', host).href);\n};\n//# sourceMappingURL=create-url.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2NyZWF0ZS11cmwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvY3JlYXRlLXVybC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzdHJpcFRyYWlsaW5nU2xhc2ggPSAoc3RyKSA9PiBzdHIucmVwbGFjZSgvXFwvJC8sICcnKTtcbi8qKlxuICpcbiAqIEBwYXJhbSBob3N0IGUuZy4gXCJodHRwOi8vZm9vLmNvbVwiXG4gKiBAcGFyYW0gcGF0aCBlLmcuIFwiL2JhclwiXG4gKiBAcmV0dXJucyBcImUuZy5cIiBcImh0dHA6Ly9mb28uY29tL2JhclwiXG4gKi9cbmV4cG9ydCBjb25zdCB0cnlDcmVhdGVGb3JtYXR0ZWRVcmwgPSAoaG9zdCwgcGF0aCkgPT4ge1xuICAgIHJldHVybiBzdHJpcFRyYWlsaW5nU2xhc2gobmV3IFVSTChwYXRoIHx8ICcnLCBob3N0KS5ocmVmKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jcmVhdGUtdXJsLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js":
/*!******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/env.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectRuntime: () => (/* binding */ detectRuntime)\n/* harmony export */ });\nconst detectRuntime = () => {\n    if (typeof process === 'object' &&\n        process &&\n        typeof process.env === 'object' &&\n        process.env &&\n        typeof process.version === 'string') {\n        return 'node';\n    }\n    if (typeof window === 'object') {\n        return 'browser';\n    }\n    // @ts-ignore\n    if (typeof WebSocketPair !== 'undefined') {\n        return 'cloudflare-worker';\n    }\n    // @ts-ignore\n    if (typeof EdgeRuntime === 'string') {\n        return 'vercel-edge';\n    }\n    if (\n    // @ts-ignore\n    typeof WorkerGlobalScope !== 'undefined' &&\n        // @ts-ignore\n        typeof importScripts === 'function') {\n        return 'web-worker';\n    }\n    return 'unknown';\n};\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL2xpYi9lbnYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGRldGVjdFJ1bnRpbWUgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JyAmJlxuICAgICAgICBwcm9jZXNzICYmXG4gICAgICAgIHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgcHJvY2Vzcy5lbnYgJiZcbiAgICAgICAgdHlwZW9mIHByb2Nlc3MudmVyc2lvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuICdub2RlJztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiAnYnJvd3Nlcic7XG4gICAgfVxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAodHlwZW9mIFdlYlNvY2tldFBhaXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiAnY2xvdWRmbGFyZS13b3JrZXInO1xuICAgIH1cbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuICd2ZXJjZWwtZWRnZSc7XG4gICAgfVxuICAgIGlmIChcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIHR5cGVvZiBpbXBvcnRTY3JpcHRzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiAnd2ViLXdvcmtlcic7XG4gICAgfVxuICAgIHJldHVybiAndW5rbm93bic7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js":
/*!********************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js ***!
  \********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetch: () => (/* binding */ fetch)\n/* harmony export */ });\nconst fetch = async (...args) => {\n    if (globalThis.fetch) {\n        return globalThis.fetch(...args);\n    }\n    // This guard causes is important, as it causes dead-code elimination to be enabled inside this block.\n    // @ts-ignore\n    else if (typeof EdgeRuntime !== 'string') {\n        return (await __webpack_require__.e(/*! import() */ \"vendor-chunks/@segment\").then(__webpack_require__.bind(__webpack_require__, /*! node-fetch */ \"(rsc)/./node_modules/@segment/analytics-node/node_modules/node-fetch/lib/index.mjs\"))).default(...args);\n    }\n    else {\n        throw new Error('Invariant: an edge runtime that does not support fetch should not exist');\n    }\n};\n//# sourceMappingURL=fetch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwyTkFBb0I7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2ZldGNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBmZXRjaCA9IGFzeW5jICguLi5hcmdzKSA9PiB7XG4gICAgaWYgKGdsb2JhbFRoaXMuZmV0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGdsb2JhbFRoaXMuZmV0Y2goLi4uYXJncyk7XG4gICAgfVxuICAgIC8vIFRoaXMgZ3VhcmQgY2F1c2VzIGlzIGltcG9ydGFudCwgYXMgaXQgY2F1c2VzIGRlYWQtY29kZSBlbGltaW5hdGlvbiB0byBiZSBlbmFibGVkIGluc2lkZSB0aGlzIGJsb2NrLlxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBlbHNlIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiAoYXdhaXQgaW1wb3J0KCdub2RlLWZldGNoJykpLmRlZmF1bHQoLi4uYXJncyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFyaWFudDogYW4gZWRnZSBydW50aW1lIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBmZXRjaCBzaG91bGQgbm90IGV4aXN0Jyk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWZldGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createMessageId: () => (/* binding */ createMessageId)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\n/**\n * get a unique messageId with a very low chance of collisions\n * using @lukeed/uuid/secure uses the node crypto module, which is the fastest\n * @example \"node-next-1668208232027-743be593-7789-4b74-8078-cbcc8894c586\"\n */\nconst createMessageId = () => {\n    return `node-next-${Date.now()}-${(0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)()}`;\n};\n//# sourceMappingURL=get-message-id.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLHdCQUF3QixXQUFXLEdBQUcsMkNBQUksR0FBRztBQUM3QztBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2dldC1tZXNzYWdlLWlkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHV1aWQgfSBmcm9tICcuL3V1aWQnO1xuLyoqXG4gKiBnZXQgYSB1bmlxdWUgbWVzc2FnZUlkIHdpdGggYSB2ZXJ5IGxvdyBjaGFuY2Ugb2YgY29sbGlzaW9uc1xuICogdXNpbmcgQGx1a2VlZC91dWlkL3NlY3VyZSB1c2VzIHRoZSBub2RlIGNyeXB0byBtb2R1bGUsIHdoaWNoIGlzIHRoZSBmYXN0ZXN0XG4gKiBAZXhhbXBsZSBcIm5vZGUtbmV4dC0xNjY4MjA4MjMyMDI3LTc0M2JlNTkzLTc3ODktNGI3NC04MDc4LWNiY2M4ODk0YzU4NlwiXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVNZXNzYWdlSWQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGBub2RlLW5leHQtJHtEYXRlLm5vdygpfS0ke3V1aWQoKX1gO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWdldC1tZXNzYWdlLWlkLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/get-message-id.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FetchHTTPClient: () => (/* binding */ FetchHTTPClient)\n/* harmony export */ });\n/* harmony import */ var _abort__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./abort */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/abort.js\");\n/* harmony import */ var _fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./fetch */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/fetch.js\");\n\n\n/**\n * Default HTTP client implementation using fetch\n */\nclass FetchHTTPClient {\n    _fetch;\n    constructor(fetchFn) {\n        this._fetch = fetchFn ?? _fetch__WEBPACK_IMPORTED_MODULE_1__.fetch;\n    }\n    async makeRequest(options) {\n        const [signal, timeoutId] = (0,_abort__WEBPACK_IMPORTED_MODULE_0__.abortSignalAfterTimeout)(options.httpRequestTimeout);\n        const requestInit = {\n            url: options.url,\n            method: options.method,\n            headers: options.headers,\n            body: options.body,\n            signal: signal,\n        };\n        return this._fetch(options.url, requestInit).finally(() => clearTimeout(timeoutId));\n    }\n}\n//# sourceMappingURL=http-client.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFrRDtBQUNGO0FBQ2hEO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGlDQUFpQyx5Q0FBWTtBQUM3QztBQUNBO0FBQ0Esb0NBQW9DLCtEQUF1QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL2h0dHAtY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGFib3J0U2lnbmFsQWZ0ZXJUaW1lb3V0IH0gZnJvbSAnLi9hYm9ydCc7XG5pbXBvcnQgeyBmZXRjaCBhcyBkZWZhdWx0RmV0Y2ggfSBmcm9tICcuL2ZldGNoJztcbi8qKlxuICogRGVmYXVsdCBIVFRQIGNsaWVudCBpbXBsZW1lbnRhdGlvbiB1c2luZyBmZXRjaFxuICovXG5leHBvcnQgY2xhc3MgRmV0Y2hIVFRQQ2xpZW50IHtcbiAgICBfZmV0Y2g7XG4gICAgY29uc3RydWN0b3IoZmV0Y2hGbikge1xuICAgICAgICB0aGlzLl9mZXRjaCA9IGZldGNoRm4gPz8gZGVmYXVsdEZldGNoO1xuICAgIH1cbiAgICBhc3luYyBtYWtlUmVxdWVzdChvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IFtzaWduYWwsIHRpbWVvdXRJZF0gPSBhYm9ydFNpZ25hbEFmdGVyVGltZW91dChvcHRpb25zLmh0dHBSZXF1ZXN0VGltZW91dCk7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbml0ID0ge1xuICAgICAgICAgICAgdXJsOiBvcHRpb25zLnVybCxcbiAgICAgICAgICAgIG1ldGhvZDogb3B0aW9ucy5tZXRob2QsXG4gICAgICAgICAgICBoZWFkZXJzOiBvcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBvcHRpb25zLmJvZHksXG4gICAgICAgICAgICBzaWduYWw6IHNpZ25hbCxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZldGNoKG9wdGlvbnMudXJsLCByZXF1ZXN0SW5pdCkuZmluYWxseSgoKSA9PiBjbGVhclRpbWVvdXQodGltZW91dElkKSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aHR0cC1jbGllbnQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/http-client.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TokenManager: () => (/* binding */ TokenManager)\n/* harmony export */ });\n/* harmony import */ var _uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/node/esm/jwt/sign.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/callback/index.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/emitter/emitter.js\");\n\n\n\n\nconst isAccessToken = (thing) => {\n    return Boolean(thing &&\n        typeof thing === 'object' &&\n        'access_token' in thing &&\n        'expires_in' in thing &&\n        typeof thing.access_token === 'string' &&\n        typeof thing.expires_in === 'number');\n};\nconst isValidCustomResponse = (response) => {\n    return typeof response.text === 'function';\n};\nfunction convertHeaders(headers) {\n    const lowercaseHeaders = {};\n    if (!headers)\n        return {};\n    if (isHeaders(headers)) {\n        for (const [name, value] of headers.entries()) {\n            lowercaseHeaders[name.toLowerCase()] = value;\n        }\n        return lowercaseHeaders;\n    }\n    for (const [name, value] of Object.entries(headers)) {\n        lowercaseHeaders[name.toLowerCase()] = value;\n    }\n    return lowercaseHeaders;\n}\nfunction isHeaders(thing) {\n    if (typeof thing === 'object' &&\n        thing !== null &&\n        'entries' in Object(thing) &&\n        typeof Object(thing).entries === 'function') {\n        return true;\n    }\n    return false;\n}\nclass TokenManager {\n    alg = 'RS256';\n    grantType = 'client_credentials';\n    clientAssertionType = 'urn:ietf:params:oauth:client-assertion-type:jwt-bearer';\n    clientId;\n    clientKey;\n    keyId;\n    scope;\n    authServer;\n    httpClient;\n    maxRetries;\n    clockSkewInSeconds = 0;\n    accessToken;\n    tokenEmitter = new _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_1__.Emitter();\n    retryCount;\n    pollerTimer;\n    constructor(props) {\n        this.keyId = props.keyId;\n        this.clientId = props.clientId;\n        this.clientKey = props.clientKey;\n        this.authServer = props.authServer ?? 'https://oauth2.segment.io';\n        this.scope = props.scope ?? 'tracking_api:write';\n        this.httpClient = props.httpClient;\n        this.maxRetries = props.maxRetries;\n        this.tokenEmitter.on('access_token', (event) => {\n            if ('token' in event) {\n                this.accessToken = event.token;\n            }\n        });\n        this.retryCount = 0;\n    }\n    stopPoller() {\n        clearTimeout(this.pollerTimer);\n    }\n    async pollerLoop() {\n        let timeUntilRefreshInMs = 25;\n        let response;\n        try {\n            response = await this.requestAccessToken();\n        }\n        catch (err) {\n            // Error without a status code - likely networking, retry\n            return this.handleTransientError({ error: err });\n        }\n        if (!isValidCustomResponse(response)) {\n            return this.handleInvalidCustomResponse();\n        }\n        const headers = convertHeaders(response.headers);\n        if (headers['date']) {\n            this.updateClockSkew(Date.parse(headers['date']));\n        }\n        // Handle status codes!\n        if (response.status === 200) {\n            try {\n                const body = await response.text();\n                const token = JSON.parse(body);\n                if (!isAccessToken(token)) {\n                    throw new Error('Response did not contain a valid access_token and expires_in');\n                }\n                // Success, we have a token!\n                token.expires_at = Math.round(Date.now() / 1000) + token.expires_in;\n                this.tokenEmitter.emit('access_token', { token });\n                // Reset our failure count\n                this.retryCount = 0;\n                // Refresh the token after half the expiry time passes\n                timeUntilRefreshInMs = (token.expires_in / 2) * 1000;\n                return this.queueNextPoll(timeUntilRefreshInMs);\n            }\n            catch (err) {\n                // Something went really wrong with the body, lets surface an error and try again?\n                return this.handleTransientError({ error: err, forceEmitError: true });\n            }\n        }\n        else if (response.status === 429) {\n            // Rate limited, wait for the reset time\n            return await this.handleRateLimited(response, headers, timeUntilRefreshInMs);\n        }\n        else if ([400, 401, 415].includes(response.status)) {\n            // Unrecoverable errors, stops the poller\n            return this.handleUnrecoverableErrors(response);\n        }\n        else {\n            return this.handleTransientError({\n                error: new Error(`[${response.status}] ${response.statusText}`),\n            });\n        }\n    }\n    handleTransientError({ error, forceEmitError, }) {\n        this.incrementRetries({ error, forceEmitError });\n        const timeUntilRefreshInMs = (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_2__.backoff)({\n            attempt: this.retryCount,\n            minTimeout: 25,\n            maxTimeout: 1000,\n        });\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleInvalidCustomResponse() {\n        this.tokenEmitter.emit('access_token', {\n            error: new Error('HTTPClient does not implement response.text method'),\n        });\n    }\n    async handleRateLimited(response, headers, timeUntilRefreshInMs) {\n        this.incrementRetries({\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        if (headers['x-ratelimit-reset']) {\n            const rateLimitResetTimestamp = parseInt(headers['x-ratelimit-reset'], 10);\n            if (isFinite(rateLimitResetTimestamp)) {\n                timeUntilRefreshInMs =\n                    rateLimitResetTimestamp - Date.now() + this.clockSkewInSeconds * 1000;\n            }\n            else {\n                timeUntilRefreshInMs = 5 * 1000;\n            }\n            // We want subsequent calls to get_token to be able to interrupt our\n            //  Timeout when it's waiting for e.g. a long normal expiration, but\n            //  not when we're waiting for a rate limit reset. Sleep instead.\n            await (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_3__.sleep)(timeUntilRefreshInMs);\n            timeUntilRefreshInMs = 0;\n        }\n        this.queueNextPoll(timeUntilRefreshInMs);\n    }\n    handleUnrecoverableErrors(response) {\n        this.retryCount = 0;\n        this.tokenEmitter.emit('access_token', {\n            error: new Error(`[${response.status}] ${response.statusText}`),\n        });\n        this.stopPoller();\n    }\n    updateClockSkew(dateInMs) {\n        this.clockSkewInSeconds = (Date.now() - dateInMs) / 1000;\n    }\n    incrementRetries({ error, forceEmitError, }) {\n        this.retryCount++;\n        if (forceEmitError || this.retryCount % this.maxRetries === 0) {\n            this.retryCount = 0;\n            this.tokenEmitter.emit('access_token', { error: error });\n        }\n    }\n    queueNextPoll(timeUntilRefreshInMs) {\n        this.pollerTimer = setTimeout(() => this.pollerLoop(), timeUntilRefreshInMs);\n        if (this.pollerTimer.unref) {\n            this.pollerTimer.unref();\n        }\n    }\n    /**\n     * Solely responsible for building the HTTP request and calling the token service.\n     */\n    async requestAccessToken() {\n        // Set issued at time to 5 seconds in the past to account for clock skew\n        const ISSUED_AT_BUFFER_IN_SECONDS = 5;\n        const MAX_EXPIRY_IN_SECONDS = 60;\n        // Final expiry time takes into account the issued at time, so need to subtract IAT buffer\n        const EXPIRY_IN_SECONDS = MAX_EXPIRY_IN_SECONDS - ISSUED_AT_BUFFER_IN_SECONDS;\n        const jti = (0,_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n        const currentUTCInSeconds = Math.round(Date.now() / 1000) - this.clockSkewInSeconds;\n        const jwtBody = {\n            iss: this.clientId,\n            sub: this.clientId,\n            aud: this.authServer,\n            iat: currentUTCInSeconds - ISSUED_AT_BUFFER_IN_SECONDS,\n            exp: currentUTCInSeconds + EXPIRY_IN_SECONDS,\n            jti,\n        };\n        const key = await (0,jose__WEBPACK_IMPORTED_MODULE_4__.importPKCS8)(this.clientKey, 'RS256');\n        const signedJwt = await new jose__WEBPACK_IMPORTED_MODULE_5__.SignJWT(jwtBody)\n            .setProtectedHeader({ alg: this.alg, kid: this.keyId, typ: 'JWT' })\n            .sign(key);\n        const requestBody = `grant_type=${this.grantType}&client_assertion_type=${this.clientAssertionType}&client_assertion=${signedJwt}&scope=${this.scope}`;\n        const accessTokenEndpoint = `${this.authServer}/token`;\n        const requestOptions = {\n            method: 'POST',\n            url: accessTokenEndpoint,\n            body: requestBody,\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n            },\n            httpRequestTimeout: 10000,\n        };\n        return this.httpClient.makeRequest(requestOptions);\n    }\n    async getAccessToken() {\n        // Use the cached token if it is still valid, otherwise wait for a new token.\n        if (this.isValidToken(this.accessToken)) {\n            return this.accessToken;\n        }\n        // stop poller first in order to make sure that it's not sleeping if we need a token immediately\n        // Otherwise it could be hours before the expiration time passes normally\n        this.stopPoller();\n        // startPoller needs to be called somewhere, either lazily when a token is first requested, or at instantiation.\n        // Doing it lazily currently\n        this.pollerLoop().catch(() => { });\n        return new Promise((resolve, reject) => {\n            this.tokenEmitter.once('access_token', (event) => {\n                if ('token' in event) {\n                    resolve(event.token);\n                }\n                else {\n                    reject(event.error);\n                }\n            });\n        });\n    }\n    clearToken() {\n        this.accessToken = undefined;\n    }\n    isValidToken(token) {\n        return (typeof token !== 'undefined' &&\n            token !== null &&\n            token.expires_in < Date.now() / 1000);\n    }\n}\n//# sourceMappingURL=token-manager.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUE4QjtBQUNjO0FBQ2E7QUFDRTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIscUVBQU87QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxZQUFZO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxPQUFPO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsa0NBQWtDO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDN0UsYUFBYTtBQUNiO0FBQ0E7QUFDQSwyQkFBMkIsd0JBQXdCO0FBQ25ELGdDQUFnQyx1QkFBdUI7QUFDdkQscUNBQXFDLGdFQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiw4REFBSztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDekUsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsd0JBQXdCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxjQUFjO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsMkNBQUk7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGlEQUFXO0FBQ3JDLG9DQUFvQyx5Q0FBTztBQUMzQyxrQ0FBa0MsNENBQTRDO0FBQzlFO0FBQ0EsMENBQTBDLGVBQWUseUJBQXlCLHlCQUF5QixvQkFBb0IsVUFBVSxTQUFTLFdBQVc7QUFDN0osdUNBQXVDLGdCQUFnQjtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3Rva2VuLW1hbmFnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXVpZCB9IGZyb20gJy4vdXVpZCc7XG5pbXBvcnQgeyBTaWduSldULCBpbXBvcnRQS0NTOCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0IHsgYmFja29mZiwgc2xlZXAgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtY29yZSc7XG5pbXBvcnQgeyBFbWl0dGVyIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWdlbmVyaWMtdXRpbHMnO1xuY29uc3QgaXNBY2Nlc3NUb2tlbiA9ICh0aGluZykgPT4ge1xuICAgIHJldHVybiBCb29sZWFuKHRoaW5nICYmXG4gICAgICAgIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgJ2FjY2Vzc190b2tlbicgaW4gdGhpbmcgJiZcbiAgICAgICAgJ2V4cGlyZXNfaW4nIGluIHRoaW5nICYmXG4gICAgICAgIHR5cGVvZiB0aGluZy5hY2Nlc3NfdG9rZW4gPT09ICdzdHJpbmcnICYmXG4gICAgICAgIHR5cGVvZiB0aGluZy5leHBpcmVzX2luID09PSAnbnVtYmVyJyk7XG59O1xuY29uc3QgaXNWYWxpZEN1c3RvbVJlc3BvbnNlID0gKHJlc3BvbnNlKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiByZXNwb25zZS50ZXh0ID09PSAnZnVuY3Rpb24nO1xufTtcbmZ1bmN0aW9uIGNvbnZlcnRIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICBjb25zdCBsb3dlcmNhc2VIZWFkZXJzID0ge307XG4gICAgaWYgKCFoZWFkZXJzKVxuICAgICAgICByZXR1cm4ge307XG4gICAgaWYgKGlzSGVhZGVycyhoZWFkZXJzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgaGVhZGVycy5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIGxvd2VyY2FzZUhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsb3dlcmNhc2VIZWFkZXJzO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtuYW1lLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaGVhZGVycykpIHtcbiAgICAgICAgbG93ZXJjYXNlSGVhZGVyc1tuYW1lLnRvTG93ZXJDYXNlKCldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBsb3dlcmNhc2VIZWFkZXJzO1xufVxuZnVuY3Rpb24gaXNIZWFkZXJzKHRoaW5nKSB7XG4gICAgaWYgKHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgdGhpbmcgIT09IG51bGwgJiZcbiAgICAgICAgJ2VudHJpZXMnIGluIE9iamVjdCh0aGluZykgJiZcbiAgICAgICAgdHlwZW9mIE9iamVjdCh0aGluZykuZW50cmllcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGNsYXNzIFRva2VuTWFuYWdlciB7XG4gICAgYWxnID0gJ1JTMjU2JztcbiAgICBncmFudFR5cGUgPSAnY2xpZW50X2NyZWRlbnRpYWxzJztcbiAgICBjbGllbnRBc3NlcnRpb25UeXBlID0gJ3VybjppZXRmOnBhcmFtczpvYXV0aDpjbGllbnQtYXNzZXJ0aW9uLXR5cGU6and0LWJlYXJlcic7XG4gICAgY2xpZW50SWQ7XG4gICAgY2xpZW50S2V5O1xuICAgIGtleUlkO1xuICAgIHNjb3BlO1xuICAgIGF1dGhTZXJ2ZXI7XG4gICAgaHR0cENsaWVudDtcbiAgICBtYXhSZXRyaWVzO1xuICAgIGNsb2NrU2tld0luU2Vjb25kcyA9IDA7XG4gICAgYWNjZXNzVG9rZW47XG4gICAgdG9rZW5FbWl0dGVyID0gbmV3IEVtaXR0ZXIoKTtcbiAgICByZXRyeUNvdW50O1xuICAgIHBvbGxlclRpbWVyO1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHRoaXMua2V5SWQgPSBwcm9wcy5rZXlJZDtcbiAgICAgICAgdGhpcy5jbGllbnRJZCA9IHByb3BzLmNsaWVudElkO1xuICAgICAgICB0aGlzLmNsaWVudEtleSA9IHByb3BzLmNsaWVudEtleTtcbiAgICAgICAgdGhpcy5hdXRoU2VydmVyID0gcHJvcHMuYXV0aFNlcnZlciA/PyAnaHR0cHM6Ly9vYXV0aDIuc2VnbWVudC5pbyc7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBwcm9wcy5zY29wZSA/PyAndHJhY2tpbmdfYXBpOndyaXRlJztcbiAgICAgICAgdGhpcy5odHRwQ2xpZW50ID0gcHJvcHMuaHR0cENsaWVudDtcbiAgICAgICAgdGhpcy5tYXhSZXRyaWVzID0gcHJvcHMubWF4UmV0cmllcztcbiAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIub24oJ2FjY2Vzc190b2tlbicsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCd0b2tlbicgaW4gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gZXZlbnQudG9rZW47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJldHJ5Q291bnQgPSAwO1xuICAgIH1cbiAgICBzdG9wUG9sbGVyKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsZXJUaW1lcik7XG4gICAgfVxuICAgIGFzeW5jIHBvbGxlckxvb3AoKSB7XG4gICAgICAgIGxldCB0aW1lVW50aWxSZWZyZXNoSW5NcyA9IDI1O1xuICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdEFjY2Vzc1Rva2VuKCk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgLy8gRXJyb3Igd2l0aG91dCBhIHN0YXR1cyBjb2RlIC0gbGlrZWx5IG5ldHdvcmtpbmcsIHJldHJ5XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVUcmFuc2llbnRFcnJvcih7IGVycm9yOiBlcnIgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFpc1ZhbGlkQ3VzdG9tUmVzcG9uc2UocmVzcG9uc2UpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVJbnZhbGlkQ3VzdG9tUmVzcG9uc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoZWFkZXJzID0gY29udmVydEhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG4gICAgICAgIGlmIChoZWFkZXJzWydkYXRlJ10pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2xvY2tTa2V3KERhdGUucGFyc2UoaGVhZGVyc1snZGF0ZSddKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGFuZGxlIHN0YXR1cyBjb2RlcyFcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBKU09OLnBhcnNlKGJvZHkpO1xuICAgICAgICAgICAgICAgIGlmICghaXNBY2Nlc3NUb2tlbih0b2tlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXNwb25zZSBkaWQgbm90IGNvbnRhaW4gYSB2YWxpZCBhY2Nlc3NfdG9rZW4gYW5kIGV4cGlyZXNfaW4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU3VjY2Vzcywgd2UgaGF2ZSBhIHRva2VuIVxuICAgICAgICAgICAgICAgIHRva2VuLmV4cGlyZXNfYXQgPSBNYXRoLnJvdW5kKERhdGUubm93KCkgLyAxMDAwKSArIHRva2VuLmV4cGlyZXNfaW47XG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIuZW1pdCgnYWNjZXNzX3Rva2VuJywgeyB0b2tlbiB9KTtcbiAgICAgICAgICAgICAgICAvLyBSZXNldCBvdXIgZmFpbHVyZSBjb3VudFxuICAgICAgICAgICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgLy8gUmVmcmVzaCB0aGUgdG9rZW4gYWZ0ZXIgaGFsZiB0aGUgZXhwaXJ5IHRpbWUgcGFzc2VzXG4gICAgICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPSAodG9rZW4uZXhwaXJlc19pbiAvIDIpICogMTAwMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZU5leHRQb2xsKHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBTb21ldGhpbmcgd2VudCByZWFsbHkgd3Jvbmcgd2l0aCB0aGUgYm9keSwgbGV0cyBzdXJmYWNlIGFuIGVycm9yIGFuZCB0cnkgYWdhaW4/XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlVHJhbnNpZW50RXJyb3IoeyBlcnJvcjogZXJyLCBmb3JjZUVtaXRFcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkge1xuICAgICAgICAgICAgLy8gUmF0ZSBsaW1pdGVkLCB3YWl0IGZvciB0aGUgcmVzZXQgdGltZVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuaGFuZGxlUmF0ZUxpbWl0ZWQocmVzcG9uc2UsIGhlYWRlcnMsIHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChbNDAwLCA0MDEsIDQxNV0uaW5jbHVkZXMocmVzcG9uc2Uuc3RhdHVzKSkge1xuICAgICAgICAgICAgLy8gVW5yZWNvdmVyYWJsZSBlcnJvcnMsIHN0b3BzIHRoZSBwb2xsZXJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZVVucmVjb3ZlcmFibGVFcnJvcnMocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlVHJhbnNpZW50RXJyb3Ioe1xuICAgICAgICAgICAgICAgIGVycm9yOiBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c31dICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVRyYW5zaWVudEVycm9yKHsgZXJyb3IsIGZvcmNlRW1pdEVycm9yLCB9KSB7XG4gICAgICAgIHRoaXMuaW5jcmVtZW50UmV0cmllcyh7IGVycm9yLCBmb3JjZUVtaXRFcnJvciB9KTtcbiAgICAgICAgY29uc3QgdGltZVVudGlsUmVmcmVzaEluTXMgPSBiYWNrb2ZmKHtcbiAgICAgICAgICAgIGF0dGVtcHQ6IHRoaXMucmV0cnlDb3VudCxcbiAgICAgICAgICAgIG1pblRpbWVvdXQ6IDI1LFxuICAgICAgICAgICAgbWF4VGltZW91dDogMTAwMCxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucXVldWVOZXh0UG9sbCh0aW1lVW50aWxSZWZyZXNoSW5Ncyk7XG4gICAgfVxuICAgIGhhbmRsZUludmFsaWRDdXN0b21SZXNwb25zZSgpIHtcbiAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIuZW1pdCgnYWNjZXNzX3Rva2VuJywge1xuICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcignSFRUUENsaWVudCBkb2VzIG5vdCBpbXBsZW1lbnQgcmVzcG9uc2UudGV4dCBtZXRob2QnKSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJhdGVMaW1pdGVkKHJlc3BvbnNlLCBoZWFkZXJzLCB0aW1lVW50aWxSZWZyZXNoSW5Ncykge1xuICAgICAgICB0aGlzLmluY3JlbWVudFJldHJpZXMoe1xuICAgICAgICAgICAgZXJyb3I6IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGhlYWRlcnNbJ3gtcmF0ZWxpbWl0LXJlc2V0J10pIHtcbiAgICAgICAgICAgIGNvbnN0IHJhdGVMaW1pdFJlc2V0VGltZXN0YW1wID0gcGFyc2VJbnQoaGVhZGVyc1sneC1yYXRlbGltaXQtcmVzZXQnXSwgMTApO1xuICAgICAgICAgICAgaWYgKGlzRmluaXRlKHJhdGVMaW1pdFJlc2V0VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgIHRpbWVVbnRpbFJlZnJlc2hJbk1zID1cbiAgICAgICAgICAgICAgICAgICAgcmF0ZUxpbWl0UmVzZXRUaW1lc3RhbXAgLSBEYXRlLm5vdygpICsgdGhpcy5jbG9ja1NrZXdJblNlY29uZHMgKiAxMDAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGltZVVudGlsUmVmcmVzaEluTXMgPSA1ICogMTAwMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFdlIHdhbnQgc3Vic2VxdWVudCBjYWxscyB0byBnZXRfdG9rZW4gdG8gYmUgYWJsZSB0byBpbnRlcnJ1cHQgb3VyXG4gICAgICAgICAgICAvLyAgVGltZW91dCB3aGVuIGl0J3Mgd2FpdGluZyBmb3IgZS5nLiBhIGxvbmcgbm9ybWFsIGV4cGlyYXRpb24sIGJ1dFxuICAgICAgICAgICAgLy8gIG5vdCB3aGVuIHdlJ3JlIHdhaXRpbmcgZm9yIGEgcmF0ZSBsaW1pdCByZXNldC4gU2xlZXAgaW5zdGVhZC5cbiAgICAgICAgICAgIGF3YWl0IHNsZWVwKHRpbWVVbnRpbFJlZnJlc2hJbk1zKTtcbiAgICAgICAgICAgIHRpbWVVbnRpbFJlZnJlc2hJbk1zID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnF1ZXVlTmV4dFBvbGwodGltZVVudGlsUmVmcmVzaEluTXMpO1xuICAgIH1cbiAgICBoYW5kbGVVbnJlY292ZXJhYmxlRXJyb3JzKHJlc3BvbnNlKSB7XG4gICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XG4gICAgICAgIHRoaXMudG9rZW5FbWl0dGVyLmVtaXQoJ2FjY2Vzc190b2tlbicsIHtcbiAgICAgICAgICAgIGVycm9yOiBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c31dICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3RvcFBvbGxlcigpO1xuICAgIH1cbiAgICB1cGRhdGVDbG9ja1NrZXcoZGF0ZUluTXMpIHtcbiAgICAgICAgdGhpcy5jbG9ja1NrZXdJblNlY29uZHMgPSAoRGF0ZS5ub3coKSAtIGRhdGVJbk1zKSAvIDEwMDA7XG4gICAgfVxuICAgIGluY3JlbWVudFJldHJpZXMoeyBlcnJvciwgZm9yY2VFbWl0RXJyb3IsIH0pIHtcbiAgICAgICAgdGhpcy5yZXRyeUNvdW50Kys7XG4gICAgICAgIGlmIChmb3JjZUVtaXRFcnJvciB8fCB0aGlzLnJldHJ5Q291bnQgJSB0aGlzLm1heFJldHJpZXMgPT09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmV0cnlDb3VudCA9IDA7XG4gICAgICAgICAgICB0aGlzLnRva2VuRW1pdHRlci5lbWl0KCdhY2Nlc3NfdG9rZW4nLCB7IGVycm9yOiBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZU5leHRQb2xsKHRpbWVVbnRpbFJlZnJlc2hJbk1zKSB7XG4gICAgICAgIHRoaXMucG9sbGVyVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMucG9sbGVyTG9vcCgpLCB0aW1lVW50aWxSZWZyZXNoSW5Ncyk7XG4gICAgICAgIGlmICh0aGlzLnBvbGxlclRpbWVyLnVucmVmKSB7XG4gICAgICAgICAgICB0aGlzLnBvbGxlclRpbWVyLnVucmVmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU29sZWx5IHJlc3BvbnNpYmxlIGZvciBidWlsZGluZyB0aGUgSFRUUCByZXF1ZXN0IGFuZCBjYWxsaW5nIHRoZSB0b2tlbiBzZXJ2aWNlLlxuICAgICAqL1xuICAgIGFzeW5jIHJlcXVlc3RBY2Nlc3NUb2tlbigpIHtcbiAgICAgICAgLy8gU2V0IGlzc3VlZCBhdCB0aW1lIHRvIDUgc2Vjb25kcyBpbiB0aGUgcGFzdCB0byBhY2NvdW50IGZvciBjbG9jayBza2V3XG4gICAgICAgIGNvbnN0IElTU1VFRF9BVF9CVUZGRVJfSU5fU0VDT05EUyA9IDU7XG4gICAgICAgIGNvbnN0IE1BWF9FWFBJUllfSU5fU0VDT05EUyA9IDYwO1xuICAgICAgICAvLyBGaW5hbCBleHBpcnkgdGltZSB0YWtlcyBpbnRvIGFjY291bnQgdGhlIGlzc3VlZCBhdCB0aW1lLCBzbyBuZWVkIHRvIHN1YnRyYWN0IElBVCBidWZmZXJcbiAgICAgICAgY29uc3QgRVhQSVJZX0lOX1NFQ09ORFMgPSBNQVhfRVhQSVJZX0lOX1NFQ09ORFMgLSBJU1NVRURfQVRfQlVGRkVSX0lOX1NFQ09ORFM7XG4gICAgICAgIGNvbnN0IGp0aSA9IHV1aWQoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFVUQ0luU2Vjb25kcyA9IE1hdGgucm91bmQoRGF0ZS5ub3coKSAvIDEwMDApIC0gdGhpcy5jbG9ja1NrZXdJblNlY29uZHM7XG4gICAgICAgIGNvbnN0IGp3dEJvZHkgPSB7XG4gICAgICAgICAgICBpc3M6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBzdWI6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdWQ6IHRoaXMuYXV0aFNlcnZlcixcbiAgICAgICAgICAgIGlhdDogY3VycmVudFVUQ0luU2Vjb25kcyAtIElTU1VFRF9BVF9CVUZGRVJfSU5fU0VDT05EUyxcbiAgICAgICAgICAgIGV4cDogY3VycmVudFVUQ0luU2Vjb25kcyArIEVYUElSWV9JTl9TRUNPTkRTLFxuICAgICAgICAgICAganRpLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBrZXkgPSBhd2FpdCBpbXBvcnRQS0NTOCh0aGlzLmNsaWVudEtleSwgJ1JTMjU2Jyk7XG4gICAgICAgIGNvbnN0IHNpZ25lZEp3dCA9IGF3YWl0IG5ldyBTaWduSldUKGp3dEJvZHkpXG4gICAgICAgICAgICAuc2V0UHJvdGVjdGVkSGVhZGVyKHsgYWxnOiB0aGlzLmFsZywga2lkOiB0aGlzLmtleUlkLCB0eXA6ICdKV1QnIH0pXG4gICAgICAgICAgICAuc2lnbihrZXkpO1xuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IGBncmFudF90eXBlPSR7dGhpcy5ncmFudFR5cGV9JmNsaWVudF9hc3NlcnRpb25fdHlwZT0ke3RoaXMuY2xpZW50QXNzZXJ0aW9uVHlwZX0mY2xpZW50X2Fzc2VydGlvbj0ke3NpZ25lZEp3dH0mc2NvcGU9JHt0aGlzLnNjb3BlfWA7XG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuRW5kcG9pbnQgPSBgJHt0aGlzLmF1dGhTZXJ2ZXJ9L3Rva2VuYDtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogYWNjZXNzVG9rZW5FbmRwb2ludCxcbiAgICAgICAgICAgIGJvZHk6IHJlcXVlc3RCb2R5LFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBodHRwUmVxdWVzdFRpbWVvdXQ6IDEwMDAwLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwQ2xpZW50Lm1ha2VSZXF1ZXN0KHJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0QWNjZXNzVG9rZW4oKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgY2FjaGVkIHRva2VuIGlmIGl0IGlzIHN0aWxsIHZhbGlkLCBvdGhlcndpc2Ugd2FpdCBmb3IgYSBuZXcgdG9rZW4uXG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRUb2tlbih0aGlzLmFjY2Vzc1Rva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3RvcCBwb2xsZXIgZmlyc3QgaW4gb3JkZXIgdG8gbWFrZSBzdXJlIHRoYXQgaXQncyBub3Qgc2xlZXBpbmcgaWYgd2UgbmVlZCBhIHRva2VuIGltbWVkaWF0ZWx5XG4gICAgICAgIC8vIE90aGVyd2lzZSBpdCBjb3VsZCBiZSBob3VycyBiZWZvcmUgdGhlIGV4cGlyYXRpb24gdGltZSBwYXNzZXMgbm9ybWFsbHlcbiAgICAgICAgdGhpcy5zdG9wUG9sbGVyKCk7XG4gICAgICAgIC8vIHN0YXJ0UG9sbGVyIG5lZWRzIHRvIGJlIGNhbGxlZCBzb21ld2hlcmUsIGVpdGhlciBsYXppbHkgd2hlbiBhIHRva2VuIGlzIGZpcnN0IHJlcXVlc3RlZCwgb3IgYXQgaW5zdGFudGlhdGlvbi5cbiAgICAgICAgLy8gRG9pbmcgaXQgbGF6aWx5IGN1cnJlbnRseVxuICAgICAgICB0aGlzLnBvbGxlckxvb3AoKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2tlbkVtaXR0ZXIub25jZSgnYWNjZXNzX3Rva2VuJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCd0b2tlbicgaW4gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShldmVudC50b2tlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXZlbnQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY2xlYXJUb2tlbigpIHtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgaXNWYWxpZFRva2VuKHRva2VuKSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIHRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgdG9rZW4gIT09IG51bGwgJiZcbiAgICAgICAgICAgIHRva2VuLmV4cGlyZXNfaW4gPCBEYXRlLm5vdygpIC8gMTAwMCk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9rZW4tbWFuYWdlci5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uuid: () => (/* reexport safe */ _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__.v4)\n/* harmony export */ });\n/* harmony import */ var _lukeed_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @lukeed/uuid */ \"(rsc)/./node_modules/@lukeed/uuid/dist/index.mjs\");\n\n//# sourceMappingURL=uuid.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vbGliL3V1aWQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMEM7QUFDMUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9taWNoYWVsZHVyYW50ZS9haSBkZXYvY2UtaHViL3Byb2plY3RzL3RyYWRlcnJhL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9Ac2VnbWVudC9hbmFseXRpY3Mtbm9kZS9kaXN0L2VzbS9saWIvdXVpZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAnQGx1a2VlZC91dWlkJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXV1aWQuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ContextBatch: () => (/* binding */ ContextBatch)\n/* harmony export */ });\n/* harmony import */ var _lib_uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/uuid */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/uuid.js\");\n\nconst MAX_EVENT_SIZE_IN_KB = 32;\nconst MAX_BATCH_SIZE_IN_KB = 480; //  (500 KB is the limit, leaving some padding)\nclass ContextBatch {\n    id = (0,_lib_uuid__WEBPACK_IMPORTED_MODULE_0__.uuid)();\n    items = [];\n    sizeInBytes = 0;\n    maxEventCount;\n    constructor(maxEventCount) {\n        this.maxEventCount = Math.max(1, maxEventCount);\n    }\n    tryAdd(item) {\n        if (this.length === this.maxEventCount)\n            return {\n                success: false,\n                message: `Event limit of ${this.maxEventCount} has been exceeded.`,\n            };\n        const eventSize = this.calculateSize(item.context);\n        if (eventSize > MAX_EVENT_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event exceeds maximum event size of ${MAX_EVENT_SIZE_IN_KB} KB`,\n            };\n        }\n        if (this.sizeInBytes + eventSize > MAX_BATCH_SIZE_IN_KB * 1024) {\n            return {\n                success: false,\n                message: `Event has caused batch size to exceed ${MAX_BATCH_SIZE_IN_KB} KB`,\n            };\n        }\n        this.items.push(item);\n        this.sizeInBytes += eventSize;\n        return { success: true };\n    }\n    get length() {\n        return this.items.length;\n    }\n    calculateSize(ctx) {\n        return encodeURI(JSON.stringify(ctx.event)).split(/%..|i/).length;\n    }\n    getEvents() {\n        const events = this.items.map(({ context }) => context.event);\n        return events;\n    }\n    getContexts() {\n        return this.items.map((item) => item.context);\n    }\n    resolveEvents() {\n        this.items.forEach(({ resolver, context }) => resolver(context));\n    }\n}\n//# sourceMappingURL=context-batch.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzQztBQUN0QztBQUNBLGtDQUFrQztBQUMzQjtBQUNQLFNBQVMsK0NBQUk7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxvQkFBb0I7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUFnRSxzQkFBc0I7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxzQkFBc0I7QUFDeEY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QyxTQUFTO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtQkFBbUI7QUFDakQ7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vY29udGV4dC1iYXRjaC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1dWlkIH0gZnJvbSAnLi4vLi4vbGliL3V1aWQnO1xuY29uc3QgTUFYX0VWRU5UX1NJWkVfSU5fS0IgPSAzMjtcbmNvbnN0IE1BWF9CQVRDSF9TSVpFX0lOX0tCID0gNDgwOyAvLyAgKDUwMCBLQiBpcyB0aGUgbGltaXQsIGxlYXZpbmcgc29tZSBwYWRkaW5nKVxuZXhwb3J0IGNsYXNzIENvbnRleHRCYXRjaCB7XG4gICAgaWQgPSB1dWlkKCk7XG4gICAgaXRlbXMgPSBbXTtcbiAgICBzaXplSW5CeXRlcyA9IDA7XG4gICAgbWF4RXZlbnRDb3VudDtcbiAgICBjb25zdHJ1Y3RvcihtYXhFdmVudENvdW50KSB7XG4gICAgICAgIHRoaXMubWF4RXZlbnRDb3VudCA9IE1hdGgubWF4KDEsIG1heEV2ZW50Q291bnQpO1xuICAgIH1cbiAgICB0cnlBZGQoaXRlbSkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IHRoaXMubWF4RXZlbnRDb3VudClcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEV2ZW50IGxpbWl0IG9mICR7dGhpcy5tYXhFdmVudENvdW50fSBoYXMgYmVlbiBleGNlZWRlZC5gLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXZlbnRTaXplID0gdGhpcy5jYWxjdWxhdGVTaXplKGl0ZW0uY29udGV4dCk7XG4gICAgICAgIGlmIChldmVudFNpemUgPiBNQVhfRVZFTlRfU0laRV9JTl9LQiAqIDEwMjQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEV2ZW50IGV4Y2VlZHMgbWF4aW11bSBldmVudCBzaXplIG9mICR7TUFYX0VWRU5UX1NJWkVfSU5fS0J9IEtCYCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2l6ZUluQnl0ZXMgKyBldmVudFNpemUgPiBNQVhfQkFUQ0hfU0laRV9JTl9LQiAqIDEwMjQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEV2ZW50IGhhcyBjYXVzZWQgYmF0Y2ggc2l6ZSB0byBleGNlZWQgJHtNQVhfQkFUQ0hfU0laRV9JTl9LQn0gS0JgLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIHRoaXMuc2l6ZUluQnl0ZXMgKz0gZXZlbnRTaXplO1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlIH07XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICB9XG4gICAgY2FsY3VsYXRlU2l6ZShjdHgpIHtcbiAgICAgICAgcmV0dXJuIGVuY29kZVVSSShKU09OLnN0cmluZ2lmeShjdHguZXZlbnQpKS5zcGxpdCgvJS4ufGkvKS5sZW5ndGg7XG4gICAgfVxuICAgIGdldEV2ZW50cygpIHtcbiAgICAgICAgY29uc3QgZXZlbnRzID0gdGhpcy5pdGVtcy5tYXAoKHsgY29udGV4dCB9KSA9PiBjb250ZXh0LmV2ZW50KTtcbiAgICAgICAgcmV0dXJuIGV2ZW50cztcbiAgICB9XG4gICAgZ2V0Q29udGV4dHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5jb250ZXh0KTtcbiAgICB9XG4gICAgcmVzb2x2ZUV2ZW50cygpIHtcbiAgICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKCh7IHJlc29sdmVyLCBjb250ZXh0IH0pID0+IHJlc29sdmVyKGNvbnRleHQpKTtcbiAgICB9XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb250ZXh0LWJhdGNoLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createConfiguredNodePlugin: () => (/* binding */ createConfiguredNodePlugin),\n/* harmony export */   createNodePlugin: () => (/* binding */ createNodePlugin)\n/* harmony export */ });\n/* harmony import */ var _publisher__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./publisher */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\");\n/* harmony import */ var _generated_version__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../generated/version */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/generated/version.js\");\n/* harmony import */ var _lib_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/env */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/env.js\");\n\n\n\nfunction normalizeEvent(ctx) {\n    ctx.updateEvent('context.library.name', '@segment/analytics-node');\n    ctx.updateEvent('context.library.version', _generated_version__WEBPACK_IMPORTED_MODULE_1__.version);\n    const runtime = (0,_lib_env__WEBPACK_IMPORTED_MODULE_2__.detectRuntime)();\n    if (runtime === 'node') {\n        // eslint-disable-next-line no-restricted-globals\n        ctx.updateEvent('_metadata.nodeVersion', process.version);\n    }\n    ctx.updateEvent('_metadata.jsRuntime', runtime);\n}\nfunction createNodePlugin(publisher) {\n    function action(ctx) {\n        normalizeEvent(ctx);\n        return publisher.enqueue(ctx);\n    }\n    return {\n        name: 'Segment.io',\n        type: 'destination',\n        version: '1.0.0',\n        isLoaded: () => true,\n        load: () => Promise.resolve(),\n        alias: action,\n        group: action,\n        identify: action,\n        page: action,\n        screen: action,\n        track: action,\n    };\n}\nconst createConfiguredNodePlugin = (props, emitter) => {\n    const publisher = new _publisher__WEBPACK_IMPORTED_MODULE_0__.Publisher(props, emitter);\n    return {\n        publisher: publisher,\n        plugin: createNodePlugin(publisher),\n    };\n};\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDVTtBQUNKO0FBQzlDO0FBQ0E7QUFDQSwrQ0FBK0MsdURBQU87QUFDdEQsb0JBQW9CLHVEQUFhO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCwwQkFBMEIsaURBQVM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHVibGlzaGVyIH0gZnJvbSAnLi9wdWJsaXNoZXInO1xuaW1wb3J0IHsgdmVyc2lvbiB9IGZyb20gJy4uLy4uL2dlbmVyYXRlZC92ZXJzaW9uJztcbmltcG9ydCB7IGRldGVjdFJ1bnRpbWUgfSBmcm9tICcuLi8uLi9saWIvZW52JztcbmZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50KGN0eCkge1xuICAgIGN0eC51cGRhdGVFdmVudCgnY29udGV4dC5saWJyYXJ5Lm5hbWUnLCAnQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUnKTtcbiAgICBjdHgudXBkYXRlRXZlbnQoJ2NvbnRleHQubGlicmFyeS52ZXJzaW9uJywgdmVyc2lvbik7XG4gICAgY29uc3QgcnVudGltZSA9IGRldGVjdFJ1bnRpbWUoKTtcbiAgICBpZiAocnVudGltZSA9PT0gJ25vZGUnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICAgICAgY3R4LnVwZGF0ZUV2ZW50KCdfbWV0YWRhdGEubm9kZVZlcnNpb24nLCBwcm9jZXNzLnZlcnNpb24pO1xuICAgIH1cbiAgICBjdHgudXBkYXRlRXZlbnQoJ19tZXRhZGF0YS5qc1J1bnRpbWUnLCBydW50aW1lKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVOb2RlUGx1Z2luKHB1Ymxpc2hlcikge1xuICAgIGZ1bmN0aW9uIGFjdGlvbihjdHgpIHtcbiAgICAgICAgbm9ybWFsaXplRXZlbnQoY3R4KTtcbiAgICAgICAgcmV0dXJuIHB1Ymxpc2hlci5lbnF1ZXVlKGN0eCk7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6ICdTZWdtZW50LmlvJyxcbiAgICAgICAgdHlwZTogJ2Rlc3RpbmF0aW9uJyxcbiAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgaXNMb2FkZWQ6ICgpID0+IHRydWUsXG4gICAgICAgIGxvYWQ6ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLFxuICAgICAgICBhbGlhczogYWN0aW9uLFxuICAgICAgICBncm91cDogYWN0aW9uLFxuICAgICAgICBpZGVudGlmeTogYWN0aW9uLFxuICAgICAgICBwYWdlOiBhY3Rpb24sXG4gICAgICAgIHNjcmVlbjogYWN0aW9uLFxuICAgICAgICB0cmFjazogYWN0aW9uLFxuICAgIH07XG59XG5leHBvcnQgY29uc3QgY3JlYXRlQ29uZmlndXJlZE5vZGVQbHVnaW4gPSAocHJvcHMsIGVtaXR0ZXIpID0+IHtcbiAgICBjb25zdCBwdWJsaXNoZXIgPSBuZXcgUHVibGlzaGVyKHByb3BzLCBlbWl0dGVyKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBwdWJsaXNoZXI6IHB1Ymxpc2hlcixcbiAgICAgICAgcGx1Z2luOiBjcmVhdGVOb2RlUGx1Z2luKHB1Ymxpc2hlciksXG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Publisher: () => (/* binding */ Publisher)\n/* harmony export */ });\n/* harmony import */ var _segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @segment/analytics-core */ \"(rsc)/./node_modules/@segment/analytics-core/dist/esm/priority-queue/backoff.js\");\n/* harmony import */ var _lib_create_url__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/create-url */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/create-url.js\");\n/* harmony import */ var _segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @segment/analytics-generic-utils */ \"(rsc)/./node_modules/@segment/analytics-generic-utils/dist/esm/create-deferred/create-deferred.js\");\n/* harmony import */ var _context_batch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./context-batch */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/context-batch.js\");\n/* harmony import */ var _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/token-manager */ \"(rsc)/./node_modules/@segment/analytics-node/dist/esm/lib/token-manager.js\");\n\n\n\n\n\nfunction sleep(timeoutInMs) {\n    return new Promise((resolve) => setTimeout(resolve, timeoutInMs));\n}\nfunction noop() { }\n/**\n * The Publisher is responsible for batching events and sending them to the Segment API.\n */\nclass Publisher {\n    pendingFlushTimeout;\n    _batch;\n    _flushInterval;\n    _flushAt;\n    _maxRetries;\n    _url;\n    _flushPendingItemsCount;\n    _httpRequestTimeout;\n    _emitter;\n    _disable;\n    _httpClient;\n    _writeKey;\n    _tokenManager;\n    constructor({ host, path, maxRetries, flushAt, flushInterval, writeKey, httpRequestTimeout, httpClient, disable, oauthSettings, }, emitter) {\n        this._emitter = emitter;\n        this._maxRetries = maxRetries;\n        this._flushAt = Math.max(flushAt, 1);\n        this._flushInterval = flushInterval;\n        this._url = (0,_lib_create_url__WEBPACK_IMPORTED_MODULE_0__.tryCreateFormattedUrl)(host ?? 'https://api.segment.io', path ?? '/v1/batch');\n        this._httpRequestTimeout = httpRequestTimeout ?? 10000;\n        this._disable = Boolean(disable);\n        this._httpClient = httpClient;\n        this._writeKey = writeKey;\n        if (oauthSettings) {\n            this._tokenManager = new _lib_token_manager__WEBPACK_IMPORTED_MODULE_2__.TokenManager({\n                ...oauthSettings,\n                httpClient: oauthSettings.httpClient ?? httpClient,\n                maxRetries: oauthSettings.maxRetries ?? maxRetries,\n            });\n        }\n    }\n    createBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        const batch = new _context_batch__WEBPACK_IMPORTED_MODULE_1__.ContextBatch(this._flushAt);\n        this._batch = batch;\n        this.pendingFlushTimeout = setTimeout(() => {\n            if (batch === this._batch) {\n                this._batch = undefined;\n            }\n            this.pendingFlushTimeout = undefined;\n            if (batch.length) {\n                this.send(batch).catch(noop);\n            }\n        }, this._flushInterval);\n        return batch;\n    }\n    clearBatch() {\n        this.pendingFlushTimeout && clearTimeout(this.pendingFlushTimeout);\n        this._batch = undefined;\n    }\n    flush(pendingItemsCount) {\n        if (!pendingItemsCount) {\n            // if number of pending items is 0, there will never be anything else entering the batch, since the app is closed.\n            if (this._tokenManager) {\n                this._tokenManager.stopPoller();\n            }\n            return;\n        }\n        this._flushPendingItemsCount = pendingItemsCount;\n        // if batch is empty, there's nothing to flush, and when things come in, enqueue will handle them.\n        if (!this._batch)\n            return;\n        // the number of globally pending items will always be larger or the same as batch size.\n        // Any mismatch is because some globally pending items are in plugins.\n        const isExpectingNoMoreItems = this._batch.length === pendingItemsCount;\n        if (isExpectingNoMoreItems) {\n            this.send(this._batch)\n                .catch(noop)\n                .finally(() => {\n                // stop poller so program can exit ().\n                if (this._tokenManager) {\n                    this._tokenManager.stopPoller();\n                }\n            });\n            this.clearBatch();\n        }\n    }\n    /**\n     * Enqueues the context for future delivery.\n     * @param ctx - Context containing a Segment event.\n     * @returns a promise that resolves with the context after the event has been delivered.\n     */\n    enqueue(ctx) {\n        const batch = this._batch ?? this.createBatch();\n        const { promise: ctxPromise, resolve } = (0,_segment_analytics_generic_utils__WEBPACK_IMPORTED_MODULE_3__.createDeferred)();\n        const pendingItem = {\n            context: ctx,\n            resolver: resolve,\n        };\n        /*\n          The following logic ensures that a batch is never orphaned,\n          and is always sent before a new batch is created.\n    \n          Add an event to the existing batch.\n            Success: Check if batch is full or no more items are expected to come in (i.e. closing). If so, send batch.\n            Failure: Assume event is too big to fit in current batch - send existing batch.\n              Add an event to the new batch.\n                Success: Check if batch is full and send if it is.\n                Failure: Event exceeds maximum size (it will never fit), fail the event.\n        */\n        const addStatus = batch.tryAdd(pendingItem);\n        if (addStatus.success) {\n            const isExpectingNoMoreItems = batch.length === this._flushPendingItemsCount;\n            const isFull = batch.length === this._flushAt;\n            if (isFull || isExpectingNoMoreItems) {\n                this.send(batch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        // If the new item causes the maximimum event size to be exceeded, send the current batch and create a new one.\n        if (batch.length) {\n            this.send(batch).catch(noop);\n            this.clearBatch();\n        }\n        const fallbackBatch = this.createBatch();\n        const fbAddStatus = fallbackBatch.tryAdd(pendingItem);\n        if (fbAddStatus.success) {\n            const isExpectingNoMoreItems = fallbackBatch.length === this._flushPendingItemsCount;\n            if (isExpectingNoMoreItems) {\n                this.send(fallbackBatch).catch(noop);\n                this.clearBatch();\n            }\n            return ctxPromise;\n        }\n        else {\n            // this should only occur if max event size is exceeded\n            ctx.setFailedDelivery({\n                reason: new Error(fbAddStatus.message),\n            });\n            return Promise.resolve(ctx);\n        }\n    }\n    async send(batch) {\n        if (this._flushPendingItemsCount) {\n            this._flushPendingItemsCount -= batch.length;\n        }\n        const events = batch.getEvents();\n        const maxAttempts = this._maxRetries + 1;\n        let currentAttempt = 0;\n        while (currentAttempt < maxAttempts) {\n            currentAttempt++;\n            let requestedRetryTimeout;\n            let failureReason;\n            try {\n                if (this._disable) {\n                    return batch.resolveEvents();\n                }\n                let authString = undefined;\n                if (this._tokenManager) {\n                    const token = await this._tokenManager.getAccessToken();\n                    if (token && token.access_token) {\n                        authString = `Bearer ${token.access_token}`;\n                    }\n                }\n                const headers = {\n                    'Content-Type': 'application/json',\n                    'User-Agent': 'analytics-node-next/latest',\n                    ...(authString ? { Authorization: authString } : {}),\n                };\n                const request = {\n                    url: this._url,\n                    method: 'POST',\n                    headers: headers,\n                    body: JSON.stringify({\n                        batch: events,\n                        writeKey: this._writeKey,\n                        sentAt: new Date(),\n                    }),\n                    httpRequestTimeout: this._httpRequestTimeout,\n                };\n                this._emitter.emit('http_request', {\n                    body: request.body,\n                    method: request.method,\n                    url: request.url,\n                    headers: request.headers,\n                });\n                const response = await this._httpClient.makeRequest(request);\n                if (response.status >= 200 && response.status < 300) {\n                    // Successfully sent events, so exit!\n                    batch.resolveEvents();\n                    return;\n                }\n                else if (this._tokenManager &&\n                    (response.status === 400 ||\n                        response.status === 401 ||\n                        response.status === 403)) {\n                    // Retry with a new OAuth token if we have OAuth data\n                    this._tokenManager.clearToken();\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else if (response.status === 400) {\n                    // https://segment.com/docs/connections/sources/catalog/libraries/server/http-api/#max-request-size\n                    // Request either malformed or size exceeded - don't retry.\n                    resolveFailedBatch(batch, new Error(`[${response.status}] ${response.statusText}`));\n                    return;\n                }\n                else if (response.status === 429) {\n                    // Rate limited, wait for the reset time\n                    if (response.headers && 'x-ratelimit-reset' in response.headers) {\n                        const rateLimitResetTimestamp = parseInt(response.headers['x-ratelimit-reset'], 10);\n                        if (isFinite(rateLimitResetTimestamp)) {\n                            requestedRetryTimeout = rateLimitResetTimestamp - Date.now();\n                        }\n                    }\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n                else {\n                    // Treat other errors as transient and retry.\n                    failureReason = new Error(`[${response.status}] ${response.statusText}`);\n                }\n            }\n            catch (err) {\n                // Network errors get thrown, retry them.\n                failureReason = err;\n            }\n            // Final attempt failed, update context and resolve events.\n            if (currentAttempt === maxAttempts) {\n                resolveFailedBatch(batch, failureReason);\n                return;\n            }\n            // Retry after attempt-based backoff.\n            await sleep(requestedRetryTimeout\n                ? requestedRetryTimeout\n                : (0,_segment_analytics_core__WEBPACK_IMPORTED_MODULE_4__.backoff)({\n                    attempt: currentAttempt,\n                    minTimeout: 25,\n                    maxTimeout: 1000,\n                }));\n        }\n    }\n}\nfunction resolveFailedBatch(batch, reason) {\n    batch.getContexts().forEach((ctx) => ctx.setFailedDelivery({ reason }));\n    batch.resolveEvents();\n}\n//# sourceMappingURL=publisher.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvZGlzdC9lc20vcGx1Z2lucy9zZWdtZW50aW8vcHVibGlzaGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFrRDtBQUNXO0FBQ0s7QUFDbkI7QUFDUTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUhBQW1IO0FBQ3JJO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHNFQUFxQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDREQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3REFBWTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwrQkFBK0IsRUFBRSxnRkFBYztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG1CQUFtQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLDRCQUE0QixJQUFJO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsZ0JBQWdCLElBQUksb0JBQW9CO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELGdCQUFnQixJQUFJLG9CQUFvQjtBQUNwRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxnQkFBZ0IsSUFBSSxvQkFBb0I7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQixJQUFJLG9CQUFvQjtBQUMxRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGdFQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxRQUFRO0FBQ3pFO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsiL1VzZXJzL21pY2hhZWxkdXJhbnRlL2FpIGRldi9jZS1odWIvcHJvamVjdHMvdHJhZGVycmEvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BzZWdtZW50L2FuYWx5dGljcy1ub2RlL2Rpc3QvZXNtL3BsdWdpbnMvc2VnbWVudGlvL3B1Ymxpc2hlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiYWNrb2ZmIH0gZnJvbSAnQHNlZ21lbnQvYW5hbHl0aWNzLWNvcmUnO1xuaW1wb3J0IHsgdHJ5Q3JlYXRlRm9ybWF0dGVkVXJsIH0gZnJvbSAnLi4vLi4vbGliL2NyZWF0ZS11cmwnO1xuaW1wb3J0IHsgY3JlYXRlRGVmZXJyZWQgfSBmcm9tICdAc2VnbWVudC9hbmFseXRpY3MtZ2VuZXJpYy11dGlscyc7XG5pbXBvcnQgeyBDb250ZXh0QmF0Y2ggfSBmcm9tICcuL2NvbnRleHQtYmF0Y2gnO1xuaW1wb3J0IHsgVG9rZW5NYW5hZ2VyIH0gZnJvbSAnLi4vLi4vbGliL3Rva2VuLW1hbmFnZXInO1xuZnVuY3Rpb24gc2xlZXAodGltZW91dEluTXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgdGltZW91dEluTXMpKTtcbn1cbmZ1bmN0aW9uIG5vb3AoKSB7IH1cbi8qKlxuICogVGhlIFB1Ymxpc2hlciBpcyByZXNwb25zaWJsZSBmb3IgYmF0Y2hpbmcgZXZlbnRzIGFuZCBzZW5kaW5nIHRoZW0gdG8gdGhlIFNlZ21lbnQgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgUHVibGlzaGVyIHtcbiAgICBwZW5kaW5nRmx1c2hUaW1lb3V0O1xuICAgIF9iYXRjaDtcbiAgICBfZmx1c2hJbnRlcnZhbDtcbiAgICBfZmx1c2hBdDtcbiAgICBfbWF4UmV0cmllcztcbiAgICBfdXJsO1xuICAgIF9mbHVzaFBlbmRpbmdJdGVtc0NvdW50O1xuICAgIF9odHRwUmVxdWVzdFRpbWVvdXQ7XG4gICAgX2VtaXR0ZXI7XG4gICAgX2Rpc2FibGU7XG4gICAgX2h0dHBDbGllbnQ7XG4gICAgX3dyaXRlS2V5O1xuICAgIF90b2tlbk1hbmFnZXI7XG4gICAgY29uc3RydWN0b3IoeyBob3N0LCBwYXRoLCBtYXhSZXRyaWVzLCBmbHVzaEF0LCBmbHVzaEludGVydmFsLCB3cml0ZUtleSwgaHR0cFJlcXVlc3RUaW1lb3V0LCBodHRwQ2xpZW50LCBkaXNhYmxlLCBvYXV0aFNldHRpbmdzLCB9LCBlbWl0dGVyKSB7XG4gICAgICAgIHRoaXMuX2VtaXR0ZXIgPSBlbWl0dGVyO1xuICAgICAgICB0aGlzLl9tYXhSZXRyaWVzID0gbWF4UmV0cmllcztcbiAgICAgICAgdGhpcy5fZmx1c2hBdCA9IE1hdGgubWF4KGZsdXNoQXQsIDEpO1xuICAgICAgICB0aGlzLl9mbHVzaEludGVydmFsID0gZmx1c2hJbnRlcnZhbDtcbiAgICAgICAgdGhpcy5fdXJsID0gdHJ5Q3JlYXRlRm9ybWF0dGVkVXJsKGhvc3QgPz8gJ2h0dHBzOi8vYXBpLnNlZ21lbnQuaW8nLCBwYXRoID8/ICcvdjEvYmF0Y2gnKTtcbiAgICAgICAgdGhpcy5faHR0cFJlcXVlc3RUaW1lb3V0ID0gaHR0cFJlcXVlc3RUaW1lb3V0ID8/IDEwMDAwO1xuICAgICAgICB0aGlzLl9kaXNhYmxlID0gQm9vbGVhbihkaXNhYmxlKTtcbiAgICAgICAgdGhpcy5faHR0cENsaWVudCA9IGh0dHBDbGllbnQ7XG4gICAgICAgIHRoaXMuX3dyaXRlS2V5ID0gd3JpdGVLZXk7XG4gICAgICAgIGlmIChvYXV0aFNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIgPSBuZXcgVG9rZW5NYW5hZ2VyKHtcbiAgICAgICAgICAgICAgICAuLi5vYXV0aFNldHRpbmdzLFxuICAgICAgICAgICAgICAgIGh0dHBDbGllbnQ6IG9hdXRoU2V0dGluZ3MuaHR0cENsaWVudCA/PyBodHRwQ2xpZW50LFxuICAgICAgICAgICAgICAgIG1heFJldHJpZXM6IG9hdXRoU2V0dGluZ3MubWF4UmV0cmllcyA/PyBtYXhSZXRyaWVzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQmF0Y2goKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nRmx1c2hUaW1lb3V0KTtcbiAgICAgICAgY29uc3QgYmF0Y2ggPSBuZXcgQ29udGV4dEJhdGNoKHRoaXMuX2ZsdXNoQXQpO1xuICAgICAgICB0aGlzLl9iYXRjaCA9IGJhdGNoO1xuICAgICAgICB0aGlzLnBlbmRpbmdGbHVzaFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChiYXRjaCA9PT0gdGhpcy5fYmF0Y2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXRjaCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGlmIChiYXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoYmF0Y2gpLmNhdGNoKG5vb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLl9mbHVzaEludGVydmFsKTtcbiAgICAgICAgcmV0dXJuIGJhdGNoO1xuICAgIH1cbiAgICBjbGVhckJhdGNoKCkge1xuICAgICAgICB0aGlzLnBlbmRpbmdGbHVzaFRpbWVvdXQgJiYgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0ZsdXNoVGltZW91dCk7XG4gICAgICAgIHRoaXMuX2JhdGNoID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBmbHVzaChwZW5kaW5nSXRlbXNDb3VudCkge1xuICAgICAgICBpZiAoIXBlbmRpbmdJdGVtc0NvdW50KSB7XG4gICAgICAgICAgICAvLyBpZiBudW1iZXIgb2YgcGVuZGluZyBpdGVtcyBpcyAwLCB0aGVyZSB3aWxsIG5ldmVyIGJlIGFueXRoaW5nIGVsc2UgZW50ZXJpbmcgdGhlIGJhdGNoLCBzaW5jZSB0aGUgYXBwIGlzIGNsb3NlZC5cbiAgICAgICAgICAgIGlmICh0aGlzLl90b2tlbk1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl90b2tlbk1hbmFnZXIuc3RvcFBvbGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2ZsdXNoUGVuZGluZ0l0ZW1zQ291bnQgPSBwZW5kaW5nSXRlbXNDb3VudDtcbiAgICAgICAgLy8gaWYgYmF0Y2ggaXMgZW1wdHksIHRoZXJlJ3Mgbm90aGluZyB0byBmbHVzaCwgYW5kIHdoZW4gdGhpbmdzIGNvbWUgaW4sIGVucXVldWUgd2lsbCBoYW5kbGUgdGhlbS5cbiAgICAgICAgaWYgKCF0aGlzLl9iYXRjaClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgLy8gdGhlIG51bWJlciBvZiBnbG9iYWxseSBwZW5kaW5nIGl0ZW1zIHdpbGwgYWx3YXlzIGJlIGxhcmdlciBvciB0aGUgc2FtZSBhcyBiYXRjaCBzaXplLlxuICAgICAgICAvLyBBbnkgbWlzbWF0Y2ggaXMgYmVjYXVzZSBzb21lIGdsb2JhbGx5IHBlbmRpbmcgaXRlbXMgYXJlIGluIHBsdWdpbnMuXG4gICAgICAgIGNvbnN0IGlzRXhwZWN0aW5nTm9Nb3JlSXRlbXMgPSB0aGlzLl9iYXRjaC5sZW5ndGggPT09IHBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICBpZiAoaXNFeHBlY3RpbmdOb01vcmVJdGVtcykge1xuICAgICAgICAgICAgdGhpcy5zZW5kKHRoaXMuX2JhdGNoKVxuICAgICAgICAgICAgICAgIC5jYXRjaChub29wKVxuICAgICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBzdG9wIHBvbGxlciBzbyBwcm9ncmFtIGNhbiBleGl0ICgpLlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90b2tlbk1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG9rZW5NYW5hZ2VyLnN0b3BQb2xsZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCYXRjaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVucXVldWVzIHRoZSBjb250ZXh0IGZvciBmdXR1cmUgZGVsaXZlcnkuXG4gICAgICogQHBhcmFtIGN0eCAtIENvbnRleHQgY29udGFpbmluZyBhIFNlZ21lbnQgZXZlbnQuXG4gICAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgY29udGV4dCBhZnRlciB0aGUgZXZlbnQgaGFzIGJlZW4gZGVsaXZlcmVkLlxuICAgICAqL1xuICAgIGVucXVldWUoY3R4KSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gdGhpcy5fYmF0Y2ggPz8gdGhpcy5jcmVhdGVCYXRjaCgpO1xuICAgICAgICBjb25zdCB7IHByb21pc2U6IGN0eFByb21pc2UsIHJlc29sdmUgfSA9IGNyZWF0ZURlZmVycmVkKCk7XG4gICAgICAgIGNvbnN0IHBlbmRpbmdJdGVtID0ge1xuICAgICAgICAgICAgY29udGV4dDogY3R4LFxuICAgICAgICAgICAgcmVzb2x2ZXI6IHJlc29sdmUsXG4gICAgICAgIH07XG4gICAgICAgIC8qXG4gICAgICAgICAgVGhlIGZvbGxvd2luZyBsb2dpYyBlbnN1cmVzIHRoYXQgYSBiYXRjaCBpcyBuZXZlciBvcnBoYW5lZCxcbiAgICAgICAgICBhbmQgaXMgYWx3YXlzIHNlbnQgYmVmb3JlIGEgbmV3IGJhdGNoIGlzIGNyZWF0ZWQuXG4gICAgXG4gICAgICAgICAgQWRkIGFuIGV2ZW50IHRvIHRoZSBleGlzdGluZyBiYXRjaC5cbiAgICAgICAgICAgIFN1Y2Nlc3M6IENoZWNrIGlmIGJhdGNoIGlzIGZ1bGwgb3Igbm8gbW9yZSBpdGVtcyBhcmUgZXhwZWN0ZWQgdG8gY29tZSBpbiAoaS5lLiBjbG9zaW5nKS4gSWYgc28sIHNlbmQgYmF0Y2guXG4gICAgICAgICAgICBGYWlsdXJlOiBBc3N1bWUgZXZlbnQgaXMgdG9vIGJpZyB0byBmaXQgaW4gY3VycmVudCBiYXRjaCAtIHNlbmQgZXhpc3RpbmcgYmF0Y2guXG4gICAgICAgICAgICAgIEFkZCBhbiBldmVudCB0byB0aGUgbmV3IGJhdGNoLlxuICAgICAgICAgICAgICAgIFN1Y2Nlc3M6IENoZWNrIGlmIGJhdGNoIGlzIGZ1bGwgYW5kIHNlbmQgaWYgaXQgaXMuXG4gICAgICAgICAgICAgICAgRmFpbHVyZTogRXZlbnQgZXhjZWVkcyBtYXhpbXVtIHNpemUgKGl0IHdpbGwgbmV2ZXIgZml0KSwgZmFpbCB0aGUgZXZlbnQuXG4gICAgICAgICovXG4gICAgICAgIGNvbnN0IGFkZFN0YXR1cyA9IGJhdGNoLnRyeUFkZChwZW5kaW5nSXRlbSk7XG4gICAgICAgIGlmIChhZGRTdGF0dXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc3QgaXNFeHBlY3RpbmdOb01vcmVJdGVtcyA9IGJhdGNoLmxlbmd0aCA9PT0gdGhpcy5fZmx1c2hQZW5kaW5nSXRlbXNDb3VudDtcbiAgICAgICAgICAgIGNvbnN0IGlzRnVsbCA9IGJhdGNoLmxlbmd0aCA9PT0gdGhpcy5fZmx1c2hBdDtcbiAgICAgICAgICAgIGlmIChpc0Z1bGwgfHwgaXNFeHBlY3RpbmdOb01vcmVJdGVtcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VuZChiYXRjaCkuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3R4UHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB0aGUgbmV3IGl0ZW0gY2F1c2VzIHRoZSBtYXhpbWltdW0gZXZlbnQgc2l6ZSB0byBiZSBleGNlZWRlZCwgc2VuZCB0aGUgY3VycmVudCBiYXRjaCBhbmQgY3JlYXRlIGEgbmV3IG9uZS5cbiAgICAgICAgaWYgKGJhdGNoLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZW5kKGJhdGNoKS5jYXRjaChub29wKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJCYXRjaCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZhbGxiYWNrQmF0Y2ggPSB0aGlzLmNyZWF0ZUJhdGNoKCk7XG4gICAgICAgIGNvbnN0IGZiQWRkU3RhdHVzID0gZmFsbGJhY2tCYXRjaC50cnlBZGQocGVuZGluZ0l0ZW0pO1xuICAgICAgICBpZiAoZmJBZGRTdGF0dXMuc3VjY2Vzcykge1xuICAgICAgICAgICAgY29uc3QgaXNFeHBlY3RpbmdOb01vcmVJdGVtcyA9IGZhbGxiYWNrQmF0Y2gubGVuZ3RoID09PSB0aGlzLl9mbHVzaFBlbmRpbmdJdGVtc0NvdW50O1xuICAgICAgICAgICAgaWYgKGlzRXhwZWN0aW5nTm9Nb3JlSXRlbXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoZmFsbGJhY2tCYXRjaCkuY2F0Y2gobm9vcCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckJhdGNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3R4UHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHRoaXMgc2hvdWxkIG9ubHkgb2NjdXIgaWYgbWF4IGV2ZW50IHNpemUgaXMgZXhjZWVkZWRcbiAgICAgICAgICAgIGN0eC5zZXRGYWlsZWREZWxpdmVyeSh7XG4gICAgICAgICAgICAgICAgcmVhc29uOiBuZXcgRXJyb3IoZmJBZGRTdGF0dXMubWVzc2FnZSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoY3R4KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBzZW5kKGJhdGNoKSB7XG4gICAgICAgIGlmICh0aGlzLl9mbHVzaFBlbmRpbmdJdGVtc0NvdW50KSB7XG4gICAgICAgICAgICB0aGlzLl9mbHVzaFBlbmRpbmdJdGVtc0NvdW50IC09IGJhdGNoLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBldmVudHMgPSBiYXRjaC5nZXRFdmVudHMoKTtcbiAgICAgICAgY29uc3QgbWF4QXR0ZW1wdHMgPSB0aGlzLl9tYXhSZXRyaWVzICsgMTtcbiAgICAgICAgbGV0IGN1cnJlbnRBdHRlbXB0ID0gMDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRBdHRlbXB0IDwgbWF4QXR0ZW1wdHMpIHtcbiAgICAgICAgICAgIGN1cnJlbnRBdHRlbXB0Kys7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdGVkUmV0cnlUaW1lb3V0O1xuICAgICAgICAgICAgbGV0IGZhaWx1cmVSZWFzb247XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kaXNhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBiYXRjaC5yZXNvbHZlRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBhdXRoU3RyaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90b2tlbk1hbmFnZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBhd2FpdCB0aGlzLl90b2tlbk1hbmFnZXIuZ2V0QWNjZXNzVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRva2VuICYmIHRva2VuLmFjY2Vzc190b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aFN0cmluZyA9IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NfdG9rZW59YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdhbmFseXRpY3Mtbm9kZS1uZXh0L2xhdGVzdCcsXG4gICAgICAgICAgICAgICAgICAgIC4uLihhdXRoU3RyaW5nID8geyBBdXRob3JpemF0aW9uOiBhdXRoU3RyaW5nIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMuX3VybCxcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdGNoOiBldmVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB3cml0ZUtleTogdGhpcy5fd3JpdGVLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW50QXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBodHRwUmVxdWVzdFRpbWVvdXQ6IHRoaXMuX2h0dHBSZXF1ZXN0VGltZW91dCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuX2VtaXR0ZXIuZW1pdCgnaHR0cF9yZXF1ZXN0Jywge1xuICAgICAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0LmJvZHksXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG4gICAgICAgICAgICAgICAgICAgIHVybDogcmVxdWVzdC51cmwsXG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuX2h0dHBDbGllbnQubWFrZVJlcXVlc3QocmVxdWVzdCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSAyMDAgJiYgcmVzcG9uc2Uuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN1Y2Nlc3NmdWxseSBzZW50IGV2ZW50cywgc28gZXhpdCFcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2gucmVzb2x2ZUV2ZW50cygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX3Rva2VuTWFuYWdlciAmJlxuICAgICAgICAgICAgICAgICAgICAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDAgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5zdGF0dXMgPT09IDQwMykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmV0cnkgd2l0aCBhIG5ldyBPQXV0aCB0b2tlbiBpZiB3ZSBoYXZlIE9BdXRoIGRhdGFcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG9rZW5NYW5hZ2VyLmNsZWFyVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZVJlYXNvbiA9IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBodHRwczovL3NlZ21lbnQuY29tL2RvY3MvY29ubmVjdGlvbnMvc291cmNlcy9jYXRhbG9nL2xpYnJhcmllcy9zZXJ2ZXIvaHR0cC1hcGkvI21heC1yZXF1ZXN0LXNpemVcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBlaXRoZXIgbWFsZm9ybWVkIG9yIHNpemUgZXhjZWVkZWQgLSBkb24ndCByZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZUZhaWxlZEJhdGNoKGJhdGNoLCBuZXcgRXJyb3IoYFske3Jlc3BvbnNlLnN0YXR1c31dICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmF0ZSBsaW1pdGVkLCB3YWl0IGZvciB0aGUgcmVzZXQgdGltZVxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuaGVhZGVycyAmJiAneC1yYXRlbGltaXQtcmVzZXQnIGluIHJlc3BvbnNlLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJhdGVMaW1pdFJlc2V0VGltZXN0YW1wID0gcGFyc2VJbnQocmVzcG9uc2UuaGVhZGVyc1sneC1yYXRlbGltaXQtcmVzZXQnXSwgMTApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluaXRlKHJhdGVMaW1pdFJlc2V0VGltZXN0YW1wKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFJldHJ5VGltZW91dCA9IHJhdGVMaW1pdFJlc2V0VGltZXN0YW1wIC0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmYWlsdXJlUmVhc29uID0gbmV3IEVycm9yKGBbJHtyZXNwb25zZS5zdGF0dXN9XSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBUcmVhdCBvdGhlciBlcnJvcnMgYXMgdHJhbnNpZW50IGFuZCByZXRyeS5cbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZVJlYXNvbiA9IG5ldyBFcnJvcihgWyR7cmVzcG9uc2Uuc3RhdHVzfV0gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvLyBOZXR3b3JrIGVycm9ycyBnZXQgdGhyb3duLCByZXRyeSB0aGVtLlxuICAgICAgICAgICAgICAgIGZhaWx1cmVSZWFzb24gPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5hbCBhdHRlbXB0IGZhaWxlZCwgdXBkYXRlIGNvbnRleHQgYW5kIHJlc29sdmUgZXZlbnRzLlxuICAgICAgICAgICAgaWYgKGN1cnJlbnRBdHRlbXB0ID09PSBtYXhBdHRlbXB0cykge1xuICAgICAgICAgICAgICAgIHJlc29sdmVGYWlsZWRCYXRjaChiYXRjaCwgZmFpbHVyZVJlYXNvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0cnkgYWZ0ZXIgYXR0ZW1wdC1iYXNlZCBiYWNrb2ZmLlxuICAgICAgICAgICAgYXdhaXQgc2xlZXAocmVxdWVzdGVkUmV0cnlUaW1lb3V0XG4gICAgICAgICAgICAgICAgPyByZXF1ZXN0ZWRSZXRyeVRpbWVvdXRcbiAgICAgICAgICAgICAgICA6IGJhY2tvZmYoe1xuICAgICAgICAgICAgICAgICAgICBhdHRlbXB0OiBjdXJyZW50QXR0ZW1wdCxcbiAgICAgICAgICAgICAgICAgICAgbWluVGltZW91dDogMjUsXG4gICAgICAgICAgICAgICAgICAgIG1heFRpbWVvdXQ6IDEwMDAsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gcmVzb2x2ZUZhaWxlZEJhdGNoKGJhdGNoLCByZWFzb24pIHtcbiAgICBiYXRjaC5nZXRDb250ZXh0cygpLmZvckVhY2goKGN0eCkgPT4gY3R4LnNldEZhaWxlZERlbGl2ZXJ5KHsgcmVhc29uIH0pKTtcbiAgICBiYXRjaC5yZXNvbHZlRXZlbnRzKCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1wdWJsaXNoZXIuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/dist/esm/plugins/segmentio/publisher.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@segment/analytics-node/node_modules/node-fetch/lib/index.mjs":
/*!************************************************************************************!*\
  !*** ./node_modules/@segment/analytics-node/node_modules/node-fetch/lib/index.mjs ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AbortError: () => (/* binding */ AbortError),\n/* harmony export */   FetchError: () => (/* binding */ FetchError),\n/* harmony export */   Headers: () => (/* binding */ Headers),\n/* harmony export */   Request: () => (/* binding */ Request),\n/* harmony export */   Response: () => (/* binding */ Response),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var http__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! http */ \"http\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var whatwg_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! whatwg-url */ \"(rsc)/./node_modules/whatwg-url/lib/public-api.js\");\n/* harmony import */ var https__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! https */ \"https\");\n/* harmony import */ var zlib__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zlib */ \"zlib\");\n\n\n\n\n\n\n\n// Based on https://github.com/tmpvar/jsdom/blob/aa85b2abf07766ff7bf5c1f6daafb3726f2f2db5/lib/jsdom/living/blob.js\n\n// fix for \"Readable\" isn't a named export issue\nconst Readable = stream__WEBPACK_IMPORTED_MODULE_0__.Readable;\n\nconst BUFFER = Symbol('buffer');\nconst TYPE = Symbol('type');\n\nclass Blob {\n\tconstructor() {\n\t\tthis[TYPE] = '';\n\n\t\tconst blobParts = arguments[0];\n\t\tconst options = arguments[1];\n\n\t\tconst buffers = [];\n\t\tlet size = 0;\n\n\t\tif (blobParts) {\n\t\t\tconst a = blobParts;\n\t\t\tconst length = Number(a.length);\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tconst element = a[i];\n\t\t\t\tlet buffer;\n\t\t\t\tif (element instanceof Buffer) {\n\t\t\t\t\tbuffer = element;\n\t\t\t\t} else if (ArrayBuffer.isView(element)) {\n\t\t\t\t\tbuffer = Buffer.from(element.buffer, element.byteOffset, element.byteLength);\n\t\t\t\t} else if (element instanceof ArrayBuffer) {\n\t\t\t\t\tbuffer = Buffer.from(element);\n\t\t\t\t} else if (element instanceof Blob) {\n\t\t\t\t\tbuffer = element[BUFFER];\n\t\t\t\t} else {\n\t\t\t\t\tbuffer = Buffer.from(typeof element === 'string' ? element : String(element));\n\t\t\t\t}\n\t\t\t\tsize += buffer.length;\n\t\t\t\tbuffers.push(buffer);\n\t\t\t}\n\t\t}\n\n\t\tthis[BUFFER] = Buffer.concat(buffers);\n\n\t\tlet type = options && options.type !== undefined && String(options.type).toLowerCase();\n\t\tif (type && !/[^\\u0020-\\u007E]/.test(type)) {\n\t\t\tthis[TYPE] = type;\n\t\t}\n\t}\n\tget size() {\n\t\treturn this[BUFFER].length;\n\t}\n\tget type() {\n\t\treturn this[TYPE];\n\t}\n\ttext() {\n\t\treturn Promise.resolve(this[BUFFER].toString());\n\t}\n\tarrayBuffer() {\n\t\tconst buf = this[BUFFER];\n\t\tconst ab = buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\treturn Promise.resolve(ab);\n\t}\n\tstream() {\n\t\tconst readable = new Readable();\n\t\treadable._read = function () {};\n\t\treadable.push(this[BUFFER]);\n\t\treadable.push(null);\n\t\treturn readable;\n\t}\n\ttoString() {\n\t\treturn '[object Blob]';\n\t}\n\tslice() {\n\t\tconst size = this.size;\n\n\t\tconst start = arguments[0];\n\t\tconst end = arguments[1];\n\t\tlet relativeStart, relativeEnd;\n\t\tif (start === undefined) {\n\t\t\trelativeStart = 0;\n\t\t} else if (start < 0) {\n\t\t\trelativeStart = Math.max(size + start, 0);\n\t\t} else {\n\t\t\trelativeStart = Math.min(start, size);\n\t\t}\n\t\tif (end === undefined) {\n\t\t\trelativeEnd = size;\n\t\t} else if (end < 0) {\n\t\t\trelativeEnd = Math.max(size + end, 0);\n\t\t} else {\n\t\t\trelativeEnd = Math.min(end, size);\n\t\t}\n\t\tconst span = Math.max(relativeEnd - relativeStart, 0);\n\n\t\tconst buffer = this[BUFFER];\n\t\tconst slicedBuffer = buffer.slice(relativeStart, relativeStart + span);\n\t\tconst blob = new Blob([], { type: arguments[2] });\n\t\tblob[BUFFER] = slicedBuffer;\n\t\treturn blob;\n\t}\n}\n\nObject.defineProperties(Blob.prototype, {\n\tsize: { enumerable: true },\n\ttype: { enumerable: true },\n\tslice: { enumerable: true }\n});\n\nObject.defineProperty(Blob.prototype, Symbol.toStringTag, {\n\tvalue: 'Blob',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * fetch-error.js\n *\n * FetchError interface for operational errors\n */\n\n/**\n * Create FetchError instance\n *\n * @param   String      message      Error message for human\n * @param   String      type         Error type for machine\n * @param   String      systemError  For Node.js system error\n * @return  FetchError\n */\nfunction FetchError(message, type, systemError) {\n  Error.call(this, message);\n\n  this.message = message;\n  this.type = type;\n\n  // when err.type is `system`, err.code contains system error code\n  if (systemError) {\n    this.code = this.errno = systemError.code;\n  }\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nFetchError.prototype = Object.create(Error.prototype);\nFetchError.prototype.constructor = FetchError;\nFetchError.prototype.name = 'FetchError';\n\nlet convert;\ntry {\n\tconvert = require('encoding').convert;\n} catch (e) {}\n\nconst INTERNALS = Symbol('Body internals');\n\n// fix an issue where \"PassThrough\" isn't a named export for node <10\nconst PassThrough = stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough;\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nfunction Body(body) {\n\tvar _this = this;\n\n\tvar _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t    _ref$size = _ref.size;\n\n\tlet size = _ref$size === undefined ? 0 : _ref$size;\n\tvar _ref$timeout = _ref.timeout;\n\tlet timeout = _ref$timeout === undefined ? 0 : _ref$timeout;\n\n\tif (body == null) {\n\t\t// body is undefined or null\n\t\tbody = null;\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\tbody = Buffer.from(body.toString());\n\t} else if (isBlob(body)) ; else if (Buffer.isBuffer(body)) ; else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\tbody = Buffer.from(body);\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t} else if (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__) ; else {\n\t\t// none of the above\n\t\t// coerce to string then buffer\n\t\tbody = Buffer.from(String(body));\n\t}\n\tthis[INTERNALS] = {\n\t\tbody,\n\t\tdisturbed: false,\n\t\terror: null\n\t};\n\tthis.size = size;\n\tthis.timeout = timeout;\n\n\tif (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__) {\n\t\tbody.on('error', function (err) {\n\t\t\tconst error = err.name === 'AbortError' ? err : new FetchError(`Invalid response body while trying to fetch ${_this.url}: ${err.message}`, 'system', err);\n\t\t\t_this[INTERNALS].error = error;\n\t\t});\n\t}\n}\n\nBody.prototype = {\n\tget body() {\n\t\treturn this[INTERNALS].body;\n\t},\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t},\n\n\t/**\n  * Decode response as ArrayBuffer\n  *\n  * @return  Promise\n  */\n\tarrayBuffer() {\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n\t\t});\n\t},\n\n\t/**\n  * Return raw response as Blob\n  *\n  * @return Promise\n  */\n\tblob() {\n\t\tlet ct = this.headers && this.headers.get('content-type') || '';\n\t\treturn consumeBody.call(this).then(function (buf) {\n\t\t\treturn Object.assign(\n\t\t\t// Prevent copying\n\t\t\tnew Blob([], {\n\t\t\t\ttype: ct.toLowerCase()\n\t\t\t}), {\n\t\t\t\t[BUFFER]: buf\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n  * Decode response as json\n  *\n  * @return  Promise\n  */\n\tjson() {\n\t\tvar _this2 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(buffer.toString());\n\t\t\t} catch (err) {\n\t\t\t\treturn Body.Promise.reject(new FetchError(`invalid json response body at ${_this2.url} reason: ${err.message}`, 'invalid-json'));\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n  * Decode response as text\n  *\n  * @return  Promise\n  */\n\ttext() {\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn buffer.toString();\n\t\t});\n\t},\n\n\t/**\n  * Decode response as buffer (non-spec api)\n  *\n  * @return  Promise\n  */\n\tbuffer() {\n\t\treturn consumeBody.call(this);\n\t},\n\n\t/**\n  * Decode response as text, while automatically detecting the encoding and\n  * trying to decode to UTF-8 (non-spec api)\n  *\n  * @return  Promise\n  */\n\ttextConverted() {\n\t\tvar _this3 = this;\n\n\t\treturn consumeBody.call(this).then(function (buffer) {\n\t\t\treturn convertBody(buffer, _this3.headers);\n\t\t});\n\t}\n};\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: { enumerable: true },\n\tbodyUsed: { enumerable: true },\n\tarrayBuffer: { enumerable: true },\n\tblob: { enumerable: true },\n\tjson: { enumerable: true },\n\ttext: { enumerable: true }\n});\n\nBody.mixIn = function (proto) {\n\tfor (const name of Object.getOwnPropertyNames(Body.prototype)) {\n\t\t// istanbul ignore else: future proof\n\t\tif (!(name in proto)) {\n\t\t\tconst desc = Object.getOwnPropertyDescriptor(Body.prototype, name);\n\t\t\tObject.defineProperty(proto, name, desc);\n\t\t}\n\t}\n};\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return  Promise\n */\nfunction consumeBody() {\n\tvar _this4 = this;\n\n\tif (this[INTERNALS].disturbed) {\n\t\treturn Body.Promise.reject(new TypeError(`body used already for: ${this.url}`));\n\t}\n\n\tthis[INTERNALS].disturbed = true;\n\n\tif (this[INTERNALS].error) {\n\t\treturn Body.Promise.reject(this[INTERNALS].error);\n\t}\n\n\tlet body = this.body;\n\n\t// body is null\n\tif (body === null) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is blob\n\tif (isBlob(body)) {\n\t\tbody = body.stream();\n\t}\n\n\t// body is buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn Body.Promise.resolve(body);\n\t}\n\n\t// istanbul ignore if: should never happen\n\tif (!(body instanceof stream__WEBPACK_IMPORTED_MODULE_0__)) {\n\t\treturn Body.Promise.resolve(Buffer.alloc(0));\n\t}\n\n\t// body is stream\n\t// get ready to actually consume the body\n\tlet accum = [];\n\tlet accumBytes = 0;\n\tlet abort = false;\n\n\treturn new Body.Promise(function (resolve, reject) {\n\t\tlet resTimeout;\n\n\t\t// allow timeout on slow response body\n\t\tif (_this4.timeout) {\n\t\t\tresTimeout = setTimeout(function () {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`Response timeout while trying to fetch ${_this4.url} (over ${_this4.timeout}ms)`, 'body-timeout'));\n\t\t\t}, _this4.timeout);\n\t\t}\n\n\t\t// handle stream errors\n\t\tbody.on('error', function (err) {\n\t\t\tif (err.name === 'AbortError') {\n\t\t\t\t// if the request was aborted, reject with this Error\n\t\t\t\tabort = true;\n\t\t\t\treject(err);\n\t\t\t} else {\n\t\t\t\t// other errors, such as incorrect content-encoding\n\t\t\t\treject(new FetchError(`Invalid response body while trying to fetch ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\n\t\tbody.on('data', function (chunk) {\n\t\t\tif (abort || chunk === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (_this4.size && accumBytes + chunk.length > _this4.size) {\n\t\t\t\tabort = true;\n\t\t\t\treject(new FetchError(`content size at ${_this4.url} over limit: ${_this4.size}`, 'max-size'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t});\n\n\t\tbody.on('end', function () {\n\t\t\tif (abort) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(resTimeout);\n\n\t\t\ttry {\n\t\t\t\tresolve(Buffer.concat(accum, accumBytes));\n\t\t\t} catch (err) {\n\t\t\t\t// handle streams that have accumulated too much data (issue #414)\n\t\t\t\treject(new FetchError(`Could not create Buffer from response body for ${_this4.url}: ${err.message}`, 'system', err));\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Detect buffer encoding and convert to target encoding\n * ref: http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html#determining-the-character-encoding\n *\n * @param   Buffer  buffer    Incoming buffer\n * @param   String  encoding  Target encoding\n * @return  String\n */\nfunction convertBody(buffer, headers) {\n\tif (typeof convert !== 'function') {\n\t\tthrow new Error('The package `encoding` must be installed to use the textConverted() function');\n\t}\n\n\tconst ct = headers.get('content-type');\n\tlet charset = 'utf-8';\n\tlet res, str;\n\n\t// header\n\tif (ct) {\n\t\tres = /charset=([^;]*)/i.exec(ct);\n\t}\n\n\t// no charset in content type, peek at response body for at most 1024 bytes\n\tstr = buffer.slice(0, 1024).toString();\n\n\t// html5\n\tif (!res && str) {\n\t\tres = /<meta.+?charset=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// html4\n\tif (!res && str) {\n\t\tres = /<meta[\\s]+?http-equiv=(['\"])content-type\\1[\\s]+?content=(['\"])(.+?)\\2/i.exec(str);\n\t\tif (!res) {\n\t\t\tres = /<meta[\\s]+?content=(['\"])(.+?)\\1[\\s]+?http-equiv=(['\"])content-type\\3/i.exec(str);\n\t\t\tif (res) {\n\t\t\t\tres.pop(); // drop last quote\n\t\t\t}\n\t\t}\n\n\t\tif (res) {\n\t\t\tres = /charset=(.*)/i.exec(res.pop());\n\t\t}\n\t}\n\n\t// xml\n\tif (!res && str) {\n\t\tres = /<\\?xml.+?encoding=(['\"])(.+?)\\1/i.exec(str);\n\t}\n\n\t// found charset\n\tif (res) {\n\t\tcharset = res.pop();\n\n\t\t// prevent decode issues when sites use incorrect encoding\n\t\t// ref: https://hsivonen.fi/encoding-menu/\n\t\tif (charset === 'gb2312' || charset === 'gbk') {\n\t\t\tcharset = 'gb18030';\n\t\t}\n\t}\n\n\t// turn raw buffers into a single utf-8 buffer\n\treturn convert(buffer, 'UTF-8', charset).toString();\n}\n\n/**\n * Detect a URLSearchParams object\n * ref: https://github.com/bitinn/node-fetch/issues/296#issuecomment-307598143\n *\n * @param   Object  obj     Object to detect by type or brand\n * @return  String\n */\nfunction isURLSearchParams(obj) {\n\t// Duck-typing as a necessary condition.\n\tif (typeof obj !== 'object' || typeof obj.append !== 'function' || typeof obj.delete !== 'function' || typeof obj.get !== 'function' || typeof obj.getAll !== 'function' || typeof obj.has !== 'function' || typeof obj.set !== 'function') {\n\t\treturn false;\n\t}\n\n\t// Brand-checking and more duck-typing as optional condition.\n\treturn obj.constructor.name === 'URLSearchParams' || Object.prototype.toString.call(obj) === '[object URLSearchParams]' || typeof obj.sort === 'function';\n}\n\n/**\n * Check if `obj` is a W3C `Blob` object (which `File` inherits from)\n * @param  {*} obj\n * @return {boolean}\n */\nfunction isBlob(obj) {\n\treturn typeof obj === 'object' && typeof obj.arrayBuffer === 'function' && typeof obj.type === 'string' && typeof obj.stream === 'function' && typeof obj.constructor === 'function' && typeof obj.constructor.name === 'string' && /^(Blob|File)$/.test(obj.constructor.name) && /^(Blob|File)$/.test(obj[Symbol.toStringTag]);\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed  instance  Response or Request instance\n * @return  Mixed\n */\nfunction clone(instance) {\n\tlet p1, p2;\n\tlet body = instance.body;\n\n\t// don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__ && typeof body.getBoundary !== 'function') {\n\t\t// tee instance body\n\t\tp1 = new PassThrough();\n\t\tp2 = new PassThrough();\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].body = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n}\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param   Mixed  instance  Any options.body input\n */\nfunction extractContentType(body) {\n\tif (body === null) {\n\t\t// body is null\n\t\treturn null;\n\t} else if (typeof body === 'string') {\n\t\t// body is string\n\t\treturn 'text/plain;charset=UTF-8';\n\t} else if (isURLSearchParams(body)) {\n\t\t// body is a URLSearchParams\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t} else if (isBlob(body)) {\n\t\t// body is blob\n\t\treturn body.type || null;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn null;\n\t} else if (Object.prototype.toString.call(body) === '[object ArrayBuffer]') {\n\t\t// body is ArrayBuffer\n\t\treturn null;\n\t} else if (ArrayBuffer.isView(body)) {\n\t\t// body is ArrayBufferView\n\t\treturn null;\n\t} else if (typeof body.getBoundary === 'function') {\n\t\t// detect form data input from form-data module\n\t\treturn `multipart/form-data;boundary=${body.getBoundary()}`;\n\t} else if (body instanceof stream__WEBPACK_IMPORTED_MODULE_0__) {\n\t\t// body is stream\n\t\t// can't really do much about this\n\t\treturn null;\n\t} else {\n\t\t// Body constructor defaults other things to string\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n}\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param   Body    instance   Instance of Body\n * @return  Number?            Number of bytes, or null if not possible\n */\nfunction getTotalBytes(instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\treturn 0;\n\t} else if (isBlob(body)) {\n\t\treturn body.size;\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\treturn body.length;\n\t} else if (body && typeof body.getLengthSync === 'function') {\n\t\t// detect form data input from form-data module\n\t\tif (body._lengthRetrievers && body._lengthRetrievers.length == 0 || // 1.x\n\t\tbody.hasKnownLength && body.hasKnownLength()) {\n\t\t\t// 2.x\n\t\t\treturn body.getLengthSync();\n\t\t}\n\t\treturn null;\n\t} else {\n\t\t// body is stream\n\t\treturn null;\n\t}\n}\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param   Body    instance   Instance of Body\n * @return  Void\n */\nfunction writeToStream(dest, instance) {\n\tconst body = instance.body;\n\n\n\tif (body === null) {\n\t\t// body is null\n\t\tdest.end();\n\t} else if (isBlob(body)) {\n\t\tbody.stream().pipe(dest);\n\t} else if (Buffer.isBuffer(body)) {\n\t\t// body is buffer\n\t\tdest.write(body);\n\t\tdest.end();\n\t} else {\n\t\t// body is stream\n\t\tbody.pipe(dest);\n\t}\n}\n\n// expose Promise\nBody.Promise = global.Promise;\n\n/**\n * headers.js\n *\n * Headers class offers convenient helpers\n */\n\nconst invalidTokenRegex = /[^\\^_`a-zA-Z\\-0-9!#$%&'*+.|~]/;\nconst invalidHeaderCharRegex = /[^\\t\\x20-\\x7e\\x80-\\xff]/;\n\nfunction validateName(name) {\n\tname = `${name}`;\n\tif (invalidTokenRegex.test(name) || name === '') {\n\t\tthrow new TypeError(`${name} is not a legal HTTP header name`);\n\t}\n}\n\nfunction validateValue(value) {\n\tvalue = `${value}`;\n\tif (invalidHeaderCharRegex.test(value)) {\n\t\tthrow new TypeError(`${value} is not a legal HTTP header value`);\n\t}\n}\n\n/**\n * Find the key in the map object given a header name.\n *\n * Returns undefined if not found.\n *\n * @param   String  name  Header name\n * @return  String|Undefined\n */\nfunction find(map, name) {\n\tname = name.toLowerCase();\n\tfor (const key in map) {\n\t\tif (key.toLowerCase() === name) {\n\t\t\treturn key;\n\t\t}\n\t}\n\treturn undefined;\n}\n\nconst MAP = Symbol('map');\nclass Headers {\n\t/**\n  * Headers class\n  *\n  * @param   Object  headers  Response headers\n  * @return  Void\n  */\n\tconstructor() {\n\t\tlet init = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n\t\tthis[MAP] = Object.create(null);\n\n\t\tif (init instanceof Headers) {\n\t\t\tconst rawHeaders = init.raw();\n\t\t\tconst headerNames = Object.keys(rawHeaders);\n\n\t\t\tfor (const headerName of headerNames) {\n\t\t\t\tfor (const value of rawHeaders[headerName]) {\n\t\t\t\t\tthis.append(headerName, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// We don't worry about converting prop to ByteString here as append()\n\t\t// will handle it.\n\t\tif (init == null) ; else if (typeof init === 'object') {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\tif (method != null) {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tconst pairs = [];\n\t\t\t\tfor (const pair of init) {\n\t\t\t\t\tif (typeof pair !== 'object' || typeof pair[Symbol.iterator] !== 'function') {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be iterable');\n\t\t\t\t\t}\n\t\t\t\t\tpairs.push(Array.from(pair));\n\t\t\t\t}\n\n\t\t\t\tfor (const pair of pairs) {\n\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t}\n\t\t\t\t\tthis.append(pair[0], pair[1]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// record<ByteString, ByteString>\n\t\t\t\tfor (const key of Object.keys(init)) {\n\t\t\t\t\tconst value = init[key];\n\t\t\t\t\tthis.append(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Provided initializer must be an object');\n\t\t}\n\t}\n\n\t/**\n  * Return combined header value given name\n  *\n  * @param   String  name  Header name\n  * @return  Mixed\n  */\n\tget(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key === undefined) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this[MAP][key].join(', ');\n\t}\n\n\t/**\n  * Iterate over all headers\n  *\n  * @param   Function  callback  Executed for each item with parameters (value, name, thisArg)\n  * @param   Boolean   thisArg   `this` context for callback function\n  * @return  Void\n  */\n\tforEach(callback) {\n\t\tlet thisArg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n\t\tlet pairs = getHeaders(this);\n\t\tlet i = 0;\n\t\twhile (i < pairs.length) {\n\t\t\tvar _pairs$i = pairs[i];\n\t\t\tconst name = _pairs$i[0],\n\t\t\t      value = _pairs$i[1];\n\n\t\t\tcallback.call(thisArg, value, name, this);\n\t\t\tpairs = getHeaders(this);\n\t\t\ti++;\n\t\t}\n\t}\n\n\t/**\n  * Overwrite header values given name\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tset(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tthis[MAP][key !== undefined ? key : name] = [value];\n\t}\n\n\t/**\n  * Append a value onto existing header\n  *\n  * @param   String  name   Header name\n  * @param   String  value  Header value\n  * @return  Void\n  */\n\tappend(name, value) {\n\t\tname = `${name}`;\n\t\tvalue = `${value}`;\n\t\tvalidateName(name);\n\t\tvalidateValue(value);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tthis[MAP][key].push(value);\n\t\t} else {\n\t\t\tthis[MAP][name] = [value];\n\t\t}\n\t}\n\n\t/**\n  * Check for header name existence\n  *\n  * @param   String   name  Header name\n  * @return  Boolean\n  */\n\thas(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\treturn find(this[MAP], name) !== undefined;\n\t}\n\n\t/**\n  * Delete all header values given name\n  *\n  * @param   String  name  Header name\n  * @return  Void\n  */\n\tdelete(name) {\n\t\tname = `${name}`;\n\t\tvalidateName(name);\n\t\tconst key = find(this[MAP], name);\n\t\tif (key !== undefined) {\n\t\t\tdelete this[MAP][key];\n\t\t}\n\t}\n\n\t/**\n  * Return raw headers (non-spec api)\n  *\n  * @return  Object\n  */\n\traw() {\n\t\treturn this[MAP];\n\t}\n\n\t/**\n  * Get an iterator on keys.\n  *\n  * @return  Iterator\n  */\n\tkeys() {\n\t\treturn createHeadersIterator(this, 'key');\n\t}\n\n\t/**\n  * Get an iterator on values.\n  *\n  * @return  Iterator\n  */\n\tvalues() {\n\t\treturn createHeadersIterator(this, 'value');\n\t}\n\n\t/**\n  * Get an iterator on entries.\n  *\n  * This is the default iterator of the Headers object.\n  *\n  * @return  Iterator\n  */\n\t[Symbol.iterator]() {\n\t\treturn createHeadersIterator(this, 'key+value');\n\t}\n}\nHeaders.prototype.entries = Headers.prototype[Symbol.iterator];\n\nObject.defineProperty(Headers.prototype, Symbol.toStringTag, {\n\tvalue: 'Headers',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Headers.prototype, {\n\tget: { enumerable: true },\n\tforEach: { enumerable: true },\n\tset: { enumerable: true },\n\tappend: { enumerable: true },\n\thas: { enumerable: true },\n\tdelete: { enumerable: true },\n\tkeys: { enumerable: true },\n\tvalues: { enumerable: true },\n\tentries: { enumerable: true }\n});\n\nfunction getHeaders(headers) {\n\tlet kind = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'key+value';\n\n\tconst keys = Object.keys(headers[MAP]).sort();\n\treturn keys.map(kind === 'key' ? function (k) {\n\t\treturn k.toLowerCase();\n\t} : kind === 'value' ? function (k) {\n\t\treturn headers[MAP][k].join(', ');\n\t} : function (k) {\n\t\treturn [k.toLowerCase(), headers[MAP][k].join(', ')];\n\t});\n}\n\nconst INTERNAL = Symbol('internal');\n\nfunction createHeadersIterator(target, kind) {\n\tconst iterator = Object.create(HeadersIteratorPrototype);\n\titerator[INTERNAL] = {\n\t\ttarget,\n\t\tkind,\n\t\tindex: 0\n\t};\n\treturn iterator;\n}\n\nconst HeadersIteratorPrototype = Object.setPrototypeOf({\n\tnext() {\n\t\t// istanbul ignore if\n\t\tif (!this || Object.getPrototypeOf(this) !== HeadersIteratorPrototype) {\n\t\t\tthrow new TypeError('Value of `this` is not a HeadersIterator');\n\t\t}\n\n\t\tvar _INTERNAL = this[INTERNAL];\n\t\tconst target = _INTERNAL.target,\n\t\t      kind = _INTERNAL.kind,\n\t\t      index = _INTERNAL.index;\n\n\t\tconst values = getHeaders(target, kind);\n\t\tconst len = values.length;\n\t\tif (index >= len) {\n\t\t\treturn {\n\t\t\t\tvalue: undefined,\n\t\t\t\tdone: true\n\t\t\t};\n\t\t}\n\n\t\tthis[INTERNAL].index = index + 1;\n\n\t\treturn {\n\t\t\tvalue: values[index],\n\t\t\tdone: false\n\t\t};\n\t}\n}, Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));\n\nObject.defineProperty(HeadersIteratorPrototype, Symbol.toStringTag, {\n\tvalue: 'HeadersIterator',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\n/**\n * Export the Headers object in a form that Node.js can consume.\n *\n * @param   Headers  headers\n * @return  Object\n */\nfunction exportNodeCompatibleHeaders(headers) {\n\tconst obj = Object.assign({ __proto__: null }, headers[MAP]);\n\n\t// http.request() only supports string as Host header. This hack makes\n\t// specifying custom Host header possible.\n\tconst hostHeaderKey = find(headers[MAP], 'Host');\n\tif (hostHeaderKey !== undefined) {\n\t\tobj[hostHeaderKey] = obj[hostHeaderKey][0];\n\t}\n\n\treturn obj;\n}\n\n/**\n * Create a Headers object from an object of headers, ignoring those that do\n * not conform to HTTP grammar productions.\n *\n * @param   Object  obj  Object of headers\n * @return  Headers\n */\nfunction createHeadersLenient(obj) {\n\tconst headers = new Headers();\n\tfor (const name of Object.keys(obj)) {\n\t\tif (invalidTokenRegex.test(name)) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (Array.isArray(obj[name])) {\n\t\t\tfor (const val of obj[name]) {\n\t\t\t\tif (invalidHeaderCharRegex.test(val)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (headers[MAP][name] === undefined) {\n\t\t\t\t\theaders[MAP][name] = [val];\n\t\t\t\t} else {\n\t\t\t\t\theaders[MAP][name].push(val);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!invalidHeaderCharRegex.test(obj[name])) {\n\t\t\theaders[MAP][name] = [obj[name]];\n\t\t}\n\t}\n\treturn headers;\n}\n\nconst INTERNALS$1 = Symbol('Response internals');\n\n// fix an issue where \"STATUS_CODES\" aren't a named export for node <10\nconst STATUS_CODES = http__WEBPACK_IMPORTED_MODULE_1__.STATUS_CODES;\n\n/**\n * Response class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nclass Response {\n\tconstructor() {\n\t\tlet body = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tlet opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tBody.call(this, body, opts);\n\n\t\tconst status = opts.status || 200;\n\t\tconst headers = new Headers(opts.headers);\n\n\t\tif (body != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS$1] = {\n\t\t\turl: opts.url,\n\t\t\tstatus,\n\t\t\tstatusText: opts.statusText || STATUS_CODES[status],\n\t\t\theaders,\n\t\t\tcounter: opts.counter\n\t\t};\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS$1].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS$1].status;\n\t}\n\n\t/**\n  * Convenience property representing if the request ended normally\n  */\n\tget ok() {\n\t\treturn this[INTERNALS$1].status >= 200 && this[INTERNALS$1].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS$1].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS$1].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$1].headers;\n\t}\n\n\t/**\n  * Clone this response\n  *\n  * @return  Response\n  */\n\tclone() {\n\t\treturn new Response(clone(this), {\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected\n\t\t});\n\t}\n}\n\nBody.mixIn(Response.prototype);\n\nObject.defineProperties(Response.prototype, {\n\turl: { enumerable: true },\n\tstatus: { enumerable: true },\n\tok: { enumerable: true },\n\tredirected: { enumerable: true },\n\tstatusText: { enumerable: true },\n\theaders: { enumerable: true },\n\tclone: { enumerable: true }\n});\n\nObject.defineProperty(Response.prototype, Symbol.toStringTag, {\n\tvalue: 'Response',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nconst INTERNALS$2 = Symbol('Request internals');\nconst URL = url__WEBPACK_IMPORTED_MODULE_2__.URL || whatwg_url__WEBPACK_IMPORTED_MODULE_3__.URL;\n\n// fix an issue where \"format\", \"parse\" aren't a named export for node <10\nconst parse_url = url__WEBPACK_IMPORTED_MODULE_2__.parse;\nconst format_url = url__WEBPACK_IMPORTED_MODULE_2__.format;\n\n/**\n * Wrapper around `new URL` to handle arbitrary URLs\n *\n * @param  {string} urlStr\n * @return {void}\n */\nfunction parseURL(urlStr) {\n\t/*\n \tCheck whether the URL is absolute or not\n \t\tScheme: https://tools.ietf.org/html/rfc3986#section-3.1\n \tAbsolute URL: https://tools.ietf.org/html/rfc3986#section-4.3\n */\n\tif (/^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.exec(urlStr)) {\n\t\turlStr = new URL(urlStr).toString();\n\t}\n\n\t// Fallback to old implementation for arbitrary URLs\n\treturn parse_url(urlStr);\n}\n\nconst streamDestructionSupported = \"destroy\" in stream__WEBPACK_IMPORTED_MODULE_0__.Readable.prototype;\n\n/**\n * Check if a value is an instance of Request.\n *\n * @param   Mixed   input\n * @return  Boolean\n */\nfunction isRequest(input) {\n\treturn typeof input === 'object' && typeof input[INTERNALS$2] === 'object';\n}\n\nfunction isAbortSignal(signal) {\n\tconst proto = signal && typeof signal === 'object' && Object.getPrototypeOf(signal);\n\treturn !!(proto && proto.constructor.name === 'AbortSignal');\n}\n\n/**\n * Request class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nclass Request {\n\tconstructor(input) {\n\t\tlet init = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\t\tlet parsedURL;\n\n\t\t// normalize input\n\t\tif (!isRequest(input)) {\n\t\t\tif (input && input.href) {\n\t\t\t\t// in order to support Node.js' Url objects; though WHATWG's URL objects\n\t\t\t\t// will fall into this branch also (since their `toString()` will return\n\t\t\t\t// `href` property anyway)\n\t\t\t\tparsedURL = parseURL(input.href);\n\t\t\t} else {\n\t\t\t\t// coerce input to a string before attempting to parse\n\t\t\t\tparsedURL = parseURL(`${input}`);\n\t\t\t}\n\t\t\tinput = {};\n\t\t} else {\n\t\t\tparsedURL = parseURL(input.url);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tmethod = method.toUpperCase();\n\n\t\tif ((init.body != null || isRequest(input) && input.body !== null) && (method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tlet inputBody = init.body != null ? init.body : isRequest(input) && input.body !== null ? clone(input) : null;\n\n\t\tBody.call(this, inputBody, {\n\t\t\ttimeout: init.timeout || input.timeout || 0,\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody != null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ? input.signal : null;\n\t\tif ('signal' in init) signal = init.signal;\n\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal');\n\t\t}\n\n\t\tthis[INTERNALS$2] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal\n\t\t};\n\n\t\t// node-fetch-only options\n\t\tthis.follow = init.follow !== undefined ? init.follow : input.follow !== undefined ? input.follow : 20;\n\t\tthis.compress = init.compress !== undefined ? init.compress : input.compress !== undefined ? input.compress : true;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t}\n\n\tget method() {\n\t\treturn this[INTERNALS$2].method;\n\t}\n\n\tget url() {\n\t\treturn format_url(this[INTERNALS$2].parsedURL);\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS$2].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS$2].redirect;\n\t}\n\n\tget signal() {\n\t\treturn this[INTERNALS$2].signal;\n\t}\n\n\t/**\n  * Clone this request\n  *\n  * @return  Request\n  */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n}\n\nBody.mixIn(Request.prototype);\n\nObject.defineProperty(Request.prototype, Symbol.toStringTag, {\n\tvalue: 'Request',\n\twritable: false,\n\tenumerable: false,\n\tconfigurable: true\n});\n\nObject.defineProperties(Request.prototype, {\n\tmethod: { enumerable: true },\n\turl: { enumerable: true },\n\theaders: { enumerable: true },\n\tredirect: { enumerable: true },\n\tclone: { enumerable: true },\n\tsignal: { enumerable: true }\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param   Request  A Request instance\n * @return  Object   The options object to be passed to http.request\n */\nfunction getNodeRequestOptions(request) {\n\tconst parsedURL = request[INTERNALS$2].parsedURL;\n\tconst headers = new Headers(request[INTERNALS$2].headers);\n\n\t// fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// Basic fetch\n\tif (!parsedURL.protocol || !parsedURL.hostname) {\n\t\tthrow new TypeError('Only absolute URLs are supported');\n\t}\n\n\tif (!/^https?:$/.test(parsedURL.protocol)) {\n\t\tthrow new TypeError('Only HTTP(S) protocols are supported');\n\t}\n\n\tif (request.signal && request.body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable && !streamDestructionSupported) {\n\t\tthrow new Error('Cancellation of streamed requests with AbortSignal is not supported in node < 8');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body == null && /^(POST|PUT)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\tif (request.body != null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\tif (typeof totalBytes === 'number') {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch/1.0 (+https://github.com/bitinn/node-fetch)');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip,deflate');\n\t}\n\n\tlet agent = request.agent;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\treturn Object.assign({}, parsedURL, {\n\t\tmethod: request.method,\n\t\theaders: exportNodeCompatibleHeaders(headers),\n\t\tagent\n\t});\n}\n\n/**\n * abort-error.js\n *\n * AbortError interface for cancelled requests\n */\n\n/**\n * Create AbortError instance\n *\n * @param   String      message      Error message for human\n * @return  AbortError\n */\nfunction AbortError(message) {\n  Error.call(this, message);\n\n  this.type = 'aborted';\n  this.message = message;\n\n  // hide custom error implementation details from end-users\n  Error.captureStackTrace(this, this.constructor);\n}\n\nAbortError.prototype = Object.create(Error.prototype);\nAbortError.prototype.constructor = AbortError;\nAbortError.prototype.name = 'AbortError';\n\nconst URL$1 = url__WEBPACK_IMPORTED_MODULE_2__.URL || whatwg_url__WEBPACK_IMPORTED_MODULE_3__.URL;\n\n// fix an issue where \"PassThrough\", \"resolve\" aren't a named export for node <10\nconst PassThrough$1 = stream__WEBPACK_IMPORTED_MODULE_0__.PassThrough;\n\nconst isDomainOrSubdomain = function isDomainOrSubdomain(destination, original) {\n\tconst orig = new URL$1(original).hostname;\n\tconst dest = new URL$1(destination).hostname;\n\n\treturn orig === dest || orig[orig.length - dest.length - 1] === '.' && orig.endsWith(dest);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nconst isSameProtocol = function isSameProtocol(destination, original) {\n\tconst orig = new URL$1(original).protocol;\n\tconst dest = new URL$1(destination).protocol;\n\n\treturn orig === dest;\n};\n\n/**\n * Fetch function\n *\n * @param   Mixed    url   Absolute url or Request instance\n * @param   Object   opts  Fetch options\n * @return  Promise\n */\nfunction fetch(url, opts) {\n\n\t// allow custom promise\n\tif (!fetch.Promise) {\n\t\tthrow new Error('native promise missing, set fetch.Promise to your favorite alternative');\n\t}\n\n\tBody.Promise = fetch.Promise;\n\n\t// wrap http.request into fetch\n\treturn new fetch.Promise(function (resolve, reject) {\n\t\t// build request object\n\t\tconst request = new Request(url, opts);\n\t\tconst options = getNodeRequestOptions(request);\n\n\t\tconst send = (options.protocol === 'https:' ? https__WEBPACK_IMPORTED_MODULE_4__ : http__WEBPACK_IMPORTED_MODULE_1__).request;\n\t\tconst signal = request.signal;\n\n\t\tlet response = null;\n\n\t\tconst abort = function abort() {\n\t\t\tlet error = new AbortError('The user aborted a request.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof stream__WEBPACK_IMPORTED_MODULE_0__.Readable) {\n\t\t\t\tdestroyStream(request.body, error);\n\t\t\t}\n\t\t\tif (!response || !response.body) return;\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = function abortAndFinalize() {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// send request\n\t\tconst req = send(options);\n\t\tlet reqTimeout;\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tfunction finalize() {\n\t\t\treq.abort();\n\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\tclearTimeout(reqTimeout);\n\t\t}\n\n\t\tif (request.timeout) {\n\t\t\treq.once('socket', function (socket) {\n\t\t\t\treqTimeout = setTimeout(function () {\n\t\t\t\t\treject(new FetchError(`network timeout at: ${request.url}`, 'request-timeout'));\n\t\t\t\t\tfinalize();\n\t\t\t\t}, request.timeout);\n\t\t\t});\n\t\t}\n\n\t\treq.on('error', function (err) {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${err.message}`, 'system', err));\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(req, function (err) {\n\t\t\tif (signal && signal.aborted) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (response && response.body) {\n\t\t\t\tdestroyStream(response.body, err);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (parseInt(process.version.substring(1)) < 14) {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\treq.on('socket', function (s) {\n\t\t\t\ts.addListener('close', function (hadError) {\n\t\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\t\tconst hasDataListener = s.listenerCount('data') > 0;\n\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && hasDataListener && !hadError && !(signal && signal.aborted)) {\n\t\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treq.on('response', function (res) {\n\t\t\tclearTimeout(reqTimeout);\n\n\t\t\tconst headers = createHeadersLenient(res.headers);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (fetch.isRedirect(res.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL$1(location, request.url).toString();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// node-fetch-specific step: make manual redirect a bit easier to use by setting the Location header value to the resolved URL.\n\t\t\t\t\t\tif (locationURL !== null) {\n\t\t\t\t\t\t\t// handle corrupted header\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\theaders.set('Location', locationURL);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t// istanbul ignore next: nodejs server prevent invalid response headers, we can't test this through normal request\n\t\t\t\t\t\t\t\treject(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow':\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOpts = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: request.body,\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\ttimeout: request.timeout,\n\t\t\t\t\t\t\tsize: request.size\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOpts.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (res.statusCode !== 303 && request.body && getTotalBytes(request) === null) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (res.statusCode === 303 || (res.statusCode === 301 || res.statusCode === 302) && request.method === 'POST') {\n\t\t\t\t\t\t\trequestOpts.method = 'GET';\n\t\t\t\t\t\t\trequestOpts.body = undefined;\n\t\t\t\t\t\t\trequestOpts.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOpts)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// prepare response\n\t\t\tres.once('end', function () {\n\t\t\t\tif (signal) signal.removeEventListener('abort', abortAndFinalize);\n\t\t\t});\n\t\t\tlet body = res.pipe(new PassThrough$1());\n\n\t\t\tconst response_options = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: res.statusCode,\n\t\t\t\tstatusText: res.statusMessage,\n\t\t\t\theaders: headers,\n\t\t\t\tsize: request.size,\n\t\t\t\ttimeout: request.timeout,\n\t\t\t\tcounter: request.counter\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || res.statusCode === 204 || res.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib__WEBPACK_IMPORTED_MODULE_5__.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib__WEBPACK_IMPORTED_MODULE_5__.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// for gzip\n\t\t\tif (codings == 'gzip' || codings == 'x-gzip') {\n\t\t\t\tbody = body.pipe(zlib__WEBPACK_IMPORTED_MODULE_5__.createGunzip(zlibOptions));\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for deflate\n\t\t\tif (codings == 'deflate' || codings == 'x-deflate') {\n\t\t\t\t// handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = res.pipe(new PassThrough$1());\n\t\t\t\traw.once('data', function (chunk) {\n\t\t\t\t\t// see http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = body.pipe(zlib__WEBPACK_IMPORTED_MODULE_5__.createInflate());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = body.pipe(zlib__WEBPACK_IMPORTED_MODULE_5__.createInflateRaw());\n\t\t\t\t\t}\n\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.on('end', function () {\n\t\t\t\t\t// some old IIS servers return zero-length OK deflate responses, so 'data' is never emitted.\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// for br\n\t\t\tif (codings == 'br' && typeof zlib__WEBPACK_IMPORTED_MODULE_5__.createBrotliDecompress === 'function') {\n\t\t\t\tbody = body.pipe(zlib__WEBPACK_IMPORTED_MODULE_5__.createBrotliDecompress());\n\t\t\t\tresponse = new Response(body, response_options);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// otherwise, use response as-is\n\t\t\tresponse = new Response(body, response_options);\n\t\t\tresolve(response);\n\t\t});\n\n\t\twriteToStream(req, request);\n\t});\n}\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tlet socket;\n\n\trequest.on('socket', function (s) {\n\t\tsocket = s;\n\t});\n\n\trequest.on('response', function (response) {\n\t\tconst headers = response.headers;\n\n\t\tif (headers['transfer-encoding'] === 'chunked' && !headers['content-length']) {\n\t\t\tresponse.once('close', function (hadError) {\n\t\t\t\t// tests for socket presence, as in some situations the\n\t\t\t\t// the 'socket' event is not triggered for the request\n\t\t\t\t// (happens in deno), avoids `TypeError`\n\t\t\t\t// if a data listener is still present we didn't end cleanly\n\t\t\t\tconst hasDataListener = socket && socket.listenerCount('data') > 0;\n\n\t\t\t\tif (hasDataListener && !hadError) {\n\t\t\t\t\tconst err = new Error('Premature close');\n\t\t\t\t\terr.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\terrorCallback(err);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction destroyStream(stream, err) {\n\tif (stream.destroy) {\n\t\tstream.destroy(err);\n\t} else {\n\t\t// node < 8\n\t\tstream.emit('error', err);\n\t\tstream.end();\n\t}\n}\n\n/**\n * Redirect code matching\n *\n * @param   Number   code  Status code\n * @return  Boolean\n */\nfetch.isRedirect = function (code) {\n\treturn code === 301 || code === 302 || code === 303 || code === 307 || code === 308;\n};\n\n// expose Promise\nfetch.Promise = global.Promise;\n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fetch);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvbGliL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBNEI7QUFDSjtBQUNGO0FBQ2E7QUFDVDtBQUNGOztBQUV4Qjs7QUFFQTtBQUNBLGlCQUFpQiw0Q0FBZTs7QUFFaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixZQUFZO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsOEJBQThCLG9CQUFvQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMsa0JBQWtCO0FBQzNCLFNBQVMsa0JBQWtCO0FBQzNCLFVBQVU7QUFDVixDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQSxvQkFBb0IsK0NBQWtCOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtGQUFrRjtBQUNsRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHLHlCQUF5QixrQ0FBa0M7QUFDOUQ7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRyx5QkFBeUIsbUNBQU0sSUFBSTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFCQUFxQixtQ0FBTTtBQUMzQjtBQUNBLGlIQUFpSCxVQUFVLElBQUksWUFBWTtBQUMzSTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsK0VBQStFLFlBQVksVUFBVSxZQUFZO0FBQ2pIO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxrQkFBa0I7QUFDM0IsYUFBYSxrQkFBa0I7QUFDL0IsZ0JBQWdCLGtCQUFrQjtBQUNsQyxTQUFTLGtCQUFrQjtBQUMzQixTQUFTLGtCQUFrQjtBQUMzQixTQUFTO0FBQ1QsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EscUVBQXFFLFNBQVM7QUFDOUU7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLG1DQUFNO0FBQzdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FLFlBQVksUUFBUSxlQUFlO0FBQ3ZHLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx5RUFBeUUsV0FBVyxJQUFJLFlBQVk7QUFDcEc7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkMsWUFBWSxjQUFjLFlBQVk7QUFDbkY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNEVBQTRFLFdBQVcsSUFBSSxZQUFZO0FBQ3ZHO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxZQUFZLEdBQUc7QUFDZixZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsbUNBQU07QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxxQkFBcUI7QUFDckIsR0FBRztBQUNIO0FBQ0EsNENBQTRDO0FBQzVDLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsOEJBQThCLFdBQVcsbUJBQW1CO0FBQzVELEdBQUcseUJBQXlCLG1DQUFNO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLEtBQUs7QUFDaEI7QUFDQSx5QkFBeUIsTUFBTTtBQUMvQjtBQUNBOztBQUVBO0FBQ0EsWUFBWSxNQUFNO0FBQ2xCO0FBQ0EseUJBQXlCLE9BQU87QUFDaEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakIsYUFBYSxNQUFNO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSztBQUNqQixhQUFhLE1BQU07QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLEtBQUs7QUFDakI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxLQUFLO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxRQUFRLGtCQUFrQjtBQUMxQixZQUFZLGtCQUFrQjtBQUM5QixRQUFRLGtCQUFrQjtBQUMxQixXQUFXLGtCQUFrQjtBQUM3QixRQUFRLGtCQUFrQjtBQUMxQixXQUFXLGtCQUFrQjtBQUM3QixTQUFTLGtCQUFrQjtBQUMzQixXQUFXLGtCQUFrQjtBQUM3QixZQUFZO0FBQ1osQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7QUFDRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsaUJBQWlCOztBQUU5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCLDhDQUFpQjs7QUFFdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxRQUFRLGtCQUFrQjtBQUMxQixXQUFXLGtCQUFrQjtBQUM3QixPQUFPLGtCQUFrQjtBQUN6QixlQUFlLGtCQUFrQjtBQUNqQyxlQUFlLGtCQUFrQjtBQUNqQyxZQUFZLGtCQUFrQjtBQUM5QixVQUFVO0FBQ1YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLFlBQVksb0NBQU8sSUFBSSwyQ0FBYTs7QUFFcEM7QUFDQSxrQkFBa0Isc0NBQVM7QUFDM0IsbUJBQW1CLHVDQUFVOztBQUU3QjtBQUNBO0FBQ0E7QUFDQSxZQUFZLFFBQVE7QUFDcEIsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxtQ0FBbUMsbUVBQXNDOztBQUV6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLDRCQUE0QixNQUFNO0FBQ2xDO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILGlFQUFpRTs7QUFFakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBLFdBQVcsa0JBQWtCO0FBQzdCLFFBQVEsa0JBQWtCO0FBQzFCLFlBQVksa0JBQWtCO0FBQzlCLGFBQWEsa0JBQWtCO0FBQy9CLFVBQVUsa0JBQWtCO0FBQzVCLFdBQVc7QUFDWCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsK0NBQStDLDRDQUFlO0FBQzlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLG9DQUFPLElBQUksMkNBQWE7O0FBRXRDO0FBQ0Esc0JBQXNCLCtDQUFrQjs7QUFFeEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLFlBQVk7QUFDdkIsV0FBVyxZQUFZO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdEQUFnRCxrQ0FBSyxHQUFHLGlDQUFJO0FBQzVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyw0Q0FBZTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsWUFBWTtBQUM5RDtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7O0FBRUE7QUFDQSx1Q0FBdUMsYUFBYSxrQkFBa0IsWUFBWTs7QUFFbEY7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0ZBQW9GLFNBQVM7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esc0dBQXNHLFlBQVk7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNkRBQTZELFlBQVk7QUFDekU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLDhDQUFpQjtBQUM1QixpQkFBaUIsOENBQWlCO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQSxxQkFBcUIsOENBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsK0NBQWtCO0FBQ3pDLE9BQU87QUFDUCx1QkFBdUIsa0RBQXFCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLGlDQUFpQyx3REFBMkI7QUFDNUQscUJBQXFCLHdEQUEyQjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsaUVBQWUsS0FBSyxFQUFDO0FBQ3lDIiwic291cmNlcyI6WyIvVXNlcnMvbWljaGFlbGR1cmFudGUvYWkgZGV2L2NlLWh1Yi9wcm9qZWN0cy90cmFkZXJyYS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQHNlZ21lbnQvYW5hbHl0aWNzLW5vZGUvbm9kZV9tb2R1bGVzL25vZGUtZmV0Y2gvbGliL2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgU3RyZWFtIGZyb20gJ3N0cmVhbSc7XG5pbXBvcnQgaHR0cCBmcm9tICdodHRwJztcbmltcG9ydCBVcmwgZnJvbSAndXJsJztcbmltcG9ydCB3aGF0d2dVcmwgZnJvbSAnd2hhdHdnLXVybCc7XG5pbXBvcnQgaHR0cHMgZnJvbSAnaHR0cHMnO1xuaW1wb3J0IHpsaWIgZnJvbSAnemxpYic7XG5cbi8vIEJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS90bXB2YXIvanNkb20vYmxvYi9hYTg1YjJhYmYwNzc2NmZmN2JmNWMxZjZkYWFmYjM3MjZmMmYyZGI1L2xpYi9qc2RvbS9saXZpbmcvYmxvYi5qc1xuXG4vLyBmaXggZm9yIFwiUmVhZGFibGVcIiBpc24ndCBhIG5hbWVkIGV4cG9ydCBpc3N1ZVxuY29uc3QgUmVhZGFibGUgPSBTdHJlYW0uUmVhZGFibGU7XG5cbmNvbnN0IEJVRkZFUiA9IFN5bWJvbCgnYnVmZmVyJyk7XG5jb25zdCBUWVBFID0gU3ltYm9sKCd0eXBlJyk7XG5cbmNsYXNzIEJsb2Ige1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHR0aGlzW1RZUEVdID0gJyc7XG5cblx0XHRjb25zdCBibG9iUGFydHMgPSBhcmd1bWVudHNbMF07XG5cdFx0Y29uc3Qgb3B0aW9ucyA9IGFyZ3VtZW50c1sxXTtcblxuXHRcdGNvbnN0IGJ1ZmZlcnMgPSBbXTtcblx0XHRsZXQgc2l6ZSA9IDA7XG5cblx0XHRpZiAoYmxvYlBhcnRzKSB7XG5cdFx0XHRjb25zdCBhID0gYmxvYlBhcnRzO1xuXHRcdFx0Y29uc3QgbGVuZ3RoID0gTnVtYmVyKGEubGVuZ3RoKTtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3QgZWxlbWVudCA9IGFbaV07XG5cdFx0XHRcdGxldCBidWZmZXI7XG5cdFx0XHRcdGlmIChlbGVtZW50IGluc3RhbmNlb2YgQnVmZmVyKSB7XG5cdFx0XHRcdFx0YnVmZmVyID0gZWxlbWVudDtcblx0XHRcdFx0fSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoZWxlbWVudCkpIHtcblx0XHRcdFx0XHRidWZmZXIgPSBCdWZmZXIuZnJvbShlbGVtZW50LmJ1ZmZlciwgZWxlbWVudC5ieXRlT2Zmc2V0LCBlbGVtZW50LmJ5dGVMZW5ndGgpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuXHRcdFx0XHRcdGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKGVsZW1lbnQpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBCbG9iKSB7XG5cdFx0XHRcdFx0YnVmZmVyID0gZWxlbWVudFtCVUZGRVJdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGJ1ZmZlciA9IEJ1ZmZlci5mcm9tKHR5cGVvZiBlbGVtZW50ID09PSAnc3RyaW5nJyA/IGVsZW1lbnQgOiBTdHJpbmcoZWxlbWVudCkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNpemUgKz0gYnVmZmVyLmxlbmd0aDtcblx0XHRcdFx0YnVmZmVycy5wdXNoKGJ1ZmZlcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0dGhpc1tCVUZGRVJdID0gQnVmZmVyLmNvbmNhdChidWZmZXJzKTtcblxuXHRcdGxldCB0eXBlID0gb3B0aW9ucyAmJiBvcHRpb25zLnR5cGUgIT09IHVuZGVmaW5lZCAmJiBTdHJpbmcob3B0aW9ucy50eXBlKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmICh0eXBlICYmICEvW15cXHUwMDIwLVxcdTAwN0VdLy50ZXN0KHR5cGUpKSB7XG5cdFx0XHR0aGlzW1RZUEVdID0gdHlwZTtcblx0XHR9XG5cdH1cblx0Z2V0IHNpemUoKSB7XG5cdFx0cmV0dXJuIHRoaXNbQlVGRkVSXS5sZW5ndGg7XG5cdH1cblx0Z2V0IHR5cGUoKSB7XG5cdFx0cmV0dXJuIHRoaXNbVFlQRV07XG5cdH1cblx0dGV4dCgpIHtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXNbQlVGRkVSXS50b1N0cmluZygpKTtcblx0fVxuXHRhcnJheUJ1ZmZlcigpIHtcblx0XHRjb25zdCBidWYgPSB0aGlzW0JVRkZFUl07XG5cdFx0Y29uc3QgYWIgPSBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5ieXRlTGVuZ3RoKTtcblx0XHRyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGFiKTtcblx0fVxuXHRzdHJlYW0oKSB7XG5cdFx0Y29uc3QgcmVhZGFibGUgPSBuZXcgUmVhZGFibGUoKTtcblx0XHRyZWFkYWJsZS5fcmVhZCA9IGZ1bmN0aW9uICgpIHt9O1xuXHRcdHJlYWRhYmxlLnB1c2godGhpc1tCVUZGRVJdKTtcblx0XHRyZWFkYWJsZS5wdXNoKG51bGwpO1xuXHRcdHJldHVybiByZWFkYWJsZTtcblx0fVxuXHR0b1N0cmluZygpIHtcblx0XHRyZXR1cm4gJ1tvYmplY3QgQmxvYl0nO1xuXHR9XG5cdHNsaWNlKCkge1xuXHRcdGNvbnN0IHNpemUgPSB0aGlzLnNpemU7XG5cblx0XHRjb25zdCBzdGFydCA9IGFyZ3VtZW50c1swXTtcblx0XHRjb25zdCBlbmQgPSBhcmd1bWVudHNbMV07XG5cdFx0bGV0IHJlbGF0aXZlU3RhcnQsIHJlbGF0aXZlRW5kO1xuXHRcdGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZWxhdGl2ZVN0YXJ0ID0gMDtcblx0XHR9IGVsc2UgaWYgKHN0YXJ0IDwgMCkge1xuXHRcdFx0cmVsYXRpdmVTdGFydCA9IE1hdGgubWF4KHNpemUgKyBzdGFydCwgMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJlbGF0aXZlU3RhcnQgPSBNYXRoLm1pbihzdGFydCwgc2l6ZSk7XG5cdFx0fVxuXHRcdGlmIChlbmQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0cmVsYXRpdmVFbmQgPSBzaXplO1xuXHRcdH0gZWxzZSBpZiAoZW5kIDwgMCkge1xuXHRcdFx0cmVsYXRpdmVFbmQgPSBNYXRoLm1heChzaXplICsgZW5kLCAwKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVsYXRpdmVFbmQgPSBNYXRoLm1pbihlbmQsIHNpemUpO1xuXHRcdH1cblx0XHRjb25zdCBzcGFuID0gTWF0aC5tYXgocmVsYXRpdmVFbmQgLSByZWxhdGl2ZVN0YXJ0LCAwKTtcblxuXHRcdGNvbnN0IGJ1ZmZlciA9IHRoaXNbQlVGRkVSXTtcblx0XHRjb25zdCBzbGljZWRCdWZmZXIgPSBidWZmZXIuc2xpY2UocmVsYXRpdmVTdGFydCwgcmVsYXRpdmVTdGFydCArIHNwYW4pO1xuXHRcdGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbXSwgeyB0eXBlOiBhcmd1bWVudHNbMl0gfSk7XG5cdFx0YmxvYltCVUZGRVJdID0gc2xpY2VkQnVmZmVyO1xuXHRcdHJldHVybiBibG9iO1xuXHR9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEJsb2IucHJvdG90eXBlLCB7XG5cdHNpemU6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHR0eXBlOiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0c2xpY2U6IHsgZW51bWVyYWJsZTogdHJ1ZSB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJsb2IucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcblx0dmFsdWU6ICdCbG9iJyxcblx0d3JpdGFibGU6IGZhbHNlLFxuXHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0Y29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuLyoqXG4gKiBmZXRjaC1lcnJvci5qc1xuICpcbiAqIEZldGNoRXJyb3IgaW50ZXJmYWNlIGZvciBvcGVyYXRpb25hbCBlcnJvcnNcbiAqL1xuXG4vKipcbiAqIENyZWF0ZSBGZXRjaEVycm9yIGluc3RhbmNlXG4gKlxuICogQHBhcmFtICAgU3RyaW5nICAgICAgbWVzc2FnZSAgICAgIEVycm9yIG1lc3NhZ2UgZm9yIGh1bWFuXG4gKiBAcGFyYW0gICBTdHJpbmcgICAgICB0eXBlICAgICAgICAgRXJyb3IgdHlwZSBmb3IgbWFjaGluZVxuICogQHBhcmFtICAgU3RyaW5nICAgICAgc3lzdGVtRXJyb3IgIEZvciBOb2RlLmpzIHN5c3RlbSBlcnJvclxuICogQHJldHVybiAgRmV0Y2hFcnJvclxuICovXG5mdW5jdGlvbiBGZXRjaEVycm9yKG1lc3NhZ2UsIHR5cGUsIHN5c3RlbUVycm9yKSB7XG4gIEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgdGhpcy50eXBlID0gdHlwZTtcblxuICAvLyB3aGVuIGVyci50eXBlIGlzIGBzeXN0ZW1gLCBlcnIuY29kZSBjb250YWlucyBzeXN0ZW0gZXJyb3IgY29kZVxuICBpZiAoc3lzdGVtRXJyb3IpIHtcbiAgICB0aGlzLmNvZGUgPSB0aGlzLmVycm5vID0gc3lzdGVtRXJyb3IuY29kZTtcbiAgfVxuXG4gIC8vIGhpZGUgY3VzdG9tIGVycm9yIGltcGxlbWVudGF0aW9uIGRldGFpbHMgZnJvbSBlbmQtdXNlcnNcbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG59XG5cbkZldGNoRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuRmV0Y2hFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBGZXRjaEVycm9yO1xuRmV0Y2hFcnJvci5wcm90b3R5cGUubmFtZSA9ICdGZXRjaEVycm9yJztcblxubGV0IGNvbnZlcnQ7XG50cnkge1xuXHRjb252ZXJ0ID0gcmVxdWlyZSgnZW5jb2RpbmcnKS5jb252ZXJ0O1xufSBjYXRjaCAoZSkge31cblxuY29uc3QgSU5URVJOQUxTID0gU3ltYm9sKCdCb2R5IGludGVybmFscycpO1xuXG4vLyBmaXggYW4gaXNzdWUgd2hlcmUgXCJQYXNzVGhyb3VnaFwiIGlzbid0IGEgbmFtZWQgZXhwb3J0IGZvciBub2RlIDwxMFxuY29uc3QgUGFzc1Rocm91Z2ggPSBTdHJlYW0uUGFzc1Rocm91Z2g7XG5cbi8qKlxuICogQm9keSBtaXhpblxuICpcbiAqIFJlZjogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2JvZHlcbiAqXG4gKiBAcGFyYW0gICBTdHJlYW0gIGJvZHkgIFJlYWRhYmxlIHN0cmVhbVxuICogQHBhcmFtICAgT2JqZWN0ICBvcHRzICBSZXNwb25zZSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmZ1bmN0aW9uIEJvZHkoYm9keSkge1xuXHR2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSxcblx0ICAgIF9yZWYkc2l6ZSA9IF9yZWYuc2l6ZTtcblxuXHRsZXQgc2l6ZSA9IF9yZWYkc2l6ZSA9PT0gdW5kZWZpbmVkID8gMCA6IF9yZWYkc2l6ZTtcblx0dmFyIF9yZWYkdGltZW91dCA9IF9yZWYudGltZW91dDtcblx0bGV0IHRpbWVvdXQgPSBfcmVmJHRpbWVvdXQgPT09IHVuZGVmaW5lZCA/IDAgOiBfcmVmJHRpbWVvdXQ7XG5cblx0aWYgKGJvZHkgPT0gbnVsbCkge1xuXHRcdC8vIGJvZHkgaXMgdW5kZWZpbmVkIG9yIG51bGxcblx0XHRib2R5ID0gbnVsbDtcblx0fSBlbHNlIGlmIChpc1VSTFNlYXJjaFBhcmFtcyhib2R5KSkge1xuXHRcdC8vIGJvZHkgaXMgYSBVUkxTZWFyY2hQYXJhbXNcblx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keS50b1N0cmluZygpKTtcblx0fSBlbHNlIGlmIChpc0Jsb2IoYm9keSkpIDsgZWxzZSBpZiAoQnVmZmVyLmlzQnVmZmVyKGJvZHkpKSA7IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChib2R5KSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuXHRcdC8vIGJvZHkgaXMgQXJyYXlCdWZmZXJcblx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keSk7XG5cdH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpKSB7XG5cdFx0Ly8gYm9keSBpcyBBcnJheUJ1ZmZlclZpZXdcblx0XHRib2R5ID0gQnVmZmVyLmZyb20oYm9keS5idWZmZXIsIGJvZHkuYnl0ZU9mZnNldCwgYm9keS5ieXRlTGVuZ3RoKTtcblx0fSBlbHNlIGlmIChib2R5IGluc3RhbmNlb2YgU3RyZWFtKSA7IGVsc2Uge1xuXHRcdC8vIG5vbmUgb2YgdGhlIGFib3ZlXG5cdFx0Ly8gY29lcmNlIHRvIHN0cmluZyB0aGVuIGJ1ZmZlclxuXHRcdGJvZHkgPSBCdWZmZXIuZnJvbShTdHJpbmcoYm9keSkpO1xuXHR9XG5cdHRoaXNbSU5URVJOQUxTXSA9IHtcblx0XHRib2R5LFxuXHRcdGRpc3R1cmJlZDogZmFsc2UsXG5cdFx0ZXJyb3I6IG51bGxcblx0fTtcblx0dGhpcy5zaXplID0gc2l6ZTtcblx0dGhpcy50aW1lb3V0ID0gdGltZW91dDtcblxuXHRpZiAoYm9keSBpbnN0YW5jZW9mIFN0cmVhbSkge1xuXHRcdGJvZHkub24oJ2Vycm9yJywgZnVuY3Rpb24gKGVycikge1xuXHRcdFx0Y29uc3QgZXJyb3IgPSBlcnIubmFtZSA9PT0gJ0Fib3J0RXJyb3InID8gZXJyIDogbmV3IEZldGNoRXJyb3IoYEludmFsaWQgcmVzcG9uc2UgYm9keSB3aGlsZSB0cnlpbmcgdG8gZmV0Y2ggJHtfdGhpcy51cmx9OiAke2Vyci5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnIpO1xuXHRcdFx0X3RoaXNbSU5URVJOQUxTXS5lcnJvciA9IGVycm9yO1xuXHRcdH0pO1xuXHR9XG59XG5cbkJvZHkucHJvdG90eXBlID0ge1xuXHRnZXQgYm9keSgpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFNdLmJvZHk7XG5cdH0sXG5cblx0Z2V0IGJvZHlVc2VkKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMU10uZGlzdHVyYmVkO1xuXHR9LFxuXG5cdC8qKlxuICAqIERlY29kZSByZXNwb25zZSBhcyBBcnJheUJ1ZmZlclxuICAqXG4gICogQHJldHVybiAgUHJvbWlzZVxuICAqL1xuXHRhcnJheUJ1ZmZlcigpIHtcblx0XHRyZXR1cm4gY29uc3VtZUJvZHkuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uIChidWYpIHtcblx0XHRcdHJldHVybiBidWYuYnVmZmVyLnNsaWNlKGJ1Zi5ieXRlT2Zmc2V0LCBidWYuYnl0ZU9mZnNldCArIGJ1Zi5ieXRlTGVuZ3RoKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKipcbiAgKiBSZXR1cm4gcmF3IHJlc3BvbnNlIGFzIEJsb2JcbiAgKlxuICAqIEByZXR1cm4gUHJvbWlzZVxuICAqL1xuXHRibG9iKCkge1xuXHRcdGxldCBjdCA9IHRoaXMuaGVhZGVycyAmJiB0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSB8fCAnJztcblx0XHRyZXR1cm4gY29uc3VtZUJvZHkuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uIChidWYpIHtcblx0XHRcdHJldHVybiBPYmplY3QuYXNzaWduKFxuXHRcdFx0Ly8gUHJldmVudCBjb3B5aW5nXG5cdFx0XHRuZXcgQmxvYihbXSwge1xuXHRcdFx0XHR0eXBlOiBjdC50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9KSwge1xuXHRcdFx0XHRbQlVGRkVSXTogYnVmXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fSxcblxuXHQvKipcbiAgKiBEZWNvZGUgcmVzcG9uc2UgYXMganNvblxuICAqXG4gICogQHJldHVybiAgUHJvbWlzZVxuICAqL1xuXHRqc29uKCkge1xuXHRcdHZhciBfdGhpczIgPSB0aGlzO1xuXG5cdFx0cmV0dXJuIGNvbnN1bWVCb2R5LmNhbGwodGhpcykudGhlbihmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXR1cm4gSlNPTi5wYXJzZShidWZmZXIudG9TdHJpbmcoKSk7XG5cdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0cmV0dXJuIEJvZHkuUHJvbWlzZS5yZWplY3QobmV3IEZldGNoRXJyb3IoYGludmFsaWQganNvbiByZXNwb25zZSBib2R5IGF0ICR7X3RoaXMyLnVybH0gcmVhc29uOiAke2Vyci5tZXNzYWdlfWAsICdpbnZhbGlkLWpzb24nKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0LyoqXG4gICogRGVjb2RlIHJlc3BvbnNlIGFzIHRleHRcbiAgKlxuICAqIEByZXR1cm4gIFByb21pc2VcbiAgKi9cblx0dGV4dCgpIHtcblx0XHRyZXR1cm4gY29uc3VtZUJvZHkuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uIChidWZmZXIpIHtcblx0XHRcdHJldHVybiBidWZmZXIudG9TdHJpbmcoKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKipcbiAgKiBEZWNvZGUgcmVzcG9uc2UgYXMgYnVmZmVyIChub24tc3BlYyBhcGkpXG4gICpcbiAgKiBAcmV0dXJuICBQcm9taXNlXG4gICovXG5cdGJ1ZmZlcigpIHtcblx0XHRyZXR1cm4gY29uc3VtZUJvZHkuY2FsbCh0aGlzKTtcblx0fSxcblxuXHQvKipcbiAgKiBEZWNvZGUgcmVzcG9uc2UgYXMgdGV4dCwgd2hpbGUgYXV0b21hdGljYWxseSBkZXRlY3RpbmcgdGhlIGVuY29kaW5nIGFuZFxuICAqIHRyeWluZyB0byBkZWNvZGUgdG8gVVRGLTggKG5vbi1zcGVjIGFwaSlcbiAgKlxuICAqIEByZXR1cm4gIFByb21pc2VcbiAgKi9cblx0dGV4dENvbnZlcnRlZCgpIHtcblx0XHR2YXIgX3RoaXMzID0gdGhpcztcblxuXHRcdHJldHVybiBjb25zdW1lQm9keS5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24gKGJ1ZmZlcikge1xuXHRcdFx0cmV0dXJuIGNvbnZlcnRCb2R5KGJ1ZmZlciwgX3RoaXMzLmhlYWRlcnMpO1xuXHRcdH0pO1xuXHR9XG59O1xuXG4vLyBJbiBicm93c2VycywgYWxsIHByb3BlcnRpZXMgYXJlIGVudW1lcmFibGUuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhCb2R5LnByb3RvdHlwZSwge1xuXHRib2R5OiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0Ym9keVVzZWQ6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRhcnJheUJ1ZmZlcjogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGJsb2I6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRqc29uOiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0dGV4dDogeyBlbnVtZXJhYmxlOiB0cnVlIH1cbn0pO1xuXG5Cb2R5Lm1peEluID0gZnVuY3Rpb24gKHByb3RvKSB7XG5cdGZvciAoY29uc3QgbmFtZSBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhCb2R5LnByb3RvdHlwZSkpIHtcblx0XHQvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZTogZnV0dXJlIHByb29mXG5cdFx0aWYgKCEobmFtZSBpbiBwcm90bykpIHtcblx0XHRcdGNvbnN0IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEJvZHkucHJvdG90eXBlLCBuYW1lKTtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgbmFtZSwgZGVzYyk7XG5cdFx0fVxuXHR9XG59O1xuXG4vKipcbiAqIENvbnN1bWUgYW5kIGNvbnZlcnQgYW4gZW50aXJlIEJvZHkgdG8gYSBCdWZmZXIuXG4gKlxuICogUmVmOiBodHRwczovL2ZldGNoLnNwZWMud2hhdHdnLm9yZy8jY29uY2VwdC1ib2R5LWNvbnN1bWUtYm9keVxuICpcbiAqIEByZXR1cm4gIFByb21pc2VcbiAqL1xuZnVuY3Rpb24gY29uc3VtZUJvZHkoKSB7XG5cdHZhciBfdGhpczQgPSB0aGlzO1xuXG5cdGlmICh0aGlzW0lOVEVSTkFMU10uZGlzdHVyYmVkKSB7XG5cdFx0cmV0dXJuIEJvZHkuUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcihgYm9keSB1c2VkIGFscmVhZHkgZm9yOiAke3RoaXMudXJsfWApKTtcblx0fVxuXG5cdHRoaXNbSU5URVJOQUxTXS5kaXN0dXJiZWQgPSB0cnVlO1xuXG5cdGlmICh0aGlzW0lOVEVSTkFMU10uZXJyb3IpIHtcblx0XHRyZXR1cm4gQm9keS5Qcm9taXNlLnJlamVjdCh0aGlzW0lOVEVSTkFMU10uZXJyb3IpO1xuXHR9XG5cblx0bGV0IGJvZHkgPSB0aGlzLmJvZHk7XG5cblx0Ly8gYm9keSBpcyBudWxsXG5cdGlmIChib2R5ID09PSBudWxsKSB7XG5cdFx0cmV0dXJuIEJvZHkuUHJvbWlzZS5yZXNvbHZlKEJ1ZmZlci5hbGxvYygwKSk7XG5cdH1cblxuXHQvLyBib2R5IGlzIGJsb2Jcblx0aWYgKGlzQmxvYihib2R5KSkge1xuXHRcdGJvZHkgPSBib2R5LnN0cmVhbSgpO1xuXHR9XG5cblx0Ly8gYm9keSBpcyBidWZmZXJcblx0aWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSkge1xuXHRcdHJldHVybiBCb2R5LlByb21pc2UucmVzb2x2ZShib2R5KTtcblx0fVxuXG5cdC8vIGlzdGFuYnVsIGlnbm9yZSBpZjogc2hvdWxkIG5ldmVyIGhhcHBlblxuXHRpZiAoIShib2R5IGluc3RhbmNlb2YgU3RyZWFtKSkge1xuXHRcdHJldHVybiBCb2R5LlByb21pc2UucmVzb2x2ZShCdWZmZXIuYWxsb2MoMCkpO1xuXHR9XG5cblx0Ly8gYm9keSBpcyBzdHJlYW1cblx0Ly8gZ2V0IHJlYWR5IHRvIGFjdHVhbGx5IGNvbnN1bWUgdGhlIGJvZHlcblx0bGV0IGFjY3VtID0gW107XG5cdGxldCBhY2N1bUJ5dGVzID0gMDtcblx0bGV0IGFib3J0ID0gZmFsc2U7XG5cblx0cmV0dXJuIG5ldyBCb2R5LlByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuXHRcdGxldCByZXNUaW1lb3V0O1xuXG5cdFx0Ly8gYWxsb3cgdGltZW91dCBvbiBzbG93IHJlc3BvbnNlIGJvZHlcblx0XHRpZiAoX3RoaXM0LnRpbWVvdXQpIHtcblx0XHRcdHJlc1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0YWJvcnQgPSB0cnVlO1xuXHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYFJlc3BvbnNlIHRpbWVvdXQgd2hpbGUgdHJ5aW5nIHRvIGZldGNoICR7X3RoaXM0LnVybH0gKG92ZXIgJHtfdGhpczQudGltZW91dH1tcylgLCAnYm9keS10aW1lb3V0JykpO1xuXHRcdFx0fSwgX3RoaXM0LnRpbWVvdXQpO1xuXHRcdH1cblxuXHRcdC8vIGhhbmRsZSBzdHJlYW0gZXJyb3JzXG5cdFx0Ym9keS5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG5cdFx0XHRpZiAoZXJyLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuXHRcdFx0XHQvLyBpZiB0aGUgcmVxdWVzdCB3YXMgYWJvcnRlZCwgcmVqZWN0IHdpdGggdGhpcyBFcnJvclxuXHRcdFx0XHRhYm9ydCA9IHRydWU7XG5cdFx0XHRcdHJlamVjdChlcnIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gb3RoZXIgZXJyb3JzLCBzdWNoIGFzIGluY29ycmVjdCBjb250ZW50LWVuY29kaW5nXG5cdFx0XHRcdHJlamVjdChuZXcgRmV0Y2hFcnJvcihgSW52YWxpZCByZXNwb25zZSBib2R5IHdoaWxlIHRyeWluZyB0byBmZXRjaCAke190aGlzNC51cmx9OiAke2Vyci5tZXNzYWdlfWAsICdzeXN0ZW0nLCBlcnIpKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGJvZHkub24oJ2RhdGEnLCBmdW5jdGlvbiAoY2h1bmspIHtcblx0XHRcdGlmIChhYm9ydCB8fCBjaHVuayA9PT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChfdGhpczQuc2l6ZSAmJiBhY2N1bUJ5dGVzICsgY2h1bmsubGVuZ3RoID4gX3RoaXM0LnNpemUpIHtcblx0XHRcdFx0YWJvcnQgPSB0cnVlO1xuXHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYGNvbnRlbnQgc2l6ZSBhdCAke190aGlzNC51cmx9IG92ZXIgbGltaXQ6ICR7X3RoaXM0LnNpemV9YCwgJ21heC1zaXplJykpO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGFjY3VtQnl0ZXMgKz0gY2h1bmsubGVuZ3RoO1xuXHRcdFx0YWNjdW0ucHVzaChjaHVuayk7XG5cdFx0fSk7XG5cblx0XHRib2R5Lm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAoYWJvcnQpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjbGVhclRpbWVvdXQocmVzVGltZW91dCk7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHJlc29sdmUoQnVmZmVyLmNvbmNhdChhY2N1bSwgYWNjdW1CeXRlcykpO1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdC8vIGhhbmRsZSBzdHJlYW1zIHRoYXQgaGF2ZSBhY2N1bXVsYXRlZCB0b28gbXVjaCBkYXRhIChpc3N1ZSAjNDE0KVxuXHRcdFx0XHRyZWplY3QobmV3IEZldGNoRXJyb3IoYENvdWxkIG5vdCBjcmVhdGUgQnVmZmVyIGZyb20gcmVzcG9uc2UgYm9keSBmb3IgJHtfdGhpczQudXJsfTogJHtlcnIubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyKSk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vKipcbiAqIERldGVjdCBidWZmZXIgZW5jb2RpbmcgYW5kIGNvbnZlcnQgdG8gdGFyZ2V0IGVuY29kaW5nXG4gKiByZWY6IGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvV0QtaHRtbDUtMjAxMTAxMTMvcGFyc2luZy5odG1sI2RldGVybWluaW5nLXRoZS1jaGFyYWN0ZXItZW5jb2RpbmdcbiAqXG4gKiBAcGFyYW0gICBCdWZmZXIgIGJ1ZmZlciAgICBJbmNvbWluZyBidWZmZXJcbiAqIEBwYXJhbSAgIFN0cmluZyAgZW5jb2RpbmcgIFRhcmdldCBlbmNvZGluZ1xuICogQHJldHVybiAgU3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnRCb2R5KGJ1ZmZlciwgaGVhZGVycykge1xuXHRpZiAodHlwZW9mIGNvbnZlcnQgIT09ICdmdW5jdGlvbicpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwYWNrYWdlIGBlbmNvZGluZ2AgbXVzdCBiZSBpbnN0YWxsZWQgdG8gdXNlIHRoZSB0ZXh0Q29udmVydGVkKCkgZnVuY3Rpb24nKTtcblx0fVxuXG5cdGNvbnN0IGN0ID0gaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuXHRsZXQgY2hhcnNldCA9ICd1dGYtOCc7XG5cdGxldCByZXMsIHN0cjtcblxuXHQvLyBoZWFkZXJcblx0aWYgKGN0KSB7XG5cdFx0cmVzID0gL2NoYXJzZXQ9KFteO10qKS9pLmV4ZWMoY3QpO1xuXHR9XG5cblx0Ly8gbm8gY2hhcnNldCBpbiBjb250ZW50IHR5cGUsIHBlZWsgYXQgcmVzcG9uc2UgYm9keSBmb3IgYXQgbW9zdCAxMDI0IGJ5dGVzXG5cdHN0ciA9IGJ1ZmZlci5zbGljZSgwLCAxMDI0KS50b1N0cmluZygpO1xuXG5cdC8vIGh0bWw1XG5cdGlmICghcmVzICYmIHN0cikge1xuXHRcdHJlcyA9IC88bWV0YS4rP2NoYXJzZXQ9KFsnXCJdKSguKz8pXFwxL2kuZXhlYyhzdHIpO1xuXHR9XG5cblx0Ly8gaHRtbDRcblx0aWYgKCFyZXMgJiYgc3RyKSB7XG5cdFx0cmVzID0gLzxtZXRhW1xcc10rP2h0dHAtZXF1aXY9KFsnXCJdKWNvbnRlbnQtdHlwZVxcMVtcXHNdKz9jb250ZW50PShbJ1wiXSkoLis/KVxcMi9pLmV4ZWMoc3RyKTtcblx0XHRpZiAoIXJlcykge1xuXHRcdFx0cmVzID0gLzxtZXRhW1xcc10rP2NvbnRlbnQ9KFsnXCJdKSguKz8pXFwxW1xcc10rP2h0dHAtZXF1aXY9KFsnXCJdKWNvbnRlbnQtdHlwZVxcMy9pLmV4ZWMoc3RyKTtcblx0XHRcdGlmIChyZXMpIHtcblx0XHRcdFx0cmVzLnBvcCgpOyAvLyBkcm9wIGxhc3QgcXVvdGVcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAocmVzKSB7XG5cdFx0XHRyZXMgPSAvY2hhcnNldD0oLiopL2kuZXhlYyhyZXMucG9wKCkpO1xuXHRcdH1cblx0fVxuXG5cdC8vIHhtbFxuXHRpZiAoIXJlcyAmJiBzdHIpIHtcblx0XHRyZXMgPSAvPFxcP3htbC4rP2VuY29kaW5nPShbJ1wiXSkoLis/KVxcMS9pLmV4ZWMoc3RyKTtcblx0fVxuXG5cdC8vIGZvdW5kIGNoYXJzZXRcblx0aWYgKHJlcykge1xuXHRcdGNoYXJzZXQgPSByZXMucG9wKCk7XG5cblx0XHQvLyBwcmV2ZW50IGRlY29kZSBpc3N1ZXMgd2hlbiBzaXRlcyB1c2UgaW5jb3JyZWN0IGVuY29kaW5nXG5cdFx0Ly8gcmVmOiBodHRwczovL2hzaXZvbmVuLmZpL2VuY29kaW5nLW1lbnUvXG5cdFx0aWYgKGNoYXJzZXQgPT09ICdnYjIzMTInIHx8IGNoYXJzZXQgPT09ICdnYmsnKSB7XG5cdFx0XHRjaGFyc2V0ID0gJ2diMTgwMzAnO1xuXHRcdH1cblx0fVxuXG5cdC8vIHR1cm4gcmF3IGJ1ZmZlcnMgaW50byBhIHNpbmdsZSB1dGYtOCBidWZmZXJcblx0cmV0dXJuIGNvbnZlcnQoYnVmZmVyLCAnVVRGLTgnLCBjaGFyc2V0KS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIERldGVjdCBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqIHJlZjogaHR0cHM6Ly9naXRodWIuY29tL2JpdGlubi9ub2RlLWZldGNoL2lzc3Vlcy8yOTYjaXNzdWVjb21tZW50LTMwNzU5ODE0M1xuICpcbiAqIEBwYXJhbSAgIE9iamVjdCAgb2JqICAgICBPYmplY3QgdG8gZGV0ZWN0IGJ5IHR5cGUgb3IgYnJhbmRcbiAqIEByZXR1cm4gIFN0cmluZ1xuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyhvYmopIHtcblx0Ly8gRHVjay10eXBpbmcgYXMgYSBuZWNlc3NhcnkgY29uZGl0aW9uLlxuXHRpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIG9iai5hcHBlbmQgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iai5kZWxldGUgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iai5nZXQgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iai5nZXRBbGwgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iai5oYXMgIT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iai5zZXQgIT09ICdmdW5jdGlvbicpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvLyBCcmFuZC1jaGVja2luZyBhbmQgbW9yZSBkdWNrLXR5cGluZyBhcyBvcHRpb25hbCBjb25kaXRpb24uXG5cdHJldHVybiBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gJ1VSTFNlYXJjaFBhcmFtcycgfHwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IFVSTFNlYXJjaFBhcmFtc10nIHx8IHR5cGVvZiBvYmouc29ydCA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBgb2JqYCBpcyBhIFczQyBgQmxvYmAgb2JqZWN0ICh3aGljaCBgRmlsZWAgaW5oZXJpdHMgZnJvbSlcbiAqIEBwYXJhbSAgeyp9IG9ialxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNCbG9iKG9iaikge1xuXHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9iai5hcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnR5cGUgPT09ICdzdHJpbmcnICYmIHR5cGVvZiBvYmouc3RyZWFtID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5uYW1lID09PSAnc3RyaW5nJyAmJiAvXihCbG9ifEZpbGUpJC8udGVzdChvYmouY29uc3RydWN0b3IubmFtZSkgJiYgL14oQmxvYnxGaWxlKSQvLnRlc3Qob2JqW1N5bWJvbC50b1N0cmluZ1RhZ10pO1xufVxuXG4vKipcbiAqIENsb25lIGJvZHkgZ2l2ZW4gUmVzL1JlcSBpbnN0YW5jZVxuICpcbiAqIEBwYXJhbSAgIE1peGVkICBpbnN0YW5jZSAgUmVzcG9uc2Ugb3IgUmVxdWVzdCBpbnN0YW5jZVxuICogQHJldHVybiAgTWl4ZWRcbiAqL1xuZnVuY3Rpb24gY2xvbmUoaW5zdGFuY2UpIHtcblx0bGV0IHAxLCBwMjtcblx0bGV0IGJvZHkgPSBpbnN0YW5jZS5ib2R5O1xuXG5cdC8vIGRvbid0IGFsbG93IGNsb25pbmcgYSB1c2VkIGJvZHlcblx0aWYgKGluc3RhbmNlLmJvZHlVc2VkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdjYW5ub3QgY2xvbmUgYm9keSBhZnRlciBpdCBpcyB1c2VkJyk7XG5cdH1cblxuXHQvLyBjaGVjayB0aGF0IGJvZHkgaXMgYSBzdHJlYW0gYW5kIG5vdCBmb3JtLWRhdGEgb2JqZWN0XG5cdC8vIG5vdGU6IHdlIGNhbid0IGNsb25lIHRoZSBmb3JtLWRhdGEgb2JqZWN0IHdpdGhvdXQgaGF2aW5nIGl0IGFzIGEgZGVwZW5kZW5jeVxuXHRpZiAoYm9keSBpbnN0YW5jZW9mIFN0cmVhbSAmJiB0eXBlb2YgYm9keS5nZXRCb3VuZGFyeSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdC8vIHRlZSBpbnN0YW5jZSBib2R5XG5cdFx0cDEgPSBuZXcgUGFzc1Rocm91Z2goKTtcblx0XHRwMiA9IG5ldyBQYXNzVGhyb3VnaCgpO1xuXHRcdGJvZHkucGlwZShwMSk7XG5cdFx0Ym9keS5waXBlKHAyKTtcblx0XHQvLyBzZXQgaW5zdGFuY2UgYm9keSB0byB0ZWVkIGJvZHkgYW5kIHJldHVybiB0aGUgb3RoZXIgdGVlZCBib2R5XG5cdFx0aW5zdGFuY2VbSU5URVJOQUxTXS5ib2R5ID0gcDE7XG5cdFx0Ym9keSA9IHAyO1xuXHR9XG5cblx0cmV0dXJuIGJvZHk7XG59XG5cbi8qKlxuICogUGVyZm9ybXMgdGhlIG9wZXJhdGlvbiBcImV4dHJhY3QgYSBgQ29udGVudC1UeXBlYCB2YWx1ZSBmcm9tIHxvYmplY3R8XCIgYXNcbiAqIHNwZWNpZmllZCBpbiB0aGUgc3BlY2lmaWNhdGlvbjpcbiAqIGh0dHBzOi8vZmV0Y2guc3BlYy53aGF0d2cub3JnLyNjb25jZXB0LWJvZHlpbml0LWV4dHJhY3RcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBpbnN0YW5jZS5ib2R5IGlzIHByZXNlbnQuXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgIGluc3RhbmNlICBBbnkgb3B0aW9ucy5ib2R5IGlucHV0XG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RDb250ZW50VHlwZShib2R5KSB7XG5cdGlmIChib2R5ID09PSBudWxsKSB7XG5cdFx0Ly8gYm9keSBpcyBudWxsXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG5cdFx0Ly8gYm9keSBpcyBzdHJpbmdcblx0XHRyZXR1cm4gJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCc7XG5cdH0gZWxzZSBpZiAoaXNVUkxTZWFyY2hQYXJhbXMoYm9keSkpIHtcblx0XHQvLyBib2R5IGlzIGEgVVJMU2VhcmNoUGFyYW1zXG5cdFx0cmV0dXJuICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCc7XG5cdH0gZWxzZSBpZiAoaXNCbG9iKGJvZHkpKSB7XG5cdFx0Ly8gYm9keSBpcyBibG9iXG5cdFx0cmV0dXJuIGJvZHkudHlwZSB8fCBudWxsO1xuXHR9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSkge1xuXHRcdC8vIGJvZHkgaXMgYnVmZmVyXG5cdFx0cmV0dXJuIG51bGw7XG5cdH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGJvZHkpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG5cdFx0Ly8gYm9keSBpcyBBcnJheUJ1ZmZlclxuXHRcdHJldHVybiBudWxsO1xuXHR9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhib2R5KSkge1xuXHRcdC8vIGJvZHkgaXMgQXJyYXlCdWZmZXJWaWV3XG5cdFx0cmV0dXJuIG51bGw7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGJvZHkuZ2V0Qm91bmRhcnkgPT09ICdmdW5jdGlvbicpIHtcblx0XHQvLyBkZXRlY3QgZm9ybSBkYXRhIGlucHV0IGZyb20gZm9ybS1kYXRhIG1vZHVsZVxuXHRcdHJldHVybiBgbXVsdGlwYXJ0L2Zvcm0tZGF0YTtib3VuZGFyeT0ke2JvZHkuZ2V0Qm91bmRhcnkoKX1gO1xuXHR9IGVsc2UgaWYgKGJvZHkgaW5zdGFuY2VvZiBTdHJlYW0pIHtcblx0XHQvLyBib2R5IGlzIHN0cmVhbVxuXHRcdC8vIGNhbid0IHJlYWxseSBkbyBtdWNoIGFib3V0IHRoaXNcblx0XHRyZXR1cm4gbnVsbDtcblx0fSBlbHNlIHtcblx0XHQvLyBCb2R5IGNvbnN0cnVjdG9yIGRlZmF1bHRzIG90aGVyIHRoaW5ncyB0byBzdHJpbmdcblx0XHRyZXR1cm4gJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCc7XG5cdH1cbn1cblxuLyoqXG4gKiBUaGUgRmV0Y2ggU3RhbmRhcmQgdHJlYXRzIHRoaXMgYXMgaWYgXCJ0b3RhbCBieXRlc1wiIGlzIGEgcHJvcGVydHkgb24gdGhlIGJvZHkuXG4gKiBGb3IgdXMsIHdlIGhhdmUgdG8gZXhwbGljaXRseSBnZXQgaXQgd2l0aCBhIGZ1bmN0aW9uLlxuICpcbiAqIHJlZjogaHR0cHM6Ly9mZXRjaC5zcGVjLndoYXR3Zy5vcmcvI2NvbmNlcHQtYm9keS10b3RhbC1ieXRlc1xuICpcbiAqIEBwYXJhbSAgIEJvZHkgICAgaW5zdGFuY2UgICBJbnN0YW5jZSBvZiBCb2R5XG4gKiBAcmV0dXJuICBOdW1iZXI/ICAgICAgICAgICAgTnVtYmVyIG9mIGJ5dGVzLCBvciBudWxsIGlmIG5vdCBwb3NzaWJsZVxuICovXG5mdW5jdGlvbiBnZXRUb3RhbEJ5dGVzKGluc3RhbmNlKSB7XG5cdGNvbnN0IGJvZHkgPSBpbnN0YW5jZS5ib2R5O1xuXG5cblx0aWYgKGJvZHkgPT09IG51bGwpIHtcblx0XHQvLyBib2R5IGlzIG51bGxcblx0XHRyZXR1cm4gMDtcblx0fSBlbHNlIGlmIChpc0Jsb2IoYm9keSkpIHtcblx0XHRyZXR1cm4gYm9keS5zaXplO1xuXHR9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSkge1xuXHRcdC8vIGJvZHkgaXMgYnVmZmVyXG5cdFx0cmV0dXJuIGJvZHkubGVuZ3RoO1xuXHR9IGVsc2UgaWYgKGJvZHkgJiYgdHlwZW9mIGJvZHkuZ2V0TGVuZ3RoU3luYyA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdC8vIGRldGVjdCBmb3JtIGRhdGEgaW5wdXQgZnJvbSBmb3JtLWRhdGEgbW9kdWxlXG5cdFx0aWYgKGJvZHkuX2xlbmd0aFJldHJpZXZlcnMgJiYgYm9keS5fbGVuZ3RoUmV0cmlldmVycy5sZW5ndGggPT0gMCB8fCAvLyAxLnhcblx0XHRib2R5Lmhhc0tub3duTGVuZ3RoICYmIGJvZHkuaGFzS25vd25MZW5ndGgoKSkge1xuXHRcdFx0Ly8gMi54XG5cdFx0XHRyZXR1cm4gYm9keS5nZXRMZW5ndGhTeW5jKCk7XG5cdFx0fVxuXHRcdHJldHVybiBudWxsO1xuXHR9IGVsc2Uge1xuXHRcdC8vIGJvZHkgaXMgc3RyZWFtXG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBXcml0ZSBhIEJvZHkgdG8gYSBOb2RlLmpzIFdyaXRhYmxlU3RyZWFtIChlLmcuIGh0dHAuUmVxdWVzdCkgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSAgIEJvZHkgICAgaW5zdGFuY2UgICBJbnN0YW5jZSBvZiBCb2R5XG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmZ1bmN0aW9uIHdyaXRlVG9TdHJlYW0oZGVzdCwgaW5zdGFuY2UpIHtcblx0Y29uc3QgYm9keSA9IGluc3RhbmNlLmJvZHk7XG5cblxuXHRpZiAoYm9keSA9PT0gbnVsbCkge1xuXHRcdC8vIGJvZHkgaXMgbnVsbFxuXHRcdGRlc3QuZW5kKCk7XG5cdH0gZWxzZSBpZiAoaXNCbG9iKGJvZHkpKSB7XG5cdFx0Ym9keS5zdHJlYW0oKS5waXBlKGRlc3QpO1xuXHR9IGVsc2UgaWYgKEJ1ZmZlci5pc0J1ZmZlcihib2R5KSkge1xuXHRcdC8vIGJvZHkgaXMgYnVmZmVyXG5cdFx0ZGVzdC53cml0ZShib2R5KTtcblx0XHRkZXN0LmVuZCgpO1xuXHR9IGVsc2Uge1xuXHRcdC8vIGJvZHkgaXMgc3RyZWFtXG5cdFx0Ym9keS5waXBlKGRlc3QpO1xuXHR9XG59XG5cbi8vIGV4cG9zZSBQcm9taXNlXG5Cb2R5LlByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTtcblxuLyoqXG4gKiBoZWFkZXJzLmpzXG4gKlxuICogSGVhZGVycyBjbGFzcyBvZmZlcnMgY29udmVuaWVudCBoZWxwZXJzXG4gKi9cblxuY29uc3QgaW52YWxpZFRva2VuUmVnZXggPSAvW15cXF5fYGEtekEtWlxcLTAtOSEjJCUmJyorLnx+XS87XG5jb25zdCBpbnZhbGlkSGVhZGVyQ2hhclJlZ2V4ID0gL1teXFx0XFx4MjAtXFx4N2VcXHg4MC1cXHhmZl0vO1xuXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWUobmFtZSkge1xuXHRuYW1lID0gYCR7bmFtZX1gO1xuXHRpZiAoaW52YWxpZFRva2VuUmVnZXgudGVzdChuYW1lKSB8fCBuYW1lID09PSAnJykge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYCR7bmFtZX0gaXMgbm90IGEgbGVnYWwgSFRUUCBoZWFkZXIgbmFtZWApO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVmFsdWUodmFsdWUpIHtcblx0dmFsdWUgPSBgJHt2YWx1ZX1gO1xuXHRpZiAoaW52YWxpZEhlYWRlckNoYXJSZWdleC50ZXN0KHZhbHVlKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoYCR7dmFsdWV9IGlzIG5vdCBhIGxlZ2FsIEhUVFAgaGVhZGVyIHZhbHVlYCk7XG5cdH1cbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBrZXkgaW4gdGhlIG1hcCBvYmplY3QgZ2l2ZW4gYSBoZWFkZXIgbmFtZS5cbiAqXG4gKiBSZXR1cm5zIHVuZGVmaW5lZCBpZiBub3QgZm91bmQuXG4gKlxuICogQHBhcmFtICAgU3RyaW5nICBuYW1lICBIZWFkZXIgbmFtZVxuICogQHJldHVybiAgU3RyaW5nfFVuZGVmaW5lZFxuICovXG5mdW5jdGlvbiBmaW5kKG1hcCwgbmFtZSkge1xuXHRuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRmb3IgKGNvbnN0IGtleSBpbiBtYXApIHtcblx0XHRpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IG5hbWUpIHtcblx0XHRcdHJldHVybiBrZXk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IE1BUCA9IFN5bWJvbCgnbWFwJyk7XG5jbGFzcyBIZWFkZXJzIHtcblx0LyoqXG4gICogSGVhZGVycyBjbGFzc1xuICAqXG4gICogQHBhcmFtICAgT2JqZWN0ICBoZWFkZXJzICBSZXNwb25zZSBoZWFkZXJzXG4gICogQHJldHVybiAgVm9pZFxuICAqL1xuXHRjb25zdHJ1Y3RvcigpIHtcblx0XHRsZXQgaW5pdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogdW5kZWZpbmVkO1xuXG5cdFx0dGhpc1tNQVBdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuXHRcdGlmIChpbml0IGluc3RhbmNlb2YgSGVhZGVycykge1xuXHRcdFx0Y29uc3QgcmF3SGVhZGVycyA9IGluaXQucmF3KCk7XG5cdFx0XHRjb25zdCBoZWFkZXJOYW1lcyA9IE9iamVjdC5rZXlzKHJhd0hlYWRlcnMpO1xuXG5cdFx0XHRmb3IgKGNvbnN0IGhlYWRlck5hbWUgb2YgaGVhZGVyTmFtZXMpIHtcblx0XHRcdFx0Zm9yIChjb25zdCB2YWx1ZSBvZiByYXdIZWFkZXJzW2hlYWRlck5hbWVdKSB7XG5cdFx0XHRcdFx0dGhpcy5hcHBlbmQoaGVhZGVyTmFtZSwgdmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBXZSBkb24ndCB3b3JyeSBhYm91dCBjb252ZXJ0aW5nIHByb3AgdG8gQnl0ZVN0cmluZyBoZXJlIGFzIGFwcGVuZCgpXG5cdFx0Ly8gd2lsbCBoYW5kbGUgaXQuXG5cdFx0aWYgKGluaXQgPT0gbnVsbCkgOyBlbHNlIGlmICh0eXBlb2YgaW5pdCA9PT0gJ29iamVjdCcpIHtcblx0XHRcdGNvbnN0IG1ldGhvZCA9IGluaXRbU3ltYm9sLml0ZXJhdG9yXTtcblx0XHRcdGlmIChtZXRob2QgIT0gbnVsbCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG1ldGhvZCAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0hlYWRlciBwYWlycyBtdXN0IGJlIGl0ZXJhYmxlJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBzZXF1ZW5jZTxzZXF1ZW5jZTxCeXRlU3RyaW5nPj5cblx0XHRcdFx0Ly8gTm90ZTogcGVyIHNwZWMgd2UgaGF2ZSB0byBmaXJzdCBleGhhdXN0IHRoZSBsaXN0cyB0aGVuIHByb2Nlc3MgdGhlbVxuXHRcdFx0XHRjb25zdCBwYWlycyA9IFtdO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgaW5pdCkge1xuXHRcdFx0XHRcdGlmICh0eXBlb2YgcGFpciAhPT0gJ29iamVjdCcgfHwgdHlwZW9mIHBhaXJbU3ltYm9sLml0ZXJhdG9yXSAhPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRWFjaCBoZWFkZXIgcGFpciBtdXN0IGJlIGl0ZXJhYmxlJyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBhaXJzLnB1c2goQXJyYXkuZnJvbShwYWlyKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRmb3IgKGNvbnN0IHBhaXIgb2YgcGFpcnMpIHtcblx0XHRcdFx0XHRpZiAocGFpci5sZW5ndGggIT09IDIpIHtcblx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0VhY2ggaGVhZGVyIHBhaXIgbXVzdCBiZSBhIG5hbWUvdmFsdWUgdHVwbGUnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5hcHBlbmQocGFpclswXSwgcGFpclsxXSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIHJlY29yZDxCeXRlU3RyaW5nLCBCeXRlU3RyaW5nPlxuXHRcdFx0XHRmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhpbml0KSkge1xuXHRcdFx0XHRcdGNvbnN0IHZhbHVlID0gaW5pdFtrZXldO1xuXHRcdFx0XHRcdHRoaXMuYXBwZW5kKGtleSwgdmFsdWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1Byb3ZpZGVkIGluaXRpYWxpemVyIG11c3QgYmUgYW4gb2JqZWN0Jyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG4gICogUmV0dXJuIGNvbWJpbmVkIGhlYWRlciB2YWx1ZSBnaXZlbiBuYW1lXG4gICpcbiAgKiBAcGFyYW0gICBTdHJpbmcgIG5hbWUgIEhlYWRlciBuYW1lXG4gICogQHJldHVybiAgTWl4ZWRcbiAgKi9cblx0Z2V0KG5hbWUpIHtcblx0XHRuYW1lID0gYCR7bmFtZX1gO1xuXHRcdHZhbGlkYXRlTmFtZShuYW1lKTtcblx0XHRjb25zdCBrZXkgPSBmaW5kKHRoaXNbTUFQXSwgbmFtZSk7XG5cdFx0aWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpc1tNQVBdW2tleV0uam9pbignLCAnKTtcblx0fVxuXG5cdC8qKlxuICAqIEl0ZXJhdGUgb3ZlciBhbGwgaGVhZGVyc1xuICAqXG4gICogQHBhcmFtICAgRnVuY3Rpb24gIGNhbGxiYWNrICBFeGVjdXRlZCBmb3IgZWFjaCBpdGVtIHdpdGggcGFyYW1ldGVycyAodmFsdWUsIG5hbWUsIHRoaXNBcmcpXG4gICogQHBhcmFtICAgQm9vbGVhbiAgIHRoaXNBcmcgICBgdGhpc2AgY29udGV4dCBmb3IgY2FsbGJhY2sgZnVuY3Rpb25cbiAgKiBAcmV0dXJuICBWb2lkXG4gICovXG5cdGZvckVhY2goY2FsbGJhY2spIHtcblx0XHRsZXQgdGhpc0FyZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdW5kZWZpbmVkO1xuXG5cdFx0bGV0IHBhaXJzID0gZ2V0SGVhZGVycyh0aGlzKTtcblx0XHRsZXQgaSA9IDA7XG5cdFx0d2hpbGUgKGkgPCBwYWlycy5sZW5ndGgpIHtcblx0XHRcdHZhciBfcGFpcnMkaSA9IHBhaXJzW2ldO1xuXHRcdFx0Y29uc3QgbmFtZSA9IF9wYWlycyRpWzBdLFxuXHRcdFx0ICAgICAgdmFsdWUgPSBfcGFpcnMkaVsxXTtcblxuXHRcdFx0Y2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcyk7XG5cdFx0XHRwYWlycyA9IGdldEhlYWRlcnModGhpcyk7XG5cdFx0XHRpKys7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG4gICogT3ZlcndyaXRlIGhlYWRlciB2YWx1ZXMgZ2l2ZW4gbmFtZVxuICAqXG4gICogQHBhcmFtICAgU3RyaW5nICBuYW1lICAgSGVhZGVyIG5hbWVcbiAgKiBAcGFyYW0gICBTdHJpbmcgIHZhbHVlICBIZWFkZXIgdmFsdWVcbiAgKiBAcmV0dXJuICBWb2lkXG4gICovXG5cdHNldChuYW1lLCB2YWx1ZSkge1xuXHRcdG5hbWUgPSBgJHtuYW1lfWA7XG5cdFx0dmFsdWUgPSBgJHt2YWx1ZX1gO1xuXHRcdHZhbGlkYXRlTmFtZShuYW1lKTtcblx0XHR2YWxpZGF0ZVZhbHVlKHZhbHVlKTtcblx0XHRjb25zdCBrZXkgPSBmaW5kKHRoaXNbTUFQXSwgbmFtZSk7XG5cdFx0dGhpc1tNQVBdW2tleSAhPT0gdW5kZWZpbmVkID8ga2V5IDogbmFtZV0gPSBbdmFsdWVdO1xuXHR9XG5cblx0LyoqXG4gICogQXBwZW5kIGEgdmFsdWUgb250byBleGlzdGluZyBoZWFkZXJcbiAgKlxuICAqIEBwYXJhbSAgIFN0cmluZyAgbmFtZSAgIEhlYWRlciBuYW1lXG4gICogQHBhcmFtICAgU3RyaW5nICB2YWx1ZSAgSGVhZGVyIHZhbHVlXG4gICogQHJldHVybiAgVm9pZFxuICAqL1xuXHRhcHBlbmQobmFtZSwgdmFsdWUpIHtcblx0XHRuYW1lID0gYCR7bmFtZX1gO1xuXHRcdHZhbHVlID0gYCR7dmFsdWV9YDtcblx0XHR2YWxpZGF0ZU5hbWUobmFtZSk7XG5cdFx0dmFsaWRhdGVWYWx1ZSh2YWx1ZSk7XG5cdFx0Y29uc3Qga2V5ID0gZmluZCh0aGlzW01BUF0sIG5hbWUpO1xuXHRcdGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0dGhpc1tNQVBdW2tleV0ucHVzaCh2YWx1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXNbTUFQXVtuYW1lXSA9IFt2YWx1ZV07XG5cdFx0fVxuXHR9XG5cblx0LyoqXG4gICogQ2hlY2sgZm9yIGhlYWRlciBuYW1lIGV4aXN0ZW5jZVxuICAqXG4gICogQHBhcmFtICAgU3RyaW5nICAgbmFtZSAgSGVhZGVyIG5hbWVcbiAgKiBAcmV0dXJuICBCb29sZWFuXG4gICovXG5cdGhhcyhuYW1lKSB7XG5cdFx0bmFtZSA9IGAke25hbWV9YDtcblx0XHR2YWxpZGF0ZU5hbWUobmFtZSk7XG5cdFx0cmV0dXJuIGZpbmQodGhpc1tNQVBdLCBuYW1lKSAhPT0gdW5kZWZpbmVkO1xuXHR9XG5cblx0LyoqXG4gICogRGVsZXRlIGFsbCBoZWFkZXIgdmFsdWVzIGdpdmVuIG5hbWVcbiAgKlxuICAqIEBwYXJhbSAgIFN0cmluZyAgbmFtZSAgSGVhZGVyIG5hbWVcbiAgKiBAcmV0dXJuICBWb2lkXG4gICovXG5cdGRlbGV0ZShuYW1lKSB7XG5cdFx0bmFtZSA9IGAke25hbWV9YDtcblx0XHR2YWxpZGF0ZU5hbWUobmFtZSk7XG5cdFx0Y29uc3Qga2V5ID0gZmluZCh0aGlzW01BUF0sIG5hbWUpO1xuXHRcdGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbTUFQXVtrZXldO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuICAqIFJldHVybiByYXcgaGVhZGVycyAobm9uLXNwZWMgYXBpKVxuICAqXG4gICogQHJldHVybiAgT2JqZWN0XG4gICovXG5cdHJhdygpIHtcblx0XHRyZXR1cm4gdGhpc1tNQVBdO1xuXHR9XG5cblx0LyoqXG4gICogR2V0IGFuIGl0ZXJhdG9yIG9uIGtleXMuXG4gICpcbiAgKiBAcmV0dXJuICBJdGVyYXRvclxuICAqL1xuXHRrZXlzKCkge1xuXHRcdHJldHVybiBjcmVhdGVIZWFkZXJzSXRlcmF0b3IodGhpcywgJ2tleScpO1xuXHR9XG5cblx0LyoqXG4gICogR2V0IGFuIGl0ZXJhdG9yIG9uIHZhbHVlcy5cbiAgKlxuICAqIEByZXR1cm4gIEl0ZXJhdG9yXG4gICovXG5cdHZhbHVlcygpIHtcblx0XHRyZXR1cm4gY3JlYXRlSGVhZGVyc0l0ZXJhdG9yKHRoaXMsICd2YWx1ZScpO1xuXHR9XG5cblx0LyoqXG4gICogR2V0IGFuIGl0ZXJhdG9yIG9uIGVudHJpZXMuXG4gICpcbiAgKiBUaGlzIGlzIHRoZSBkZWZhdWx0IGl0ZXJhdG9yIG9mIHRoZSBIZWFkZXJzIG9iamVjdC5cbiAgKlxuICAqIEByZXR1cm4gIEl0ZXJhdG9yXG4gICovXG5cdFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuXHRcdHJldHVybiBjcmVhdGVIZWFkZXJzSXRlcmF0b3IodGhpcywgJ2tleSt2YWx1ZScpO1xuXHR9XG59XG5IZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEhlYWRlcnMucHJvdG90eXBlLCBTeW1ib2wudG9TdHJpbmdUYWcsIHtcblx0dmFsdWU6ICdIZWFkZXJzJyxcblx0d3JpdGFibGU6IGZhbHNlLFxuXHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0Y29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSGVhZGVycy5wcm90b3R5cGUsIHtcblx0Z2V0OiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0Zm9yRWFjaDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdHNldDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGFwcGVuZDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGhhczogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGRlbGV0ZTogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGtleXM6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHR2YWx1ZXM6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRlbnRyaWVzOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5cbmZ1bmN0aW9uIGdldEhlYWRlcnMoaGVhZGVycykge1xuXHRsZXQga2luZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2tleSt2YWx1ZSc7XG5cblx0Y29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGhlYWRlcnNbTUFQXSkuc29ydCgpO1xuXHRyZXR1cm4ga2V5cy5tYXAoa2luZCA9PT0gJ2tleScgPyBmdW5jdGlvbiAoaykge1xuXHRcdHJldHVybiBrLnRvTG93ZXJDYXNlKCk7XG5cdH0gOiBraW5kID09PSAndmFsdWUnID8gZnVuY3Rpb24gKGspIHtcblx0XHRyZXR1cm4gaGVhZGVyc1tNQVBdW2tdLmpvaW4oJywgJyk7XG5cdH0gOiBmdW5jdGlvbiAoaykge1xuXHRcdHJldHVybiBbay50b0xvd2VyQ2FzZSgpLCBoZWFkZXJzW01BUF1ba10uam9pbignLCAnKV07XG5cdH0pO1xufVxuXG5jb25zdCBJTlRFUk5BTCA9IFN5bWJvbCgnaW50ZXJuYWwnKTtcblxuZnVuY3Rpb24gY3JlYXRlSGVhZGVyc0l0ZXJhdG9yKHRhcmdldCwga2luZCkge1xuXHRjb25zdCBpdGVyYXRvciA9IE9iamVjdC5jcmVhdGUoSGVhZGVyc0l0ZXJhdG9yUHJvdG90eXBlKTtcblx0aXRlcmF0b3JbSU5URVJOQUxdID0ge1xuXHRcdHRhcmdldCxcblx0XHRraW5kLFxuXHRcdGluZGV4OiAwXG5cdH07XG5cdHJldHVybiBpdGVyYXRvcjtcbn1cblxuY29uc3QgSGVhZGVyc0l0ZXJhdG9yUHJvdG90eXBlID0gT2JqZWN0LnNldFByb3RvdHlwZU9mKHtcblx0bmV4dCgpIHtcblx0XHQvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcblx0XHRpZiAoIXRoaXMgfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpICE9PSBIZWFkZXJzSXRlcmF0b3JQcm90b3R5cGUpIHtcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIG9mIGB0aGlzYCBpcyBub3QgYSBIZWFkZXJzSXRlcmF0b3InKTtcblx0XHR9XG5cblx0XHR2YXIgX0lOVEVSTkFMID0gdGhpc1tJTlRFUk5BTF07XG5cdFx0Y29uc3QgdGFyZ2V0ID0gX0lOVEVSTkFMLnRhcmdldCxcblx0XHQgICAgICBraW5kID0gX0lOVEVSTkFMLmtpbmQsXG5cdFx0ICAgICAgaW5kZXggPSBfSU5URVJOQUwuaW5kZXg7XG5cblx0XHRjb25zdCB2YWx1ZXMgPSBnZXRIZWFkZXJzKHRhcmdldCwga2luZCk7XG5cdFx0Y29uc3QgbGVuID0gdmFsdWVzLmxlbmd0aDtcblx0XHRpZiAoaW5kZXggPj0gbGVuKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR2YWx1ZTogdW5kZWZpbmVkLFxuXHRcdFx0XHRkb25lOiB0cnVlXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdHRoaXNbSU5URVJOQUxdLmluZGV4ID0gaW5kZXggKyAxO1xuXG5cdFx0cmV0dXJuIHtcblx0XHRcdHZhbHVlOiB2YWx1ZXNbaW5kZXhdLFxuXHRcdFx0ZG9uZTogZmFsc2Vcblx0XHR9O1xuXHR9XG59LCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoT2JqZWN0LmdldFByb3RvdHlwZU9mKFtdW1N5bWJvbC5pdGVyYXRvcl0oKSkpKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KEhlYWRlcnNJdGVyYXRvclByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG5cdHZhbHVlOiAnSGVhZGVyc0l0ZXJhdG9yJyxcblx0d3JpdGFibGU6IGZhbHNlLFxuXHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0Y29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuLyoqXG4gKiBFeHBvcnQgdGhlIEhlYWRlcnMgb2JqZWN0IGluIGEgZm9ybSB0aGF0IE5vZGUuanMgY2FuIGNvbnN1bWUuXG4gKlxuICogQHBhcmFtICAgSGVhZGVycyAgaGVhZGVyc1xuICogQHJldHVybiAgT2JqZWN0XG4gKi9cbmZ1bmN0aW9uIGV4cG9ydE5vZGVDb21wYXRpYmxlSGVhZGVycyhoZWFkZXJzKSB7XG5cdGNvbnN0IG9iaiA9IE9iamVjdC5hc3NpZ24oeyBfX3Byb3RvX186IG51bGwgfSwgaGVhZGVyc1tNQVBdKTtcblxuXHQvLyBodHRwLnJlcXVlc3QoKSBvbmx5IHN1cHBvcnRzIHN0cmluZyBhcyBIb3N0IGhlYWRlci4gVGhpcyBoYWNrIG1ha2VzXG5cdC8vIHNwZWNpZnlpbmcgY3VzdG9tIEhvc3QgaGVhZGVyIHBvc3NpYmxlLlxuXHRjb25zdCBob3N0SGVhZGVyS2V5ID0gZmluZChoZWFkZXJzW01BUF0sICdIb3N0Jyk7XG5cdGlmIChob3N0SGVhZGVyS2V5ICE9PSB1bmRlZmluZWQpIHtcblx0XHRvYmpbaG9zdEhlYWRlcktleV0gPSBvYmpbaG9zdEhlYWRlcktleV1bMF07XG5cdH1cblxuXHRyZXR1cm4gb2JqO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIEhlYWRlcnMgb2JqZWN0IGZyb20gYW4gb2JqZWN0IG9mIGhlYWRlcnMsIGlnbm9yaW5nIHRob3NlIHRoYXQgZG9cbiAqIG5vdCBjb25mb3JtIHRvIEhUVFAgZ3JhbW1hciBwcm9kdWN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gICBPYmplY3QgIG9iaiAgT2JqZWN0IG9mIGhlYWRlcnNcbiAqIEByZXR1cm4gIEhlYWRlcnNcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSGVhZGVyc0xlbmllbnQob2JqKSB7XG5cdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuXHRmb3IgKGNvbnN0IG5hbWUgb2YgT2JqZWN0LmtleXMob2JqKSkge1xuXHRcdGlmIChpbnZhbGlkVG9rZW5SZWdleC50ZXN0KG5hbWUpKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkob2JqW25hbWVdKSkge1xuXHRcdFx0Zm9yIChjb25zdCB2YWwgb2Ygb2JqW25hbWVdKSB7XG5cdFx0XHRcdGlmIChpbnZhbGlkSGVhZGVyQ2hhclJlZ2V4LnRlc3QodmFsKSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChoZWFkZXJzW01BUF1bbmFtZV0gPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGhlYWRlcnNbTUFQXVtuYW1lXSA9IFt2YWxdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGhlYWRlcnNbTUFQXVtuYW1lXS5wdXNoKHZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2UgaWYgKCFpbnZhbGlkSGVhZGVyQ2hhclJlZ2V4LnRlc3Qob2JqW25hbWVdKSkge1xuXHRcdFx0aGVhZGVyc1tNQVBdW25hbWVdID0gW29ialtuYW1lXV07XG5cdFx0fVxuXHR9XG5cdHJldHVybiBoZWFkZXJzO1xufVxuXG5jb25zdCBJTlRFUk5BTFMkMSA9IFN5bWJvbCgnUmVzcG9uc2UgaW50ZXJuYWxzJyk7XG5cbi8vIGZpeCBhbiBpc3N1ZSB3aGVyZSBcIlNUQVRVU19DT0RFU1wiIGFyZW4ndCBhIG5hbWVkIGV4cG9ydCBmb3Igbm9kZSA8MTBcbmNvbnN0IFNUQVRVU19DT0RFUyA9IGh0dHAuU1RBVFVTX0NPREVTO1xuXG4vKipcbiAqIFJlc3BvbnNlIGNsYXNzXG4gKlxuICogQHBhcmFtICAgU3RyZWFtICBib2R5ICBSZWFkYWJsZSBzdHJlYW1cbiAqIEBwYXJhbSAgIE9iamVjdCAgb3B0cyAgUmVzcG9uc2Ugb3B0aW9uc1xuICogQHJldHVybiAgVm9pZFxuICovXG5jbGFzcyBSZXNwb25zZSB7XG5cdGNvbnN0cnVjdG9yKCkge1xuXHRcdGxldCBib2R5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsO1xuXHRcdGxldCBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuXHRcdEJvZHkuY2FsbCh0aGlzLCBib2R5LCBvcHRzKTtcblxuXHRcdGNvbnN0IHN0YXR1cyA9IG9wdHMuc3RhdHVzIHx8IDIwMDtcblx0XHRjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0cy5oZWFkZXJzKTtcblxuXHRcdGlmIChib2R5ICE9IG51bGwgJiYgIWhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKSkge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSBleHRyYWN0Q29udGVudFR5cGUoYm9keSk7XG5cdFx0XHRpZiAoY29udGVudFR5cGUpIHtcblx0XHRcdFx0aGVhZGVycy5hcHBlbmQoJ0NvbnRlbnQtVHlwZScsIGNvbnRlbnRUeXBlKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGlzW0lOVEVSTkFMUyQxXSA9IHtcblx0XHRcdHVybDogb3B0cy51cmwsXG5cdFx0XHRzdGF0dXMsXG5cdFx0XHRzdGF0dXNUZXh0OiBvcHRzLnN0YXR1c1RleHQgfHwgU1RBVFVTX0NPREVTW3N0YXR1c10sXG5cdFx0XHRoZWFkZXJzLFxuXHRcdFx0Y291bnRlcjogb3B0cy5jb3VudGVyXG5cdFx0fTtcblx0fVxuXG5cdGdldCB1cmwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDFdLnVybCB8fCAnJztcblx0fVxuXG5cdGdldCBzdGF0dXMoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDFdLnN0YXR1cztcblx0fVxuXG5cdC8qKlxuICAqIENvbnZlbmllbmNlIHByb3BlcnR5IHJlcHJlc2VudGluZyBpZiB0aGUgcmVxdWVzdCBlbmRlZCBub3JtYWxseVxuICAqL1xuXHRnZXQgb2soKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDFdLnN0YXR1cyA+PSAyMDAgJiYgdGhpc1tJTlRFUk5BTFMkMV0uc3RhdHVzIDwgMzAwO1xuXHR9XG5cblx0Z2V0IHJlZGlyZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDFdLmNvdW50ZXIgPiAwO1xuXHR9XG5cblx0Z2V0IHN0YXR1c1RleHQoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDFdLnN0YXR1c1RleHQ7XG5cdH1cblxuXHRnZXQgaGVhZGVycygpIHtcblx0XHRyZXR1cm4gdGhpc1tJTlRFUk5BTFMkMV0uaGVhZGVycztcblx0fVxuXG5cdC8qKlxuICAqIENsb25lIHRoaXMgcmVzcG9uc2VcbiAgKlxuICAqIEByZXR1cm4gIFJlc3BvbnNlXG4gICovXG5cdGNsb25lKCkge1xuXHRcdHJldHVybiBuZXcgUmVzcG9uc2UoY2xvbmUodGhpcyksIHtcblx0XHRcdHVybDogdGhpcy51cmwsXG5cdFx0XHRzdGF0dXM6IHRoaXMuc3RhdHVzLFxuXHRcdFx0c3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHRcdFx0aGVhZGVyczogdGhpcy5oZWFkZXJzLFxuXHRcdFx0b2s6IHRoaXMub2ssXG5cdFx0XHRyZWRpcmVjdGVkOiB0aGlzLnJlZGlyZWN0ZWRcblx0XHR9KTtcblx0fVxufVxuXG5Cb2R5Lm1peEluKFJlc3BvbnNlLnByb3RvdHlwZSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlc3BvbnNlLnByb3RvdHlwZSwge1xuXHR1cmw6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRzdGF0dXM6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRvazogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdHJlZGlyZWN0ZWQ6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRzdGF0dXNUZXh0OiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0aGVhZGVyczogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGNsb25lOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXNwb25zZS5wcm90b3R5cGUsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuXHR2YWx1ZTogJ1Jlc3BvbnNlJyxcblx0d3JpdGFibGU6IGZhbHNlLFxuXHRlbnVtZXJhYmxlOiBmYWxzZSxcblx0Y29uZmlndXJhYmxlOiB0cnVlXG59KTtcblxuY29uc3QgSU5URVJOQUxTJDIgPSBTeW1ib2woJ1JlcXVlc3QgaW50ZXJuYWxzJyk7XG5jb25zdCBVUkwgPSBVcmwuVVJMIHx8IHdoYXR3Z1VybC5VUkw7XG5cbi8vIGZpeCBhbiBpc3N1ZSB3aGVyZSBcImZvcm1hdFwiLCBcInBhcnNlXCIgYXJlbid0IGEgbmFtZWQgZXhwb3J0IGZvciBub2RlIDwxMFxuY29uc3QgcGFyc2VfdXJsID0gVXJsLnBhcnNlO1xuY29uc3QgZm9ybWF0X3VybCA9IFVybC5mb3JtYXQ7XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgYG5ldyBVUkxgIHRvIGhhbmRsZSBhcmJpdHJhcnkgVVJMc1xuICpcbiAqIEBwYXJhbSAge3N0cmluZ30gdXJsU3RyXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBwYXJzZVVSTCh1cmxTdHIpIHtcblx0LypcbiBcdENoZWNrIHdoZXRoZXIgdGhlIFVSTCBpcyBhYnNvbHV0ZSBvciBub3RcbiBcdFx0U2NoZW1lOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNzZWN0aW9uLTMuMVxuIFx0QWJzb2x1dGUgVVJMOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNzZWN0aW9uLTQuM1xuICovXG5cdGlmICgvXlthLXpBLVpdW2EtekEtWlxcZCtcXC0uXSo6Ly5leGVjKHVybFN0cikpIHtcblx0XHR1cmxTdHIgPSBuZXcgVVJMKHVybFN0cikudG9TdHJpbmcoKTtcblx0fVxuXG5cdC8vIEZhbGxiYWNrIHRvIG9sZCBpbXBsZW1lbnRhdGlvbiBmb3IgYXJiaXRyYXJ5IFVSTHNcblx0cmV0dXJuIHBhcnNlX3VybCh1cmxTdHIpO1xufVxuXG5jb25zdCBzdHJlYW1EZXN0cnVjdGlvblN1cHBvcnRlZCA9ICdkZXN0cm95JyBpbiBTdHJlYW0uUmVhZGFibGUucHJvdG90eXBlO1xuXG4vKipcbiAqIENoZWNrIGlmIGEgdmFsdWUgaXMgYW4gaW5zdGFuY2Ugb2YgUmVxdWVzdC5cbiAqXG4gKiBAcGFyYW0gICBNaXhlZCAgIGlucHV0XG4gKiBAcmV0dXJuICBCb29sZWFuXG4gKi9cbmZ1bmN0aW9uIGlzUmVxdWVzdChpbnB1dCkge1xuXHRyZXR1cm4gdHlwZW9mIGlucHV0ID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgaW5wdXRbSU5URVJOQUxTJDJdID09PSAnb2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaXNBYm9ydFNpZ25hbChzaWduYWwpIHtcblx0Y29uc3QgcHJvdG8gPSBzaWduYWwgJiYgdHlwZW9mIHNpZ25hbCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKHNpZ25hbCk7XG5cdHJldHVybiAhIShwcm90byAmJiBwcm90by5jb25zdHJ1Y3Rvci5uYW1lID09PSAnQWJvcnRTaWduYWwnKTtcbn1cblxuLyoqXG4gKiBSZXF1ZXN0IGNsYXNzXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgICBpbnB1dCAgVXJsIG9yIFJlcXVlc3QgaW5zdGFuY2VcbiAqIEBwYXJhbSAgIE9iamVjdCAgaW5pdCAgIEN1c3RvbSBvcHRpb25zXG4gKiBAcmV0dXJuICBWb2lkXG4gKi9cbmNsYXNzIFJlcXVlc3Qge1xuXHRjb25zdHJ1Y3RvcihpbnB1dCkge1xuXHRcdGxldCBpbml0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuXHRcdGxldCBwYXJzZWRVUkw7XG5cblx0XHQvLyBub3JtYWxpemUgaW5wdXRcblx0XHRpZiAoIWlzUmVxdWVzdChpbnB1dCkpIHtcblx0XHRcdGlmIChpbnB1dCAmJiBpbnB1dC5ocmVmKSB7XG5cdFx0XHRcdC8vIGluIG9yZGVyIHRvIHN1cHBvcnQgTm9kZS5qcycgVXJsIG9iamVjdHM7IHRob3VnaCBXSEFUV0cncyBVUkwgb2JqZWN0c1xuXHRcdFx0XHQvLyB3aWxsIGZhbGwgaW50byB0aGlzIGJyYW5jaCBhbHNvIChzaW5jZSB0aGVpciBgdG9TdHJpbmcoKWAgd2lsbCByZXR1cm5cblx0XHRcdFx0Ly8gYGhyZWZgIHByb3BlcnR5IGFueXdheSlcblx0XHRcdFx0cGFyc2VkVVJMID0gcGFyc2VVUkwoaW5wdXQuaHJlZik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBjb2VyY2UgaW5wdXQgdG8gYSBzdHJpbmcgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcGFyc2Vcblx0XHRcdFx0cGFyc2VkVVJMID0gcGFyc2VVUkwoYCR7aW5wdXR9YCk7XG5cdFx0XHR9XG5cdFx0XHRpbnB1dCA9IHt9O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwYXJzZWRVUkwgPSBwYXJzZVVSTChpbnB1dC51cmwpO1xuXHRcdH1cblxuXHRcdGxldCBtZXRob2QgPSBpbml0Lm1ldGhvZCB8fCBpbnB1dC5tZXRob2QgfHwgJ0dFVCc7XG5cdFx0bWV0aG9kID0gbWV0aG9kLnRvVXBwZXJDYXNlKCk7XG5cblx0XHRpZiAoKGluaXQuYm9keSAhPSBudWxsIHx8IGlzUmVxdWVzdChpbnB1dCkgJiYgaW5wdXQuYm9keSAhPT0gbnVsbCkgJiYgKG1ldGhvZCA9PT0gJ0dFVCcgfHwgbWV0aG9kID09PSAnSEVBRCcpKSB7XG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdSZXF1ZXN0IHdpdGggR0VUL0hFQUQgbWV0aG9kIGNhbm5vdCBoYXZlIGJvZHknKTtcblx0XHR9XG5cblx0XHRsZXQgaW5wdXRCb2R5ID0gaW5pdC5ib2R5ICE9IG51bGwgPyBpbml0LmJvZHkgOiBpc1JlcXVlc3QoaW5wdXQpICYmIGlucHV0LmJvZHkgIT09IG51bGwgPyBjbG9uZShpbnB1dCkgOiBudWxsO1xuXG5cdFx0Qm9keS5jYWxsKHRoaXMsIGlucHV0Qm9keSwge1xuXHRcdFx0dGltZW91dDogaW5pdC50aW1lb3V0IHx8IGlucHV0LnRpbWVvdXQgfHwgMCxcblx0XHRcdHNpemU6IGluaXQuc2l6ZSB8fCBpbnB1dC5zaXplIHx8IDBcblx0XHR9KTtcblxuXHRcdGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbml0LmhlYWRlcnMgfHwgaW5wdXQuaGVhZGVycyB8fCB7fSk7XG5cblx0XHRpZiAoaW5wdXRCb2R5ICE9IG51bGwgJiYgIWhlYWRlcnMuaGFzKCdDb250ZW50LVR5cGUnKSkge1xuXHRcdFx0Y29uc3QgY29udGVudFR5cGUgPSBleHRyYWN0Q29udGVudFR5cGUoaW5wdXRCb2R5KTtcblx0XHRcdGlmIChjb250ZW50VHlwZSkge1xuXHRcdFx0XHRoZWFkZXJzLmFwcGVuZCgnQ29udGVudC1UeXBlJywgY29udGVudFR5cGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGxldCBzaWduYWwgPSBpc1JlcXVlc3QoaW5wdXQpID8gaW5wdXQuc2lnbmFsIDogbnVsbDtcblx0XHRpZiAoJ3NpZ25hbCcgaW4gaW5pdCkgc2lnbmFsID0gaW5pdC5zaWduYWw7XG5cblx0XHRpZiAoc2lnbmFsICE9IG51bGwgJiYgIWlzQWJvcnRTaWduYWwoc2lnbmFsKSkge1xuXHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgc2lnbmFsIHRvIGJlIGFuIGluc3RhbmNlb2YgQWJvcnRTaWduYWwnKTtcblx0XHR9XG5cblx0XHR0aGlzW0lOVEVSTkFMUyQyXSA9IHtcblx0XHRcdG1ldGhvZCxcblx0XHRcdHJlZGlyZWN0OiBpbml0LnJlZGlyZWN0IHx8IGlucHV0LnJlZGlyZWN0IHx8ICdmb2xsb3cnLFxuXHRcdFx0aGVhZGVycyxcblx0XHRcdHBhcnNlZFVSTCxcblx0XHRcdHNpZ25hbFxuXHRcdH07XG5cblx0XHQvLyBub2RlLWZldGNoLW9ubHkgb3B0aW9uc1xuXHRcdHRoaXMuZm9sbG93ID0gaW5pdC5mb2xsb3cgIT09IHVuZGVmaW5lZCA/IGluaXQuZm9sbG93IDogaW5wdXQuZm9sbG93ICE9PSB1bmRlZmluZWQgPyBpbnB1dC5mb2xsb3cgOiAyMDtcblx0XHR0aGlzLmNvbXByZXNzID0gaW5pdC5jb21wcmVzcyAhPT0gdW5kZWZpbmVkID8gaW5pdC5jb21wcmVzcyA6IGlucHV0LmNvbXByZXNzICE9PSB1bmRlZmluZWQgPyBpbnB1dC5jb21wcmVzcyA6IHRydWU7XG5cdFx0dGhpcy5jb3VudGVyID0gaW5pdC5jb3VudGVyIHx8IGlucHV0LmNvdW50ZXIgfHwgMDtcblx0XHR0aGlzLmFnZW50ID0gaW5pdC5hZ2VudCB8fCBpbnB1dC5hZ2VudDtcblx0fVxuXG5cdGdldCBtZXRob2QoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDJdLm1ldGhvZDtcblx0fVxuXG5cdGdldCB1cmwoKSB7XG5cdFx0cmV0dXJuIGZvcm1hdF91cmwodGhpc1tJTlRFUk5BTFMkMl0ucGFyc2VkVVJMKTtcblx0fVxuXG5cdGdldCBoZWFkZXJzKCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMUyQyXS5oZWFkZXJzO1xuXHR9XG5cblx0Z2V0IHJlZGlyZWN0KCkge1xuXHRcdHJldHVybiB0aGlzW0lOVEVSTkFMUyQyXS5yZWRpcmVjdDtcblx0fVxuXG5cdGdldCBzaWduYWwoKSB7XG5cdFx0cmV0dXJuIHRoaXNbSU5URVJOQUxTJDJdLnNpZ25hbDtcblx0fVxuXG5cdC8qKlxuICAqIENsb25lIHRoaXMgcmVxdWVzdFxuICAqXG4gICogQHJldHVybiAgUmVxdWVzdFxuICAqL1xuXHRjbG9uZSgpIHtcblx0XHRyZXR1cm4gbmV3IFJlcXVlc3QodGhpcyk7XG5cdH1cbn1cblxuQm9keS5taXhJbihSZXF1ZXN0LnByb3RvdHlwZSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXF1ZXN0LnByb3RvdHlwZSwgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG5cdHZhbHVlOiAnUmVxdWVzdCcsXG5cdHdyaXRhYmxlOiBmYWxzZSxcblx0ZW51bWVyYWJsZTogZmFsc2UsXG5cdGNvbmZpZ3VyYWJsZTogdHJ1ZVxufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFJlcXVlc3QucHJvdG90eXBlLCB7XG5cdG1ldGhvZDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdHVybDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGhlYWRlcnM6IHsgZW51bWVyYWJsZTogdHJ1ZSB9LFxuXHRyZWRpcmVjdDogeyBlbnVtZXJhYmxlOiB0cnVlIH0sXG5cdGNsb25lOiB7IGVudW1lcmFibGU6IHRydWUgfSxcblx0c2lnbmFsOiB7IGVudW1lcmFibGU6IHRydWUgfVxufSk7XG5cbi8qKlxuICogQ29udmVydCBhIFJlcXVlc3QgdG8gTm9kZS5qcyBodHRwIHJlcXVlc3Qgb3B0aW9ucy5cbiAqXG4gKiBAcGFyYW0gICBSZXF1ZXN0ICBBIFJlcXVlc3QgaW5zdGFuY2VcbiAqIEByZXR1cm4gIE9iamVjdCAgIFRoZSBvcHRpb25zIG9iamVjdCB0byBiZSBwYXNzZWQgdG8gaHR0cC5yZXF1ZXN0XG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVSZXF1ZXN0T3B0aW9ucyhyZXF1ZXN0KSB7XG5cdGNvbnN0IHBhcnNlZFVSTCA9IHJlcXVlc3RbSU5URVJOQUxTJDJdLnBhcnNlZFVSTDtcblx0Y29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHJlcXVlc3RbSU5URVJOQUxTJDJdLmhlYWRlcnMpO1xuXG5cdC8vIGZldGNoIHN0ZXAgMS4zXG5cdGlmICghaGVhZGVycy5oYXMoJ0FjY2VwdCcpKSB7XG5cdFx0aGVhZGVycy5zZXQoJ0FjY2VwdCcsICcqLyonKTtcblx0fVxuXG5cdC8vIEJhc2ljIGZldGNoXG5cdGlmICghcGFyc2VkVVJMLnByb3RvY29sIHx8ICFwYXJzZWRVUkwuaG9zdG5hbWUpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPbmx5IGFic29sdXRlIFVSTHMgYXJlIHN1cHBvcnRlZCcpO1xuXHR9XG5cblx0aWYgKCEvXmh0dHBzPzokLy50ZXN0KHBhcnNlZFVSTC5wcm90b2NvbCkpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdPbmx5IEhUVFAoUykgcHJvdG9jb2xzIGFyZSBzdXBwb3J0ZWQnKTtcblx0fVxuXG5cdGlmIChyZXF1ZXN0LnNpZ25hbCAmJiByZXF1ZXN0LmJvZHkgaW5zdGFuY2VvZiBTdHJlYW0uUmVhZGFibGUgJiYgIXN0cmVhbURlc3RydWN0aW9uU3VwcG9ydGVkKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdDYW5jZWxsYXRpb24gb2Ygc3RyZWFtZWQgcmVxdWVzdHMgd2l0aCBBYm9ydFNpZ25hbCBpcyBub3Qgc3VwcG9ydGVkIGluIG5vZGUgPCA4Jyk7XG5cdH1cblxuXHQvLyBIVFRQLW5ldHdvcmstb3ItY2FjaGUgZmV0Y2ggc3RlcHMgMi40LTIuN1xuXHRsZXQgY29udGVudExlbmd0aFZhbHVlID0gbnVsbDtcblx0aWYgKHJlcXVlc3QuYm9keSA9PSBudWxsICYmIC9eKFBPU1R8UFVUKSQvaS50ZXN0KHJlcXVlc3QubWV0aG9kKSkge1xuXHRcdGNvbnRlbnRMZW5ndGhWYWx1ZSA9ICcwJztcblx0fVxuXHRpZiAocmVxdWVzdC5ib2R5ICE9IG51bGwpIHtcblx0XHRjb25zdCB0b3RhbEJ5dGVzID0gZ2V0VG90YWxCeXRlcyhyZXF1ZXN0KTtcblx0XHRpZiAodHlwZW9mIHRvdGFsQnl0ZXMgPT09ICdudW1iZXInKSB7XG5cdFx0XHRjb250ZW50TGVuZ3RoVmFsdWUgPSBTdHJpbmcodG90YWxCeXRlcyk7XG5cdFx0fVxuXHR9XG5cdGlmIChjb250ZW50TGVuZ3RoVmFsdWUpIHtcblx0XHRoZWFkZXJzLnNldCgnQ29udGVudC1MZW5ndGgnLCBjb250ZW50TGVuZ3RoVmFsdWUpO1xuXHR9XG5cblx0Ly8gSFRUUC1uZXR3b3JrLW9yLWNhY2hlIGZldGNoIHN0ZXAgMi4xMVxuXHRpZiAoIWhlYWRlcnMuaGFzKCdVc2VyLUFnZW50JykpIHtcblx0XHRoZWFkZXJzLnNldCgnVXNlci1BZ2VudCcsICdub2RlLWZldGNoLzEuMCAoK2h0dHBzOi8vZ2l0aHViLmNvbS9iaXRpbm4vbm9kZS1mZXRjaCknKTtcblx0fVxuXG5cdC8vIEhUVFAtbmV0d29yay1vci1jYWNoZSBmZXRjaCBzdGVwIDIuMTVcblx0aWYgKHJlcXVlc3QuY29tcHJlc3MgJiYgIWhlYWRlcnMuaGFzKCdBY2NlcHQtRW5jb2RpbmcnKSkge1xuXHRcdGhlYWRlcnMuc2V0KCdBY2NlcHQtRW5jb2RpbmcnLCAnZ3ppcCxkZWZsYXRlJyk7XG5cdH1cblxuXHRsZXQgYWdlbnQgPSByZXF1ZXN0LmFnZW50O1xuXHRpZiAodHlwZW9mIGFnZW50ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0YWdlbnQgPSBhZ2VudChwYXJzZWRVUkwpO1xuXHR9XG5cblx0Ly8gSFRUUC1uZXR3b3JrIGZldGNoIHN0ZXAgNC4yXG5cdC8vIGNodW5rZWQgZW5jb2RpbmcgaXMgaGFuZGxlZCBieSBOb2RlLmpzXG5cblx0cmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHBhcnNlZFVSTCwge1xuXHRcdG1ldGhvZDogcmVxdWVzdC5tZXRob2QsXG5cdFx0aGVhZGVyczogZXhwb3J0Tm9kZUNvbXBhdGlibGVIZWFkZXJzKGhlYWRlcnMpLFxuXHRcdGFnZW50XG5cdH0pO1xufVxuXG4vKipcbiAqIGFib3J0LWVycm9yLmpzXG4gKlxuICogQWJvcnRFcnJvciBpbnRlcmZhY2UgZm9yIGNhbmNlbGxlZCByZXF1ZXN0c1xuICovXG5cbi8qKlxuICogQ3JlYXRlIEFib3J0RXJyb3IgaW5zdGFuY2VcbiAqXG4gKiBAcGFyYW0gICBTdHJpbmcgICAgICBtZXNzYWdlICAgICAgRXJyb3IgbWVzc2FnZSBmb3IgaHVtYW5cbiAqIEByZXR1cm4gIEFib3J0RXJyb3JcbiAqL1xuZnVuY3Rpb24gQWJvcnRFcnJvcihtZXNzYWdlKSB7XG4gIEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgdGhpcy50eXBlID0gJ2Fib3J0ZWQnO1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXG4gIC8vIGhpZGUgY3VzdG9tIGVycm9yIGltcGxlbWVudGF0aW9uIGRldGFpbHMgZnJvbSBlbmQtdXNlcnNcbiAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG59XG5cbkFib3J0RXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuQWJvcnRFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBBYm9ydEVycm9yO1xuQWJvcnRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdBYm9ydEVycm9yJztcblxuY29uc3QgVVJMJDEgPSBVcmwuVVJMIHx8IHdoYXR3Z1VybC5VUkw7XG5cbi8vIGZpeCBhbiBpc3N1ZSB3aGVyZSBcIlBhc3NUaHJvdWdoXCIsIFwicmVzb2x2ZVwiIGFyZW4ndCBhIG5hbWVkIGV4cG9ydCBmb3Igbm9kZSA8MTBcbmNvbnN0IFBhc3NUaHJvdWdoJDEgPSBTdHJlYW0uUGFzc1Rocm91Z2g7XG5cbmNvbnN0IGlzRG9tYWluT3JTdWJkb21haW4gPSBmdW5jdGlvbiBpc0RvbWFpbk9yU3ViZG9tYWluKGRlc3RpbmF0aW9uLCBvcmlnaW5hbCkge1xuXHRjb25zdCBvcmlnID0gbmV3IFVSTCQxKG9yaWdpbmFsKS5ob3N0bmFtZTtcblx0Y29uc3QgZGVzdCA9IG5ldyBVUkwkMShkZXN0aW5hdGlvbikuaG9zdG5hbWU7XG5cblx0cmV0dXJuIG9yaWcgPT09IGRlc3QgfHwgb3JpZ1tvcmlnLmxlbmd0aCAtIGRlc3QubGVuZ3RoIC0gMV0gPT09ICcuJyAmJiBvcmlnLmVuZHNXaXRoKGRlc3QpO1xufTtcblxuLyoqXG4gKiBpc1NhbWVQcm90b2NvbCByZXBvcnRzIHdoZXRoZXIgdGhlIHR3byBwcm92aWRlZCBVUkxzIHVzZSB0aGUgc2FtZSBwcm90b2NvbC5cbiAqXG4gKiBCb3RoIGRvbWFpbnMgbXVzdCBhbHJlYWR5IGJlIGluIGNhbm9uaWNhbCBmb3JtLlxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBvcmlnaW5hbFxuICogQHBhcmFtIHtzdHJpbmd8VVJMfSBkZXN0aW5hdGlvblxuICovXG5jb25zdCBpc1NhbWVQcm90b2NvbCA9IGZ1bmN0aW9uIGlzU2FtZVByb3RvY29sKGRlc3RpbmF0aW9uLCBvcmlnaW5hbCkge1xuXHRjb25zdCBvcmlnID0gbmV3IFVSTCQxKG9yaWdpbmFsKS5wcm90b2NvbDtcblx0Y29uc3QgZGVzdCA9IG5ldyBVUkwkMShkZXN0aW5hdGlvbikucHJvdG9jb2w7XG5cblx0cmV0dXJuIG9yaWcgPT09IGRlc3Q7XG59O1xuXG4vKipcbiAqIEZldGNoIGZ1bmN0aW9uXG4gKlxuICogQHBhcmFtICAgTWl4ZWQgICAgdXJsICAgQWJzb2x1dGUgdXJsIG9yIFJlcXVlc3QgaW5zdGFuY2VcbiAqIEBwYXJhbSAgIE9iamVjdCAgIG9wdHMgIEZldGNoIG9wdGlvbnNcbiAqIEByZXR1cm4gIFByb21pc2VcbiAqL1xuZnVuY3Rpb24gZmV0Y2godXJsLCBvcHRzKSB7XG5cblx0Ly8gYWxsb3cgY3VzdG9tIHByb21pc2Vcblx0aWYgKCFmZXRjaC5Qcm9taXNlKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCduYXRpdmUgcHJvbWlzZSBtaXNzaW5nLCBzZXQgZmV0Y2guUHJvbWlzZSB0byB5b3VyIGZhdm9yaXRlIGFsdGVybmF0aXZlJyk7XG5cdH1cblxuXHRCb2R5LlByb21pc2UgPSBmZXRjaC5Qcm9taXNlO1xuXG5cdC8vIHdyYXAgaHR0cC5yZXF1ZXN0IGludG8gZmV0Y2hcblx0cmV0dXJuIG5ldyBmZXRjaC5Qcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblx0XHQvLyBidWlsZCByZXF1ZXN0IG9iamVjdFxuXHRcdGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdCh1cmwsIG9wdHMpO1xuXHRcdGNvbnN0IG9wdGlvbnMgPSBnZXROb2RlUmVxdWVzdE9wdGlvbnMocmVxdWVzdCk7XG5cblx0XHRjb25zdCBzZW5kID0gKG9wdGlvbnMucHJvdG9jb2wgPT09ICdodHRwczonID8gaHR0cHMgOiBodHRwKS5yZXF1ZXN0O1xuXHRcdGNvbnN0IHNpZ25hbCA9IHJlcXVlc3Quc2lnbmFsO1xuXG5cdFx0bGV0IHJlc3BvbnNlID0gbnVsbDtcblxuXHRcdGNvbnN0IGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG5cdFx0XHRsZXQgZXJyb3IgPSBuZXcgQWJvcnRFcnJvcignVGhlIHVzZXIgYWJvcnRlZCBhIHJlcXVlc3QuJyk7XG5cdFx0XHRyZWplY3QoZXJyb3IpO1xuXHRcdFx0aWYgKHJlcXVlc3QuYm9keSAmJiByZXF1ZXN0LmJvZHkgaW5zdGFuY2VvZiBTdHJlYW0uUmVhZGFibGUpIHtcblx0XHRcdFx0ZGVzdHJveVN0cmVhbShyZXF1ZXN0LmJvZHksIGVycm9yKTtcblx0XHRcdH1cblx0XHRcdGlmICghcmVzcG9uc2UgfHwgIXJlc3BvbnNlLmJvZHkpIHJldHVybjtcblx0XHRcdHJlc3BvbnNlLmJvZHkuZW1pdCgnZXJyb3InLCBlcnJvcik7XG5cdFx0fTtcblxuXHRcdGlmIChzaWduYWwgJiYgc2lnbmFsLmFib3J0ZWQpIHtcblx0XHRcdGFib3J0KCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgYWJvcnRBbmRGaW5hbGl6ZSA9IGZ1bmN0aW9uIGFib3J0QW5kRmluYWxpemUoKSB7XG5cdFx0XHRhYm9ydCgpO1xuXHRcdFx0ZmluYWxpemUoKTtcblx0XHR9O1xuXG5cdFx0Ly8gc2VuZCByZXF1ZXN0XG5cdFx0Y29uc3QgcmVxID0gc2VuZChvcHRpb25zKTtcblx0XHRsZXQgcmVxVGltZW91dDtcblxuXHRcdGlmIChzaWduYWwpIHtcblx0XHRcdHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsIGFib3J0QW5kRmluYWxpemUpO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGZpbmFsaXplKCkge1xuXHRcdFx0cmVxLmFib3J0KCk7XG5cdFx0XHRpZiAoc2lnbmFsKSBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEFuZEZpbmFsaXplKTtcblx0XHRcdGNsZWFyVGltZW91dChyZXFUaW1lb3V0KTtcblx0XHR9XG5cblx0XHRpZiAocmVxdWVzdC50aW1lb3V0KSB7XG5cdFx0XHRyZXEub25jZSgnc29ja2V0JywgZnVuY3Rpb24gKHNvY2tldCkge1xuXHRcdFx0XHRyZXFUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGBuZXR3b3JrIHRpbWVvdXQgYXQ6ICR7cmVxdWVzdC51cmx9YCwgJ3JlcXVlc3QtdGltZW91dCcpKTtcblx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHR9LCByZXF1ZXN0LnRpbWVvdXQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmVxLm9uKCdlcnJvcicsIGZ1bmN0aW9uIChlcnIpIHtcblx0XHRcdHJlamVjdChuZXcgRmV0Y2hFcnJvcihgcmVxdWVzdCB0byAke3JlcXVlc3QudXJsfSBmYWlsZWQsIHJlYXNvbjogJHtlcnIubWVzc2FnZX1gLCAnc3lzdGVtJywgZXJyKSk7XG5cblx0XHRcdGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5ib2R5KSB7XG5cdFx0XHRcdGRlc3Ryb3lTdHJlYW0ocmVzcG9uc2UuYm9keSwgZXJyKTtcblx0XHRcdH1cblxuXHRcdFx0ZmluYWxpemUoKTtcblx0XHR9KTtcblxuXHRcdGZpeFJlc3BvbnNlQ2h1bmtlZFRyYW5zZmVyQmFkRW5kaW5nKHJlcSwgZnVuY3Rpb24gKGVycikge1xuXHRcdFx0aWYgKHNpZ25hbCAmJiBzaWduYWwuYWJvcnRlZCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5ib2R5KSB7XG5cdFx0XHRcdGRlc3Ryb3lTdHJlYW0ocmVzcG9uc2UuYm9keSwgZXJyKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8qIGM4IGlnbm9yZSBuZXh0IDE4ICovXG5cdFx0aWYgKHBhcnNlSW50KHByb2Nlc3MudmVyc2lvbi5zdWJzdHJpbmcoMSkpIDwgMTQpIHtcblx0XHRcdC8vIEJlZm9yZSBOb2RlLmpzIDE0LCBwaXBlbGluZSgpIGRvZXMgbm90IGZ1bGx5IHN1cHBvcnQgYXN5bmMgaXRlcmF0b3JzIGFuZCBkb2VzIG5vdCBhbHdheXNcblx0XHRcdC8vIHByb3Blcmx5IGhhbmRsZSB3aGVuIHRoZSBzb2NrZXQgY2xvc2UvZW5kIGV2ZW50cyBhcmUgb3V0IG9mIG9yZGVyLlxuXHRcdFx0cmVxLm9uKCdzb2NrZXQnLCBmdW5jdGlvbiAocykge1xuXHRcdFx0XHRzLmFkZExpc3RlbmVyKCdjbG9zZScsIGZ1bmN0aW9uIChoYWRFcnJvcikge1xuXHRcdFx0XHRcdC8vIGlmIGEgZGF0YSBsaXN0ZW5lciBpcyBzdGlsbCBwcmVzZW50IHdlIGRpZG4ndCBlbmQgY2xlYW5seVxuXHRcdFx0XHRcdGNvbnN0IGhhc0RhdGFMaXN0ZW5lciA9IHMubGlzdGVuZXJDb3VudCgnZGF0YScpID4gMDtcblxuXHRcdFx0XHRcdC8vIGlmIGVuZCBoYXBwZW5lZCBiZWZvcmUgY2xvc2UgYnV0IHRoZSBzb2NrZXQgZGlkbid0IGVtaXQgYW4gZXJyb3IsIGRvIGl0IG5vd1xuXHRcdFx0XHRcdGlmIChyZXNwb25zZSAmJiBoYXNEYXRhTGlzdGVuZXIgJiYgIWhhZEVycm9yICYmICEoc2lnbmFsICYmIHNpZ25hbC5hYm9ydGVkKSkge1xuXHRcdFx0XHRcdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKCdQcmVtYXR1cmUgY2xvc2UnKTtcblx0XHRcdFx0XHRcdGVyci5jb2RlID0gJ0VSUl9TVFJFQU1fUFJFTUFUVVJFX0NMT1NFJztcblx0XHRcdFx0XHRcdHJlc3BvbnNlLmJvZHkuZW1pdCgnZXJyb3InLCBlcnIpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXEub24oJ3Jlc3BvbnNlJywgZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KHJlcVRpbWVvdXQpO1xuXG5cdFx0XHRjb25zdCBoZWFkZXJzID0gY3JlYXRlSGVhZGVyc0xlbmllbnQocmVzLmhlYWRlcnMpO1xuXG5cdFx0XHQvLyBIVFRQIGZldGNoIHN0ZXAgNVxuXHRcdFx0aWYgKGZldGNoLmlzUmVkaXJlY3QocmVzLnN0YXR1c0NvZGUpKSB7XG5cdFx0XHRcdC8vIEhUVFAgZmV0Y2ggc3RlcCA1LjJcblx0XHRcdFx0Y29uc3QgbG9jYXRpb24gPSBoZWFkZXJzLmdldCgnTG9jYXRpb24nKTtcblxuXHRcdFx0XHQvLyBIVFRQIGZldGNoIHN0ZXAgNS4zXG5cdFx0XHRcdGxldCBsb2NhdGlvblVSTCA9IG51bGw7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0bG9jYXRpb25VUkwgPSBsb2NhdGlvbiA9PT0gbnVsbCA/IG51bGwgOiBuZXcgVVJMJDEobG9jYXRpb24sIHJlcXVlc3QudXJsKS50b1N0cmluZygpO1xuXHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHQvLyBlcnJvciBoZXJlIGNhbiBvbmx5IGJlIGludmFsaWQgVVJMIGluIExvY2F0aW9uOiBoZWFkZXJcblx0XHRcdFx0XHQvLyBkbyBub3QgdGhyb3cgd2hlbiBvcHRpb25zLnJlZGlyZWN0ID09IG1hbnVhbFxuXHRcdFx0XHRcdC8vIGxldCB0aGUgdXNlciBleHRyYWN0IHRoZSBlcnJvcm5lb3VzIHJlZGlyZWN0IFVSTFxuXHRcdFx0XHRcdGlmIChyZXF1ZXN0LnJlZGlyZWN0ICE9PSAnbWFudWFsJykge1xuXHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGB1cmkgcmVxdWVzdGVkIHJlc3BvbmRzIHdpdGggYW4gaW52YWxpZCByZWRpcmVjdCBVUkw6ICR7bG9jYXRpb259YCwgJ2ludmFsaWQtcmVkaXJlY3QnKSk7XG5cdFx0XHRcdFx0XHRmaW5hbGl6ZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhUVFAgZmV0Y2ggc3RlcCA1LjVcblx0XHRcdFx0c3dpdGNoIChyZXF1ZXN0LnJlZGlyZWN0KSB7XG5cdFx0XHRcdFx0Y2FzZSAnZXJyb3InOlxuXHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKGB1cmkgcmVxdWVzdGVkIHJlc3BvbmRzIHdpdGggYSByZWRpcmVjdCwgcmVkaXJlY3QgbW9kZSBpcyBzZXQgdG8gZXJyb3I6ICR7cmVxdWVzdC51cmx9YCwgJ25vLXJlZGlyZWN0JykpO1xuXHRcdFx0XHRcdFx0ZmluYWxpemUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRjYXNlICdtYW51YWwnOlxuXHRcdFx0XHRcdFx0Ly8gbm9kZS1mZXRjaC1zcGVjaWZpYyBzdGVwOiBtYWtlIG1hbnVhbCByZWRpcmVjdCBhIGJpdCBlYXNpZXIgdG8gdXNlIGJ5IHNldHRpbmcgdGhlIExvY2F0aW9uIGhlYWRlciB2YWx1ZSB0byB0aGUgcmVzb2x2ZWQgVVJMLlxuXHRcdFx0XHRcdFx0aWYgKGxvY2F0aW9uVVJMICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdC8vIGhhbmRsZSBjb3JydXB0ZWQgaGVhZGVyXG5cdFx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdFx0aGVhZGVycy5zZXQoJ0xvY2F0aW9uJywgbG9jYXRpb25VUkwpO1xuXHRcdFx0XHRcdFx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogbm9kZWpzIHNlcnZlciBwcmV2ZW50IGludmFsaWQgcmVzcG9uc2UgaGVhZGVycywgd2UgY2FuJ3QgdGVzdCB0aGlzIHRocm91Z2ggbm9ybWFsIHJlcXVlc3Rcblx0XHRcdFx0XHRcdFx0XHRyZWplY3QoZXJyKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZm9sbG93Jzpcblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCAyXG5cdFx0XHRcdFx0XHRpZiAobG9jYXRpb25VUkwgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEhUVFAtcmVkaXJlY3QgZmV0Y2ggc3RlcCA1XG5cdFx0XHRcdFx0XHRpZiAocmVxdWVzdC5jb3VudGVyID49IHJlcXVlc3QuZm9sbG93KSB7XG5cdFx0XHRcdFx0XHRcdHJlamVjdChuZXcgRmV0Y2hFcnJvcihgbWF4aW11bSByZWRpcmVjdCByZWFjaGVkIGF0OiAke3JlcXVlc3QudXJsfWAsICdtYXgtcmVkaXJlY3QnKSk7XG5cdFx0XHRcdFx0XHRcdGZpbmFsaXplKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSFRUUC1yZWRpcmVjdCBmZXRjaCBzdGVwIDYgKGNvdW50ZXIgaW5jcmVtZW50KVxuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIGEgbmV3IFJlcXVlc3Qgb2JqZWN0LlxuXHRcdFx0XHRcdFx0Y29uc3QgcmVxdWVzdE9wdHMgPSB7XG5cdFx0XHRcdFx0XHRcdGhlYWRlcnM6IG5ldyBIZWFkZXJzKHJlcXVlc3QuaGVhZGVycyksXG5cdFx0XHRcdFx0XHRcdGZvbGxvdzogcmVxdWVzdC5mb2xsb3csXG5cdFx0XHRcdFx0XHRcdGNvdW50ZXI6IHJlcXVlc3QuY291bnRlciArIDEsXG5cdFx0XHRcdFx0XHRcdGFnZW50OiByZXF1ZXN0LmFnZW50LFxuXHRcdFx0XHRcdFx0XHRjb21wcmVzczogcmVxdWVzdC5jb21wcmVzcyxcblx0XHRcdFx0XHRcdFx0bWV0aG9kOiByZXF1ZXN0Lm1ldGhvZCxcblx0XHRcdFx0XHRcdFx0Ym9keTogcmVxdWVzdC5ib2R5LFxuXHRcdFx0XHRcdFx0XHRzaWduYWw6IHJlcXVlc3Quc2lnbmFsLFxuXHRcdFx0XHRcdFx0XHR0aW1lb3V0OiByZXF1ZXN0LnRpbWVvdXQsXG5cdFx0XHRcdFx0XHRcdHNpemU6IHJlcXVlc3Quc2l6ZVxuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0aWYgKCFpc0RvbWFpbk9yU3ViZG9tYWluKHJlcXVlc3QudXJsLCBsb2NhdGlvblVSTCkgfHwgIWlzU2FtZVByb3RvY29sKHJlcXVlc3QudXJsLCBsb2NhdGlvblVSTCkpIHtcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCBuYW1lIG9mIFsnYXV0aG9yaXphdGlvbicsICd3d3ctYXV0aGVudGljYXRlJywgJ2Nvb2tpZScsICdjb29raWUyJ10pIHtcblx0XHRcdFx0XHRcdFx0XHRyZXF1ZXN0T3B0cy5oZWFkZXJzLmRlbGV0ZShuYW1lKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgOVxuXHRcdFx0XHRcdFx0aWYgKHJlcy5zdGF0dXNDb2RlICE9PSAzMDMgJiYgcmVxdWVzdC5ib2R5ICYmIGdldFRvdGFsQnl0ZXMocmVxdWVzdCkgPT09IG51bGwpIHtcblx0XHRcdFx0XHRcdFx0cmVqZWN0KG5ldyBGZXRjaEVycm9yKCdDYW5ub3QgZm9sbG93IHJlZGlyZWN0IHdpdGggYm9keSBiZWluZyBhIHJlYWRhYmxlIHN0cmVhbScsICd1bnN1cHBvcnRlZC1yZWRpcmVjdCcpKTtcblx0XHRcdFx0XHRcdFx0ZmluYWxpemUoKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgMTFcblx0XHRcdFx0XHRcdGlmIChyZXMuc3RhdHVzQ29kZSA9PT0gMzAzIHx8IChyZXMuc3RhdHVzQ29kZSA9PT0gMzAxIHx8IHJlcy5zdGF0dXNDb2RlID09PSAzMDIpICYmIHJlcXVlc3QubWV0aG9kID09PSAnUE9TVCcpIHtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdE9wdHMubWV0aG9kID0gJ0dFVCc7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRzLmJvZHkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RPcHRzLmhlYWRlcnMuZGVsZXRlKCdjb250ZW50LWxlbmd0aCcpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBIVFRQLXJlZGlyZWN0IGZldGNoIHN0ZXAgMTVcblx0XHRcdFx0XHRcdHJlc29sdmUoZmV0Y2gobmV3IFJlcXVlc3QobG9jYXRpb25VUkwsIHJlcXVlc3RPcHRzKSkpO1xuXHRcdFx0XHRcdFx0ZmluYWxpemUoKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcmVwYXJlIHJlc3BvbnNlXG5cdFx0XHRyZXMub25jZSgnZW5kJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRpZiAoc2lnbmFsKSBzaWduYWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydEFuZEZpbmFsaXplKTtcblx0XHRcdH0pO1xuXHRcdFx0bGV0IGJvZHkgPSByZXMucGlwZShuZXcgUGFzc1Rocm91Z2gkMSgpKTtcblxuXHRcdFx0Y29uc3QgcmVzcG9uc2Vfb3B0aW9ucyA9IHtcblx0XHRcdFx0dXJsOiByZXF1ZXN0LnVybCxcblx0XHRcdFx0c3RhdHVzOiByZXMuc3RhdHVzQ29kZSxcblx0XHRcdFx0c3RhdHVzVGV4dDogcmVzLnN0YXR1c01lc3NhZ2UsXG5cdFx0XHRcdGhlYWRlcnM6IGhlYWRlcnMsXG5cdFx0XHRcdHNpemU6IHJlcXVlc3Quc2l6ZSxcblx0XHRcdFx0dGltZW91dDogcmVxdWVzdC50aW1lb3V0LFxuXHRcdFx0XHRjb3VudGVyOiByZXF1ZXN0LmNvdW50ZXJcblx0XHRcdH07XG5cblx0XHRcdC8vIEhUVFAtbmV0d29yayBmZXRjaCBzdGVwIDEyLjEuMS4zXG5cdFx0XHRjb25zdCBjb2RpbmdzID0gaGVhZGVycy5nZXQoJ0NvbnRlbnQtRW5jb2RpbmcnKTtcblxuXHRcdFx0Ly8gSFRUUC1uZXR3b3JrIGZldGNoIHN0ZXAgMTIuMS4xLjQ6IGhhbmRsZSBjb250ZW50IGNvZGluZ3NcblxuXHRcdFx0Ly8gaW4gZm9sbG93aW5nIHNjZW5hcmlvcyB3ZSBpZ25vcmUgY29tcHJlc3Npb24gc3VwcG9ydFxuXHRcdFx0Ly8gMS4gY29tcHJlc3Npb24gc3VwcG9ydCBpcyBkaXNhYmxlZFxuXHRcdFx0Ly8gMi4gSEVBRCByZXF1ZXN0XG5cdFx0XHQvLyAzLiBubyBDb250ZW50LUVuY29kaW5nIGhlYWRlclxuXHRcdFx0Ly8gNC4gbm8gY29udGVudCByZXNwb25zZSAoMjA0KVxuXHRcdFx0Ly8gNS4gY29udGVudCBub3QgbW9kaWZpZWQgcmVzcG9uc2UgKDMwNClcblx0XHRcdGlmICghcmVxdWVzdC5jb21wcmVzcyB8fCByZXF1ZXN0Lm1ldGhvZCA9PT0gJ0hFQUQnIHx8IGNvZGluZ3MgPT09IG51bGwgfHwgcmVzLnN0YXR1c0NvZGUgPT09IDIwNCB8fCByZXMuc3RhdHVzQ29kZSA9PT0gMzA0KSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlX29wdGlvbnMpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgTm9kZSB2Nitcblx0XHRcdC8vIEJlIGxlc3Mgc3RyaWN0IHdoZW4gZGVjb2RpbmcgY29tcHJlc3NlZCByZXNwb25zZXMsIHNpbmNlIHNvbWV0aW1lc1xuXHRcdFx0Ly8gc2VydmVycyBzZW5kIHNsaWdodGx5IGludmFsaWQgcmVzcG9uc2VzIHRoYXQgYXJlIHN0aWxsIGFjY2VwdGVkXG5cdFx0XHQvLyBieSBjb21tb24gYnJvd3NlcnMuXG5cdFx0XHQvLyBBbHdheXMgdXNpbmcgWl9TWU5DX0ZMVVNIIGlzIHdoYXQgY1VSTCBkb2VzLlxuXHRcdFx0Y29uc3QgemxpYk9wdGlvbnMgPSB7XG5cdFx0XHRcdGZsdXNoOiB6bGliLlpfU1lOQ19GTFVTSCxcblx0XHRcdFx0ZmluaXNoRmx1c2g6IHpsaWIuWl9TWU5DX0ZMVVNIXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyBmb3IgZ3ppcFxuXHRcdFx0aWYgKGNvZGluZ3MgPT0gJ2d6aXAnIHx8IGNvZGluZ3MgPT0gJ3gtZ3ppcCcpIHtcblx0XHRcdFx0Ym9keSA9IGJvZHkucGlwZSh6bGliLmNyZWF0ZUd1bnppcCh6bGliT3B0aW9ucykpO1xuXHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZV9vcHRpb25zKTtcblx0XHRcdFx0cmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZm9yIGRlZmxhdGVcblx0XHRcdGlmIChjb2RpbmdzID09ICdkZWZsYXRlJyB8fCBjb2RpbmdzID09ICd4LWRlZmxhdGUnKSB7XG5cdFx0XHRcdC8vIGhhbmRsZSB0aGUgaW5mYW1vdXMgcmF3IGRlZmxhdGUgcmVzcG9uc2UgZnJvbSBvbGQgc2VydmVyc1xuXHRcdFx0XHQvLyBhIGhhY2sgZm9yIG9sZCBJSVMgYW5kIEFwYWNoZSBzZXJ2ZXJzXG5cdFx0XHRcdGNvbnN0IHJhdyA9IHJlcy5waXBlKG5ldyBQYXNzVGhyb3VnaCQxKCkpO1xuXHRcdFx0XHRyYXcub25jZSgnZGF0YScsIGZ1bmN0aW9uIChjaHVuaykge1xuXHRcdFx0XHRcdC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM3NTE5ODI4XG5cdFx0XHRcdFx0aWYgKChjaHVua1swXSAmIDB4MEYpID09PSAweDA4KSB7XG5cdFx0XHRcdFx0XHRib2R5ID0gYm9keS5waXBlKHpsaWIuY3JlYXRlSW5mbGF0ZSgpKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ym9keSA9IGJvZHkucGlwZSh6bGliLmNyZWF0ZUluZmxhdGVSYXcoKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlX29wdGlvbnMpO1xuXHRcdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmF3Lm9uKCdlbmQnLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0Ly8gc29tZSBvbGQgSUlTIHNlcnZlcnMgcmV0dXJuIHplcm8tbGVuZ3RoIE9LIGRlZmxhdGUgcmVzcG9uc2VzLCBzbyAnZGF0YScgaXMgbmV2ZXIgZW1pdHRlZC5cblx0XHRcdFx0XHRpZiAoIXJlc3BvbnNlKSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZSA9IG5ldyBSZXNwb25zZShib2R5LCByZXNwb25zZV9vcHRpb25zKTtcblx0XHRcdFx0XHRcdHJlc29sdmUocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZm9yIGJyXG5cdFx0XHRpZiAoY29kaW5ncyA9PSAnYnInICYmIHR5cGVvZiB6bGliLmNyZWF0ZUJyb3RsaURlY29tcHJlc3MgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Ym9keSA9IGJvZHkucGlwZSh6bGliLmNyZWF0ZUJyb3RsaURlY29tcHJlc3MoKSk7XG5cdFx0XHRcdHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKGJvZHksIHJlc3BvbnNlX29wdGlvbnMpO1xuXHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBvdGhlcndpc2UsIHVzZSByZXNwb25zZSBhcy1pc1xuXHRcdFx0cmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoYm9keSwgcmVzcG9uc2Vfb3B0aW9ucyk7XG5cdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KTtcblxuXHRcdHdyaXRlVG9TdHJlYW0ocmVxLCByZXF1ZXN0KTtcblx0fSk7XG59XG5mdW5jdGlvbiBmaXhSZXNwb25zZUNodW5rZWRUcmFuc2ZlckJhZEVuZGluZyhyZXF1ZXN0LCBlcnJvckNhbGxiYWNrKSB7XG5cdGxldCBzb2NrZXQ7XG5cblx0cmVxdWVzdC5vbignc29ja2V0JywgZnVuY3Rpb24gKHMpIHtcblx0XHRzb2NrZXQgPSBzO1xuXHR9KTtcblxuXHRyZXF1ZXN0Lm9uKCdyZXNwb25zZScsIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXHRcdGNvbnN0IGhlYWRlcnMgPSByZXNwb25zZS5oZWFkZXJzO1xuXG5cdFx0aWYgKGhlYWRlcnNbJ3RyYW5zZmVyLWVuY29kaW5nJ10gPT09ICdjaHVua2VkJyAmJiAhaGVhZGVyc1snY29udGVudC1sZW5ndGgnXSkge1xuXHRcdFx0cmVzcG9uc2Uub25jZSgnY2xvc2UnLCBmdW5jdGlvbiAoaGFkRXJyb3IpIHtcblx0XHRcdFx0Ly8gdGVzdHMgZm9yIHNvY2tldCBwcmVzZW5jZSwgYXMgaW4gc29tZSBzaXR1YXRpb25zIHRoZVxuXHRcdFx0XHQvLyB0aGUgJ3NvY2tldCcgZXZlbnQgaXMgbm90IHRyaWdnZXJlZCBmb3IgdGhlIHJlcXVlc3Rcblx0XHRcdFx0Ly8gKGhhcHBlbnMgaW4gZGVubyksIGF2b2lkcyBgVHlwZUVycm9yYFxuXHRcdFx0XHQvLyBpZiBhIGRhdGEgbGlzdGVuZXIgaXMgc3RpbGwgcHJlc2VudCB3ZSBkaWRuJ3QgZW5kIGNsZWFubHlcblx0XHRcdFx0Y29uc3QgaGFzRGF0YUxpc3RlbmVyID0gc29ja2V0ICYmIHNvY2tldC5saXN0ZW5lckNvdW50KCdkYXRhJykgPiAwO1xuXG5cdFx0XHRcdGlmIChoYXNEYXRhTGlzdGVuZXIgJiYgIWhhZEVycm9yKSB7XG5cdFx0XHRcdFx0Y29uc3QgZXJyID0gbmV3IEVycm9yKCdQcmVtYXR1cmUgY2xvc2UnKTtcblx0XHRcdFx0XHRlcnIuY29kZSA9ICdFUlJfU1RSRUFNX1BSRU1BVFVSRV9DTE9TRSc7XG5cdFx0XHRcdFx0ZXJyb3JDYWxsYmFjayhlcnIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBkZXN0cm95U3RyZWFtKHN0cmVhbSwgZXJyKSB7XG5cdGlmIChzdHJlYW0uZGVzdHJveSkge1xuXHRcdHN0cmVhbS5kZXN0cm95KGVycik7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gbm9kZSA8IDhcblx0XHRzdHJlYW0uZW1pdCgnZXJyb3InLCBlcnIpO1xuXHRcdHN0cmVhbS5lbmQoKTtcblx0fVxufVxuXG4vKipcbiAqIFJlZGlyZWN0IGNvZGUgbWF0Y2hpbmdcbiAqXG4gKiBAcGFyYW0gICBOdW1iZXIgICBjb2RlICBTdGF0dXMgY29kZVxuICogQHJldHVybiAgQm9vbGVhblxuICovXG5mZXRjaC5pc1JlZGlyZWN0ID0gZnVuY3Rpb24gKGNvZGUpIHtcblx0cmV0dXJuIGNvZGUgPT09IDMwMSB8fCBjb2RlID09PSAzMDIgfHwgY29kZSA9PT0gMzAzIHx8IGNvZGUgPT09IDMwNyB8fCBjb2RlID09PSAzMDg7XG59O1xuXG4vLyBleHBvc2UgUHJvbWlzZVxuZmV0Y2guUHJvbWlzZSA9IGdsb2JhbC5Qcm9taXNlO1xuXG5leHBvcnQgZGVmYXVsdCBmZXRjaDtcbmV4cG9ydCB7IEhlYWRlcnMsIFJlcXVlc3QsIFJlc3BvbnNlLCBGZXRjaEVycm9yLCBBYm9ydEVycm9yIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@segment/analytics-node/node_modules/node-fetch/lib/index.mjs\n");

/***/ })

};
;